var QP=Object.defineProperty;var zf=e=>{throw TypeError(e)};var YP=(e,t,r)=>t in e?QP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var jt=(e,t,r)=>YP(e,typeof t!="symbol"?t+"":t,r),xf=(e,t,r)=>t.has(e)||zf("Cannot "+r);var hp=(e,t,r)=>(xf(e,t,"read from private field"),r?r.call(e):t.get(e)),Nf=(e,t,r)=>t.has(e)?zf("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),qf=(e,t,r,s)=>(xf(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();const XP=`html,
body,
body > div {
  padding: 0;
  margin: 0;
  height: 100%;
}

.body {
  overflow: auto;
  text-align: center;
  height: calc(100% - 64px);
}

.footer {
  position: absolute;
  bottom: 0;
  height: 48px;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.front-notice {
  display: flex;
  align-items: center;
  justify-content: center;
  font-style: italic;
  color: #7e7f7a;
}

.bigger {
  font-size: 32px;
}

.sentence div {
  margin: 16px;
}

.definition {
  text-align: start;
  padding: 16px 48px 0 64px;
}

.definition ul {
  list-style: square;
  margin: 8px 0 0 0;
}

.definition ul:last-child {
  margin-bottom: 8px;
}

.definition li {
  margin-bottom: 4px;
}

.definition .etymology {
  font-size: 18px;
  margin-top: 8px;
}

.definition {
  font-size: 16px;
}
`,e1=`<div class="body">
  <div class="sentence">
    <div class="bigger">{{Sentence}}</div>
    <div class="bigger">{{Sentence Translation}}</div>
  </div>
  <hr />
  <div class="bigger">{{Word}}</div>
  <div class="definition">{{Word Definition}}</div>
</div>

<div class="footer">{{Sentence Audio}}</div>
`,t1=`<div class="body front-notice">Audio Only</div>

<div class="footer">{{Sentence Audio}}</div>
`;function Ln(e,t,r){return r.a=e,r.f=t,r}function D(e){return Ln(2,e,function(t){return function(r){return e(t,r)}})}function Se(e){return Ln(3,e,function(t){return function(r){return function(s){return e(t,r,s)}}})}function ht(e){return Ln(4,e,function(t){return function(r){return function(s){return function(o){return e(t,r,s,o)}}}})}function vr(e){return Ln(5,e,function(t){return function(r){return function(s){return function(o){return function(a){return e(t,r,s,o,a)}}}}})}function Bn(e){return Ln(6,e,function(t){return function(r){return function(s){return function(o){return function(a){return function(c){return e(t,r,s,o,a,c)}}}}}})}function Qd(e){return Ln(7,e,function(t){return function(r){return function(s){return function(o){return function(a){return function(c){return function(i){return e(t,r,s,o,a,c,i)}}}}}}})}function sb(e){return Ln(8,e,function(t){return function(r){return function(s){return function(o){return function(a){return function(c){return function(i){return function(u){return e(t,r,s,o,a,c,i,u)}}}}}}}})}function ab(e){return Ln(9,e,function(t){return function(r){return function(s){return function(o){return function(a){return function(c){return function(i){return function(u){return function(l){return e(t,r,s,o,a,c,i,u,l)}}}}}}}}})}function p(e,t,r){return e.a===2?e.f(t,r):e(t)(r)}function U(e,t,r,s){return e.a===3?e.f(t,r,s):e(t)(r)(s)}function rt(e,t,r,s,o){return e.a===4?e.f(t,r,s,o):e(t)(r)(s)(o)}function Re(e,t,r,s,o,a){return e.a===5?e.f(t,r,s,o,a):e(t)(r)(s)(o)(a)}function Oi(e,t,r,s,o,a,c){return e.a===6?e.f(t,r,s,o,a,c):e(t)(r)(s)(o)(a)(c)}function cb(e,t,r,s,o,a,c,i){return e.a===7?e.f(t,r,s,o,a,c,i):e(t)(r)(s)(o)(a)(c)(i)}function r1(e,t,r,s,o,a,c,i,u){return e.a===8?e.f(t,r,s,o,a,c,i,u):e(t)(r)(s)(o)(a)(c)(i)(u)}var n1=[];function i1(e){return e.length}var o1=Se(function(e,t,r){for(var s=new Array(e),o=0;o<e;o++)s[o]=r(t+o);return s}),s1=D(function(e,t){for(var r=new Array(e),s=0;s<e&&t.b;s++)r[s]=t.a,t=t.b;return r.length=s,n(r,t)}),a1=D(function(e,t){return t[e]});Se(function(e,t,r){for(var s=r.length,o=new Array(s),a=0;a<s;a++)o[a]=r[a];return o[e]=t,o});D(function(e,t){for(var r=t.length,s=new Array(r+1),o=0;o<r;o++)s[o]=t[o];return s[r]=e,s});Se(function(e,t,r){for(var s=r.length,o=0;o<s;o++)t=p(e,r[o],t);return t});var c1=Se(function(e,t,r){for(var s=r.length-1;s>=0;s--)t=p(e,r[s],t);return t});D(function(e,t){for(var r=t.length,s=new Array(r),o=0;o<r;o++)s[o]=e(t[o]);return s});Se(function(e,t,r){for(var s=r.length,o=new Array(s),a=0;a<s;a++)o[a]=p(e,t+a,r[a]);return o});Se(function(e,t,r){return r.slice(e,t)});Se(function(e,t,r){var s=t.length,o=e-s;o>r.length&&(o=r.length);for(var a=s+o,c=new Array(a),i=0;i<s;i++)c[i]=t[i];for(var i=0;i<o;i++)c[i+s]=r[i];return c});D(function(e,t){return t});D(function(e,t){return console.log(e+": "+u1()),t});function u1(e){return"<internals>"}function uu(e){throw new Error("https://github.com/elm/core/blob/1.0.0/hints/"+e+".md")}function Be(e,t){for(var r,s=[],o=ld(e,t,0,s);o&&(r=s.pop());o=ld(r.a,r.b,0,s));return o}function ld(e,t,r,s){if(e===t)return!0;if(typeof e!="object"||e===null||t===null)return typeof e=="function"&&uu(5),!1;if(r>100)return s.push(n(e,t)),!0;e.$<0&&(e=sl(e),t=sl(t));for(var o in e)if(!ld(e[o],t[o],r+1,s))return!1;return!0}var l1=D(Be),p1=D(function(e,t){return!Be(e,t)});function dt(e,t,r){if(typeof e!="object")return e===t?0:e<t?-1:1;if(typeof e.$>"u")return(r=dt(e.a,t.a))||(r=dt(e.b,t.b))?r:dt(e.c,t.c);for(;e.b&&t.b&&!(r=dt(e.a,t.a));e=e.b,t=t.b);return r||(e.b?1:t.b?-1:0)}D(function(e,t){return dt(e,t)<0});D(function(e,t){return dt(e,t)<1});D(function(e,t){return dt(e,t)>0});D(function(e,t){return dt(e,t)>=0});var h1=D(function(e,t){var r=dt(e,t);return r<0?Mb:r?ME:kb}),mo=0;function n(e,t){return{a:e,b:t}}function se(e,t,r){return{a:e,b:t,c:r}}function G(e,t){var r={};for(var s in e)r[s]=e[s];for(var s in t)r[s]=t[s];return r}D(xe);function xe(e,t){if(typeof e=="string")return e+t;if(!e.b)return t;var r=Kr(e.a,t);e=e.b;for(var s=r;e.b;e=e.b)s=s.b=Kr(e.a,t);return r}var q={$:0};function Kr(e,t){return{$:1,a:e,b:t}}var d1=D(Kr);function $(e){for(var t=q,r=e.length;r--;)t=Kr(e[r],t);return t}function yl(e){for(var t=[];e.b;e=e.b)t.push(e.a);return t}var v1=Se(function(e,t,r){for(var s=[];t.b&&r.b;t=t.b,r=r.b)s.push(p(e,t.a,r.a));return $(s)});ht(function(e,t,r,s){for(var o=[];t.b&&r.b&&s.b;t=t.b,r=r.b,s=s.b)o.push(U(e,t.a,r.a,s.a));return $(o)});var f1=vr(function(e,t,r,s,o){for(var a=[];t.b&&r.b&&s.b&&o.b;t=t.b,r=r.b,s=s.b,o=o.b)a.push(rt(e,t.a,r.a,s.a,o.a));return $(a)});Bn(function(e,t,r,s,o,a){for(var c=[];t.b&&r.b&&s.b&&o.b&&a.b;t=t.b,r=r.b,s=s.b,o=o.b,a=a.b)c.push(Re(e,t.a,r.a,s.a,o.a,a.a));return $(c)});D(function(e,t){return $(yl(t).sort(function(r,s){return dt(e(r),e(s))}))});D(function(e,t){return $(yl(t).sort(function(r,s){var o=p(e,r,s);return o===kb?0:o===Mb?-1:1}))});D(function(e,t){return e+t});D(function(e,t){return e-t});D(function(e,t){return e*t});D(function(e,t){return e/t});D(function(e,t){return e/t|0});var g1=D(Math.pow);D(function(e,t){return t%e});var m1=D(function(e,t){var r=t%e;return e===0?uu(11):r>0&&e<0||r<0&&e>0?r+e:r});D(Math.atan2);var S1=Math.ceil,$1=Math.floor,y1=Math.round,Lf=Math.log;function C1(e){return!e}D(function(e,t){return e&&t});D(function(e,t){return e||t});D(function(e,t){return e!==t});var b1=D(function(e,t){return e+t});function R1(e){var t=e.charCodeAt(0);return isNaN(t)?fe:ne(55296<=t&&t<=56319?n(e[0]+e[1],e.slice(2)):n(e[0],e.slice(1)))}D(function(e,t){return e+t});function _1(e){return e.length}D(function(e,t){for(var r=t.length,s=new Array(r),o=0;o<r;){var a=t.charCodeAt(o);if(55296<=a&&a<=56319){s[o]=e(t[o]+t[o+1]),o+=2;continue}s[o]=e(t[o]),o++}return s.join("")});D(function(e,t){for(var r=[],s=t.length,o=0;o<s;){var a=t[o],c=t.charCodeAt(o);o++,55296<=c&&c<=56319&&(a+=t[o],o++),e(a)&&r.push(a)}return r.join("")});Se(function(e,t,r){for(var s=r.length,o=0;o<s;){var a=r[o],c=r.charCodeAt(o);o++,55296<=c&&c<=56319&&(a+=r[o],o++),t=p(e,a,t)}return t});var P1=Se(function(e,t,r){for(var s=r.length;s--;){var o=r[s],a=r.charCodeAt(s);56320<=a&&a<=57343&&(s--,o=r[s]+o),t=p(e,o,t)}return t}),w1=D(function(e,t){return t.split(e)}),E1=D(function(e,t){return t.join(e)}),A1=Se(function(e,t,r){return r.slice(e,t)});function T1(e){return e.trim()}function I1(e){return e.toLowerCase()}D(function(e,t){for(var r=t.length;r--;){var s=t[r],o=t.charCodeAt(r);if(56320<=o&&o<=57343&&(r--,s=t[r]+s),e(s))return!0}return!1});var D1=D(function(e,t){for(var r=t.length;r--;){var s=t[r],o=t.charCodeAt(r);if(56320<=o&&o<=57343&&(r--,s=t[r]+s),!e(s))return!1}return!0}),k1=D(function(e,t){return t.indexOf(e)>-1}),M1=D(function(e,t){return t.indexOf(e)===0}),O1=D(function(e,t){return t.length>=e.length&&t.lastIndexOf(e)===t.length-e.length}),j1=D(function(e,t){var r=e.length;if(r<1)return q;for(var s=0,o=[];(s=t.indexOf(e,s))>-1;)o.push(s),s=s+r;return $(o)});function z1(e){return e+""}function x1(e){for(var t=0,r=e.charCodeAt(0),s=r==43||r==45?1:0,o=s;o<e.length;++o){var a=e.charCodeAt(o);if(a<48||57<a)return fe;t=10*t+a-48}return o==s?fe:ne(r==45?-t:t)}function N1(e){if(e.length===0||/[\sxbo]/.test(e))return fe;var t=+e;return t===t?ne(t):fe}function q1(e){return yl(e).join("")}function L1(e){var t=e.charCodeAt(0);return 55296<=t&&t<=56319?(t-55296)*1024+e.charCodeAt(1)-56320+65536:t}function B1(e){return e<0||1114111<e?"ï¿½":e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(Math.floor(e/1024)+55296,e%1024+56320))}function F1(e){return{$:0,a:e}}function lu(e){return{$:2,b:e}}var U1=lu(function(e){return typeof e!="number"?Sr("an INT",e):-2147483647<e&&e<2147483647&&(e|0)===e||isFinite(e)&&!(e%1)?ct(e):Sr("an INT",e)}),H1=lu(function(e){return typeof e=="boolean"?ct(e):Sr("a BOOL",e)}),W1=lu(function(e){return typeof e=="number"?ct(e):Sr("a FLOAT",e)}),V1=lu(function(e){return ct(e)}),G1=lu(function(e){return typeof e=="string"?ct(e):e instanceof String?ct(e+""):Sr("a STRING",e)});function J1(e){return{$:3,b:e}}function K1(e){return{$:5,c:e}}var Z1=D(function(e,t){return{$:6,d:e,b:t}});D(function(e,t){return{$:7,e,b:t}});function Fn(e,t){return{$:9,f:e,g:t}}var Q1=D(function(e,t){return{$:10,b:t,h:e}});function Y1(e){return{$:11,g:e}}var X1=D(function(e,t){return Fn(e,[t])}),ew=Se(function(e,t,r){return Fn(e,[t,r])}),tw=ht(function(e,t,r,s){return Fn(e,[t,r,s])}),rw=vr(function(e,t,r,s,o){return Fn(e,[t,r,s,o])});Bn(function(e,t,r,s,o,a){return Fn(e,[t,r,s,o,a])});Qd(function(e,t,r,s,o,a,c){return Fn(e,[t,r,s,o,a,c])});sb(function(e,t,r,s,o,a,c,i){return Fn(e,[t,r,s,o,a,c,i])});ab(function(e,t,r,s,o,a,c,i,u){return Fn(e,[t,r,s,o,a,c,i,u])});var nw=D(function(e,t){try{var r=JSON.parse(t);return mr(e,r)}catch(s){return et(p(bl,"This is not valid JSON! "+s.message,t))}}),iw=D(function(e,t){return mr(e,t)});function mr(e,t){switch(e.$){case 2:return e.b(t);case 5:return t===null?ct(e.c):Sr("null",t);case 3:return Ou(t)?Bf(e.b,t,$):Sr("a LIST",t);case 4:return Ou(t)?Bf(e.b,t,ow):Sr("an ARRAY",t);case 6:var r=e.d;if(typeof t!="object"||t===null||!(r in t))return Sr("an OBJECT with a field named `"+r+"`",t);var l=mr(e.b,t[r]);return Gr(l)?l:et(p(Jf,r,l.a));case 7:var s=e.e;if(!Ou(t))return Sr("an ARRAY",t);if(s>=t.length)return Sr("a LONGER array. Need index "+s+" but only see "+t.length+" entries",t);var l=mr(e.b,t[s]);return Gr(l)?l:et(p(Ob,s,l.a));case 8:if(typeof t!="object"||t===null||Ou(t))return Sr("an OBJECT",t);var o=q;for(var a in t)if(t.hasOwnProperty(a)){var l=mr(e.b,t[a]);if(!Gr(l))return et(p(Jf,a,l.a));o=Kr(n(a,l.a),o)}return ct(Or(o));case 9:for(var c=e.f,i=e.g,u=0;u<i.length;u++){var l=mr(i[u],t);if(!Gr(l))return l;c=c(l.a)}return ct(c);case 10:var l=mr(e.b,t);return Gr(l)?mr(e.h(l.a),t):l;case 11:for(var h=q,v=e.g;v.b;v=v.b){var l=mr(v.a,t);if(Gr(l))return l;h=Kr(l.a,h)}return et(OE(Or(h)));case 1:return et(p(bl,e.a,t));case 0:return ct(e.a)}}function Bf(e,t,r){for(var s=t.length,o=new Array(s),a=0;a<s;a++){var c=mr(e,t[a]);if(!Gr(c))return et(p(Ob,a,c.a));o[a]=c.a}return ct(r(o))}function Ou(e){return Array.isArray(e)||typeof FileList<"u"&&e instanceof FileList}function ow(e){return p(ZE,e.length,function(t){return e[t]})}function Sr(e,t){return et(p(bl,"Expecting "+e,t))}function Xi(e,t){if(e===t)return!0;if(e.$!==t.$)return!1;switch(e.$){case 0:case 1:return e.a===t.a;case 2:return e.b===t.b;case 5:return e.c===t.c;case 3:case 4:case 8:return Xi(e.b,t.b);case 6:return e.d===t.d&&Xi(e.b,t.b);case 7:return e.e===t.e&&Xi(e.b,t.b);case 9:return e.f===t.f&&Ff(e.g,t.g);case 10:return e.h===t.h&&Xi(e.b,t.b);case 11:return Ff(e.g,t.g)}}function Ff(e,t){var r=e.length;if(r!==t.length)return!1;for(var s=0;s<r;s++)if(!Xi(e[s],t[s]))return!1;return!0}var sw=D(function(e,t){return JSON.stringify(t,null,e)+""});function Cl(e){return e}function aw(){return[]}function cw(){return{}}var uw=Se(function(e,t,r){return r[e]=t,r});function lw(e){return D(function(t,r){return r.push(e(t)),r})}var pw=null;function mn(e){return{$:0,a:e}}function ub(e){return{$:1,a:e}}function rr(e){return{$:2,b:e,c:null}}var pd=D(function(e,t){return{$:3,b:e,d:t}}),hw=D(function(e,t){return{$:4,b:e,d:t}});function dw(e){return{$:5,b:e}}var vw=0;function oo(e){var t={$:0,e:vw++,f:e,g:null,h:[]};return Xd(t),t}function Yd(e){return rr(function(t){t(mn(oo(e)))})}function lb(e,t){e.h.push(t),Xd(e)}var fw=D(function(e,t){return rr(function(r){lb(e,t),r(mn(mo))})});function gw(e){return rr(function(t){var r=e.f;r.$===2&&r.c&&r.c(),e.f=null,t(mn(mo))})}var dp=!1,Uf=[];function Xd(e){if(Uf.push(e),!dp){for(dp=!0;e=Uf.shift();)mw(e);dp=!1}}function mw(e){for(;e.f;){var t=e.f.$;if(t===0||t===1){for(;e.g&&e.g.$!==t;)e.g=e.g.i;if(!e.g)return;e.f=e.g.b(e.f.a),e.g=e.g.i}else if(t===2){e.f.c=e.f.b(function(r){e.f=r,Xd(e)});return}else if(t===5){if(e.h.length===0)return;e.f=e.f.b(e.h.shift())}else e.g={$:t===3?0:1,b:e.f.b,i:e.g},e.f=e.f.d}}ht(function(e,t,r,s){return ev(t,s,e.c7,e.dD,e.dB,function(){return function(){}})});function ev(e,t,r,s,o,a){var c=p(iw,e,t?t.flags:void 0);Gr(c)||uu(2);var i={},u=r(c.a),l=u.a,h=a(f,l),v=Sw(i,f);function f(d,y){var m=p(s,d,l);h(l=m.a,y),Wf(i,m.b,o(l))}return Wf(i,u.b,o(l)),v?{ports:v}:{}}var so={};function Sw(e,t){var r;for(var s in so){var o=so[s];o.a&&(r=r||{},r[s]=o.a(s,t)),e[s]=$w(o,t)}return r}function pb(e,t,r,s,o){return{b:e,c:t,d:r,e:s,f:o}}function $w(e,t){var r={g:t,h:void 0},s=e.c,o=e.d,a=e.e,c=e.f;function i(u){return p(pd,i,dw(function(l){var h=l.a;return l.$===0?U(o,r,h,u):a&&c?rt(s,r,h.i,h.j,u):U(s,r,a?h.i:h.j,u)}))}return r.h=oo(p(pd,i,e.b))}var yw=D(function(e,t){return rr(function(r){e.g(t),r(mn(mo))})}),Cw=D(function(e,t){return p(fw,e.h,{$:0,a:t})});function hb(e){return function(t){return{$:1,k:e,l:t}}}function db(e){return{$:2,m:e}}var vb=D(function(e,t){return{$:3,n:e,o:t}}),Hf=[],vp=!1;function Wf(e,t,r){if(Hf.push({p:e,q:t,r}),!vp){vp=!0;for(var s;s=Hf.shift();)bw(s.p,s.q,s.r);vp=!1}}function bw(e,t,r){var s={};tl(!0,t,s,null),tl(!1,r,s,null);for(var o in e)lb(e[o],{$:"fx",a:s[o]||{i:q,j:q}})}function tl(e,t,r,s){switch(t.$){case 1:var o=t.k,a=Rw(e,o,s,t.l);r[o]=_w(e,a,r[o]);return;case 2:for(var c=t.m;c.b;c=c.b)tl(e,c.a,r,s);return;case 3:tl(e,t.o,r,{s:t.n,t:s});return}}function Rw(e,t,r,s){function o(c){for(var i=r;i;i=i.t)c=i.s(c);return c}var a=e?so[t].e:so[t].f;return p(a,o,s)}function _w(e,t,r){return r=r||{i:q,j:q},e?r.i=Kr(t,r.i):r.j=Kr(t,r.j),r}D(function(e,t){return t});D(function(e,t){return function(r){return e(t(r))}});var rl,hn=typeof document<"u"?document:{};function tv(e,t){e.appendChild(t)}ht(function(e,t,r,s){var o=s.node;return o.parentNode.replaceChild(kn(e,function(){}),o),{}});function hd(e){return{$:0,a:e}}var fb=D(function(e,t){return D(function(r,s){for(var o=[],a=0;s.b;s=s.b){var c=s.a;a+=c.b||0,o.push(c)}return a+=o.length,{$:1,c:t,d:yb(r),e:o,f:e,b:a}})}),_t=fb(void 0),Pw=D(function(e,t){return D(function(r,s){for(var o=[],a=0;s.b;s=s.b){var c=s.a;a+=c.b.b||0,o.push(c)}return a+=o.length,{$:2,c:t,d:yb(r),e:o,f:e,b:a}})});Pw(void 0);var ww=D(function(e,t){return{$:4,j:e,k:t,b:1+(t.b||0)}});function Un(e,t){return{$:5,l:e,m:t,k:void 0}}D(function(e,t){return Un([e,t],function(){return e(t)})});Se(function(e,t,r){return Un([e,t,r],function(){return p(e,t,r)})});ht(function(e,t,r,s){return Un([e,t,r,s],function(){return U(e,t,r,s)})});vr(function(e,t,r,s,o){return Un([e,t,r,s,o],function(){return rt(e,t,r,s,o)})});Bn(function(e,t,r,s,o,a){return Un([e,t,r,s,o,a],function(){return Re(e,t,r,s,o,a)})});Qd(function(e,t,r,s,o,a,c){return Un([e,t,r,s,o,a,c],function(){return Oi(e,t,r,s,o,a,c)})});sb(function(e,t,r,s,o,a,c,i){return Un([e,t,r,s,o,a,c,i],function(){return cb(e,t,r,s,o,a,c,i)})});ab(function(e,t,r,s,o,a,c,i,u){return Un([e,t,r,s,o,a,c,i,u],function(){return r1(e,t,r,s,o,a,c,i,u)})});var gb=D(function(e,t){return{$:"a0",n:e,o:t}});D(function(e,t){return{$:"a1",n:e,o:t}});var mb=D(function(e,t){return{$:"a2",n:e,o:t}}),Sb=D(function(e,t){return{$:"a3",n:e,o:t}});Se(function(e,t,r){return{$:"a4",n:t,o:{f:e,o:r}}});var Ew=/^script$/i,Aw=/^(on|formAction$)/i,Tw=/^\s*j\s*a\s*v\s*a\s*s\s*c\s*r\s*i\s*p\s*t\s*:/i,Iw=/^\s*(j\s*a\s*v\s*a\s*s\s*c\s*r\s*i\s*p\s*t\s*:|d\s*a\s*t\s*a\s*:\s*t\s*e\s*x\s*t\s*\/\s*h\s*t\s*m\s*l\s*(,|;))/i;function $b(e){return Ew.test(e)?"p":e}function Dw(e){return Aw.test(e)?"data-"+e:e}function kw(e){return Tw.test(e)?"":e}function Mw(e){return Iw.test(e)?"":e}D(function(e,t){return t.$==="a0"?p(gb,t.n,Ow(e,t.o)):t});function Ow(e,t){var r=uv(t);return{$:t.$,a:r?U(So,r<3?jw:zw,Lr(e),t.a):p(Mt,e,t.a)}}var jw=D(function(e,t){return n(e(t.a),t.b)}),zw=D(function(e,t){return{dc:e(t.dc),bI:t.bI,bz:t.bz}});function yb(e){for(var t={};e.b;e=e.b){var r=e.a,s=r.$,o=r.n,a=r.o;if(s==="a2"){o==="className"?Vf(t,o,a):t[o]=a;continue}var c=t[s]||(t[s]={});s==="a3"&&o==="class"?Vf(c,o,a):c[o]=a}return t}function Vf(e,t,r){var s=e[t];e[t]=s?s+" "+r:r}function kn(e,t){var r=e.$;if(r===5)return kn(e.k||(e.k=e.m()),t);if(r===0)return hn.createTextNode(e.a);if(r===4){for(var s=e.k,o=e.j;s.$===4;)typeof o!="object"?o=[o,s.j]:o.push(s.j),s=s.k;var a={j:o,p:t},c=kn(s,a);return c.elm_event_node_ref=a,c}if(r===3){var c=e.h(e.g);return dd(c,t,e.d),c}var c=e.f?hn.createElementNS(e.f,e.c):hn.createElement(e.c);rl&&e.c=="a"&&c.addEventListener("click",rl(c)),dd(c,t,e.d);for(var i=e.e,u=0;u<i.length;u++)tv(c,kn(r===1?i[u]:i[u].b,t));return c}function dd(e,t,r){for(var s in r){var o=r[s];s==="a1"?xw(e,o):s==="a0"?Lw(e,t,o):s==="a3"?Nw(e,o):s==="a4"?qw(e,o):(s!=="value"&&s!=="checked"||e[s]!==o)&&(e[s]=o)}}function xw(e,t){var r=e.style;for(var s in t)r[s]=t[s]}function Nw(e,t){for(var r in t){var s=t[r];typeof s<"u"?e.setAttribute(r,s):e.removeAttribute(r)}}function qw(e,t){for(var r in t){var s=t[r],o=s.f,a=s.o;typeof a<"u"?e.setAttributeNS(o,r,a):e.removeAttributeNS(o,r)}}function Lw(e,t,r){var s=e.elmFs||(e.elmFs={});for(var o in r){var a=r[o],c=s[o];if(!a){e.removeEventListener(o,c),s[o]=void 0;continue}if(c){var i=c.q;if(i.$===a.$){c.q=a;continue}e.removeEventListener(o,c)}c=Bw(t,a),e.addEventListener(o,c,rv&&{passive:uv(a)<2}),s[o]=c}}var rv;try{window.addEventListener("t",null,Object.defineProperty({},"passive",{get:function(){rv=!0}}))}catch{}function Bw(e,t){function r(s){var o=r.q,a=mr(o.a,s);if(Gr(a)){for(var c=uv(o),i=a.a,u=c?c<3?i.a:i.dc:i,l=c==1?i.b:c==3&&i.bI,h=(l&&s.stopPropagation(),(c==2?i.b:c==3&&i.bz)&&s.preventDefault(),e),v,f;v=h.j;){if(typeof v=="function")u=v(u);else for(var f=v.length;f--;)u=v[f](u);h=h.p}h(u,l)}}return r.q=t,r}function Fw(e,t){return e.$==t.$&&Xi(e.a,t.a)}function Cb(e,t){var r=[];return kr(e,t,r,0),r}function er(e,t,r,s){var o={$:t,r,s,t:void 0,u:void 0};return e.push(o),o}function kr(e,t,r,s){if(e!==t){var o=e.$,a=t.$;if(o!==a)if(o===1&&a===2)t=Zw(t),a=1;else{er(r,0,s,t);return}switch(a){case 5:for(var c=e.l,i=t.l,u=c.length,l=u===i.length;l&&u--;)l=c[u]===i[u];if(l){t.k=e.k;return}t.k=t.m();var h=[];kr(e.k,t.k,h,0),h.length>0&&er(r,1,s,h);return;case 4:for(var v=e.j,f=t.j,d=!1,y=e.k;y.$===4;)d=!0,typeof v!="object"?v=[v,y.j]:v.push(y.j),y=y.k;for(var m=t.k;m.$===4;)d=!0,typeof f!="object"?f=[f,m.j]:f.push(m.j),m=m.k;if(d&&v.length!==f.length){er(r,0,s,t);return}(d?!Uw(v,f):v!==f)&&er(r,2,s,f),kr(y,m,r,s+1);return;case 0:e.a!==t.a&&er(r,3,s,t.a);return;case 1:Gf(e,t,r,s,Hw);return;case 2:Gf(e,t,r,s,Ww);return;case 3:if(e.h!==t.h){er(r,0,s,t);return}var b=nv(e.d,t.d);b&&er(r,4,s,b);var S=t.i(e.g,t.g);S&&er(r,5,s,S);return}}}function Uw(e,t){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Gf(e,t,r,s,o){if(e.c!==t.c||e.f!==t.f){er(r,0,s,t);return}var a=nv(e.d,t.d);a&&er(r,4,s,a),o(e,t,r,s)}function nv(e,t,r){var s;for(var o in e){if(o==="a1"||o==="a0"||o==="a3"||o==="a4"){var a=nv(e[o],t[o]||{},o);a&&(s=s||{},s[o]=a);continue}if(!(o in t)){s=s||{},s[o]=r?r==="a1"?"":r==="a0"||r==="a3"?void 0:{f:e[o].f,o:void 0}:typeof e[o]=="string"?"":null;continue}var c=e[o],i=t[o];c===i&&o!=="value"&&o!=="checked"||r==="a0"&&Fw(c,i)||(s=s||{},s[o]=i)}for(var u in t)u in e||(s=s||{},s[u]=t[u]);return s}function Hw(e,t,r,s){var o=e.e,a=t.e,c=o.length,i=a.length;c>i?er(r,6,s,{v:i,i:c-i}):c<i&&er(r,7,s,{v:c,e:a});for(var u=c<i?c:i,l=0;l<u;l++){var h=o[l];kr(h,a[l],r,++s),s+=h.b||0}}function Ww(e,t,r,s){for(var o=[],a={},c=[],i=e.e,u=t.e,l=i.length,h=u.length,v=0,f=0,d=s;v<l&&f<h;){var y=i[v],m=u[f],b=y.a,S=m.a,R=y.b,_=m.b,T=void 0,k=void 0;if(b===S){d++,kr(R,_,o,d),d+=R.b||0,v++,f++;continue}var I=i[v+1],z=u[f+1];if(I){var L=I.a,N=I.b;k=S===L}if(z){var H=z.a,F=z.b;T=b===H}if(T&&k){d++,kr(R,F,o,d),Gc(a,o,b,_,f,c),d+=R.b||0,d++,Jc(a,o,b,N,d),d+=N.b||0,v+=2,f+=2;continue}if(T){d++,Gc(a,o,S,_,f,c),kr(R,F,o,d),d+=R.b||0,v+=1,f+=2;continue}if(k){d++,Jc(a,o,b,R,d),d+=R.b||0,d++,kr(N,_,o,d),d+=N.b||0,v+=2,f+=1;continue}if(I&&L===H){d++,Jc(a,o,b,R,d),Gc(a,o,S,_,f,c),d+=R.b||0,d++,kr(N,F,o,d),d+=N.b||0,v+=2,f+=2;continue}break}for(;v<l;){d++;var y=i[v],R=y.b;Jc(a,o,y.a,R,d),d+=R.b||0,v++}for(;f<h;){var M=M||[],m=u[f];Gc(a,o,m.a,m.b,void 0,M),f++}(o.length>0||c.length>0||M)&&er(r,8,s,{w:o,x:c,y:M})}var bb="_elmW6BL";function Gc(e,t,r,s,o,a){var c=e[r];if(!c){c={c:0,z:s,r:o,s:void 0},a.push({r:o,A:c}),e[r]=c;return}if(c.c===1){a.push({r:o,A:c}),c.c=2;var i=[];kr(c.z,s,i,c.r),c.r=o,c.s.s={w:i,A:c};return}Gc(e,t,r+bb,s,o,a)}function Jc(e,t,r,s,o){var a=e[r];if(!a){var c=er(t,9,o,void 0);e[r]={c:1,z:s,r:o,s:c};return}if(a.c===0){a.c=2;var i=[];kr(s,a.z,i,o),er(t,9,o,{w:i,A:a});return}Jc(e,t,r+bb,s,o)}function Rb(e,t,r,s){Kc(e,t,r,0,0,t.b,s)}function Kc(e,t,r,s,o,a,c){for(var i=r[s],u=i.r;u===o;){var l=i.$;if(l===1)Rb(e,t.k,i.s,c);else if(l===8){i.t=e,i.u=c;var h=i.s.w;h.length>0&&Kc(e,t,h,0,o,a,c)}else if(l===9){i.t=e,i.u=c;var v=i.s;if(v){v.A.s=e;var h=v.w;h.length>0&&Kc(e,t,h,0,o,a,c)}}else i.t=e,i.u=c;if(s++,!(i=r[s])||(u=i.r)>a)return s}var f=t.$;if(f===4){for(var d=t.k;d.$===4;)d=d.k;return Kc(e,d,r,s,o+1,a,e.elm_event_node_ref)}for(var y=t.e,m=e.childNodes,b=0;b<y.length;b++){o++;var S=f===1?y[b]:y[b].b,R=o+(S.b||0);if(o<=u&&u<=R&&(s=Kc(m[b],S,r,s,o,R,c),!(i=r[s])||(u=i.r)>a))return s;o=R}return s}function _b(e,t,r,s){return r.length===0?e:(Rb(e,t,r,s),nl(e,r))}function nl(e,t){for(var r=0;r<t.length;r++){var s=t[r],o=s.t,a=Vw(o,s);o===e&&(e=a)}return e}function Vw(e,t){switch(t.$){case 0:return Gw(e,t.s,t.u);case 4:return dd(e,t.u,t.s),e;case 3:return e.replaceData(0,e.length,t.s),e;case 1:return nl(e,t.s);case 2:return e.elm_event_node_ref?e.elm_event_node_ref.j=t.s:e.elm_event_node_ref={j:t.s,p:t.u},e;case 6:for(var a=t.s,s=0;s<a.i;s++)e.removeChild(e.childNodes[a.v]);return e;case 7:for(var a=t.s,r=a.e,s=a.v,o=e.childNodes[s];s<r.length;s++)e.insertBefore(kn(r[s],t.u),o);return e;case 9:var a=t.s;if(!a)return e.parentNode.removeChild(e),e;var c=a.A;return typeof c.r<"u"&&e.parentNode.removeChild(e),c.s=nl(e,a.w),e;case 8:return Jw(e,t);case 5:return t.s(e);default:uu(10)}}function Gw(e,t,r){var s=e.parentNode,o=kn(t,r);return o.elm_event_node_ref||(o.elm_event_node_ref=e.elm_event_node_ref),s&&o!==e&&s.replaceChild(o,e),o}function Jw(e,t){var r=t.s,s=Kw(r.y,t);e=nl(e,r.w);for(var o=r.x,a=0;a<o.length;a++){var c=o[a],i=c.A,u=i.c===2?i.s:kn(i.z,t.u);e.insertBefore(u,e.childNodes[c.r])}return s&&tv(e,s),e}function Kw(e,t){if(e){for(var r=hn.createDocumentFragment(),s=0;s<e.length;s++){var o=e[s],a=o.A;tv(r,a.c===2?a.s:kn(a.z,t.u))}return r}}function iv(e){if(e.nodeType===3)return hd(e.textContent);if(e.nodeType!==1)return hd("");for(var t=q,r=e.attributes,s=r.length;s--;){var o=r[s],a=o.name,c=o.value;t=Kr(p(Sb,a,c),t)}for(var i=e.tagName.toLowerCase(),u=q,l=e.childNodes,s=l.length;s--;)u=Kr(iv(l[s]),u);return U(_t,i,t,u)}function Zw(e){for(var t=e.e,r=t.length,s=new Array(r),o=0;o<r;o++)s[o]=t[o].b;return{$:1,c:e.c,d:e.d,e:s,f:e.f,b:e.b}}ht(function(e,t,r,s){return ev(t,s,e.c7,e.dD,e.dB,function(o,a){var c=e.dG,i=s.node,u=iv(i);return Pb(a,function(l){var h=c(l),v=Cb(u,h);i=_b(i,u,v,o),u=h})})});var Qw=ht(function(e,t,r,s){return ev(t,s,e.c7,e.dD,e.dB,function(o,a){var c=e.bF&&e.bF(o),i=e.dG,u=hn.title,l=hn.body,h=iv(l);return Pb(a,function(v){rl=c;var f=i(v),d=_t("body")(q)(f.aS),y=Cb(h,d);l=_b(l,h,y,o),h=d,rl=0,u!==f.be&&(hn.title=u=f.be)})})}),il=typeof requestAnimationFrame<"u"?requestAnimationFrame:function(e){return setTimeout(e,1e3/60)};function Pb(e,t){t(e);var r=0;function s(){r=r===1?0:(il(s),t(e),1)}return function(o,a){e=o,a?(t(e),r===2&&(r=1)):(r===0&&il(s),r=2)}}function Yw(e){var t=e.dl,r=e.dm,s=function(){s.a(t(fp()))};return Qw({bF:function(o){return s.a=o,Mi.addEventListener("popstate",s),Mi.navigator.userAgent.indexOf("Trident")<0||Mi.addEventListener("hashchange",s),D(function(a,c){if(!c.ctrlKey&&!c.metaKey&&!c.shiftKey&&c.button<1&&!a.target&&!a.hasAttribute("download")){c.preventDefault();var i=a.href,u=fp(),l=Gb(i).a;o(r(l&&u.cm===l.cm&&u.b3===l.b3&&u.cf.a===l.cf.a?YE(l):QE(i)))}})},c7:function(o){return U(e.c7,o,fp(),s)},dG:e.dG,dD:e.dD,dB:e.dB})}function fp(){return Gb(hn.location.href).a||uu(1)}D(function(e,t){return p(yr,El,rr(function(){t&&history.go(t),e()}))});var Xw=D(function(e,t){return p(yr,El,rr(function(){history.pushState({},"",t),e()}))}),eE=D(function(e,t){return p(yr,El,rr(function(){history.replaceState({},"",t),e()}))}),wb={addEventListener:function(){},removeEventListener:function(){}},ol=typeof document<"u"?document:wb,Mi=typeof window<"u"?window:wb;Se(function(e,t,r){return Yd(rr(function(s){function o(a){oo(r(a))}return e.addEventListener(t,o,rv&&{passive:!0}),function(){e.removeEventListener(t,o)}}))});D(function(e,t){var r=mr(e,t);return Gr(r)?ne(r.a):fe});function Eb(e,t){return rr(function(r){il(function(){var s=document.getElementById(e);r(s?mn(t(s)):ub(XE(e)))})})}function Ab(e){return rr(function(t){il(function(){t(mn(e()))})})}var tE=D(function(e,t){return Eb(t,function(r){return r[e](),mo})});function rE(){return{dv:nE(),cH:{cJ:Mi.pageXOffset,cK:Mi.pageYOffset,dH:ol.documentElement.clientWidth,b1:ol.documentElement.clientHeight}}}function nE(){var e=ol.body,t=ol.documentElement;return{dH:Math.max(e.scrollWidth,e.offsetWidth,t.scrollWidth,t.offsetWidth,t.clientWidth),b1:Math.max(e.scrollHeight,e.offsetHeight,t.scrollHeight,t.offsetHeight,t.clientHeight)}}D(function(e,t){return Ab(function(){return Mi.scroll(e,t),mo})});Se(function(e,t,r){return Eb(e,function(s){return s.scrollLeft=t,s.scrollTop=r,mo})});function iE(e){return p(yr,El,rr(function(t){try{Mi.location=e}catch{hn.location.reload(!1)}}))}function oE(e){return rr(function(t){t(mn(e(Date.now())))})}D(function(e,t){return rr(function(r){var s=setInterval(function(){oo(t)},e);return function(){clearInterval(s)}})});function sE(){return rr(function(e){e(mn(p(hA,-new Date().getTimezoneOffset(),q)))})}D(function(e,t){return e&t});D(function(e,t){return e|t});D(function(e,t){return e^t});D(function(e,t){return t<<e});D(function(e,t){return t>>e});var aE=D(function(e,t){return t>>>e}),Tb=Se(function(e,t,r){return rr(function(s){function o(c){s(t(r.c1.a(c)))}var a=new XMLHttpRequest;a.addEventListener("error",function(){o(JA)}),a.addEventListener("timeout",function(){o(QA)}),a.addEventListener("load",function(){o(uE(r.c1.b,a))}),g0(r.cF)&&fE(e,a,r.cF.a);try{a.open(r.a$,r.bg,!0)}catch{return o(VA(r.bg))}return cE(a,r),r.aS.a&&a.setRequestHeader("Content-Type",r.aS.a),a.send(r.aS.b),function(){a.c=!0,a.abort()}})});function cE(e,t){for(var r=t.b0;r.b;r=r.b)e.setRequestHeader(r.a.a,r.a.b);e.timeout=t.cE.a||0,e.responseType=t.c1.d,e.withCredentials=t.cN}function uE(e,t){return p(200<=t.status&&t.status<300?GA:WA,lE(t),e(t.response))}function lE(e){return{bg:e.responseURL,dy:e.status,bc:e.statusText,b0:pE(e.getAllResponseHeaders())}}function pE(e){if(!e)return jn;for(var t=jn,r=e.split(`\r
`),s=r.length;s--;){var o=r[s],a=o.indexOf(": ");if(a>0){var c=o.substring(0,a),i=o.substring(a+2);t=U(tT,c,function(u){return ne(g0(u)?i+", "+u.a:i)},t)}}return t}var Ib=Se(function(e,t,r){return{$:0,d:e,b:t,a:r}}),hE=D(function(e,t){return{$:0,d:t.d,b:t.b,a:function(r){return e(t.a(r))}}}),dE={$:0},vE=D(function(e,t){return{$:0,a:e,b:t}});D(function(e,t){return new Blob([t],{type:e})});function fE(e,t,r){t.upload.addEventListener("progress",function(s){t.c||oo(p(ng,e,n(r,ZA({dw:s.loaded,cy:s.total}))))}),t.addEventListener("progress",function(s){t.c||oo(p(ng,e,n(r,KA({dr:s.loaded,cy:s.lengthComputable?ne(s.total):fe}))))})}function gE(e){return encodeURIComponent(e)}var mE=/.^/,SE=D(function(e,t){var r="g";e.dg&&(r+="m"),e.cS&&(r+="i");try{return ne(new RegExp(t,r))}catch{return fe}}),$E=D(function(e,t){return t.match(e)!==null}),yE=Se(function(e,t,r){for(var s=[],o=0,a=r,c=t.lastIndex,i=-1,u;o++<e&&(u=t.exec(a))&&i!=t.lastIndex;){for(var l=u.length-1,h=new Array(l);l>0;){var v=u[l];h[--l]=v?ne(v):fe}s.push(rt(vR,u[0],u.index,o,$(h))),i=t.lastIndex}return t.lastIndex=c,$(s)}),CE=ht(function(e,t,r,s){var o=0;function a(c){if(o++>=e)return c;for(var i=arguments.length-3,u=new Array(i);i>0;){var l=arguments[i];u[--i]=l?ne(l):fe}return r(rt(vR,c,arguments[arguments.length-2],o,$(u)))}return s.replace(t,a)}),bE=Se(function(e,t,r){for(var s=r,o=[],a=t.lastIndex,c=t.lastIndex;e--;){var i=t.exec(s);if(!i)break;o.push(s.slice(a,i.index)),a=t.lastIndex}return o.push(s.slice(a)),t.lastIndex=c,$(o)}),ov=1/0,RE=vr(function(e,t,r,s,o){for(var a=e.length,c=t+a<=o.length,i=0;c&&i<a;){var u=o.charCodeAt(t);c=e[i++]===o[t++]&&(u===10?(r++,s=1):(s++,(u&63488)===55296?e[i++]===o[t++]:1))}return se(c?t:-1,r,s)}),_E=Se(function(e,t,r){return r.length<=t?-1:(r.charCodeAt(t)&63488)===55296?e(r.substr(t,2))?t+2:-1:e(r[t])?r[t]===`
`?-2:t+1:-1}),PE=Se(function(e,t,r){return r.charCodeAt(t)===e}),wE=D(function(e,t){for(;e<t.length;e++){var r=t.charCodeAt(e);if(r<48||57<r)return e}return e}),EE=Se(function(e,t,r){for(var s=0;t<r.length;t++){var o=r.charCodeAt(t)-48;if(o<0||e<=o)break;s=e*s+o}return n(t,s)}),AE=D(function(e,t){for(var r=0;e<t.length;e++){var s=t.charCodeAt(e);if(48<=s&&s<=57)r=16*r+s-48;else if(65<=s&&s<=70)r=16*r+s-55;else if(97<=s&&s<=102)r=16*r+s-87;else break}return n(e,r)}),TE=vr(function(e,t,r,s,o){for(var a=o.indexOf(e,t),c=a<0?o.length:a+e.length;t<c;){var i=o.charCodeAt(t++);i===10?(s=1,r++):(s++,(i&63488)===55296&&t++)}return se(a,r,s)}),IE=function(e){return{$:2,a:e}},DE=function(e){return{$:1,a:e}},it=d1,ju=c1;Se(function(e,t,r){var s=r.c,o=r.d,a=D(function(c,i){if(c.$){var l=c.a;return U(ju,e,i,l)}else{var u=c.a;return U(ju,a,i,u)}});return U(ju,a,U(ju,e,t,o),s)});var sv=Se(function(e,t,r){e:for(;;){if(r.$===-2)return t;var s=r.b,o=r.c,a=r.d,c=r.e,i=e,u=U(e,s,o,U(sv,e,t,c)),l=a;e=i,t=u,r=l;continue e}}),sl=function(e){return U(sv,Se(function(t,r,s){return p(it,n(t,r),s)}),q,e)},kE=function(e){return U(sv,Se(function(t,r,s){return p(it,t,s)}),q,e)},Db=function(e){var t=e;return kE(t)},kb=1,ME=2,Mb=0,et=function(e){return{$:1,a:e}},bl=D(function(e,t){return{$:3,a:e,b:t}}),Jf=D(function(e,t){return{$:0,a:e,b:t}}),Ob=D(function(e,t){return{$:1,a:e,b:t}}),ct=function(e){return{$:0,a:e}},OE=function(e){return{$:2,a:e}},ne=function(e){return{$:0,a:e}},fe={$:1},jE=D1,Rl=sw,Nt=z1,pt=D(function(e,t){return p(E1,e,yl(t))}),jb=D(function(e,t){return $(p(w1,e,t))}),zb=function(e){return p(pt,`
    `,p(jb,`
`,e))},Li=Se(function(e,t,r){e:for(;;)if(r.b){var s=r.a,o=r.b,a=e,c=p(e,s,t),i=o;e=a,t=c,r=i;continue e}else return t}),dn=function(e){return U(Li,D(function(t,r){return r+1}),0,e)},zE=v1,xE=Se(function(e,t,r){e:for(;;)if(dt(e,t)<1){var s=e,o=t-1,a=p(it,t,r);e=s,t=o,r=a;continue e}else return r}),NE=D(function(e,t){return U(xE,e,t,q)}),Rr=D(function(e,t){return U(zE,e,p(NE,0,dn(t)-1),t)}),pu=L1,xb=function(e){var t=pu(e);return 97<=t&&t<=122},Nb=function(e){var t=pu(e);return t<=90&&65<=t},qb=function(e){return xb(e)||Nb(e)},qE=function(e){var t=pu(e);return t<=57&&48<=t},vd=function(e){return xb(e)||Nb(e)||qE(e)},Or=function(e){return U(Li,it,q,e)},LE=R1,BE=D(function(e,t){return`

(`+(Nt(e+1)+(") "+zb(av(t))))}),av=function(e){return p(FE,e,q)},FE=D(function(e,t){e:for(;;)switch(e.$){case 0:var r=e.a,c=e.b,s=function(){var m=LE(r);if(m.$===1)return!1;var b=m.a,S=b.a,R=b.b;return qb(S)&&p(jE,vd,R)}(),o=s?"."+r:"['"+(r+"']"),u=c,l=p(it,o,t);e=u,t=l;continue e;case 1:var a=e.a,c=e.b,i="["+(Nt(a)+"]"),u=c,l=p(it,i,t);e=u,t=l;continue e;case 2:var h=e.a;if(h.b)if(h.b.b){var v=function(){return t.b?"The Json.Decode.oneOf at json"+p(pt,"",Or(t)):"Json.Decode.oneOf"}(),y=v+(" failed in the following "+(Nt(dn(h))+" ways:"));return p(pt,`

`,p(it,y,p(Rr,BE,h)))}else{var c=h.a,u=c,l=t;e=u,t=l;continue e}else return"Ran into a Json.Decode.oneOf with no possibilities"+function(){return t.b?" at json"+p(pt,"",Or(t)):"!"}();default:var f=e.a,d=e.b,y=function(){return t.b?"Problem with the value at json"+(p(pt,"",Or(t))+`:

    `):`Problem with the given value:

`}();return y+(zb(p(Rl,4,d))+(`

`+f))}}),dr=32,fd=ht(function(e,t,r,s){return{$:0,a:e,b:t,c:r,d:s}}),gd=n1,Lb=S1,Bb=D(function(e,t){return Lf(t)/Lf(e)}),nu=Lb(p(Bb,2,dr)),Fb=rt(fd,0,nu,gd,gd),Ub=o1,Hb=function(e){return{$:1,a:e}},UE=D(function(e,t){return e(t)});D(function(e,t){return t(e)});var Gt=l1,Wb=$1,md=i1,HE=D(function(e,t){return dt(e,t)>0?e:t}),WE=function(e){return{$:0,a:e}},cv=s1,VE=D(function(e,t){e:for(;;){var r=p(cv,dr,e),s=r.a,o=r.b,a=p(it,WE(s),t);if(o.b){var c=o,i=a;e=c,t=i;continue e}else return Or(a)}}),GE=function(e){var t=e.a;return t},JE=D(function(e,t){e:for(;;){var r=Lb(t/dr);if(r===1)return p(cv,dr,e).a;var s=p(VE,e,q),o=r;e=s,t=o;continue e}}),Vb=D(function(e,t){if(t.h){var r=t.h*dr,s=Wb(p(Bb,dr,r-1)),o=e?Or(t.m):t.m,a=p(JE,o,t.h);return rt(fd,md(t.k)+r,p(HE,5,s*nu),a,t.k)}else return rt(fd,md(t.k),nu,gd,t.k)}),KE=vr(function(e,t,r,s,o){e:for(;;){if(t<0)return p(Vb,!1,{m:s,h:r/dr|0,k:o});var a=Hb(U(Ub,dr,t,e)),c=e,i=t-dr,u=r,l=p(it,a,s),h=o;e=c,t=i,r=u,s=l,o=h;continue e}}),ZE=D(function(e,t){if(e<=0)return Fb;var r=e%dr,s=U(Ub,r,e-r,t),o=e-r-dr;return Re(KE,t,o,e,q,s)}),Gr=function(e){return!e.$},Zc=Q1,Mt=X1,So=ew,Lr=F1,uv=function(e){switch(e.$){case 0:return 0;case 1:return 1;case 2:return 2;default:return 3}},QE=function(e){return{$:1,a:e}},YE=function(e){return{$:0,a:e}},Ct=function(e){return e},XE=Ct,Kf=Bn(function(e,t,r,s,o,a){return{br:a,b3:t,cd:s,cf:r,cm:e,cn:o}}),eA=k1,lv=_1,_l=A1,ao=D(function(e,t){return e<1?t:U(_l,e,lv(t),t)}),Pl=j1,Hn=function(e){return e===""},wl=D(function(e,t){return e<1?"":U(_l,0,e,t)}),tA=x1,Zf=vr(function(e,t,r,s,o){if(Hn(o)||p(eA,"@",o))return fe;var a=p(Pl,":",o);if(a.b){if(a.b.b)return fe;var c=a.a,i=tA(p(ao,c+1,o));if(i.$===1)return fe;var u=i;return ne(Oi(Kf,e,p(wl,c,o),u,t,r,s))}else return ne(Oi(Kf,e,o,fe,t,r,s))}),Qf=ht(function(e,t,r,s){if(Hn(s))return fe;var o=p(Pl,"/",s);if(o.b){var a=o.a;return Re(Zf,e,p(ao,a,s),t,r,p(wl,a,s))}else return Re(Zf,e,"/",t,r,s)}),Yf=Se(function(e,t,r){if(Hn(r))return fe;var s=p(Pl,"?",r);if(s.b){var o=s.a;return rt(Qf,e,ne(p(ao,o+1,r)),t,p(wl,o,r))}else return rt(Qf,e,fe,t,r)}),Xf=D(function(e,t){if(Hn(t))return fe;var r=p(Pl,"#",t);if(r.b){var s=r.a;return U(Yf,e,ne(p(ao,s+1,t)),p(wl,s,t))}else return U(Yf,e,fe,t)}),Sd=M1,Gb=function(e){return p(Sd,"http://",e)?p(Xf,0,p(ao,7,e)):p(Sd,"https://",e)?p(Xf,1,p(ao,8,e)):fe},El=function(e){},Zt=mn,rA=Zt(0),Jb=ht(function(e,t,r,s){if(s.b){var o=s.a,a=s.b;if(a.b){var c=a.a,i=a.b;if(i.b){var u=i.a,l=i.b;if(l.b){var h=l.a,v=l.b,f=r>500?U(Li,e,t,Or(v)):rt(Jb,e,t,r+1,v);return p(e,o,p(e,c,p(e,u,p(e,h,f))))}else return p(e,o,p(e,c,p(e,u,t)))}else return p(e,o,p(e,c,t))}else return p(e,o,t)}else return t}),Wn=Se(function(e,t,r){return rt(Jb,e,t,0,r)}),Oe=D(function(e,t){return U(Wn,D(function(r,s){return p(it,e(r),s)}),q,t)}),sr=pd,co=D(function(e,t){return p(sr,function(r){return Zt(e(r))},t)}),nA=Se(function(e,t,r){return p(sr,function(s){return p(sr,function(o){return Zt(p(e,s,o))},r)},t)}),pv=function(e){return U(Wn,nA(it),Zt(q),e)},hv=yw,iA=D(function(e,t){var r=t;return Yd(p(sr,hv(e),r))}),oA=Se(function(e,t,r){return p(co,function(s){return 0},pv(p(Oe,iA(e),t)))}),sA=Se(function(e,t,r){return Zt(0)}),aA=D(function(e,t){var r=t;return p(co,e,r)});so.Task=pb(rA,oA,sA,aA);var Kb=hb("Task"),yr=D(function(e,t){return Kb(p(co,e,t))}),cA=Yw,Ue=Z1,uA=function(e){return{$:0,a:e}},Vn=db,lA=D(function(e,t){return t.b?U(Wn,it,t,e):e}),$t=function(e){return U(Wn,lA,q,e)},pA=Se(function(e,t,r){return{bk:t,bv:!1,b9:e,bM:r}}),Cr=D(function(e,t){return U(Wn,D(function(r,s){return e(r)?p(it,r,s):s}),q,t)}),al=p1,bt=D(function(e,t){if(t.$)return e;var r=t.a;return r}),Zb=function(e){return p(Cr,al(""),p(jb,"/",p(bt,"",e.br)))},Qb=function(e){var t=Zb(e);e:for(;;)if(t.b){if(t.b.b)break e;switch(t.a){case"mining":return ne(1);case"batches":return ne(2);default:break e}}else return ne(0);return fe},Yb=D(function(e,t){return{$:0,a:e,b:t}}),hA=Yb,dA=sE(),Al=function(e){return{$:0,a:e}},Tl=function(e){return{$:2,a:e}},Il=function(e){return{$:1,a:e}},Xb=ht(function(e,t,r,s){return{bB:e,bC:t,bD:r,bE:s}}),Ti={$:0},de=Vn(q),vA=function(e){return n({ay:"",a_:fe,P:"",t:q,o:Ti},de)},fA=function(e){return n(e,de)},vn={$:-2},jn=vn,gA=n({aJ:jn},de),ro=function(e){return{$:3,a:e}},nt=Se(function(e,t,r){return e(t(r))}),hr=vb,gp=D(function(e,t){return p(hr,p(nt,ro,e),t)}),$d=D(function(e,t){return{$:0,a:e,b:t}}),mA=aE,cl=function(e){var t=e.a,r=e.b;return p($d,t*1664525+r>>>0,r)},zu=function(e){var t=cl(p($d,0,1013904223)),r=t.a,s=t.b,o=r+e>>>0;return cl(p($d,o,s))},SA=function(e){var t=gA,r=t.a,s=t.b,o=fA(rt(Xb,zu(e.bB),zu(e.bC),zu(e.bD),zu(e.bE))),a=o.a,c=o.b,i=vA(),u=i.a,l=i.b;return n({aA:u,aO:a,aP:r},Vn($([p(gp,Al,l),p(gp,Il,s),p(gp,Tl,c)])))},dv=function(e){return{$:0,a:e}},Dl=function(e){return{$:0,a:e}},e0=function(e){return{$:0,a:e}},ul=function(e){return{$:1,a:e}},t0=function(e){return{$:0,a:e}},r0=function(e){return ul(t0(e))},$A=function(e){return se({aC:!1,at:e,bc:"Authenticating..."},de,r0(e0))},uo=function(e){return{$:4,a:e}},n0=D(function(e,t){return{$:1,a:e,b:t}}),i0={$:0},o0=function(e){return{$:1,a:e}},s0=function(e){return{$:0,a:e}},a0=function(e){return{$:4,a:e}},ll=function(e){return{$:3,a:e}},c0=function(e){return{$:2,a:e}},be=Se(function(e,t,r){return t(e(r))}),yA=D(function(e,t){var r=t;return p(nt,hr(e),r)}),u0=D(function(e,t){switch(t.$){case 0:return i0;case 1:if(t.a.$){var s=t.a.a;return ul(o0(p(yA,e,s)))}else{var r=t.a.a;return ul(t0(p(nt,e,r)))}case 2:var o=t.a;return c0({aL:p(be,o.aL,e),K:o.K});case 3:if(t.a.$){var c=t.a,i=c.a,a=c.b;return ll(p(n0,i,p(be,a,e)))}else{var a=t.a.a;return ll(s0(p(be,a,e)))}default:var u=t.a;return a0(u)}}),CA=ht(function(e,t,r,s){var o=s.a,a=s.b,c=s.c;return se(e(o),t(a),r(c))}),yd=ht(function(e,t,r,s){return rt(CA,s,hr(p(nt,uo,r)),u0(p(nt,uo,r)),t(e))}),Cd=function(e){return rt(yd,e,$A,Dl,dv)},bA=function(e){return Cd(e)},RA=function(e){var t=e;return t.bk},l0=function(e){var t=e;return t.b9},_A=eE,PA=function(e){switch(e){case 0:return q;case 1:return $(["mining"]);default:return $(["batches"])}},wA=function(e){return"/"+p(pt,"/",PA(e))},EA=D(function(e,t){if(e.$===1)return t;var r=e.a;return t+(":"+Nt(r))}),eg=Se(function(e,t,r){if(t.$===1)return r;var s=t.a;return xe(r,xe(e,s))}),p0=function(e){var t=function(){var r=e.cm;return r?"https://":"http://"}();return U(eg,"#",e.br,U(eg,"?",e.cn,xe(p(EA,e.cf,xe(t,e.b3)),e.cd)))},h0=D(function(e,t){var r=RA(e),s=G(r,{br:ne(wA(t))});return p(_A,l0(e),p0(s))}),vv=function(e){return{$:2,a:e}},AA={$:6},kl=function(e){return{$:2,a:e}},Ml=function(e){return{$:1,a:e}},TA=D(function(e,t){return{$:8,a:e,b:t}}),fv=function(e){return{$:1,a:e}},IA=function(e){return{$:2,a:e}},DA=function(e){return{$:0,a:e}},tg=function(e){return{$:9,a:e}},gv=function(e){return{$:5,a:e}},Gn=hw,Jn=D(function(e,t){return Kb(p(Gn,p(nt,p(nt,Zt,e),et),p(sr,p(nt,p(nt,Zt,e),ct),t)))}),kA=tE("blur"),MA=Ab(rE),OA=iE,mv=D(function(e,t){var r=t.a,s=t.b,o=t.c;return se(e(r),s,o)}),jA=D(function(e,t){switch(t.$){case 0:var r=t.a;return dv(G(r,{at:e}));case 1:var r=t.a;return fv(G(r,{at:e}));default:var r=t.a;return vv(G(r,{at:e}))}}),Sv=D(function(e,t){var r=t.a,s=t.b;return n(r,e(s))}),zA=D(function(e,t){var r=t.dj,s=t.di,o=t.$7,a=t.dn,c=t.dk;switch(e.$){case 0:return r;case 1:var i=e.a;return s(i);case 2:var u=e.a;return o(u);case 3:var l=e.a;return a(l);default:var h=e.a;return c(h)}}),xA=768,d0=C1,NA=function(e){switch(e.$){case 0:var t=e.a.at;return t;case 1:var t=e.a.at;return t;default:var t=e.a.at;return t}},qA=Xw,LA=D(function(e,t){var r=t;return G(r,{bk:e})}),BA=D(function(e,t){var r=t;return G(r,{bM:e})}),v0={$:0},$v={$:0},FA=D(function(e,t){return{l:e,n:t}}),UA=function(e){return{$:0,a:e}},f0=function(e){return{$:0,a:e}},rg="2.0.1",HA=function(e){if(e.$){var r=e.a,s=e.b,t=e.c;return"elmtaskport://"+(r+("/"+(t+("?v="+(rg+("&nsv="+s))))))}else{var t=e.a;return"elmtaskport:///"+(t+("?v="+rg))}},WA=D(function(e,t){return{$:3,a:e,b:t}}),VA=function(e){return{$:0,a:e}},GA=D(function(e,t){return{$:4,a:e,b:t}}),JA={$:2},KA=function(e){return{$:1,a:e}},ZA=function(e){return{$:0,a:e}},QA={$:1},g0=function(e){return!e.$},ng=Cw,m0=h1,$o=D(function(e,t){e:for(;;){if(t.$===-2)return fe;var r=t.b,s=t.c,o=t.d,a=t.e,c=p(m0,e,r);switch(c){case 0:var i=e,u=o;e=i,t=u;continue e;case 1:return ne(s);default:var i=e,u=a;e=i,t=u;continue e}}}),Ke=vr(function(e,t,r,s,o){return{$:-1,a:e,b:t,c:r,d:s,e:o}}),lo=vr(function(e,t,r,s,o){if(o.$===-1&&!o.a){o.a;var a=o.b,c=o.c,i=o.d,u=o.e;if(s.$===-1&&!s.a){s.a;var l=s.b,h=s.c,v=s.d,f=s.e;return Re(Ke,0,t,r,Re(Ke,1,l,h,v,f),Re(Ke,1,a,c,i,u))}else return Re(Ke,e,a,c,Re(Ke,0,t,r,s,i),u)}else if(s.$===-1&&!s.a&&s.d.$===-1&&!s.d.a){s.a;var l=s.b,h=s.c,d=s.d;d.a;var y=d.b,m=d.c,b=d.d,S=d.e,f=s.e;return Re(Ke,0,l,h,Re(Ke,1,y,m,b,S),Re(Ke,1,t,r,f,o))}else return Re(Ke,e,t,r,s,o)}),bd=Se(function(e,t,r){if(r.$===-2)return Re(Ke,0,e,t,vn,vn);var s=r.a,o=r.b,a=r.c,c=r.d,i=r.e,u=p(m0,e,o);switch(u){case 0:return Re(lo,s,o,a,U(bd,e,t,c),i);case 1:return Re(Ke,s,o,t,c,i);default:return Re(lo,s,o,a,c,U(bd,e,t,i))}}),zn=Se(function(e,t,r){var s=U(bd,e,t,r);if(s.$===-1&&!s.a){s.a;var o=s.b,a=s.c,c=s.d,i=s.e;return Re(Ke,1,o,a,c,i)}else{var u=s;return u}}),YA=function(e){e:for(;;)if(e.$===-1&&e.d.$===-1){var t=e.d,r=t;e=r;continue e}else return e},S0=function(e){if(e.$===-1&&e.d.$===-1&&e.e.$===-1)if(e.e.d.$===-1&&!e.e.d.a){var t=e.a,r=e.b,s=e.c,o=e.d;o.a;var a=o.b,c=o.c,i=o.d,u=o.e,l=e.e;l.a;var h=l.b,v=l.c,f=l.d;f.a;var d=f.b,y=f.c,m=f.d,b=f.e,S=l.e;return Re(Ke,0,d,y,Re(Ke,1,r,s,Re(Ke,0,a,c,i,u),m),Re(Ke,1,h,v,b,S))}else{var t=e.a,r=e.b,s=e.c,R=e.d;R.a;var a=R.b,c=R.c,i=R.d,u=R.e,_=e.e;_.a;var h=_.b,v=_.c,f=_.d,S=_.e;return Re(Ke,1,r,s,Re(Ke,0,a,c,i,u),Re(Ke,0,h,v,f,S))}else return e},ig=function(e){if(e.$===-1&&e.d.$===-1&&e.e.$===-1)if(e.d.d.$===-1&&!e.d.d.a){var t=e.a,r=e.b,s=e.c,o=e.d;o.a;var a=o.b,c=o.c,i=o.d;i.a;var u=i.b,l=i.c,h=i.d,v=i.e,f=o.e,d=e.e;d.a;var y=d.b,m=d.c,b=d.d,S=d.e;return Re(Ke,0,a,c,Re(Ke,1,u,l,h,v),Re(Ke,1,r,s,f,Re(Ke,0,y,m,b,S)))}else{var t=e.a,r=e.b,s=e.c,R=e.d;R.a;var a=R.b,c=R.c,_=R.d,f=R.e,T=e.e;T.a;var y=T.b,m=T.c,b=T.d,S=T.e;return Re(Ke,1,r,s,Re(Ke,0,a,c,_,f),Re(Ke,0,y,m,b,S))}else return e},XA=Qd(function(e,t,r,s,o,a,c){if(a.$===-1&&!a.a){a.a;var i=a.b,u=a.c,l=a.d,h=a.e;return Re(Ke,r,i,u,l,Re(Ke,0,s,o,h,c))}else{e:for(;;)if(c.$===-1&&c.a===1)if(c.d.$===-1)if(c.d.a===1){c.a;var v=c.d;return v.a,ig(t)}else break e;else return c.a,c.d,ig(t);else break e;return t}}),Gu=function(e){if(e.$===-1&&e.d.$===-1){var t=e.a,r=e.b,s=e.c,o=e.d,a=o.a,c=o.d,i=e.e;if(a===1){if(c.$===-1&&!c.a)return c.a,Re(Ke,t,r,s,Gu(o),i);var u=S0(e);if(u.$===-1){var l=u.a,h=u.b,v=u.c,f=u.d,d=u.e;return Re(lo,l,h,v,Gu(f),d)}else return vn}else return Re(Ke,t,r,s,Gu(o),i)}else return vn},eu=D(function(e,t){if(t.$===-2)return vn;var r=t.a,s=t.b,o=t.c,a=t.d,c=t.e;if(dt(e,s)<0)if(a.$===-1&&a.a===1){a.a;var i=a.d;if(i.$===-1&&!i.a)return i.a,Re(Ke,r,s,o,p(eu,e,a),c);var u=S0(t);if(u.$===-1){var l=u.a,h=u.b,v=u.c,f=u.d,d=u.e;return Re(lo,l,h,v,p(eu,e,f),d)}else return vn}else return Re(Ke,r,s,o,p(eu,e,a),c);else return p(eT,e,cb(XA,e,t,r,s,o,a,c))}),eT=D(function(e,t){if(t.$===-1){var r=t.a,s=t.b,o=t.c,a=t.d,c=t.e;if(Be(e,s)){var i=YA(c);if(i.$===-1){var u=i.b,l=i.c;return Re(lo,r,u,l,a,Gu(c))}else return vn}else return Re(lo,r,s,o,a,p(eu,e,c))}else return vn}),yv=D(function(e,t){var r=p(eu,e,t);if(r.$===-1&&!r.a){r.a;var s=r.b,o=r.c,a=r.d,c=r.e;return Re(Ke,1,s,o,a,c)}else{var i=r;return i}}),tT=Se(function(e,t,r){var s=t(p($o,e,r));if(s.$)return p(yv,e,r);var o=s.a;return U(zn,e,o,r)}),yo=function(e){return p(vE,"application/json",p(Rl,0,e))},rT=D(function(e,t){return{$:3,a:e,b:t}}),Qi=function(e){return{$:0,a:e}},nT=function(e){return{$:1,a:e}},iT=function(e){return{$:2,a:e}},oT=function(e){return{$:1,a:e}},sT={$:0},$0=function(e){return{$:4,a:e}},po=nw,aT=D(function(e,t){return{$:0,a:e,b:t}}),cT=function(e){return{$:1,a:e}},uT=ht(function(e,t,r,s){return{bP:s,dc:t,aG:e,cA:r}}),lT=function(e){return p(Zc,e,Lr(0))},_r=J1,y0=rw,pT=K1,Ol=Y1,ut=G1,hT=V1;function Cv(){return Ol($([U(So,aT,p(Ue,"name",ut),bv()),p(Mt,cT,hT)]))}function bv(){return Re(y0,uT,p(Ue,"name",ut),p(Ue,"message",ut),p(Ue,"stackLines",_r(ut)),p(Ue,"cause",Ol($([pT(fe),p(Mt,ne,lT(function(e){return Cv()}))]))))}var C0=Cv();Cv=function(){return C0};var dT=bv();bv=function(){return dT};var mp=function(e){return et(Qi($0("Runtime error in JavaScript interop: "+(e+". JavaScript console may contain more information about the issue."))))},vT=D(function(e,t){switch(t.$){case 0:var r=t.a;return mp("bad url "+r);case 1:return mp("timeout");case 2:return et(Qi(sT));case 3:var s=t.a.dy,i=t.b;if(s===400)return et(Qi(iT(i)));if(s===404)return et(Qi(oT(i)));if(s===500){var o=p(po,C0,i);if(o.$){var c=o.a;return et(Qi($0(av(c))))}else{var a=o.a;return et(nT(a))}}else return mp("unexpected status "+Nt(s));default:var i=t.b,u=p(po,e,i);if(u.$){var c=u.a;return et(Qi(p(rT,c,i)))}else{var l=u.a;return ct(l)}}}),b0=p(Ib,"",Ct),R0=Se(function(e,t,r){return{aS:yo(r),b0:q,a$:"POST",a7:b0(vT(t)),cE:fe,bg:HA(e)}}),iu=ub,fT=function(e){if(e.$){var r=e.a;return iu(r)}else{var t=e.a;return Zt(t)}},jl=function(e){return U(Tb,0,fT,{cN:!1,aS:e.aS,c1:e.a7,b0:e.b0,a$:e.a$,cE:e.cE,cF:fe,bg:e.bg})},gT=D(function(e,t){return jl(U(R0,e.c4,e.dF,e.cO(t)))}),Kn=D(function(e,t){return p(gT,{cO:e.cO,c4:f0(e.c4),dF:e.dF},t)}),yt=Cl,We=Cl,_0=function(e){return p(be,Kn({cO:We,c4:"localStorageGet",dF:e}),Gn(function(t){if(!t.$&&t.a.$===3){var r=t.a,s=r.a;return iu(s)}else return iu(p(bl,"",yt(0)))}))},mT=function(e){return{$:1,a:e}},ji=function(e){return{$:5,a:e}},Rd=function(e){return{$:3,a:e}},zi=function(e){return{$:2,a:e}},zl=function(e){return{$:0,a:e}},og=function(e){return{$:1,a:e}},xn=Cl,P0=Kn({cO:xn,c4:"googleGetToken",dF:ut}),ST=P0(!1),$T=P0(!0),_d=D(function(e,t){return p(Gn,p(nt,iu,e),t)}),pl=D(function(e,t){if(t.$){var s=t.a;return s}else{var r=t.a;return p(Gn,function(o){return!o.$&&o.a.$===3&&o.a.a===401?p(sr,function(a){return p(r,a,e)},p(_d,og,$T)):iu(o)},p(sr,function(o){return p(r,o,e)},p(_d,og,ST)))}}),xl=D(function(e,t){return zl(function(){if(t.$){var s=t.a;return D(function(o,a){return p(sr,p(nt,pl(a),e),s)})}else{var r=t.a;return D(function(o,a){return p(sr,p(nt,pl(a),e),p(r,o,a))})}}())}),Co=function(e){return{$:0,a:e}},Rv=function(e){return xe($(["v4","spreadsheets"]),e)},yT=function(e){var t=e.a,r=e.b;return t+("="+r)},CT=function(e){return e.b?"?"+p(pt,"&",p(Oe,yT,e)):""},_v=Se(function(e,t,r){return e+("/"+(p(pt,"/",t)+CT(r)))}),Pv=D(function(e,t){return U(_v,"https://sheets.googleapis.com",e,t)}),At=D(function(e,t){return U(Li,lw(e),aw(),t)}),Ye=function(e){return U(Li,D(function(t,r){var s=t.a,o=t.b;return U(uw,s,o,r)}),cw(),e)},bT=function(e){var t=e.af;return Ye($([n("userEnteredValue",We(t))]))},RT=function(e){var t=e.bL,r=e.T;return Ye($([n("type",We(t)),n("values",p(At,bT,r))]))},_T=function(e){var t=e.bj,r=e.bJ;return Ye($([n("condition",RT(t)),n("strict",xn(r))]))},Pd=function(e){switch(e){case 0:return We("DIMENSION_UNSPECIFIED");case 1:return We("ROWS");default:return We("COLUMNS")}},PT=function(e){var t=e.by;return Ye($([n("pixelSize",yt(t))]))},Sp=function(e){var t=e.q,r=e.al,s=e.bH,o=e.bo;return Ye($([n("sheetId",yt(t)),n("dimension",Pd(r)),n("startIndex",yt(s)),n("endIndex",yt(o))]))},Rt=D(function(e,t){if(t.$)return fe;var r=t.a;return ne(e(r))}),un=function(e){var t=e.a,r=e.b,s=e.c;return p(Rt,function(o){return n(t,s(o))},r)},wT=Se(function(e,t,r){var s=e(t);if(s.$)return r;var o=s.a;return p(it,o,r)}),hu=D(function(e,t){return U(Wn,wT(e),q,t)}),wv=function(e){return p(hu,Ct,e)},Qc=function(e){return Ye(p(it,n("sheetId",yt(e.q)),wv($([un(se("startRowIndex",e.bb,yt)),un(se("endRowIndex",e.aW,yt)),un(se("startColumnIndex",e.ba,yt)),un(se("endColumnIndex",e.aV,yt))]))))},ET=function(e){var t=e.bt,r=e.bs;return Ye(wv($([un(se("frozenRowCount",t,yt)),un(se("frozenColumnCount",r,yt))])))},sg=function(e){return Ye(wv($([un(se("sheetId",e.q,yt)),un(se("title",e.be,We)),un(se("gridProperties",e.aY,ET))])))},AT=Cl,TT=function(e){return Ye($([function(){switch(e.$){case 0:var t=e.a;return n("numberValue",AT(t));case 1:var r=e.a;return n("stringValue",We(r));case 2:var s=e.a;return n("boolValue",xn(s));default:var o=e.a;return n("formulaValue",We(o))}}()]))},IT=function(e){var t=e.af;return Ye($([n("userEnteredValue",TT(t))]))},ag=function(e){var t=e.T;return Ye($([n("values",p(At,IT,t))]))},DT=function(e){return Ye(function(){switch(e.$){case 0:var s=e.a.ar;return $([n("addSheet",Ye($([n("properties",sg(s))])))]);case 1:var c=e.a.I,t=e.a.ct;return $([n("setDataValidation",Ye($([n("range",Qc(c)),n("rule",_T(t))])))]);case 2:var r=e.a.bA,o=e.a.an,c=e.a.I;return $([n("updateCells",Ye($([n("rows",p(At,ag,r)),n("fields",We(o)),n("range",Qc(c))])))]);case 3:var u=e.a.q,r=e.a.bA,o=e.a.an;return $([n("appendCells",Ye($([n("sheetId",yt(u)),n("rows",p(At,ag,r)),n("fields",We(o))])))]);case 4:var s=e.a.ar,o=e.a.an,c=e.a.I;return $([n("updateDimensionProperties",Ye($([n("properties",PT(s)),n("fields",We(o)),n("range",Sp(c))])))]);case 5:var c=e.a.I,l=e.a.al;return $([n("deleteRange",Ye($([n("range",Qc(c)),n("shiftDimension",Pd(l))])))]);case 6:var s=e.a.ar,o=e.a.an;return $([n("updateSheetProperties",Ye($([n("properties",sg(s)),n("fields",We(o))])))]);case 7:var c=e.a.I,a=e.a.c6;return $([n("insertDimension",Ye($([n("range",Sp(c)),n("inheritFromBefore",xn(a))])))]);case 8:var c=e.a.I,i=e.a.cV;return $([n("deleteDuplicates",Ye($([n("range",Qc(c)),n("comparisonColumns",p(At,Sp,i))])))]);default:var u=e.a.q,l=e.a.al,h=e.a.b7;return $([n("appendDimension",Ye($([n("sheetId",yt(u)),n("dimension",Pd(l)),n("length",yt(h))])))])}}())},w0=function(e){return Ye($([n("requests",p(At,DT,e.a6)),n("includeSpreadsheetInResponse",xn(e.aZ)),n("responseRanges",p(At,We,e.a9)),n("responseIncludeGridData",xn(e.a8))]))},kT=function(e){return{dE:e}},MT=function(e){return{dx:e}},OT=D(function(e,t){return{cY:t,ar:e}}),jT=function(e){return{du:e}},xi=function(e){return Ol($([p(Mt,ne,e),Lr(fe)]))},zT=function(e){return{T:e}},xT=function(e){return{c$:e}},NT=function(e){return{$:2,a:e}},qT=function(e){return{$:4,a:e}},LT=function(e){return{$:3,a:e}},BT=function(e){return{$:0,a:e}},FT=function(e){return{$:1,a:e}},E0=H1,UT=W1,HT=Ol($([p(Mt,BT,p(Ue,"numberValue",UT)),p(Mt,FT,p(Ue,"stringValue",ut)),p(Mt,NT,p(Ue,"boolValue",E0)),p(Mt,LT,p(Ue,"stringValue",ut)),p(Mt,qT,p(Ue,"errorValue",p(Ue,"message",ut)))])),WT=p(Mt,xT,xi(p(Ue,"effectiveValue",HT))),VT=p(Mt,zT,xi(p(Ue,"values",_r(WT)))),GT=p(Mt,jT,xi(p(Ue,"rowData",_r(VT)))),JT=Se(function(e,t,r){return{aY:e,q:t,be:r}}),ki=U1,A0=tw,KT=function(e){return{cU:e}},ZT=p(Mt,KT,p(Ue,"columnCount",ki)),QT=rt(A0,JT,p(Ue,"gridProperties",ZT),p(Ue,"sheetId",ki),p(Ue,"title",ut)),YT=U(So,OT,p(Ue,"properties",QT),p(Ue,"data",_r(GT))),T0=p(Mt,MT,p(Ue,"sheets",_r(YT))),XT=p(Mt,kT,p(Ue,"updatedSpreadsheet",T0)),I0=function(e){return{$:4,a:e}},D0=function(e){return{$:3,a:e}},k0=function(e){return{$:0,a:e}},xo=function(e){return{$:0,a:e}},M0={$:2},O0={$:1},eI=D(function(e,t){switch(t.$){case 0:var r=t.a;return et(xo(k0(r)));case 1:return et(xo(O0));case 3:var s=t.a.dy;return et(xo(D0(s)));case 2:return et(xo(M0));default:var o=t.b,a=p(po,e,o);if(a.$===1)return et(xo(I0(o)));var c=a.a;return ct(c)}}),hl=function(e){return b0(eI(e))},tI=D(function(e,t){return{$:0,a:e,b:t}}),rI=tI,j0=function(e){return p(rI,"Authorization","Bearer "+e)},Ev=function(e){return zl(D(function(t,r){var s=e(r),o=s.a$,a=s.bg,c=s.aS,i=s.a7;return jl({aS:c,b0:$([j0(t)]),a$:o,a7:function(){if(i.$){var l=i.a;return hl(Lr(l))}else{var u=i.a;return hl(u)}}(),cE:fe,bg:a})}))},nI=D(function(e,t){return{$:0,a:e,b:t}}),cg=gE,ho=D(function(e,t){return p(nI,cg(e),cg(t))}),wd=D(function(e,t){return Ev(function(r){return{aS:yo(w0({aZ:!0,a6:e,a8:!0,a9:t})),a$:"POST",a7:Co(XT),bg:p(Pv,Rv($([r+":batchUpdate"])),$([p(ho,"fields","updatedSpreadsheet.sheets(properties(sheetId,title,gridProperties.columnCount),data.rowData.values.effectiveValue)")]))}})}),Zr=D(function(e,t){if(t.$)return fe;var r=t.a;return e(r)}),Dn=function(e){var t=e.c$;if(!t.$&&t.a.$===1){var r=t.a.a;return ne(r)}else return fe},Qr=function(e){if(e.b){var t=e.a;return e.b,ne(t)}else return fe},iI=p(be,Qr,Zr(Dn)),Av=function(e){return p(be,function(t){return t.dx},p(be,Qr,p(be,Rt(function(t){return t.cY}),p(be,Zr(Qr),p(be,Zr(function(t){return t.du}),p(be,bt(q),p(be,Oe(p(be,function(t){return t.T},p(be,bt(q),e))),hu(Ct))))))))},Nl=function(e){return!e.b},z0=function(e){var t=D(function(r,s){var o=r.a,a=r.b,c=s.a,i=s.b;return n(p(it,o,c),p(it,a,i))});return U(Wn,t,n(q,q),e)},oI=D(function(e,t){e:for(;;){var r=t.a,s=t.b,o=z0(p(Oe,e,s));if(o.b.b)if(o.b.a.b){var a=o.a,c=o.b,i=e,u=n(p(it,a,r),c);e=i,t=u;continue e}else{var a=o.a;return o.b,Or(p(Cr,p(nt,d0,Nl),p(Oe,hu(Ct),p(it,a,r))))}else return q}}),sI=D(function(e,t){var r=t.a,s=t.b;return n(e(r),s)}),aI=function(e){return p(be,function(t){return t.dx},p(be,Qr,p(be,Rt(function(t){return t.cY}),p(be,Zr(Qr),p(be,Zr(function(t){return t.du}),p(be,bt(q),p(be,Oe(p(be,function(t){return t.T},p(be,bt(q),e))),p(be,z0,p(be,sI(function(t){return $([t])}),oI(e))))))))))},x0=function(e){return{$:1,a:e}},Ed=D(function(e,t){if(t.$){var r=t.a;return x0(p(co,e,r))}else{var r=t.a;return zl(D(function(s,o){return p(co,e,p(r,s,o))}))}}),cI=vr(function(e,t,r,s,o){return{cR:s,de:o,cv:t,cD:r,cI:e}}),N0=function(e){var t=e.c$;if(!t.$&&!t.a.$){var r=t.a.a;return ne(r)}else return fe},q0=D(function(e,t){return{ap:t,_:ne(e)}}),uI=function(e){var t=e._,r=e.ap;return n(t,r)},cn=D(function(e,t){var r=t.ap,s=t._,o=n(r,s);if(o.a.b)if(o.b.$){var l=o.a,i=l.b;return o.b,{ap:i,_:fe}}else{var a=o.a,c=a.a,i=a.b,u=o.b.a;return{ap:i,_:p(Rt,u,e(c))}}else return{ap:r,_:fe}}),vo=Ct,L0=y1,Tv=function(e){if(e.$)return fe;var t=e.a;return ne(t)},lI=p(be,q0(cI),p(be,cn(Dn),p(be,cn(Dn),p(be,cn(p(be,Dn,p(be,Rt(po(_r(ut))),Zr(Tv)))),p(be,cn(Dn),p(be,cn(p(be,N0,p(be,Rt(L0),Rt(vo)))),uI)))))),Ad=10,Ju=function(e){return p(Oe,function(t){return{T:p(Oe,function(r){return{af:r}},t)}},e)},fn=function(e){return Ju($([e]))},st=function(e){switch(e){case 0:return 0;case 1:return 100;case 2:return 200;case 3:return 300;case 4:return 400;default:return 500}},eo=function(e){switch(e){case 0:return"query";case 1:return"migratons";case 2:return"pending_sentences";case 3:return"mined_sentences";case 4:return"mined_words";default:return"backlog_sentences"}},pI=function(e){return p(Ed,p(be,function(t){return t.dE},aI(lI)),p(xl,function(t){return p(wd,p(it,ji({al:1,I:{aV:fe,aW:fe,q:st(0),ba:ne(0),bb:ne(0)}}),p(Rr,D(function(r,s){return zi({an:"userEnteredValue",I:{aV:ne(r*5+5),aW:fe,q:st(0),ba:ne(r*5),bb:ne(0)},bA:fn($([Rd("=QUERY("+(eo(3)+('!A1:E,"'+("SELECT * WHERE D = '"+(s+`' OR D = 'batch_id'")`)))))]))})}),t)),$([eo(0)+"!A2:ZZ"]))},p(Ed,p(be,function(t){return t.dE},Av(iI)),p(wd,$([ji({al:1,I:{aV:fe,aW:fe,q:st(0),ba:ne(0),bb:ne(0)}}),zi({an:"userEnteredValue",I:{aV:ne(1),aW:ne(1),q:st(0),ba:ne(0),bb:ne(0)},bA:fn($([Rd("=QUERY("+(eo(3)+('!A2:E,"'+("SELECT COUNT(D), D, AVG(E) "+("WHERE D <> '' "+("GROUP BY D "+("ORDER BY AVG(E) DESC "+("LIMIT "+(Nt(Ad)+(" OFFSET "+(Nt(e*Ad)+'")')))))))))))]))})]),$([eo(0)+"!B2:B"])))))},Ii=function(e){return ul(o0(e))},hI=function(e){return e},Dr=D(function(e,t){return hI(function(r){return p(Jn,e,p(pl,r,t))})}),B0=function(e){return Ii(p(Dr,mT,pI(e)))},Td="speech_config",dI=function(e){return se({W:q,ak:0,g:{V:q,ao:!1,l:"",n:"",E:{l:ne(""),n:ne("")}},G:v0,Y:$v,aI:!1,at:e},p(Jn,UA,p(_0,U(So,FA,p(Ue,"key",ut),p(Ue,"region",ut)),Td)),B0(0))},Id={$:0},F0={$:0},vI=function(e){return{$:0,a:e}},fo=jn,He=i0,Dd="tags",fI=function(e){return se({j:{U:0,M:Id,i:fe,cv:"",cD:q,u:{ao:!1,B:"",cD:q},K:q},d:{F:0,v:{H:0,ao:!1,cv:{cM:vo(0),cv:"",cD:q,cI:""}},N:0,f:{H:0,ao:!1,aq:"",cv:{cM:vo(0),cv:"",cD:q,cI:""},E:{cv:fe,cI:fe}},O:0,Y:F0,i:fo},at:e,y:0},p(Jn,vI,p(_0,_r(ut),Dd)),He)},gI=D(function(e,t){if(e.$)return Cd(t);switch(e.a){case 0:return e.a,Cd(t);case 1:return e.a,rt(yd,t,fI,Ml,fv);default:return e.a,rt(yd,t,dI,kl,vv)}}),ug=D(function(e,t){return p(Gn,function(r){return Zt(0)},p(Kn,{cO:function(r){return Ye($([n("id",yt(e)),n("timeout",yt(t))]))},c4:"timeout",dF:ki},0))}),mI=function(e){return G(e,{br:ne("/"+p(pt,"/",Zb(e)))})},SI=function(e){switch(e.$){case 0:return q;case 1:var t=e.a;return $([t]);default:var r=e.a;return r}},$I=function(e){return{$:0,a:e}},yI=function(e){return{$:2,a:e}},CI=function(e){return{$:1,a:e}},bI={$:1},RI={$:1},$p={$:5},Gi=function(e){return{$:9,a:e}},kd=function(e){return{$:3,a:e}},_I=function(e){return{$:1,a:e}},PI=function(e){return{$:5,a:e}},lg=function(e){return{$:7,a:e}},wI=function(e){return{$:4,a:e}},EI=function(e){return{$:6,a:e}},Md=function(e){return{$:8,a:e}},AI={$:2},TI={$:4},II=function(e){return{$:4,a:e}},DI=function(e){return{$:3,a:e}},kI=D(function(e,t){return{$:5,a:e,b:t}}),Od=function(e){return{$:3,a:e}},MI=function(e){return{$:7,a:e}},jd={$:4},OI={$:2},ql=function(e){var t=e.a$,r=e.bg,s=e.aS,o=e.a7;return zl(D(function(a,c){return jl({aS:s,b0:$([j0(a)]),a$:t,a7:function(){if(o.$){var u=o.a;return hl(Lr(u))}else{var i=o.a;return hl(i)}}(),cE:fe,bg:r})}))},Ll=D(function(e,t){return U(_v,"https://www.googleapis.com",e,t)}),Bl=function(e){return xe($(["drive","v3"]),e)},Fl=function(e){return e?"application/vnd.google-apps.spreadsheet":"application/vnd.google-apps.folder"},U0=function(e){return Ye($t($([$([n("mimeType",We(e.aF)),n("name",We(e.aG))]),p(bt,q,p(Rt,function(t){return $([n("parents",p(At,We,t))])},e.a4))])))},jI=function(e){return{Z:e}},H0=p(Mt,jI,p(Ue,"id",ut)),Ul=function(e){return e?"MainSheet":"SentenceBaseData"},zI=ql({aS:yo(U0({aF:Fl(0),aG:Ul(0),a4:fe})),a$:"POST",a7:Co(H0),bg:p(Ll,Bl($(["files"])),q)}),pg=function(e){return ql({aS:yo(U0({aF:Fl(1),aG:Ul(1),a4:ne($([e]))})),a$:"POST",a7:Co(H0),bg:p(Ll,Bl($(["files"])),q)})},No=D(function(e,t){return p(Jn,e,p(pl,0,t))}),Iv=dE,xI=function(e){return{b_:e}},NI=ht(function(e,t,r,s){return{Z:r,da:e,aF:t,aG:s}}),qI=Re(y0,NI,p(Ue,"kind",ut),p(Ue,"mimeType",ut),p(Ue,"id",ut),p(Ue,"name",ut)),W0=p(Mt,xI,p(Ue,"files",_r(qI))),LI=ql({aS:Iv,a$:"GET",a7:Co(W0),bg:p(Ll,Bl($(["files"])),$([p(ho,"q","name = '"+(Ul(0)+("' and mimeType = '"+(Fl(0)+"'")))),p(ho,"orderBy","createdTime")]))}),BI=function(e){return ql({aS:Iv,a$:"GET",a7:Co(W0),bg:p(Ll,Bl($(["files"])),$([p(ho,"q","name = '"+(Ul(1)+("' and mimeType = '"+(Fl(1)+("' and '"+(e+"' in parents")))))),p(ho,"orderBy","createdTime")]))})},FI=p(Kn,{cO:function(e){return xn(!1)},c4:"googleGetToken",dF:ut},0),UI={$:0},An=UI,HI=function(e){return{$:1,a:e}},Jr=function(e){return HI(e)},WI=D(function(e,t){return Jr(t(e))}),Vt=D(function(e,t){return p(bt,An,p(Rt,WI(t),e.a_))}),VI={$:6},V0=function(e){return{$:0,a:e}},G0=function(e){return{$:0,a:e}},GI=function(e){return{$:0,a:e}},JI=function(e){return Ye($([n("gridRange",Qc(e.bu))]))},KI=function(e){return Ye($([n("dataFilters",p(At,JI,e.bl))]))},J0=function(e){return Ev(function(t){return{aS:yo(KI({bl:p(Oe,function(r){return{bu:r}},e)})),a$:"POST",a7:Co(T0),bg:p(Pv,Rv($([t+":getByDataFilter"])),$([p(ho,"fields","sheets(properties(sheetId,title,gridProperties.columnCount),data.rowData.values.effectiveValue)")]))}})},ZI={Z:"SetupMigrations",c8:p(Dr,GI,J0($([{aV:ne(1),aW:fe,q:st(1),ba:ne(0),bb:ne(1)}]))),df:{ah:fo}},Ni=D(function(e,t){var r=t;return r(e)}),K0=ht(function(e,t,r,s){return{Z:s.Z,aD:p(hr,t,p(Ni,r,s.c8)),da:e(s.df)}}),Z0=function(e){return{$:1,a:e}},Q0=function(e){return{$:1,a:e}},QI=Se(function(e,t,r){return function(s){return rt(K0,p(be,r,Q0),p(be,t,Z0),s,e)}}),YI=function(e){return{$:0,a:e}},Y0=function(e){return{$:9,a:e}},XI=function(e){return{$:1,a:e}},xt=function(e){return{$:1,a:e}},eD=function(e){return{$:4,a:e}},dl=D(function(e,t){return $t(p(Oe,e,t))}),tD=b1,Hl=function(e){return p(tD,e,"")},X0=B1,rD=function(e){return"=AND("+(p(pt,",",p(Rr,D(function(t,r){return"NOT(ISBLANK($"+(Hl(X0(pu("A")+t))+"2))")}),e))+")")},eR=D(function(e,t){return $t($([p(dl,function(r){return $t($([$([YI({ar:{aY:ne({bs:ne(0),bt:ne(1)}),q:ne(r.Z),be:ne(r.aG)}}),zi({an:"userEnteredValue",I:{aV:ne(dn(r.ai)),aW:ne(1),q:r.Z,ba:ne(0),bb:ne(0)},bA:$([{T:p(Oe,function(s){var o=s.a;return{af:xt(o)}},r.ai)}])}),XI({I:{aV:ne(dn(r.ai)),aW:fe,q:r.Z,ba:ne(0),bb:ne(1)},ct:{bj:{bL:"CUSTOM_FORMULA",T:$([{af:rD(r.ai)}])},bJ:!0}})]),r.bh>0?$([Y0({al:2,b7:r.bh,q:r.Z})]):q]))},t),p(dl,function(r){return p(Rr,D(function(s,o){var a=o.b;return eD({an:"pixelSize",ar:{by:e(a)},I:{al:2,bo:s+1,q:r.Z,bH:s}})}),r.ai)},t)]))}),nD=function(e){return{$:1,a:e}},Zn=function(e){return Ev(function(t){return{aS:yo(w0({aZ:!1,a6:e,a8:!1,a9:q})),a$:"POST",a7:nD(0),bg:p(Pv,Rv($([t+":batchUpdate"])),q)}})},iD=function(e){switch(e){case 0:return 200;case 1:return 100;case 2:return 500;case 3:return 150;default:return 300}},oD=Zn(p(eR,iD,$([{bh:0,ai:$([n("word",1),n("sentence",2),n("tags",3),n("added_at",0)]),Z:200,aG:"pending_sentences"},{bh:0,ai:$([n("word",1),n("sentence",2),n("tags",3),n("batch_id",4),n("mined_at",0)]),Z:300,aG:"mined_sentences"},{bh:0,ai:$([n("word",1),n("mined_at",0)]),Z:400,aG:"mined_words"},{bh:0,ai:$([n("word",1),n("sentence",2),n("tags",3),n("backlogged_at",0)]),Z:500,aG:"backlog_sentences"}]))),sD={Z:"SentencesAndWords",c8:p(Dr,Ct,oD),df:0},aD=$([U(QI,sD,Ct,Ct)]),cD=function(e){var t=rt(K0,G0,V0,e,ZI);return n({dd:p(it,t,p(Oe,function(r){return r(e)},aD)),q:e},t.aD)},hg=function(e){var t=cD(e.P),r=t.a,s=t.b;return se(G(e,{o:Od(r)}),p(hr,Md,s),p(Vt,e,VI))},dg={$:8},uD=function(e){var t=e.t;if(t.b){var r=t.a;return se(G(e,{o:jd}),p(hr,kd,p(Ni,e.P,r)),p(Vt,e,dg))}else return se(G(e,{o:jd}),de,p(Vt,e,dg))},vg={$:3},tR=function(e){return{$:2,a:e}},Dv={$:0},fg=function(e){return{$:1,a:e}},rR=D(function(e,t){return se(G(t,{dd:q}),de,tR(e))}),nR=Bn(function(e,t,r,s,o,a){var c=a.a,i=a.b;return se(G(r,{dd:p(it,G(s,{da:e(c)}),o)}),p(hr,t,i),Dv)}),lD=D(function(e,t){var r=p($o,e,t);return!r.$}),ou=D(function(e,t){var r=t;return p(lD,e,r)}),pD=function(e){return{$:1,a:e}},hD=function(e){return{$:3,a:e}},dD=function(e){return{$:4,a:e}},vD=function(e){return{$:6,a:e}},fD=function(e){return e?200:150},gD=function(e){return{$:0,a:e}},kv=D(function(e,t){return gD(p(Dr,e,t))}),gg=D(function(e,t){return p(kv,e,Zn(p(eR,fD,$([t]))))}),xu=100,iR=function(e){return{$:2,a:e}},yp=function(e){return iR(e)},Mv=D(function(e,t){var r=t;return U(zn,e,0,r)}),oR=function(e){return U(Li,Mv,fo,e)},mD=p(be,Qr,p(be,Zr(function(e){return e.c$}),Zr(function(e){if(e.$===1){var t=e.a;return ne(t)}else return fe}))),SD=p(be,Av(mD),oR),$D=p(be,function(e){return e.dx},p(be,Qr,Rt(p(be,function(e){return e.ar},p(be,function(e){return e.aY},function(e){return e.cU}))))),yD=p(be,function(e){return e.dx},p(be,Qr,Rt(p(be,function(e){return e.ar},function(e){return e.be})))),CD=function(e){return{$:1,a:e}},Yi=function(e){return CD(e)},bD=function(e){return{$:2,a:e}},mg=p(kv,bD,J0($([{aV:ne(1),aW:ne(1),q:st(0),ba:ne(0),bb:ne(0)}]))),Sg=0,Cp="query",RD=D(function(e,t){switch(e.$){case 0:if(e.a.$===1){if(!e.a.a.$&&e.a.a.a.$===3&&e.a.a.a.a===400)return n(t,p(gg,pD,{bh:0,ai:$([n("name",0),n("applied_at",1)]),Z:100,aG:"migrations"}));var r=e.a.a;return n(t,Yi(r))}else{var s=e.a.a;return n(G(t,{ah:SD(s)}),mg)}case 1:if(e.a.$===1){var r=e.a.a;return n(t,Yi(r))}else return n(t,mg);case 2:if(e.a.$===1){if(!e.a.a.$&&e.a.a.a.$===3&&e.a.a.a.a===400)return n(t,p(gg,hD,{bh:xu,ai:q,Z:0,aG:"query"}));var r=e.a.a;return n(t,Yi(r))}else{var s=e.a.a,o=p(bt,"",yD(s)),a=p(bt,0,$D(s));return Be(o,Cp)&&dt(a,xu)>-1?n(t,yp(t.ah)):n(t,p(kv,dD,Zn($t($([Be(o,Cp)?q:$([vD({an:"title",ar:{aY:fe,q:ne(Sg),be:ne(Cp)}})]),dt(a,xu)<0?$([Y0({al:2,b7:xu-a,q:Sg})]):q])))))}case 4:if(e.a.$===1){var r=e.a.a;return n(t,Yi(r))}else return n(t,yp(t.ah));default:if(e.a.$===1){var r=e.a.a;return n(t,Yi(r))}else return n(t,yp(t.ah))}}),_D=iR(0),PD=D(function(e,t){if(e.$===1){var r=e.a;return n(t,Yi(r))}else return n(t,_D)}),wD=function(e){return{$:2,a:e}},no=function(e){return{$:3,a:e}},ED=function(e){return{$:0,a:e}},sR=function(e){var t=e;return t},Mn=function(e){return ED(sR(e))},AD=D(function(e,t){return Zn($([no({an:"userEnteredValue",bA:fn($([xt(e),Mn(t)])),q:st(1)})]))}),Ov=oE(vo),TD={$:2},jv=function(e){return x0(p(_d,function(t){return TD},e))},ID=vr(function(e,t,r,s,o){var a=p(r,e,t),c=a.a,i=a.b;return Se(function(u,l,h){switch(i.$){case 0:var v=i.a;return Oi(nR,p(be,o,Q0),p(be,s,Z0),u,l,h,n(c,p(Ni,u.q,v)));case 1:var f=i.a;return p(rR,f,u);default:return se(G(u,{dd:h}),p(Ni,u.q,p(Dr,wD,p(xl,AD(l.Z),jv(Ov)))),Dv)}})}),DD=D(function(e,t){var r=n(e,t),s=r.a,o=r.b;return Re(ID,s,o,PD,Ct,Ct)}),kD=D(function(e,t){var r=function(){var _=t.dd;if(_.b){var T=_.a,k=T.da,I=_.b;return ne(se(k,T,I))}else return fe}(),s=n(e,r);e:for(;;)switch(s.a.$){case 0:if(!s.b.$&&!s.b.a.a.$){var o=s.a.a,a=s.b.a,c=a.a.a,i=a.b,u=a.c,l=p(RD,o,c),h=l.a,v=l.b;switch(v.$){case 0:var f=v.a;return Oi(nR,G0,V0,t,i,u,n(h,p(Ni,t.q,f)));case 1:var d=v.a;return p(rR,d,t);default:var y=v.a,m=p(Cr,function(_){return!p(ou,_.Z,y)},u);if(m.b){var b=m.a;return se(G(t,{dd:m}),b.aD,fg(b.Z))}else return se(G(t,{dd:q}),de,vg)}}else break e;case 1:if(!s.b.$&&s.b.a.a.$===1){var o=s.a.a,S=s.b.a,c=S.a.a,i=S.b,u=S.c;return Re(DD,o,c,t,i,u)}else break e;default:if(s.a.a.$===1){var d=s.a.a.a;return se(G(t,{dd:q}),de,tR(d))}else{var R=t.dd;if(R.b){var b=R.a;return se(t,b.aD,fg(b.Z))}else return se(G(t,{dd:q}),de,vg)}}return se(t,de,Dv)}),MD=D(function(e,t){var r=n(t.o,e);e:for(;;)switch(r.b.$){case 1:if(r.a.$===1)if(r.b.a.$){r.a;var s=r.b.a.a;return se(G(t,{o:Ti}),de,p(Vt,t,Gi($I(s))))}else return r.a,se(G(t,{o:OI}),p(No,wI,LI),p(Vt,t,AI));else break e;case 4:if(r.a.$===2)if(r.b.a.$){r.a;var s=r.b.a.a;return se(G(t,{o:Ti}),de,p(Vt,t,Gi(CI(s))))}else{r.a;var o=r.b.a.a,a=o.b_;if(a.b){var c=a.a;return se(G(t,{ay:c.Z}),p(No,EI,BI(c.Z)),p(Vt,t,TI))}else return se(t,p(No,PI,zI),p(Vt,t,$p))}else break e;case 5:if(r.a.$===2)if(r.b.a.$){r.a;var s=r.b.a.a;return se(G(t,{o:Ti}),de,p(Vt,t,Gi(yI(s))))}else{r.a;var o=r.b.a.a;return se(G(t,{ay:o.Z}),p(No,lg,pg(o.Z)),p(Vt,t,$p))}else break e;case 6:if(r.a.$===2)if(r.b.a.$){r.a;var s=r.b.a.a;return se(G(t,{o:Ti}),de,p(Vt,t,Gi(DI(s))))}else{r.a;var o=r.b.a.a,i=o.b_;if(i.b){var c=i.a;return hg(G(t,{P:c.Z}))}else return se(t,p(No,lg,pg(t.ay)),p(Vt,t,$p))}else break e;case 7:if(r.a.$===2)if(r.b.a.$){r.a;var s=r.b.a.a;return se(G(t,{o:Ti}),de,p(Vt,t,Gi(II(s))))}else{r.a;var o=r.b.a.a;return hg(G(t,{P:o.Z}))}else break e;case 8:if(r.a.$===3){var u=r.a.a,l=r.b.a,h=p(kD,l,u),v=h.a,f=h.b,d=h.c;switch(d.$){case 0:return se(G(t,{o:Od(v)}),p(hr,Md,f),An);case 1:var y=d.a;return se(G(t,{o:Od(v)}),p(hr,Md,f),p(Vt,t,MI(y)));case 2:var s=d.a;return se(G(t,{o:Ti}),de,p(Vt,t,Gi(p(kI,p(bt,"unknown",p(Rt,function(z){return z.Z},Qr(u.dd))),s))));default:return uD(t)}}else break e;case 2:if(r.b.a.$)if(r.a.$===4){r.a;var b=r.b.a.a;return se(G(t,{t:xe(t.t,$([b]))}),Nl(t.t)?p(hr,kd,p(Ni,t.P,b)):de,An)}else{var b=r.b.a.a;return se(G(t,{t:xe(t.t,$([b]))}),de,An)}else{if(r.a.$)break e;r.a;var m=r.b.a.a;return se(G(t,{a_:ne(m),o:bI}),p(Jn,_I,FI),p(Vt,t,RI))}case 3:if(r.a.$===4){r.a;var o=r.b.a,S=t.t;if(S.b)if(S.b.b){var R=S.b,_=R.a,T=R.b;return se(G(t,{t:p(it,_,T)}),p(hr,kd,p(Ni,t.P,_)),Jr(o))}else return se(G(t,{t:q}),de,Jr(o));else return se(t,de,An)}else{var o=r.b.a,k=t.t;if(k.b){var T=k.b;return se(G(t,{t:T}),de,Jr(o))}else return se(G(t,{o:jd}),de,An)}default:break e}return se(t,de,An)}),zv=ht(function(e,t,r,s){return{$:0,a:e,b:t,c:r,d:s}}),xv=mA(0),OD=function(e){return-e},$g=function(e){var t=e.a,r=(t^t>>>(t>>>28)+4)*277803737;return(r>>>22^r)>>>0},jD=D(function(e,t){return function(r){var s=dt(e,t)<0?n(e,t):n(t,e),o=s.a,a=s.b,c=a-o+1;if(c-1&c){var i=(-c>>>0)%c>>>0,u=function(l){e:for(;;){var h=$g(l),v=cl(l);if(dt(h,i)<0){var f=v;l=f;continue e}else return n(h%c+o,v)}};return u(r)}else return n(((c-1&$g(r))>>>0)+o,cl(r))}}),zD=D(function(e,t){var r=t;return function(s){var o=r(s),a=o.a,c=o.b;return n(e(a),c)}}),xD=2147483647,ND=-2147483648,Nu=p(zD,xv,p(jD,ND,xD)),qu=D(function(e,t){var r=e;return r(t)}),qD=function(e){var t=e.a,r=e.b,s=e.c,o=e.d;return rt(zv,t,r,xv(2147483648|1073741823&s),o)},LD=D(function(e,t){var r=t.a,s=t.b,o=t.c,a=t.d;return rt(zv,r,xv(e<<12|4294905855&s),o,a)}),aR=function(e){var t=p(qu,Nu,e.bE),r=t.a,s=t.b,o=p(qu,Nu,e.bD),a=o.a,c=o.b,i=p(qu,Nu,e.bC),u=i.a,l=i.b,h=p(qu,Nu,e.bB),v=h.a,f=h.b,d=qD(p(LD,4,rt(zv,v,u,a,r)));return n(d,rt(Xb,f,l,c,s))},cR=Se(function(e,t,r){return e<=0?r:U(cR,e>>1,xe(t,t),e&1?xe(r,t):r)}),BD=D(function(e,t){return U(cR,e,t,"")}),Tn=Se(function(e,t,r){return xe(p(BD,e-lv(r),Hl(t)),r)}),FD=q1,Ji=D(function(e,t){e:for(;;)if(t){var r=function(){var a=15&t;switch(a){case 0:return"0";case 1:return"1";case 2:return"2";case 3:return"3";case 4:return"4";case 5:return"5";case 6:return"6";case 7:return"7";case 8:return"8";case 9:return"9";case 10:return"a";case 11:return"b";case 12:return"c";case 13:return"d";case 14:return"e";default:return"f"}}(),s=p(it,r,e),o=t>>>4;e=s,t=o;continue e}else return FD(e)}),UD=D(function(e,t){var r=t.a,s=t.b,o=t.c,a=t.d;return xe(U(Tn,8,"0",p(Ji,q,r)),xe(e,xe(U(Tn,4,"0",p(Ji,q,s>>>16)),xe(e,xe(U(Tn,4,"0",p(Ji,q,65535&s)),xe(e,xe(U(Tn,4,"0",p(Ji,q,o>>>16)),xe(e,xe(U(Tn,4,"0",p(Ji,q,65535&o)),U(Tn,8,"0",p(Ji,q,a)))))))))))}),uR=UD("-"),HD=Se(function(e,t,r){e:for(;;){if(e<=0)return n(r,t);var s=aR(t),o=s.a,a=s.b,c=e-1,i=a,u=p(it,uR(o),r);e=c,t=i,r=u;continue e}}),WD=D(function(e,t){var r=e;if(r.$){var i=r.a,s=r.b,u=U(HD,i,t,q),l=u.a,c=u.b;return se(c,de,Jr(s(l)))}else{var s=r.a,o=aR(t),a=o.a,c=o.b;return se(c,de,Jr(s(uR(a))))}}),lR=Se(function(e,t,r){return{$:1,a:e,b:t,c:r}}),Lu={$:0},yg=function(e){return{$:1,a:e}},VD=function(e){var t=e;return Db(oR(p(Oe,function(r){return r.cI},p(dl,function(r){return r.az},p(dl,function(r){var s=r;return s},t)))))},pR=D(function(e,t){if(t.$){var s=t.a;return et(s)}else{var r=t.a;return ct(e(r))}}),GD=Se(function(e,t,r){return G(t,{aJ:U(zn,e,r,t.aJ)})}),Cg=O1,zd=Se(function(e,t,r){return{$:1,a:e,b:t,c:r}}),hR=D(function(e,t){e:for(;;)if(t.$===1&&t.c.b){var r=t.a,s=t.b,o=t.c,a=o.a,c=o.b;if(Be(e,r))return ne(t);var i=p(hR,e,a);if(i.$){var l=e,h=U(zd,r,s,c);e=l,t=h;continue e}else{var u=i.a;return ne(u)}}else return fe}),dR=D(function(e,t){e:for(;;)if(t.b){var r=t.a,s=r.a,o=r.b,a=t.b;if(Be(e,s))return ne(o);var c=e,i=a;e=c,t=i;continue e}else return fe}),JD=D(function(e,t){if(t.$===1){var r=t.b;return p(dR,e,r)}else return fe}),Nv=D(function(e,t){e:for(;;)if(t.b){var r=t.a,s=t.b;if(e(r))return!0;var o=e,a=s;e=o,t=a;continue e}else return!1}),vR=ht(function(e,t,r,s){return{H:t,db:e,dh:r,dA:s}}),KD=SE,ZD=function(e){return p(KD,{cS:!1,dg:!1},e)},QD=mE,bo=function(e){return p(bt,QD,ZD(e))},fR=bo("\\s+"),du=bE(ov),jr=T1,YD=function(e){return p(du,fR,jr(e))},XD=D(function(e,t){return p(bt,!1,p(Rt,Nv(Gt(e)),p(Rt,YD,p(dR,"class",t))))}),bg=CE(ov),ek=bo("<style[^>]*>.*?<\\/style>"),tk=bo("<[^>]*>"),vl=function(e){return jr(U(bg,tk,function(t){return""},U(bg,ek,function(t){return""},e)))},rk=function(e){return"<!--"+(e+"-->")},Rg=function(e){return p(pt,"",e)},nk=D(function(e,t){return p(Nv,function(r){return Be(r,e)},t)}),ik=$(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"]),gR=function(e){return p(nk,e,ik)},ok=Se(function(e,t,r){var s=function(a){var c=a.a,i=a.b;return c+('="'+(i+'"'))},o=function(){return t.b?" "+p(pt," ",p(Oe,s,t)):""}();return gR(e)?Rg($(["<",e,o,">"])):Rg($(["<",e,o,">",p(pt,"",p(Oe,mR,r)),"</",e,">"]))}),mR=function(e){switch(e.$){case 0:var t=e.a;return t;case 1:var r=e.a,s=e.b,o=e.c;return U(ok,r,s,o);default:var a=e.a;return rk(a)}},sk=function(e){return vl(mR(e))},SR=Se(function(e,t,r){e:for(;;){if(r.$===-2)return t;var s=r.b,o=r.c,a=r.d,c=r.e,i=e,u=U(e,s,o,U(SR,e,t,a)),l=c;e=i,t=u,r=l;continue e}}),ak=D(function(e,t){return U(SR,zn,t,e)}),ck=D(function(e,t){var r=e,s=t;return p(ak,r,s)}),$R=D(function(e,t){e:for(;;){t:for(;;)if(t.b)switch(t.a.$){case 0:if(t.b.b&&t.b.a.$===1&&t.b.a.a==="span"){var r=t.a.a,s=t.b,o=s.a,a=o.b,d=s.b,c=p(XD,"form-of-definition-link",a),i=p(Cg,"of",jr(r)),u=p(hR,"a",o),l=p(bt,"",p(Rt,sk,u)),h=p(bt,!1,p(Rt,Cg("#Dutch"),p(Zr,JD("href"),u))),y=i&&c&&h?p(Mv,l,e):e,m=p(it,o,d);e=y,t=m;continue e}else break t;case 1:var v=t.a,f=v.c,d=t.b,y=p(ck,e,p($R,e,f)),m=d;e=y,t=m;continue e;default:break t}else return e;var d=t.b,y=e,m=d;e=y,t=m;continue e}}),zt=D(function(e,t){return{$:1,a:e,b:t}}),ar=Se(function(e,t,r){return{$:0,a:e,b:t,c:r}}),uk=D(function(e,t){var r=t;return function(s){var o=r(s);if(o.$===1){var a=o.a,c=o.b;return p(zt,a,c)}else{var i=o.a,u=o.b,l=o.c,h=e(u),v=h,f=v(l);if(f.$===1){var d=f.a,c=f.b;return p(zt,i||d,c)}else{var d=f.a,y=f.b,m=f.c;return U(ar,i||d,y,m)}}}}),qv=uk,lk=function(e){var t=e;return function(r){var s=t(r);if(s.$===1){var o=s.b;return p(zt,!1,o)}else{var a=s.b,c=s.c;return U(ar,!1,a,c)}}},xd=lk,pk={$:11},yR=D(function(e,t){return{$:1,a:e,b:t}}),CR=ht(function(e,t,r,s){return{bR:t,cX:s,cj:r,cs:e}}),Lv={$:0},On=D(function(e,t){return p(yR,Lv,rt(CR,e.cs,e.bR,t,e.c))}),bR=_E,hk=D(function(e,t){return function(r){var s=U(bR,e,r.b,r.a);return Be(s,-1)?p(zt,!1,p(On,r,t)):Be(s,-2)?U(ar,!0,0,{bR:1,c:r.c,e:r.e,b:r.b+1,cs:r.cs+1,a:r.a}):U(ar,!0,0,{bR:r.bR+1,c:r.c,e:r.e,b:s,cs:r.cs,a:r.a})}}),Jt=function(e){return p(hk,e,pk)},dk=vr(function(e,t,r,s,o){e:for(;;){var a=U(bR,e,t,o.a);if(Be(a,-1))return U(ar,dt(o.b,t)<0,0,{bR:s,c:o.c,e:o.e,b:t,cs:r,a:o.a});if(Be(a,-2)){var c=e,i=t+1,u=r+1,l=1,h=o;e=c,t=i,r=u,s=l,o=h;continue e}else{var c=e,i=a,u=r,l=s+1,h=o;e=c,t=i,r=u,s=l,o=h;continue e}}}),vk=function(e){return function(t){return Re(dk,e,t.b,t.cs,t.bR,t)}},Nn=vk,RR=D(function(e,t){return e}),_R=Se(function(e,t,r){var s=t,o=r;return function(a){var c=s(a);if(c.$===1){var i=c.a,u=c.b;return p(zt,i,u)}else{var l=c.a,h=c.b,v=c.c,f=o(v);if(f.$===1){var d=f.a,u=f.b;return p(zt,l||d,u)}else{var d=f.a,y=f.b,m=f.c;return U(ar,l||d,p(e,h,y),m)}}}}),fk=D(function(e,t){return U(_R,RR,e,t)}),lt=fk,Bi=function(e){return p(lt,Jt(e),Nn(e))},gk=D(function(e,t){var r=t;return function(s){var o=r(s);if(o.$===1){var a=o.a,c=o.b;return p(zt,a,c)}else{var a=o.a,i=o.b,u=o.c;return U(ar,a,p(e,U(_l,s.b,u.b,s.a),i),u)}}}),mk=function(e){return p(gk,RR,e)},Sn=mk,qn=function(e){return e===" "||e==="	"||e===`
`||e==="\r"||e==="\f"||e==="Â "},Sk=function(e){return{$:12,a:e}},$k=function(e){return function(t){return p(zt,!1,p(On,t,e))}},Bv=function(e){return $k(Sk(e))},yk=function(e){return function(t){return U(ar,!1,e,t)}},qt=yk,Fi=I1,Ck=function(e){var t=p(qv,function(r){return Be(Fi(r),e)?qt(0):Bv("closing tag does not match opening tag: "+e)},Sn(Bi(function(r){return!qn(r)&&r!==">"})));return p(lt,p(lt,p(lt,p(lt,Jt(Gt("<")),Jt(Gt("/"))),t),Nn(qn)),Jt(Gt(">")))},bk=function(e){return{$:2,a:e}},Rk=TE,PR=ht(function(e,t,r,s){return p(yR,Lv,rt(CR,e,t,r,s))}),_k=function(e){var t=e.a,r=e.b;return function(s){var o=Re(Rk,t,s.b,s.cs,s.bR,s.a),a=o.a,c=o.b,i=o.c;return Be(a,-1)?p(zt,!1,rt(PR,c,i,r,s.c)):U(ar,dt(s.b,a)<0,0,{bR:i,c:s.c,e:s.e,b:a,cs:c,a:s.a})}},Pk=function(e){return{$:0,a:e}},wk=D(function(e,t){return{$:0,a:e,b:t}}),wR=function(e){return p(wk,e,Pk(e))},Ek=function(e){return _k(wR(e))},Ak=D(function(e,t){return U(_R,UE,e,t)}),$r=Ak,Tk=RE,Ik=function(e){var t=e.a,r=e.b,s=!Hn(t);return function(o){var a=Re(Tk,t,o.b,o.cs,o.bR,o.a),c=a.a,i=a.b,u=a.c;return Be(c,-1)?p(zt,!1,p(On,o,r)):U(ar,s,0,{bR:u,c:o.c,e:o.e,b:c,cs:i,a:o.a})}},bp=function(e){return Ik(wR(e))},Dk=p($r,p(lt,p(lt,qt(Ct),bp("<!")),bp("--")),p(lt,Sn(Ek("-->")),bp("-->"))),kk=D(function(e,t){var r=t;return function(s){var o=r(s);if(o.$){var a=o.a,u=o.b;return p(zt,a,u)}else{var a=o.a,c=o.b,i=o.c;return U(ar,a,e(c),i)}}}),Br=kk,Mk=p(Br,bk,Dk),ER=function(e){return{$:1,a:e}},AR=function(e){return{$:0,a:e}},Ok=ht(function(e,t,r,s){e:for(;;){var o=r(t),a=o,c=a(s);if(c.$){var i=c.a,b=c.b;return p(zt,e||i,b)}else{var i=c.a,u=c.b,l=c.c;if(u.$){var m=u.a;return U(ar,e||i,m,l)}else{var h=u.a,v=e||i,f=h,d=r,y=l;e=v,t=f,r=d,s=y;continue e}}}}),jk=D(function(e,t){return function(r){return rt(Ok,!1,e,t,r)}}),zk=function(e){return{$:1,a:e}},xk=function(e){return{$:0,a:e}},Nk=function(e){if(e.$){var r=e.a;return zk(r)}else{var t=e.a;return xk(t)}},TR=D(function(e,t){return p(jk,e,function(r){return p(Br,Nk,t(r))})}),qk=D(function(e,t){return{$:2,a:e,b:t}}),Lk=Se(function(e,t,r){e:for(;;)if(r.b){var s=r.a,o=r.b,a=s(e);if(a.$){var c=a,i=c.a,u=c.b;if(i)return c;var l=e,h=p(qk,t,u),v=o;e=l,t=h,r=v;continue e}else{var c=a;return c}}else return p(zt,!1,t)}),Bk=function(e){return function(t){return U(Lk,t,Lv,e)}},xr=Bk,Fv=function(e){return p(TR,q,function(t){return xr($([p(Br,function(r){return AR(p(it,r,t))},e),qt(ER(Or(t)))]))})},IR=D(function(e,t){return n(e,t)}),Fk=function(e){return!qn(e)&&e!=='"'&&e!=="'"&&e!==">"&&e!=="/"&&e!=="="},Uk=p(Br,Fi,Sn(Bi(Fk))),_g=Jt(Gt(";")),Hk=function(e){return U(Li,D(function(t,r){var s=t.a,o=t.b;return U(zn,s,o,r)}),jn,e)},Wk=Hk($([n("Aacute","Ã"),n("aacute","Ã¡"),n("Abreve","Ä"),n("abreve","Ä"),n("ac","â¾"),n("acd","â¿"),n("acE","â¾Ì³"),n("Acirc","Ã"),n("acirc","Ã¢"),n("acute","Â´"),n("Acy","Ð"),n("acy","Ð°"),n("AElig","Ã"),n("aelig","Ã¦"),n("af","â¡"),n("Afr","ð"),n("afr","ð"),n("Agrave","Ã"),n("agrave","Ã "),n("alefsym","âµ"),n("aleph","âµ"),n("Alpha","Î"),n("alpha","Î±"),n("Amacr","Ä"),n("amacr","Ä"),n("amalg","â¨¿"),n("amp","&"),n("AMP","&"),n("andand","â©"),n("And","â©"),n("and","â§"),n("andd","â©"),n("andslope","â©"),n("andv","â©"),n("ang","â "),n("ange","â¦¤"),n("angle","â "),n("angmsdaa","â¦¨"),n("angmsdab","â¦©"),n("angmsdac","â¦ª"),n("angmsdad","â¦«"),n("angmsdae","â¦¬"),n("angmsdaf","â¦­"),n("angmsdag","â¦®"),n("angmsdah","â¦¯"),n("angmsd","â¡"),n("angrt","â"),n("angrtvb","â¾"),n("angrtvbd","â¦"),n("angsph","â¢"),n("angst","Ã"),n("angzarr","â¼"),n("Aogon","Ä"),n("aogon","Ä"),n("Aopf","ð¸"),n("aopf","ð"),n("apacir","â©¯"),n("ap","â"),n("apE","â©°"),n("ape","â"),n("apid","â"),n("apos","'"),n("ApplyFunction","â¡"),n("approx","â"),n("approxeq","â"),n("Aring","Ã"),n("aring","Ã¥"),n("Ascr","ð"),n("ascr","ð¶"),n("Assign","â"),n("ast","*"),n("asymp","â"),n("asympeq","â"),n("Atilde","Ã"),n("atilde","Ã£"),n("Auml","Ã"),n("auml","Ã¤"),n("awconint","â³"),n("awint","â¨"),n("backcong","â"),n("backepsilon","Ï¶"),n("backprime","âµ"),n("backsim","â½"),n("backsimeq","â"),n("Backslash","â"),n("Barv","â«§"),n("barvee","â½"),n("barwed","â"),n("Barwed","â"),n("barwedge","â"),n("bbrk","âµ"),n("bbrktbrk","â¶"),n("bcong","â"),n("Bcy","Ð"),n("bcy","Ð±"),n("bdquo","â"),n("becaus","âµ"),n("because","âµ"),n("Because","âµ"),n("bemptyv","â¦°"),n("bepsi","Ï¶"),n("bernou","â¬"),n("Bernoullis","â¬"),n("Beta","Î"),n("beta","Î²"),n("beth","â¶"),n("between","â¬"),n("Bfr","ð"),n("bfr","ð"),n("bigcap","â"),n("bigcirc","â¯"),n("bigcup","â"),n("bigodot","â¨"),n("bigoplus","â¨"),n("bigotimes","â¨"),n("bigsqcup","â¨"),n("bigstar","â"),n("bigtriangledown","â½"),n("bigtriangleup","â³"),n("biguplus","â¨"),n("bigvee","â"),n("bigwedge","â"),n("bkarow","â¤"),n("blacklozenge","â§«"),n("blacksquare","âª"),n("blacktriangle","â´"),n("blacktriangledown","â¾"),n("blacktriangleleft","â"),n("blacktriangleright","â¸"),n("blank","â£"),n("blk12","â"),n("blk14","â"),n("blk34","â"),n("block","â"),n("bne","=â¥"),n("bnequiv","â¡â¥"),n("bNot","â«­"),n("bnot","â"),n("Bopf","ð¹"),n("bopf","ð"),n("bot","â¥"),n("bottom","â¥"),n("bowtie","â"),n("boxbox","â§"),n("boxdl","â"),n("boxdL","â"),n("boxDl","â"),n("boxDL","â"),n("boxdr","â"),n("boxdR","â"),n("boxDr","â"),n("boxDR","â"),n("boxh","â"),n("boxH","â"),n("boxhd","â¬"),n("boxHd","â¤"),n("boxhD","â¥"),n("boxHD","â¦"),n("boxhu","â´"),n("boxHu","â§"),n("boxhU","â¨"),n("boxHU","â©"),n("boxminus","â"),n("boxplus","â"),n("boxtimes","â "),n("boxul","â"),n("boxuL","â"),n("boxUl","â"),n("boxUL","â"),n("boxur","â"),n("boxuR","â"),n("boxUr","â"),n("boxUR","â"),n("boxv","â"),n("boxV","â"),n("boxvh","â¼"),n("boxvH","âª"),n("boxVh","â«"),n("boxVH","â¬"),n("boxvl","â¤"),n("boxvL","â¡"),n("boxVl","â¢"),n("boxVL","â£"),n("boxvr","â"),n("boxvR","â"),n("boxVr","â"),n("boxVR","â "),n("bprime","âµ"),n("breve","Ë"),n("Breve","Ë"),n("brvbar","Â¦"),n("bscr","ð·"),n("Bscr","â¬"),n("bsemi","â"),n("bsim","â½"),n("bsime","â"),n("bsolb","â§"),n("bsol","\\"),n("bsolhsub","â"),n("bull","â¢"),n("bullet","â¢"),n("bump","â"),n("bumpE","âª®"),n("bumpe","â"),n("Bumpeq","â"),n("bumpeq","â"),n("Cacute","Ä"),n("cacute","Ä"),n("capand","â©"),n("capbrcup","â©"),n("capcap","â©"),n("cap","â©"),n("Cap","â"),n("capcup","â©"),n("capdot","â©"),n("CapitalDifferentialD","â"),n("caps","â©ï¸"),n("caret","â"),n("caron","Ë"),n("Cayleys","â­"),n("ccaps","â©"),n("Ccaron","Ä"),n("ccaron","Ä"),n("Ccedil","Ã"),n("ccedil","Ã§"),n("Ccirc","Ä"),n("ccirc","Ä"),n("Cconint","â°"),n("ccups","â©"),n("ccupssm","â©"),n("Cdot","Ä"),n("cdot","Ä"),n("cedil","Â¸"),n("Cedilla","Â¸"),n("cemptyv","â¦²"),n("cent","Â¢"),n("centerdot","Â·"),n("CenterDot","Â·"),n("cfr","ð "),n("Cfr","â­"),n("CHcy","Ð§"),n("chcy","Ñ"),n("check","â"),n("checkmark","â"),n("Chi","Î§"),n("chi","Ï"),n("circ","Ë"),n("circeq","â"),n("circlearrowleft","âº"),n("circlearrowright","â»"),n("circledast","â"),n("circledcirc","â"),n("circleddash","â"),n("CircleDot","â"),n("circledR","Â®"),n("circledS","â"),n("CircleMinus","â"),n("CirclePlus","â"),n("CircleTimes","â"),n("cir","â"),n("cirE","â§"),n("cire","â"),n("cirfnint","â¨"),n("cirmid","â«¯"),n("cirscir","â§"),n("ClockwiseContourIntegral","â²"),n("CloseCurlyDoubleQuote","â"),n("CloseCurlyQuote","â"),n("clubs","â£"),n("clubsuit","â£"),n("colon",":"),n("Colon","â·"),n("Colone","â©´"),n("colone","â"),n("coloneq","â"),n("comma",","),n("commat","@"),n("comp","â"),n("compfn","â"),n("complement","â"),n("complexes","â"),n("cong","â"),n("congdot","â©­"),n("Congruent","â¡"),n("conint","â®"),n("Conint","â¯"),n("ContourIntegral","â®"),n("copf","ð"),n("Copf","â"),n("coprod","â"),n("Coproduct","â"),n("copy","Â©"),n("COPY","Â©"),n("copysr","â"),n("CounterClockwiseContourIntegral","â³"),n("crarr","âµ"),n("cross","â"),n("Cross","â¨¯"),n("Cscr","ð"),n("cscr","ð¸"),n("csub","â«"),n("csube","â«"),n("csup","â«"),n("csupe","â«"),n("ctdot","â¯"),n("cudarrl","â¤¸"),n("cudarrr","â¤µ"),n("cuepr","â"),n("cuesc","â"),n("cularr","â¶"),n("cularrp","â¤½"),n("cupbrcap","â©"),n("cupcap","â©"),n("CupCap","â"),n("cup","âª"),n("Cup","â"),n("cupcup","â©"),n("cupdot","â"),n("cupor","â©"),n("cups","âªï¸"),n("curarr","â·"),n("curarrm","â¤¼"),n("curlyeqprec","â"),n("curlyeqsucc","â"),n("curlyvee","â"),n("curlywedge","â"),n("curren","Â¤"),n("curvearrowleft","â¶"),n("curvearrowright","â·"),n("cuvee","â"),n("cuwed","â"),n("cwconint","â²"),n("cwint","â±"),n("cylcty","â­"),n("dagger","â "),n("Dagger","â¡"),n("daleth","â¸"),n("darr","â"),n("Darr","â¡"),n("dArr","â"),n("dash","â"),n("Dashv","â«¤"),n("dashv","â£"),n("dbkarow","â¤"),n("dblac","Ë"),n("Dcaron","Ä"),n("dcaron","Ä"),n("Dcy","Ð"),n("dcy","Ð´"),n("ddagger","â¡"),n("ddarr","â"),n("DD","â"),n("dd","â"),n("DDotrahd","â¤"),n("ddotseq","â©·"),n("deg","Â°"),n("Del","â"),n("Delta","Î"),n("delta","Î´"),n("demptyv","â¦±"),n("dfisht","â¥¿"),n("Dfr","ð"),n("dfr","ð¡"),n("dHar","â¥¥"),n("dharl","â"),n("dharr","â"),n("DiacriticalAcute","Â´"),n("DiacriticalDot","Ë"),n("DiacriticalDoubleAcute","Ë"),n("DiacriticalGrave","`"),n("DiacriticalTilde","Ë"),n("diam","â"),n("diamond","â"),n("Diamond","â"),n("diamondsuit","â¦"),n("diams","â¦"),n("die","Â¨"),n("DifferentialD","â"),n("digamma","Ï"),n("disin","â²"),n("div","Ã·"),n("divide","Ã·"),n("divideontimes","â"),n("divonx","â"),n("DJcy","Ð"),n("djcy","Ñ"),n("dlcorn","â"),n("dlcrop","â"),n("dollar","$"),n("Dopf","ð»"),n("dopf","ð"),n("Dot","Â¨"),n("dot","Ë"),n("DotDot","â"),n("doteq","â"),n("doteqdot","â"),n("DotEqual","â"),n("dotminus","â¸"),n("dotplus","â"),n("dotsquare","â¡"),n("doublebarwedge","â"),n("DoubleContourIntegral","â¯"),n("DoubleDot","Â¨"),n("DoubleDownArrow","â"),n("DoubleLeftArrow","â"),n("DoubleLeftRightArrow","â"),n("DoubleLeftTee","â«¤"),n("DoubleLongLeftArrow","â¸"),n("DoubleLongLeftRightArrow","âº"),n("DoubleLongRightArrow","â¹"),n("DoubleRightArrow","â"),n("DoubleRightTee","â¨"),n("DoubleUpArrow","â"),n("DoubleUpDownArrow","â"),n("DoubleVerticalBar","â¥"),n("DownArrowBar","â¤"),n("downarrow","â"),n("DownArrow","â"),n("Downarrow","â"),n("DownArrowUpArrow","âµ"),n("DownBreve","Ì"),n("downdownarrows","â"),n("downharpoonleft","â"),n("downharpoonright","â"),n("DownLeftRightVector","â¥"),n("DownLeftTeeVector","â¥"),n("DownLeftVectorBar","â¥"),n("DownLeftVector","â½"),n("DownRightTeeVector","â¥"),n("DownRightVectorBar","â¥"),n("DownRightVector","â"),n("DownTeeArrow","â§"),n("DownTee","â¤"),n("drbkarow","â¤"),n("drcorn","â"),n("drcrop","â"),n("Dscr","ð"),n("dscr","ð¹"),n("DScy","Ð"),n("dscy","Ñ"),n("dsol","â§¶"),n("Dstrok","Ä"),n("dstrok","Ä"),n("dtdot","â±"),n("dtri","â¿"),n("dtrif","â¾"),n("duarr","âµ"),n("duhar","â¥¯"),n("dwangle","â¦¦"),n("DZcy","Ð"),n("dzcy","Ñ"),n("dzigrarr","â¿"),n("Eacute","Ã"),n("eacute","Ã©"),n("easter","â©®"),n("Ecaron","Ä"),n("ecaron","Ä"),n("Ecirc","Ã"),n("ecirc","Ãª"),n("ecir","â"),n("ecolon","â"),n("Ecy","Ð­"),n("ecy","Ñ"),n("eDDot","â©·"),n("Edot","Ä"),n("edot","Ä"),n("eDot","â"),n("ee","â"),n("efDot","â"),n("Efr","ð"),n("efr","ð¢"),n("eg","âª"),n("Egrave","Ã"),n("egrave","Ã¨"),n("egs","âª"),n("egsdot","âª"),n("el","âª"),n("Element","â"),n("elinters","â§"),n("ell","â"),n("els","âª"),n("elsdot","âª"),n("Emacr","Ä"),n("emacr","Ä"),n("empty","â"),n("emptyset","â"),n("EmptySmallSquare","â»"),n("emptyv","â"),n("EmptyVerySmallSquare","â«"),n("emsp13","â"),n("emsp14","â"),n("emsp","â"),n("ENG","Å"),n("eng","Å"),n("ensp","â"),n("Eogon","Ä"),n("eogon","Ä"),n("Eopf","ð¼"),n("eopf","ð"),n("epar","â"),n("eparsl","â§£"),n("eplus","â©±"),n("epsi","Îµ"),n("Epsilon","Î"),n("epsilon","Îµ"),n("epsiv","Ïµ"),n("eqcirc","â"),n("eqcolon","â"),n("eqsim","â"),n("eqslantgtr","âª"),n("eqslantless","âª"),n("Equal","â©µ"),n("equals","="),n("EqualTilde","â"),n("equest","â"),n("Equilibrium","â"),n("equiv","â¡"),n("equivDD","â©¸"),n("eqvparsl","â§¥"),n("erarr","â¥±"),n("erDot","â"),n("escr","â¯"),n("Escr","â°"),n("esdot","â"),n("Esim","â©³"),n("esim","â"),n("Eta","Î"),n("eta","Î·"),n("ETH","Ã"),n("eth","Ã°"),n("Euml","Ã"),n("euml","Ã«"),n("euro","â¬"),n("excl","!"),n("exist","â"),n("Exists","â"),n("expectation","â°"),n("exponentiale","â"),n("ExponentialE","â"),n("fallingdotseq","â"),n("Fcy","Ð¤"),n("fcy","Ñ"),n("female","â"),n("ffilig","ï¬"),n("fflig","ï¬"),n("ffllig","ï¬"),n("Ffr","ð"),n("ffr","ð£"),n("filig","ï¬"),n("FilledSmallSquare","â¼"),n("FilledVerySmallSquare","âª"),n("fjlig","fj"),n("flat","â­"),n("fllig","ï¬"),n("fltns","â±"),n("fnof","Æ"),n("Fopf","ð½"),n("fopf","ð"),n("forall","â"),n("ForAll","â"),n("fork","â"),n("forkv","â«"),n("Fouriertrf","â±"),n("fpartint","â¨"),n("frac12","Â½"),n("frac13","â"),n("frac14","Â¼"),n("frac15","â"),n("frac16","â"),n("frac18","â"),n("frac23","â"),n("frac25","â"),n("frac34","Â¾"),n("frac35","â"),n("frac38","â"),n("frac45","â"),n("frac56","â"),n("frac58","â"),n("frac78","â"),n("frasl","â"),n("frown","â¢"),n("fscr","ð»"),n("Fscr","â±"),n("gacute","Çµ"),n("Gamma","Î"),n("gamma","Î³"),n("Gammad","Ï"),n("gammad","Ï"),n("gap","âª"),n("Gbreve","Ä"),n("gbreve","Ä"),n("Gcedil","Ä¢"),n("Gcirc","Ä"),n("gcirc","Ä"),n("Gcy","Ð"),n("gcy","Ð³"),n("Gdot","Ä "),n("gdot","Ä¡"),n("ge","â¥"),n("gE","â§"),n("gEl","âª"),n("gel","â"),n("geq","â¥"),n("geqq","â§"),n("geqslant","â©¾"),n("gescc","âª©"),n("ges","â©¾"),n("gesdot","âª"),n("gesdoto","âª"),n("gesdotol","âª"),n("gesl","âï¸"),n("gesles","âª"),n("Gfr","ð"),n("gfr","ð¤"),n("gg","â«"),n("Gg","â"),n("ggg","â"),n("gimel","â·"),n("GJcy","Ð"),n("gjcy","Ñ"),n("gla","âª¥"),n("gl","â·"),n("glE","âª"),n("glj","âª¤"),n("gnap","âª"),n("gnapprox","âª"),n("gne","âª"),n("gnE","â©"),n("gneq","âª"),n("gneqq","â©"),n("gnsim","â§"),n("Gopf","ð¾"),n("gopf","ð"),n("grave","`"),n("GreaterEqual","â¥"),n("GreaterEqualLess","â"),n("GreaterFullEqual","â§"),n("GreaterGreater","âª¢"),n("GreaterLess","â·"),n("GreaterSlantEqual","â©¾"),n("GreaterTilde","â³"),n("Gscr","ð¢"),n("gscr","â"),n("gsim","â³"),n("gsime","âª"),n("gsiml","âª"),n("gtcc","âª§"),n("gtcir","â©º"),n("gt",">"),n("GT",">"),n("Gt","â«"),n("gtdot","â"),n("gtlPar","â¦"),n("gtquest","â©¼"),n("gtrapprox","âª"),n("gtrarr","â¥¸"),n("gtrdot","â"),n("gtreqless","â"),n("gtreqqless","âª"),n("gtrless","â·"),n("gtrsim","â³"),n("gvertneqq","â©ï¸"),n("gvnE","â©ï¸"),n("Hacek","Ë"),n("hairsp","â"),n("half","Â½"),n("hamilt","â"),n("HARDcy","Ðª"),n("hardcy","Ñ"),n("harrcir","â¥"),n("harr","â"),n("hArr","â"),n("harrw","â­"),n("Hat","^"),n("hbar","â"),n("Hcirc","Ä¤"),n("hcirc","Ä¥"),n("hearts","â¥"),n("heartsuit","â¥"),n("hellip","â¦"),n("hercon","â¹"),n("hfr","ð¥"),n("Hfr","â"),n("HilbertSpace","â"),n("hksearow","â¤¥"),n("hkswarow","â¤¦"),n("hoarr","â¿"),n("homtht","â»"),n("hookleftarrow","â©"),n("hookrightarrow","âª"),n("hopf","ð"),n("Hopf","â"),n("horbar","â"),n("HorizontalLine","â"),n("hscr","ð½"),n("Hscr","â"),n("hslash","â"),n("Hstrok","Ä¦"),n("hstrok","Ä§"),n("HumpDownHump","â"),n("HumpEqual","â"),n("hybull","â"),n("hyphen","â"),n("Iacute","Ã"),n("iacute","Ã­"),n("ic","â£"),n("Icirc","Ã"),n("icirc","Ã®"),n("Icy","Ð"),n("icy","Ð¸"),n("Idot","Ä°"),n("IEcy","Ð"),n("iecy","Ðµ"),n("iexcl","Â¡"),n("iff","â"),n("ifr","ð¦"),n("Ifr","â"),n("Igrave","Ã"),n("igrave","Ã¬"),n("ii","â"),n("iiiint","â¨"),n("iiint","â­"),n("iinfin","â§"),n("iiota","â©"),n("IJlig","Ä²"),n("ijlig","Ä³"),n("Imacr","Äª"),n("imacr","Ä«"),n("image","â"),n("ImaginaryI","â"),n("imagline","â"),n("imagpart","â"),n("imath","Ä±"),n("Im","â"),n("imof","â·"),n("imped","Æµ"),n("Implies","â"),n("incare","â"),n("in","â"),n("infin","â"),n("infintie","â§"),n("inodot","Ä±"),n("intcal","âº"),n("int","â«"),n("Int","â¬"),n("integers","â¤"),n("Integral","â«"),n("intercal","âº"),n("Intersection","â"),n("intlarhk","â¨"),n("intprod","â¨¼"),n("InvisibleComma","â£"),n("InvisibleTimes","â¢"),n("IOcy","Ð"),n("iocy","Ñ"),n("Iogon","Ä®"),n("iogon","Ä¯"),n("Iopf","ð"),n("iopf","ð"),n("Iota","Î"),n("iota","Î¹"),n("iprod","â¨¼"),n("iquest","Â¿"),n("iscr","ð¾"),n("Iscr","â"),n("isin","â"),n("isindot","âµ"),n("isinE","â¹"),n("isins","â´"),n("isinsv","â³"),n("isinv","â"),n("it","â¢"),n("Itilde","Ä¨"),n("itilde","Ä©"),n("Iukcy","Ð"),n("iukcy","Ñ"),n("Iuml","Ã"),n("iuml","Ã¯"),n("Jcirc","Ä´"),n("jcirc","Äµ"),n("Jcy","Ð"),n("jcy","Ð¹"),n("Jfr","ð"),n("jfr","ð§"),n("jmath","È·"),n("Jopf","ð"),n("jopf","ð"),n("Jscr","ð¥"),n("jscr","ð¿"),n("Jsercy","Ð"),n("jsercy","Ñ"),n("Jukcy","Ð"),n("jukcy","Ñ"),n("Kappa","Î"),n("kappa","Îº"),n("kappav","Ï°"),n("Kcedil","Ä¶"),n("kcedil","Ä·"),n("Kcy","Ð"),n("kcy","Ðº"),n("Kfr","ð"),n("kfr","ð¨"),n("kgreen","Ä¸"),n("KHcy","Ð¥"),n("khcy","Ñ"),n("KJcy","Ð"),n("kjcy","Ñ"),n("Kopf","ð"),n("kopf","ð"),n("Kscr","ð¦"),n("kscr","ð"),n("lAarr","â"),n("Lacute","Ä¹"),n("lacute","Äº"),n("laemptyv","â¦´"),n("lagran","â"),n("Lambda","Î"),n("lambda","Î»"),n("lang","â¨"),n("Lang","âª"),n("langd","â¦"),n("langle","â¨"),n("lap","âª"),n("Laplacetrf","â"),n("laquo","Â«"),n("larrb","â¤"),n("larrbfs","â¤"),n("larr","â"),n("Larr","â"),n("lArr","â"),n("larrfs","â¤"),n("larrhk","â©"),n("larrlp","â«"),n("larrpl","â¤¹"),n("larrsim","â¥³"),n("larrtl","â¢"),n("latail","â¤"),n("lAtail","â¤"),n("lat","âª«"),n("late","âª­"),n("lates","âª­ï¸"),n("lbarr","â¤"),n("lBarr","â¤"),n("lbbrk","â²"),n("lbrace","{"),n("lbrack","["),n("lbrke","â¦"),n("lbrksld","â¦"),n("lbrkslu","â¦"),n("Lcaron","Ä½"),n("lcaron","Ä¾"),n("Lcedil","Ä»"),n("lcedil","Ä¼"),n("lceil","â"),n("lcub","{"),n("Lcy","Ð"),n("lcy","Ð»"),n("ldca","â¤¶"),n("ldquo","â"),n("ldquor","â"),n("ldrdhar","â¥§"),n("ldrushar","â¥"),n("ldsh","â²"),n("le","â¤"),n("lE","â¦"),n("LeftAngleBracket","â¨"),n("LeftArrowBar","â¤"),n("leftarrow","â"),n("LeftArrow","â"),n("Leftarrow","â"),n("LeftArrowRightArrow","â"),n("leftarrowtail","â¢"),n("LeftCeiling","â"),n("LeftDoubleBracket","â¦"),n("LeftDownTeeVector","â¥¡"),n("LeftDownVectorBar","â¥"),n("LeftDownVector","â"),n("LeftFloor","â"),n("leftharpoondown","â½"),n("leftharpoonup","â¼"),n("leftleftarrows","â"),n("leftrightarrow","â"),n("LeftRightArrow","â"),n("Leftrightarrow","â"),n("leftrightarrows","â"),n("leftrightharpoons","â"),n("leftrightsquigarrow","â­"),n("LeftRightVector","â¥"),n("LeftTeeArrow","â¤"),n("LeftTee","â£"),n("LeftTeeVector","â¥"),n("leftthreetimes","â"),n("LeftTriangleBar","â§"),n("LeftTriangle","â²"),n("LeftTriangleEqual","â´"),n("LeftUpDownVector","â¥"),n("LeftUpTeeVector","â¥ "),n("LeftUpVectorBar","â¥"),n("LeftUpVector","â¿"),n("LeftVectorBar","â¥"),n("LeftVector","â¼"),n("lEg","âª"),n("leg","â"),n("leq","â¤"),n("leqq","â¦"),n("leqslant","â©½"),n("lescc","âª¨"),n("les","â©½"),n("lesdot","â©¿"),n("lesdoto","âª"),n("lesdotor","âª"),n("lesg","âï¸"),n("lesges","âª"),n("lessapprox","âª"),n("lessdot","â"),n("lesseqgtr","â"),n("lesseqqgtr","âª"),n("LessEqualGreater","â"),n("LessFullEqual","â¦"),n("LessGreater","â¶"),n("lessgtr","â¶"),n("LessLess","âª¡"),n("lesssim","â²"),n("LessSlantEqual","â©½"),n("LessTilde","â²"),n("lfisht","â¥¼"),n("lfloor","â"),n("Lfr","ð"),n("lfr","ð©"),n("lg","â¶"),n("lgE","âª"),n("lHar","â¥¢"),n("lhard","â½"),n("lharu","â¼"),n("lharul","â¥ª"),n("lhblk","â"),n("LJcy","Ð"),n("ljcy","Ñ"),n("llarr","â"),n("ll","âª"),n("Ll","â"),n("llcorner","â"),n("Lleftarrow","â"),n("llhard","â¥«"),n("lltri","âº"),n("Lmidot","Ä¿"),n("lmidot","Å"),n("lmoustache","â°"),n("lmoust","â°"),n("lnap","âª"),n("lnapprox","âª"),n("lne","âª"),n("lnE","â¨"),n("lneq","âª"),n("lneqq","â¨"),n("lnsim","â¦"),n("loang","â¬"),n("loarr","â½"),n("lobrk","â¦"),n("longleftarrow","âµ"),n("LongLeftArrow","âµ"),n("Longleftarrow","â¸"),n("longleftrightarrow","â·"),n("LongLeftRightArrow","â·"),n("Longleftrightarrow","âº"),n("longmapsto","â¼"),n("longrightarrow","â¶"),n("LongRightArrow","â¶"),n("Longrightarrow","â¹"),n("looparrowleft","â«"),n("looparrowright","â¬"),n("lopar","â¦"),n("Lopf","ð"),n("lopf","ð"),n("loplus","â¨­"),n("lotimes","â¨´"),n("lowast","â"),n("lowbar","_"),n("LowerLeftArrow","â"),n("LowerRightArrow","â"),n("loz","â"),n("lozenge","â"),n("lozf","â§«"),n("lpar","("),n("lparlt","â¦"),n("lrarr","â"),n("lrcorner","â"),n("lrhar","â"),n("lrhard","â¥­"),n("lrm","â"),n("lrtri","â¿"),n("lsaquo","â¹"),n("lscr","ð"),n("Lscr","â"),n("lsh","â°"),n("Lsh","â°"),n("lsim","â²"),n("lsime","âª"),n("lsimg","âª"),n("lsqb","["),n("lsquo","â"),n("lsquor","â"),n("Lstrok","Å"),n("lstrok","Å"),n("ltcc","âª¦"),n("ltcir","â©¹"),n("lt","<"),n("LT","<"),n("Lt","âª"),n("ltdot","â"),n("lthree","â"),n("ltimes","â"),n("ltlarr","â¥¶"),n("ltquest","â©»"),n("ltri","â"),n("ltrie","â´"),n("ltrif","â"),n("ltrPar","â¦"),n("lurdshar","â¥"),n("luruhar","â¥¦"),n("lvertneqq","â¨ï¸"),n("lvnE","â¨ï¸"),n("macr","Â¯"),n("male","â"),n("malt","â "),n("maltese","â "),n("Map","â¤"),n("map","â¦"),n("mapsto","â¦"),n("mapstodown","â§"),n("mapstoleft","â¤"),n("mapstoup","â¥"),n("marker","â®"),n("mcomma","â¨©"),n("Mcy","Ð"),n("mcy","Ð¼"),n("mdash","â"),n("mDDot","âº"),n("measuredangle","â¡"),n("MediumSpace","â"),n("Mellintrf","â³"),n("Mfr","ð"),n("mfr","ðª"),n("mho","â§"),n("micro","Âµ"),n("midast","*"),n("midcir","â«°"),n("mid","â£"),n("middot","Â·"),n("minusb","â"),n("minus","â"),n("minusd","â¸"),n("minusdu","â¨ª"),n("MinusPlus","â"),n("mlcp","â«"),n("mldr","â¦"),n("mnplus","â"),n("models","â§"),n("Mopf","ð"),n("mopf","ð"),n("mp","â"),n("mscr","ð"),n("Mscr","â³"),n("mstpos","â¾"),n("Mu","Î"),n("mu","Î¼"),n("multimap","â¸"),n("mumap","â¸"),n("nabla","â"),n("Nacute","Å"),n("nacute","Å"),n("nang","â â"),n("nap","â"),n("napE","â©°Ì¸"),n("napid","âÌ¸"),n("napos","Å"),n("napprox","â"),n("natural","â®"),n("naturals","â"),n("natur","â®"),n("nbsp","Â "),n("nbump","âÌ¸"),n("nbumpe","âÌ¸"),n("ncap","â©"),n("Ncaron","Å"),n("ncaron","Å"),n("Ncedil","Å"),n("ncedil","Å"),n("ncong","â"),n("ncongdot","â©­Ì¸"),n("ncup","â©"),n("Ncy","Ð"),n("ncy","Ð½"),n("ndash","â"),n("nearhk","â¤¤"),n("nearr","â"),n("neArr","â"),n("nearrow","â"),n("ne","â "),n("nedot","âÌ¸"),n("NegativeMediumSpace","â"),n("NegativeThickSpace","â"),n("NegativeThinSpace","â"),n("NegativeVeryThinSpace","â"),n("nequiv","â¢"),n("nesear","â¤¨"),n("nesim","âÌ¸"),n("NestedGreaterGreater","â«"),n("NestedLessLess","âª"),n("NewLine",`
`),n("nexist","â"),n("nexists","â"),n("Nfr","ð"),n("nfr","ð«"),n("ngE","â§Ì¸"),n("nge","â±"),n("ngeq","â±"),n("ngeqq","â§Ì¸"),n("ngeqslant","â©¾Ì¸"),n("nges","â©¾Ì¸"),n("nGg","âÌ¸"),n("ngsim","âµ"),n("nGt","â«â"),n("ngt","â¯"),n("ngtr","â¯"),n("nGtv","â«Ì¸"),n("nharr","â®"),n("nhArr","â"),n("nhpar","â«²"),n("ni","â"),n("nis","â¼"),n("nisd","âº"),n("niv","â"),n("NJcy","Ð"),n("njcy","Ñ"),n("nlarr","â"),n("nlArr","â"),n("nldr","â¥"),n("nlE","â¦Ì¸"),n("nle","â°"),n("nleftarrow","â"),n("nLeftarrow","â"),n("nleftrightarrow","â®"),n("nLeftrightarrow","â"),n("nleq","â°"),n("nleqq","â¦Ì¸"),n("nleqslant","â©½Ì¸"),n("nles","â©½Ì¸"),n("nless","â®"),n("nLl","âÌ¸"),n("nlsim","â´"),n("nLt","âªâ"),n("nlt","â®"),n("nltri","âª"),n("nltrie","â¬"),n("nLtv","âªÌ¸"),n("nmid","â¤"),n("NoBreak","â "),n("NonBreakingSpace","Â "),n("nopf","ð"),n("Nopf","â"),n("Not","â«¬"),n("not","Â¬"),n("NotCongruent","â¢"),n("NotCupCap","â­"),n("NotDoubleVerticalBar","â¦"),n("NotElement","â"),n("NotEqual","â "),n("NotEqualTilde","âÌ¸"),n("NotExists","â"),n("NotGreater","â¯"),n("NotGreaterEqual","â±"),n("NotGreaterFullEqual","â§Ì¸"),n("NotGreaterGreater","â«Ì¸"),n("NotGreaterLess","â¹"),n("NotGreaterSlantEqual","â©¾Ì¸"),n("NotGreaterTilde","âµ"),n("NotHumpDownHump","âÌ¸"),n("NotHumpEqual","âÌ¸"),n("notin","â"),n("notindot","âµÌ¸"),n("notinE","â¹Ì¸"),n("notinva","â"),n("notinvb","â·"),n("notinvc","â¶"),n("NotLeftTriangleBar","â§Ì¸"),n("NotLeftTriangle","âª"),n("NotLeftTriangleEqual","â¬"),n("NotLess","â®"),n("NotLessEqual","â°"),n("NotLessGreater","â¸"),n("NotLessLess","âªÌ¸"),n("NotLessSlantEqual","â©½Ì¸"),n("NotLessTilde","â´"),n("NotNestedGreaterGreater","âª¢Ì¸"),n("NotNestedLessLess","âª¡Ì¸"),n("notni","â"),n("notniva","â"),n("notnivb","â¾"),n("notnivc","â½"),n("NotPrecedes","â"),n("NotPrecedesEqual","âª¯Ì¸"),n("NotPrecedesSlantEqual","â "),n("NotReverseElement","â"),n("NotRightTriangleBar","â§Ì¸"),n("NotRightTriangle","â«"),n("NotRightTriangleEqual","â­"),n("NotSquareSubset","âÌ¸"),n("NotSquareSubsetEqual","â¢"),n("NotSquareSuperset","âÌ¸"),n("NotSquareSupersetEqual","â£"),n("NotSubset","ââ"),n("NotSubsetEqual","â"),n("NotSucceeds","â"),n("NotSucceedsEqual","âª°Ì¸"),n("NotSucceedsSlantEqual","â¡"),n("NotSucceedsTilde","â¿Ì¸"),n("NotSuperset","ââ"),n("NotSupersetEqual","â"),n("NotTilde","â"),n("NotTildeEqual","â"),n("NotTildeFullEqual","â"),n("NotTildeTilde","â"),n("NotVerticalBar","â¤"),n("nparallel","â¦"),n("npar","â¦"),n("nparsl","â«½â¥"),n("npart","âÌ¸"),n("npolint","â¨"),n("npr","â"),n("nprcue","â "),n("nprec","â"),n("npreceq","âª¯Ì¸"),n("npre","âª¯Ì¸"),n("nrarrc","â¤³Ì¸"),n("nrarr","â"),n("nrArr","â"),n("nrarrw","âÌ¸"),n("nrightarrow","â"),n("nRightarrow","â"),n("nrtri","â«"),n("nrtrie","â­"),n("nsc","â"),n("nsccue","â¡"),n("nsce","âª°Ì¸"),n("Nscr","ð©"),n("nscr","ð"),n("nshortmid","â¤"),n("nshortparallel","â¦"),n("nsim","â"),n("nsime","â"),n("nsimeq","â"),n("nsmid","â¤"),n("nspar","â¦"),n("nsqsube","â¢"),n("nsqsupe","â£"),n("nsub","â"),n("nsubE","â«Ì¸"),n("nsube","â"),n("nsubset","ââ"),n("nsubseteq","â"),n("nsubseteqq","â«Ì¸"),n("nsucc","â"),n("nsucceq","âª°Ì¸"),n("nsup","â"),n("nsupE","â«Ì¸"),n("nsupe","â"),n("nsupset","ââ"),n("nsupseteq","â"),n("nsupseteqq","â«Ì¸"),n("ntgl","â¹"),n("Ntilde","Ã"),n("ntilde","Ã±"),n("ntlg","â¸"),n("ntriangleleft","âª"),n("ntrianglelefteq","â¬"),n("ntriangleright","â«"),n("ntrianglerighteq","â­"),n("Nu","Î"),n("nu","Î½"),n("num","#"),n("numero","â"),n("numsp","â"),n("nvap","ââ"),n("nvdash","â¬"),n("nvDash","â­"),n("nVdash","â®"),n("nVDash","â¯"),n("nvge","â¥â"),n("nvgt",">â"),n("nvHarr","â¤"),n("nvinfin","â§"),n("nvlArr","â¤"),n("nvle","â¤â"),n("nvlt","<â"),n("nvltrie","â´â"),n("nvrArr","â¤"),n("nvrtrie","âµâ"),n("nvsim","â¼â"),n("nwarhk","â¤£"),n("nwarr","â"),n("nwArr","â"),n("nwarrow","â"),n("nwnear","â¤§"),n("Oacute","Ã"),n("oacute","Ã³"),n("oast","â"),n("Ocirc","Ã"),n("ocirc","Ã´"),n("ocir","â"),n("Ocy","Ð"),n("ocy","Ð¾"),n("odash","â"),n("Odblac","Å"),n("odblac","Å"),n("odiv","â¨¸"),n("odot","â"),n("odsold","â¦¼"),n("OElig","Å"),n("oelig","Å"),n("ofcir","â¦¿"),n("Ofr","ð"),n("ofr","ð¬"),n("ogon","Ë"),n("Ograve","Ã"),n("ograve","Ã²"),n("ogt","â§"),n("ohbar","â¦µ"),n("ohm","Î©"),n("oint","â®"),n("olarr","âº"),n("olcir","â¦¾"),n("olcross","â¦»"),n("oline","â¾"),n("olt","â§"),n("Omacr","Å"),n("omacr","Å"),n("Omega","Î©"),n("omega","Ï"),n("Omicron","Î"),n("omicron","Î¿"),n("omid","â¦¶"),n("ominus","â"),n("Oopf","ð"),n("oopf","ð "),n("opar","â¦·"),n("OpenCurlyDoubleQuote","â"),n("OpenCurlyQuote","â"),n("operp","â¦¹"),n("oplus","â"),n("orarr","â»"),n("Or","â©"),n("or","â¨"),n("ord","â©"),n("order","â´"),n("orderof","â´"),n("ordf","Âª"),n("ordm","Âº"),n("origof","â¶"),n("oror","â©"),n("orslope","â©"),n("orv","â©"),n("oS","â"),n("Oscr","ðª"),n("oscr","â´"),n("Oslash","Ã"),n("oslash","Ã¸"),n("osol","â"),n("Otilde","Ã"),n("otilde","Ãµ"),n("otimesas","â¨¶"),n("Otimes","â¨·"),n("otimes","â"),n("Ouml","Ã"),n("ouml","Ã¶"),n("ovbar","â½"),n("OverBar","â¾"),n("OverBrace","â"),n("OverBracket","â´"),n("OverParenthesis","â"),n("para","Â¶"),n("parallel","â¥"),n("par","â¥"),n("parsim","â«³"),n("parsl","â«½"),n("part","â"),n("PartialD","â"),n("Pcy","Ð"),n("pcy","Ð¿"),n("percnt","%"),n("period","."),n("permil","â°"),n("perp","â¥"),n("pertenk","â±"),n("Pfr","ð"),n("pfr","ð­"),n("Phi","Î¦"),n("phi","Ï"),n("phiv","Ï"),n("phmmat","â³"),n("phone","â"),n("Pi","Î "),n("pi","Ï"),n("pitchfork","â"),n("piv","Ï"),n("planck","â"),n("planckh","â"),n("plankv","â"),n("plusacir","â¨£"),n("plusb","â"),n("pluscir","â¨¢"),n("plus","+"),n("plusdo","â"),n("plusdu","â¨¥"),n("pluse","â©²"),n("PlusMinus","Â±"),n("plusmn","Â±"),n("plussim","â¨¦"),n("plustwo","â¨§"),n("pm","Â±"),n("Poincareplane","â"),n("pointint","â¨"),n("popf","ð¡"),n("Popf","â"),n("pound","Â£"),n("prap","âª·"),n("Pr","âª»"),n("pr","âº"),n("prcue","â¼"),n("precapprox","âª·"),n("prec","âº"),n("preccurlyeq","â¼"),n("Precedes","âº"),n("PrecedesEqual","âª¯"),n("PrecedesSlantEqual","â¼"),n("PrecedesTilde","â¾"),n("preceq","âª¯"),n("precnapprox","âª¹"),n("precneqq","âªµ"),n("precnsim","â¨"),n("pre","âª¯"),n("prE","âª³"),n("precsim","â¾"),n("prime","â²"),n("Prime","â³"),n("primes","â"),n("prnap","âª¹"),n("prnE","âªµ"),n("prnsim","â¨"),n("prod","â"),n("Product","â"),n("profalar","â®"),n("profline","â"),n("profsurf","â"),n("prop","â"),n("Proportional","â"),n("Proportion","â·"),n("propto","â"),n("prsim","â¾"),n("prurel","â°"),n("Pscr","ð«"),n("pscr","ð"),n("Psi","Î¨"),n("psi","Ï"),n("puncsp","â"),n("Qfr","ð"),n("qfr","ð®"),n("qint","â¨"),n("qopf","ð¢"),n("Qopf","â"),n("qprime","â"),n("Qscr","ð¬"),n("qscr","ð"),n("quaternions","â"),n("quatint","â¨"),n("quest","?"),n("questeq","â"),n("quot",'"'),n("QUOT",'"'),n("rAarr","â"),n("race","â½Ì±"),n("Racute","Å"),n("racute","Å"),n("radic","â"),n("raemptyv","â¦³"),n("rang","â©"),n("Rang","â«"),n("rangd","â¦"),n("range","â¦¥"),n("rangle","â©"),n("raquo","Â»"),n("rarrap","â¥µ"),n("rarrb","â¥"),n("rarrbfs","â¤ "),n("rarrc","â¤³"),n("rarr","â"),n("Rarr","â "),n("rArr","â"),n("rarrfs","â¤"),n("rarrhk","âª"),n("rarrlp","â¬"),n("rarrpl","â¥"),n("rarrsim","â¥´"),n("Rarrtl","â¤"),n("rarrtl","â£"),n("rarrw","â"),n("ratail","â¤"),n("rAtail","â¤"),n("ratio","â¶"),n("rationals","â"),n("rbarr","â¤"),n("rBarr","â¤"),n("RBarr","â¤"),n("rbbrk","â³"),n("rbrace","}"),n("rbrack","]"),n("rbrke","â¦"),n("rbrksld","â¦"),n("rbrkslu","â¦"),n("Rcaron","Å"),n("rcaron","Å"),n("Rcedil","Å"),n("rcedil","Å"),n("rceil","â"),n("rcub","}"),n("Rcy","Ð "),n("rcy","Ñ"),n("rdca","â¤·"),n("rdldhar","â¥©"),n("rdquo","â"),n("rdquor","â"),n("rdsh","â³"),n("real","â"),n("realine","â"),n("realpart","â"),n("reals","â"),n("Re","â"),n("rect","â­"),n("reg","Â®"),n("REG","Â®"),n("ReverseElement","â"),n("ReverseEquilibrium","â"),n("ReverseUpEquilibrium","â¥¯"),n("rfisht","â¥½"),n("rfloor","â"),n("rfr","ð¯"),n("Rfr","â"),n("rHar","â¥¤"),n("rhard","â"),n("rharu","â"),n("rharul","â¥¬"),n("Rho","Î¡"),n("rho","Ï"),n("rhov","Ï±"),n("RightAngleBracket","â©"),n("RightArrowBar","â¥"),n("rightarrow","â"),n("RightArrow","â"),n("Rightarrow","â"),n("RightArrowLeftArrow","â"),n("rightarrowtail","â£"),n("RightCeiling","â"),n("RightDoubleBracket","â§"),n("RightDownTeeVector","â¥"),n("RightDownVectorBar","â¥"),n("RightDownVector","â"),n("RightFloor","â"),n("rightharpoondown","â"),n("rightharpoonup","â"),n("rightleftarrows","â"),n("rightleftharpoons","â"),n("rightrightarrows","â"),n("rightsquigarrow","â"),n("RightTeeArrow","â¦"),n("RightTee","â¢"),n("RightTeeVector","â¥"),n("rightthreetimes","â"),n("RightTriangleBar","â§"),n("RightTriangle","â³"),n("RightTriangleEqual","âµ"),n("RightUpDownVector","â¥"),n("RightUpTeeVector","â¥"),n("RightUpVectorBar","â¥"),n("RightUpVector","â¾"),n("RightVectorBar","â¥"),n("RightVector","â"),n("ring","Ë"),n("risingdotseq","â"),n("rlarr","â"),n("rlhar","â"),n("rlm","â"),n("rmoustache","â±"),n("rmoust","â±"),n("rnmid","â«®"),n("roang","â­"),n("roarr","â¾"),n("robrk","â§"),n("ropar","â¦"),n("ropf","ð£"),n("Ropf","â"),n("roplus","â¨®"),n("rotimes","â¨µ"),n("RoundImplies","â¥°"),n("rpar",")"),n("rpargt","â¦"),n("rppolint","â¨"),n("rrarr","â"),n("Rrightarrow","â"),n("rsaquo","âº"),n("rscr","ð"),n("Rscr","â"),n("rsh","â±"),n("Rsh","â±"),n("rsqb","]"),n("rsquo","â"),n("rsquor","â"),n("rthree","â"),n("rtimes","â"),n("rtri","â¹"),n("rtrie","âµ"),n("rtrif","â¸"),n("rtriltri","â§"),n("RuleDelayed","â§´"),n("ruluhar","â¥¨"),n("rx","â"),n("Sacute","Å"),n("sacute","Å"),n("sbquo","â"),n("scap","âª¸"),n("Scaron","Å "),n("scaron","Å¡"),n("Sc","âª¼"),n("sc","â»"),n("sccue","â½"),n("sce","âª°"),n("scE","âª´"),n("Scedil","Å"),n("scedil","Å"),n("Scirc","Å"),n("scirc","Å"),n("scnap","âªº"),n("scnE","âª¶"),n("scnsim","â©"),n("scpolint","â¨"),n("scsim","â¿"),n("Scy","Ð¡"),n("scy","Ñ"),n("sdotb","â¡"),n("sdot","â"),n("sdote","â©¦"),n("searhk","â¤¥"),n("searr","â"),n("seArr","â"),n("searrow","â"),n("sect","Â§"),n("semi",";"),n("seswar","â¤©"),n("setminus","â"),n("setmn","â"),n("sext","â¶"),n("Sfr","ð"),n("sfr","ð°"),n("sfrown","â¢"),n("sharp","â¯"),n("SHCHcy","Ð©"),n("shchcy","Ñ"),n("SHcy","Ð¨"),n("shcy","Ñ"),n("ShortDownArrow","â"),n("ShortLeftArrow","â"),n("shortmid","â£"),n("shortparallel","â¥"),n("ShortRightArrow","â"),n("ShortUpArrow","â"),n("shy","Â­"),n("Sigma","Î£"),n("sigma","Ï"),n("sigmaf","Ï"),n("sigmav","Ï"),n("sim","â¼"),n("simdot","â©ª"),n("sime","â"),n("simeq","â"),n("simg","âª"),n("simgE","âª "),n("siml","âª"),n("simlE","âª"),n("simne","â"),n("simplus","â¨¤"),n("simrarr","â¥²"),n("slarr","â"),n("SmallCircle","â"),n("smallsetminus","â"),n("smashp","â¨³"),n("smeparsl","â§¤"),n("smid","â£"),n("smile","â£"),n("smt","âªª"),n("smte","âª¬"),n("smtes","âª¬ï¸"),n("SOFTcy","Ð¬"),n("softcy","Ñ"),n("solbar","â¿"),n("solb","â§"),n("sol","/"),n("Sopf","ð"),n("sopf","ð¤"),n("spades","â "),n("spadesuit","â "),n("spar","â¥"),n("sqcap","â"),n("sqcaps","âï¸"),n("sqcup","â"),n("sqcups","âï¸"),n("Sqrt","â"),n("sqsub","â"),n("sqsube","â"),n("sqsubset","â"),n("sqsubseteq","â"),n("sqsup","â"),n("sqsupe","â"),n("sqsupset","â"),n("sqsupseteq","â"),n("square","â¡"),n("Square","â¡"),n("SquareIntersection","â"),n("SquareSubset","â"),n("SquareSubsetEqual","â"),n("SquareSuperset","â"),n("SquareSupersetEqual","â"),n("SquareUnion","â"),n("squarf","âª"),n("squ","â¡"),n("squf","âª"),n("srarr","â"),n("Sscr","ð®"),n("sscr","ð"),n("ssetmn","â"),n("ssmile","â£"),n("sstarf","â"),n("Star","â"),n("star","â"),n("starf","â"),n("straightepsilon","Ïµ"),n("straightphi","Ï"),n("strns","Â¯"),n("sub","â"),n("Sub","â"),n("subdot","âª½"),n("subE","â«"),n("sube","â"),n("subedot","â«"),n("submult","â«"),n("subnE","â«"),n("subne","â"),n("subplus","âª¿"),n("subrarr","â¥¹"),n("subset","â"),n("Subset","â"),n("subseteq","â"),n("subseteqq","â«"),n("SubsetEqual","â"),n("subsetneq","â"),n("subsetneqq","â«"),n("subsim","â«"),n("subsub","â«"),n("subsup","â«"),n("succapprox","âª¸"),n("succ","â»"),n("succcurlyeq","â½"),n("Succeeds","â»"),n("SucceedsEqual","âª°"),n("SucceedsSlantEqual","â½"),n("SucceedsTilde","â¿"),n("succeq","âª°"),n("succnapprox","âªº"),n("succneqq","âª¶"),n("succnsim","â©"),n("succsim","â¿"),n("SuchThat","â"),n("sum","â"),n("Sum","â"),n("sung","âª"),n("sup1","Â¹"),n("sup2","Â²"),n("sup3","Â³"),n("sup","â"),n("Sup","â"),n("supdot","âª¾"),n("supdsub","â«"),n("supE","â«"),n("supe","â"),n("supedot","â«"),n("Superset","â"),n("SupersetEqual","â"),n("suphsol","â"),n("suphsub","â«"),n("suplarr","â¥»"),n("supmult","â«"),n("supnE","â«"),n("supne","â"),n("supplus","â«"),n("supset","â"),n("Supset","â"),n("supseteq","â"),n("supseteqq","â«"),n("supsetneq","â"),n("supsetneqq","â«"),n("supsim","â«"),n("supsub","â«"),n("supsup","â«"),n("swarhk","â¤¦"),n("swarr","â"),n("swArr","â"),n("swarrow","â"),n("swnwar","â¤ª"),n("szlig","Ã"),n("Tab","	"),n("target","â"),n("Tau","Î¤"),n("tau","Ï"),n("tbrk","â´"),n("Tcaron","Å¤"),n("tcaron","Å¥"),n("Tcedil","Å¢"),n("tcedil","Å£"),n("Tcy","Ð¢"),n("tcy","Ñ"),n("tdot","â"),n("telrec","â"),n("Tfr","ð"),n("tfr","ð±"),n("there4","â´"),n("therefore","â´"),n("Therefore","â´"),n("Theta","Î"),n("theta","Î¸"),n("thetasym","Ï"),n("thetav","Ï"),n("thickapprox","â"),n("thicksim","â¼"),n("ThickSpace","ââ"),n("ThinSpace","â"),n("thinsp","â"),n("thkap","â"),n("thksim","â¼"),n("THORN","Ã"),n("thorn","Ã¾"),n("tilde","Ë"),n("Tilde","â¼"),n("TildeEqual","â"),n("TildeFullEqual","â"),n("TildeTilde","â"),n("timesbar","â¨±"),n("timesb","â "),n("times","Ã"),n("timesd","â¨°"),n("tint","â­"),n("toea","â¤¨"),n("topbot","â¶"),n("topcir","â«±"),n("top","â¤"),n("Topf","ð"),n("topf","ð¥"),n("topfork","â«"),n("tosa","â¤©"),n("tprime","â´"),n("trade","â¢"),n("TRADE","â¢"),n("triangle","âµ"),n("triangledown","â¿"),n("triangleleft","â"),n("trianglelefteq","â´"),n("triangleq","â"),n("triangleright","â¹"),n("trianglerighteq","âµ"),n("tridot","â¬"),n("trie","â"),n("triminus","â¨º"),n("TripleDot","â"),n("triplus","â¨¹"),n("trisb","â§"),n("tritime","â¨»"),n("trpezium","â¢"),n("Tscr","ð¯"),n("tscr","ð"),n("TScy","Ð¦"),n("tscy","Ñ"),n("TSHcy","Ð"),n("tshcy","Ñ"),n("Tstrok","Å¦"),n("tstrok","Å§"),n("twixt","â¬"),n("twoheadleftarrow","â"),n("twoheadrightarrow","â "),n("Uacute","Ã"),n("uacute","Ãº"),n("uarr","â"),n("Uarr","â"),n("uArr","â"),n("Uarrocir","â¥"),n("Ubrcy","Ð"),n("ubrcy","Ñ"),n("Ubreve","Å¬"),n("ubreve","Å­"),n("Ucirc","Ã"),n("ucirc","Ã»"),n("Ucy","Ð£"),n("ucy","Ñ"),n("udarr","â"),n("Udblac","Å°"),n("udblac","Å±"),n("udhar","â¥®"),n("ufisht","â¥¾"),n("Ufr","ð"),n("ufr","ð²"),n("Ugrave","Ã"),n("ugrave","Ã¹"),n("uHar","â¥£"),n("uharl","â¿"),n("uharr","â¾"),n("uhblk","â"),n("ulcorn","â"),n("ulcorner","â"),n("ulcrop","â"),n("ultri","â¸"),n("Umacr","Åª"),n("umacr","Å«"),n("uml","Â¨"),n("UnderBar","_"),n("UnderBrace","â"),n("UnderBracket","âµ"),n("UnderParenthesis","â"),n("Union","â"),n("UnionPlus","â"),n("Uogon","Å²"),n("uogon","Å³"),n("Uopf","ð"),n("uopf","ð¦"),n("UpArrowBar","â¤"),n("uparrow","â"),n("UpArrow","â"),n("Uparrow","â"),n("UpArrowDownArrow","â"),n("updownarrow","â"),n("UpDownArrow","â"),n("Updownarrow","â"),n("UpEquilibrium","â¥®"),n("upharpoonleft","â¿"),n("upharpoonright","â¾"),n("uplus","â"),n("UpperLeftArrow","â"),n("UpperRightArrow","â"),n("upsi","Ï"),n("Upsi","Ï"),n("upsih","Ï"),n("Upsilon","Î¥"),n("upsilon","Ï"),n("UpTeeArrow","â¥"),n("UpTee","â¥"),n("upuparrows","â"),n("urcorn","â"),n("urcorner","â"),n("urcrop","â"),n("Uring","Å®"),n("uring","Å¯"),n("urtri","â¹"),n("Uscr","ð°"),n("uscr","ð"),n("utdot","â°"),n("Utilde","Å¨"),n("utilde","Å©"),n("utri","âµ"),n("utrif","â´"),n("uuarr","â"),n("Uuml","Ã"),n("uuml","Ã¼"),n("uwangle","â¦§"),n("vangrt","â¦"),n("varepsilon","Ïµ"),n("varkappa","Ï°"),n("varnothing","â"),n("varphi","Ï"),n("varpi","Ï"),n("varpropto","â"),n("varr","â"),n("vArr","â"),n("varrho","Ï±"),n("varsigma","Ï"),n("varsubsetneq","âï¸"),n("varsubsetneqq","â«ï¸"),n("varsupsetneq","âï¸"),n("varsupsetneqq","â«ï¸"),n("vartheta","Ï"),n("vartriangleleft","â²"),n("vartriangleright","â³"),n("vBar","â«¨"),n("Vbar","â««"),n("vBarv","â«©"),n("Vcy","Ð"),n("vcy","Ð²"),n("vdash","â¢"),n("vDash","â¨"),n("Vdash","â©"),n("VDash","â«"),n("Vdashl","â«¦"),n("veebar","â»"),n("vee","â¨"),n("Vee","â"),n("veeeq","â"),n("vellip","â®"),n("verbar","|"),n("Verbar","â"),n("vert","|"),n("Vert","â"),n("VerticalBar","â£"),n("VerticalLine","|"),n("VerticalSeparator","â"),n("VerticalTilde","â"),n("VeryThinSpace","â"),n("Vfr","ð"),n("vfr","ð³"),n("vltri","â²"),n("vnsub","ââ"),n("vnsup","ââ"),n("Vopf","ð"),n("vopf","ð§"),n("vprop","â"),n("vrtri","â³"),n("Vscr","ð±"),n("vscr","ð"),n("vsubnE","â«ï¸"),n("vsubne","âï¸"),n("vsupnE","â«ï¸"),n("vsupne","âï¸"),n("Vvdash","âª"),n("vzigzag","â¦"),n("Wcirc","Å´"),n("wcirc","Åµ"),n("wedbar","â©"),n("wedge","â§"),n("Wedge","â"),n("wedgeq","â"),n("weierp","â"),n("Wfr","ð"),n("wfr","ð´"),n("Wopf","ð"),n("wopf","ð¨"),n("wp","â"),n("wr","â"),n("wreath","â"),n("Wscr","ð²"),n("wscr","ð"),n("xcap","â"),n("xcirc","â¯"),n("xcup","â"),n("xdtri","â½"),n("Xfr","ð"),n("xfr","ðµ"),n("xharr","â·"),n("xhArr","âº"),n("Xi","Î"),n("xi","Î¾"),n("xlarr","âµ"),n("xlArr","â¸"),n("xmap","â¼"),n("xnis","â»"),n("xodot","â¨"),n("Xopf","ð"),n("xopf","ð©"),n("xoplus","â¨"),n("xotime","â¨"),n("xrarr","â¶"),n("xrArr","â¹"),n("Xscr","ð³"),n("xscr","ð"),n("xsqcup","â¨"),n("xuplus","â¨"),n("xutri","â³"),n("xvee","â"),n("xwedge","â"),n("Yacute","Ã"),n("yacute","Ã½"),n("YAcy","Ð¯"),n("yacy","Ñ"),n("Ycirc","Å¶"),n("ycirc","Å·"),n("Ycy","Ð«"),n("ycy","Ñ"),n("yen","Â¥"),n("Yfr","ð"),n("yfr","ð¶"),n("YIcy","Ð"),n("yicy","Ñ"),n("Yopf","ð"),n("yopf","ðª"),n("Yscr","ð´"),n("yscr","ð"),n("YUcy","Ð®"),n("yucy","Ñ"),n("yuml","Ã¿"),n("Yuml","Å¸"),n("Zacute","Å¹"),n("zacute","Åº"),n("Zcaron","Å½"),n("zcaron","Å¾"),n("Zcy","Ð"),n("zcy","Ð·"),n("Zdot","Å»"),n("zdot","Å¼"),n("zeetrf","â¨"),n("ZeroWidthSpace","â"),n("Zeta","Î"),n("zeta","Î¶"),n("zfr","ð·"),n("Zfr","â¨"),n("ZHcy","Ð"),n("zhcy","Ð¶"),n("zigrarr","â"),n("zopf","ð«"),n("Zopf","â¤"),n("Zscr","ðµ"),n("zscr","ð"),n("zwj","â"),n("zwnj","â")])),Vk=p(Br,function(e){return p(bt,"&"+(e+";"),p($o,e,Wk))},Sn(Bi(qb))),Yt=g1,Pg=Se(function(e,t,r){e:for(;;)if(t.b){var s=t.a,o=t.b;switch(s){case"0":var a=e-1,c=o,i=r;e=a,t=c,r=i;continue e;case"1":var a=e-1,c=o,i=r+p(Yt,16,e);e=a,t=c,r=i;continue e;case"2":var a=e-1,c=o,i=r+2*p(Yt,16,e);e=a,t=c,r=i;continue e;case"3":var a=e-1,c=o,i=r+3*p(Yt,16,e);e=a,t=c,r=i;continue e;case"4":var a=e-1,c=o,i=r+4*p(Yt,16,e);e=a,t=c,r=i;continue e;case"5":var a=e-1,c=o,i=r+5*p(Yt,16,e);e=a,t=c,r=i;continue e;case"6":var a=e-1,c=o,i=r+6*p(Yt,16,e);e=a,t=c,r=i;continue e;case"7":var a=e-1,c=o,i=r+7*p(Yt,16,e);e=a,t=c,r=i;continue e;case"8":var a=e-1,c=o,i=r+8*p(Yt,16,e);e=a,t=c,r=i;continue e;case"9":var a=e-1,c=o,i=r+9*p(Yt,16,e);e=a,t=c,r=i;continue e;case"a":var a=e-1,c=o,i=r+10*p(Yt,16,e);e=a,t=c,r=i;continue e;case"b":var a=e-1,c=o,i=r+11*p(Yt,16,e);e=a,t=c,r=i;continue e;case"c":var a=e-1,c=o,i=r+12*p(Yt,16,e);e=a,t=c,r=i;continue e;case"d":var a=e-1,c=o,i=r+13*p(Yt,16,e);e=a,t=c,r=i;continue e;case"e":var a=e-1,c=o,i=r+14*p(Yt,16,e);e=a,t=c,r=i;continue e;case"f":var a=e-1,c=o,i=r+15*p(Yt,16,e);e=a,t=c,r=i;continue e;default:var u=s;return et(Hl(u)+" is not a valid hexadecimal character.")}}else return ct(r)}),Uv=D(function(e,t){if(t.$){var s=t.a;return et(e(s))}else{var r=t.a;return ct(r)}}),Gk=function(e){if(e.b){e.a;var t=e.b;return ne(t)}else return fe},Jk=P1,wg=function(e){return U(Jk,it,q,e)},Kk=function(e){if(Hn(e))return et("Empty strings are not valid hexadecimal strings.");var t=function(){if(p(Sd,"-",e)){var s=p(bt,q,Gk(wg(e)));return p(pR,OD,U(Pg,dn(s)-1,s,0))}else return U(Pg,lv(e)-1,wg(e),0)}(),r=function(s){return p(pt," ",$(['"'+(e+'"'),"is not a valid hexadecimal string because",s]))};return p(Uv,r,t)},Zk=function(e){var t=pu(e);return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102},Qk=p(qv,function(e){var t=Kk(Fi(e));if(t.$){var s=t.a;return Bv(s)}else{var r=t.a;return qt(r)}},Sn(Bi(Zk))),Eg={$:1},Rp=EE,Yk=AE,DR=D(function(e,t){return{bR:t.bR+(e-t.b),c:t.c,e:t.e,b:e,cs:t.cs,a:t.a}}),kR=wE,ln=PE,Ag=D(function(e,t){if(U(ln,101,e,t)||U(ln,69,e,t)){var r=e+1,s=U(ln,43,r,t)||U(ln,45,r,t)?r+1:r,o=p(kR,s,t);return Be(s,o)?-o:o}else return e}),Xk=D(function(e,t){return U(ln,46,e,t)?p(Ag,p(kR,e+1,t),t):p(Ag,e,t)}),Ku=vr(function(e,t,r,s,o){var a=s.a,c=s.b;if(t.$===1){var i=t.a;return p(zt,!0,p(On,o,i))}else{var u=t.a;return Be(r,a)?p(zt,dt(o.b,r)<0,p(On,o,e)):U(ar,!0,u(c),p(DR,a,o))}}),e2=N1,Tg=Bn(function(e,t,r,s,o,a){var c=o.a,i=p(Xk,c,a.a);if(i<0)return p(zt,!0,rt(PR,a.cs,a.bR-(i+a.b),e,a.c));if(Be(a.b,i))return p(zt,!1,p(On,a,t));if(Be(c,i))return Re(Ku,e,r,a.b,o,a);if(s.$===1)return s.a,p(zt,!0,p(On,a,e));var u=s.a,l=e2(U(_l,a.b,i,a.a));if(l.$===1)return p(zt,!0,p(On,a,e));var h=l.a;return U(ar,!0,u(h),p(DR,i,a))}),t2=function(e){return function(t){if(U(ln,48,t.b,t.a)){var r=t.b+1,s=r+1;return U(ln,120,r,t.a)?Re(Ku,e.c9,e.b2,s,p(Yk,s,t.a),t):U(ln,111,r,t.a)?Re(Ku,e.c9,e.cb,s,U(Rp,8,s,t.a),t):U(ln,98,r,t.a)?Re(Ku,e.c9,e.bO,s,U(Rp,2,s,t.a),t):Oi(Tg,e.c9,e.bY,e.b5,e.b$,n(r,0),t)}else return Oi(Tg,e.c9,e.bY,e.b5,e.b$,U(Rp,10,t.b,t.a),t)}},r2=D(function(e,t){return t2({bO:et(t),bY:e,b$:et(t),b2:et(t),b5:ct(Ct),c9:t,cb:et(t)})}),n2=p(r2,Eg,Eg),i2=function(){var e=xr($([p($r,p(lt,qt(Ct),Jt(function(t){return t==="x"||t==="X"})),Qk),p($r,p(lt,qt(Ct),Nn(Gt("0"))),n2)]));return p($r,p(lt,qt(Ct),Jt(Gt("#"))),p(Br,p(be,X0,Hl),e))}(),Hv=p($r,p(lt,qt(Ct),Jt(Gt("&"))),xr($([p(lt,xd(Vk),_g),p(lt,xd(i2),_g),qt("&")]))),Ig=function(e){var t=function(r){return!Be(r,e)&&r!=="&"};return p($r,p(lt,qt(Ct),Jt(Gt(e))),p(lt,p(Br,pt(""),Fv(xr($([Sn(Bi(t)),Hv])))),Jt(Gt(e))))},Wv=D(function(e,t){return p(TR,q,function(r){return xr($([p(Br,function(s){return AR(p(it,s,r))},t),Nl(r)?Bv("expecting at least one "+e):qt(ER(Or(r)))]))})}),o2=function(){var e=function(t){return!qn(t)&&t!=='"'&&t!=="'"&&t!=="="&&t!=="<"&&t!==">"&&t!=="`"&&t!=="&"};return p(Br,pt(""),p(Wv,"attribute value",xr($([Sn(Bi(e)),Hv]))))}(),s2=xr($([p($r,p(lt,p(lt,qt(Ct),Jt(Gt("="))),Nn(qn)),xr($([o2,Ig('"'),Ig("'")]))),qt("")])),a2=p($r,p($r,qt(IR),p(lt,Uk,Nn(qn))),p(lt,s2,Nn(qn))),c2=Fv(a2),u2=p(Br,Fi,Sn(p(lt,Jt(vd),Nn(function(e){return vd(e)||e==="-"})))),l2=function(e){return{$:0,a:e}},p2=p(Br,p(be,pt(""),l2),p(Wv,"text element",xr($([Sn(Bi(function(e){return e!=="<"&&e!=="&"})),Hv]))));function Vv(){return xr($([p2,Mk,Gv()]))}function Gv(){return p(qv,function(e){var t=e.a,r=e.b;return gR(t)?p(lt,p(lt,qt(U(zd,t,r,q)),xr($([Jt(Gt("/")),qt(0)]))),Jt(Gt(">"))):p($r,p(lt,qt(p(zd,t,r)),Jt(Gt(">"))),p(lt,Fv(xd(Vv())),Ck(t)))},p($r,p($r,p(lt,qt(IR),Jt(Gt("<"))),p(lt,u2,Nn(qn))),c2))}var MR=Vv();Vv=function(){return MR};var h2=Gv();Gv=function(){return h2};var d2=Se(function(e,t,r){return{bR:t,cj:r,cs:e}}),v2=function(e){return U(d2,e.cs,e.bR,e.cj)},OR=D(function(e,t){e:for(;;)switch(e.$){case 0:return t;case 1:var s=e.a,r=e.b,a=s,c=p(it,r,t);e=a,t=c;continue e;default:var s=e.a,o=e.b,a=s,c=p(OR,o,t);e=a,t=c;continue e}}),f2=D(function(e,t){var r=e,s=r({bR:1,c:q,e:1,b:0,cs:1,a:t});if(s.$){var a=s.b;return et(p(OR,a,q))}else{var o=s.b;return ct(o)}}),g2=D(function(e,t){var r=p(f2,e,t);if(r.$){var o=r.a;return et(p(Oe,v2,o))}else{var s=r.a;return ct(s)}}),m2=function(e){return Hn(e)?ct(q):p(g2,p(Wv,"node",MR),e)},S2=D(function(e,t){return p(Cr,al(e),Db(p($R,fo,p(bt,q,Tv(m2(t))))))}),$2=function(e){return{aX:vl(e.aX),bf:p(Rt,vl,e.bf)}},y2=Se(function(e,t,r){return{bX:p(Oe,$2,p(bt,q,r.cc)),az:t?p(Oe,function(s){return{ae:q,cI:s}},p(S2,e,r.bm)):q,bK:vl(r.bm)}}),C2=Se(function(e,t,r){return p(Cr,function(s){return s.bK!==""},p(Oe,p(y2,e,t),r.bT))}),Dg=Se(function(e,t,r){return p(bt,q,p(Rt,Oe(p(C2,e,t)),r.ca))}),b2=D(function(e,t){return U(Ib,"",Ct,p(be,t,e))}),R2=D(function(e,t){switch(t.$){case 0:var r=t.a;return et(k0(r));case 1:return et(O0);case 2:return et(M0);case 3:var s=t.a;return et(D0(s.dy));default:var o=t.b;return p(Uv,I0,e(o))}}),_2=D(function(e,t){return p(b2,e,R2(function(r){return p(Uv,av,p(po,t,r))}))}),jR=function(e){return{$:1,a:e}},zR=D(function(e,t){return{cp:e,cB:t}}),P2=Zt(p(zR,jn,q)),w2=gw,E2=Yd,Zu=Se(function(e,t,r){e:for(;;)if(t.b){var s=t.a,o=t.b;if(s.$){var v=s.a;return p(sr,function(f){var d=v.cF;if(d.$===1)return U(Zu,e,o,r);var y=d.a;return U(Zu,e,o,U(zn,y,f,r))},E2(U(Tb,e,hv(e),v)))}else{var a=s.a,c=p($o,a,r);if(c.$===1){var i=e,u=o,l=r;e=i,t=u,r=l;continue e}else{var h=c.a;return p(sr,function(f){return U(Zu,e,o,p(yv,a,r))},w2(h))}}}else return Zt(r)}),A2=ht(function(e,t,r,s){return p(sr,function(o){return Zt(p(zR,o,r))},U(Zu,e,t,s.cp))}),T2=ht(function(e,t,r,s){var o=s.a,a=s.b;return Be(t,o)?ne(p(hv,e,a(r))):fe}),I2=Se(function(e,t,r){var s=t.a,o=t.b;return p(sr,function(a){return Zt(r)},pv(p(hu,U(T2,e,s,o),r.cB)))}),D2=function(e){return{$:0,a:e}},k2=D(function(e,t){if(t.$){var s=t.a;return jR({cN:s.cN,aS:s.aS,c1:p(hE,e,s.c1),b0:s.b0,a$:s.a$,cE:s.cE,cF:s.cF,bg:s.bg})}else{var r=t.a;return D2(r)}}),M2=D(function(e,t){return{$:0,a:e,b:t}}),O2=D(function(e,t){var r=t.a,s=t.b;return p(M2,r,p(be,s,e))});so.Http=pb(P2,A2,I2,k2,O2);var j2=hb("Http"),z2=function(e){return j2(jR({cN:!1,aS:e.aS,c1:e.c1,b0:e.b0,a$:e.a$,cE:e.cE,cF:e.cF,bg:e.bg}))},x2=function(e){return z2({aS:Iv,c1:e.c1,b0:q,a$:"GET",cE:fe,cF:fe,bg:e.bg})},N2=function(e){return{ca:e}},q2=D(function(e,t){return{bT:t,dq:e}}),L2=Se(function(e,t,r){return{bm:t,cZ:e,cc:r}}),B2=D(function(e,t){return{aX:e,bf:t}}),F2=U(So,B2,p(Ue,"example",ut),xi(p(Ue,"translation",ut))),U2=rt(A0,L2,xi(p(Ue,"description",ut)),p(Ue,"definition",ut),xi(p(Ue,"parsedExamples",_r(F2)))),H2=U(So,q2,p(Ue,"partOfSpeech",ut),p(Ue,"definitions",_r(U2))),W2=p(Mt,N2,xi(p(Ue,"nl",_r(H2)))),V2=function(e){return U(_v,"https://en.wiktionary.org/api/rest_v1/page/definition",$([e]),q)},G2=D(function(e,t){return x2({c1:p(_2,p(lR,e,t),W2),bg:V2(e)})}),J2=Se(function(e,t,r){var s=r;return p(Oe,function(o){var a=o;return p(Oe,function(c){return G(c,{az:p(Oe,function(i){return G(i,{ae:Be(i.cI,e)?t:i.ae})},c.az)})},a)},s)}),K2=D(function(e,t){if(t.$)return e;var r=t.a;return r}),Ki=Se(function(e,t,r){var s=p($o,t,e.aJ);if(s.$)return se(e,p(G2,t,r),An);var o=s.a;return p(xR,U(lR,t,r,ct(o)),e)}),xR=D(function(e,t){if(e.$){var o=e.a,c=e.b,i=c.o,u=c.aj,l=c.as,h=e.c,v=p(K2,t,p(pR,p(GD,o,t),h)),f=n(i,h);if(f.a.$){var R=f.a.a.ae,_=f.a.a.bq,L=f.b,N=function(){if(L.$)return R;var $e=L.a;return U(J2,o,U(Dg,o,!1,$e),R)}(),H=n(u.K,_);if(H.b.b){var F=H.b,I=F.a,a=F.b;return U(Ki,v,I,G(c,{o:yg({bq:a,ae:N})}))}else if(H.a.b){var M=H.a,m=M.a,b=M.b;return U(Ki,v,m,{aj:G(u,{K:b}),as:xe(l,$([ct(N)])),o:Lu})}else return se(v,de,Jr(u.aL(xe(l,$([ct(N)])))))}else if(f.b.$===1){f.a;var d=f.b.a,y=u.K;if(y.b){var m=y.a,b=y.b;return U(Ki,v,m,{aj:G(u,{K:b}),as:xe(l,$([et(d)])),o:Lu})}else return se(v,de,Jr(u.aL(xe(l,$([et(d)])))))}else{f.a;var S=f.b.a,R=U(Dg,o,!0,S),_=VD(R),T=n(u.K,_);if(T.b.b){var k=T.b,I=k.a,a=k.b;return U(Ki,v,I,G(c,{o:yg({bq:a,ae:R})}))}else if(T.a.b){var z=T.a,m=z.a,b=z.b;return U(Ki,v,m,{aj:G(u,{K:b}),as:xe(l,$([ct(R)])),o:Lu})}else return se(v,de,Jr(u.aL(xe(l,$([ct(R)])))))}}else{var r=e.a,s=r.K;if(s.b){var o=s.a,a=s.b;return U(Ki,t,o,{aj:G(r,{K:a}),as:q,o:Lu})}else return se(t,de,Jr(r.aL(q)))}}),Z2=function(e){var t=e;return G(t,{bv:!0})},Q2=function(e){switch(e.$){case 0:return"Initializing Google API";case 1:return"Authenticating Google API";case 2:return"Locating the application folder";case 3:return"Creating the application folder";case 4:return"Locating main spreadsheet";case 5:return"Creating main spreadsheet";case 6:return"Checking applied migrations";case 7:var t=e.a;return"Applying migration "+t;case 8:return"Done";default:var r=e.a;switch(r.$){case 0:return"Failed to authenticate Google API";case 1:return"Failed to locate the application folder";case 2:return"Failed to create the application folder";case 3:return"Failed to locate main spreadsheet";case 4:return"Failed to create main spreadsheet";default:var t=r.a;return"Failure during migration "+t}}},Y2=D(function(e,t){var r=t.at;if(e.$)return se(G(t,{aC:!1}),de,r0(e0));switch(e.a.$){case 8:return e.a,se(G(t,{at:Z2(r)}),p(h0,r,1),He);case 9:return se(G(t,{aC:!0}),de,He);default:var s=e.a;return se(G(t,{bc:Q2(s)}),de,He)}}),X2=D(function(e,t){return{$:8,a:e,b:t}}),eM=function(e){return{$:9,a:e}},tM=function(e){return{$:2,a:e}},fl={$:1},rM=function(e){return{$:2,a:e}},nM={$:1},kg={$:10},iM=function(e){return{$:7,a:e}},oM=D(function(e,t){var r=t;return G(r,{b_:xe(r.b_,e)})}),sM=Se(function(e,t,r){var s=r,o=p(bt,q,p($o,t.Z,s.aH));return G(s,{a0:U(zn,t.Z,t,s.a0),aH:U(zn,t.Z,xe(o,e),s.aH)})}),aM=D(function(e,t){return{b_:q,Z:e,a0:jn,aG:t,aH:jn}}),cM=p(aM,1755984963673,"Sentence Base"),uM=D(function(e,t){return{$:0,a:e,b:t}}),lM={an:$([{aG:"Sentence"},{aG:"Sentence Translation"},{aG:"Word"},{aG:"Word Definition"},{aG:"Sentence Audio"}]),Z:1755984462852,aG:"Sentence Base Model",ds:$([p(uM,0,$([0]))]),dz:XP,dC:$([{cQ:e1,c3:t1,aG:fe}])},pM=function(e){var t=e.l,r=e.n;return Ye($([n("key",We(t)),n("region",We(r))]))},hM=function(e){var t=e.aG;return Ye($([n("name",We(t))]))},NR=pw,dM=function(e){var t=e.aG,r=e.c3,s=e.cQ;return Ye($([n("name",function(){if(t.$)return NR;var o=t.a;return We(o)}()),n("frontHtml",We(r)),n("backHtml",We(s))]))},vM=function(e){var t=e.Z,r=e.aG,s=e.an,o=e.dC,a=e.dz,c=e.ds;return Ye($([n("id",yt(t)),n("name",We(r)),n("fields",p(At,hM,s)),n("templates",p(At,dM,o)),n("styling",We(a)),n("requiredFields",p(At,function(i){if(i.$){var u=i.a,l=i.b;return p(At,Ct,$([yt(u),We("any"),p(At,yt,l)]))}else{var u=i.a,l=i.b;return p(At,Ct,$([yt(u),We("all"),p(At,yt,l)]))}},c))]))},fM=function(e){var t=e.an,r=e.cD;return Ye($([n("fields",p(At,We,t)),n("tags",p(At,We,r))]))},gM=function(e){var t=e.Z,r=e.aG,s=e.a0,o=e.aH,a=e.b_;return Ye($([n("id",yt(t)),n("name",We(r)),n("models",Ye(p(Oe,function(c){var i=c.a,u=c.b;return n(Nt(i),vM(u))},sl(s)))),n("notes",Ye(p(Oe,function(c){var i=c.a,u=c.b;return n(Nt(i),p(At,fM,u))},sl(o)))),n("files",p(At,function(c){var i=c.a,u=c.b;return p(At,Ct,$([We(i),We(u)]))},a))]))},mM=function(e){return Kn({cO:function(t){return Ye($([n("deck",gM(t)),n("fileName",We(e))]))},c4:"ankiExport",dF:Lr(0)})},SM=Kn({cO:function(e){var t=e.l,r=e.n,s=e.cv;return Ye($([n("key",We(t)),n("region",We(r)),n("sentence",We(s))]))},c4:"generateAudio",dF:ut}),$M=f1,qR=p(be,Kn({cO:We,c4:"localStorageRemove",dF:Lr(0)}),Gn(function(e){return Zt(0)})),LR=D(function(e,t){return p(Gn,function(r){return Zt(0)},p(Kn,{cO:function(r){return Ye($([n("key",We(t)),n("value",r)]))},c4:"localStorageSet",dF:Lr(0)},e))}),Mg=D(function(e,t){return e===""?ne(t):fe}),Bu=Se(function(e,t,r){var s=r.E;return G(r,{l:e,n:t,E:G(s,{l:p(Mg,e,"Key field cannot be empty"),n:p(Mg,t,"Region field cannot be empty")})})}),BR=function(e){if(e.$)if(e.a.$){var s=e.a.a;return"Error thrown: "+p(Rl,4,s)}else{var t=e.a,r=t.b.dc;return"Error thrown: "+r}else return"Interop error."},Yc=function(e){return a0(e)},Wl=bo("\\n+"),yM=function(e){var t=e.cI,r=e.ae,s=r,o=s;return p(pt,"",p(Rr,D(function(a,c){var i=c;return'<div><div class="etymology">Etymology '+(Nt(a+1)+(" for "+(t+("</div><ul>"+(p(pt,"",p(Oe,function(u){return"<li>"+(p(pt,"",p(Oe,function(l){return"<div>"+(jr(l)+"</div>")},p(du,Wl,u.bK)))+"</li>")},i))+"</ul></div>")))))}),o))},CM=function(e){return"<li>"+(p(pt,"",p(Oe,function(t){return"<div>"+(jr(t)+"</div>")},p(du,Wl,e.bK)))+(p(pt,"",p(Oe,yM,e.az))+"</li>"))},bM=D(function(e,t){var r=t;return'<div class="etymology">Etymology '+(Nt(e+1)+("</div><ul>"+(p(pt,"",p(Oe,CM,r))+"</ul>")))}),RM=function(e){if(e.$)return"";var t=e.a;return p(pt,"",p(Rr,bM,t))},_M=D(function(e,t){return ll(p(n0,e,t))}),FR=D(function(e,t){return c0({aL:e,K:t})}),PM=D(function(e,t){var r=t.g;switch(e.$){case 0:if(e.a.$)return se(G(t,{g:U(Bu,"","",r)}),p(yr,function(f){return kg},qR(Td)),He);var s=e.a.a;return se(G(t,{g:U(Bu,s.l,s.n,r)}),de,He);case 1:if(e.a.$){var a=e.a.a;return se(G(t,{Y:rM(a)}),de,He)}else{var o=e.a.a;return se(G(t,{W:xe(t.W,o),ak:t.ak+1,Y:nM,aI:dt(dn(o),Ad)<0}),de,He)}case 2:return se(G(t,{Y:$v}),de,B0(t.ak));case 3:var c=e.a;return se(G(t,{g:G(r,{V:c,ao:!0}),G:v0}),de,He);case 4:return se(G(t,{g:Be(t.G,fl)?r:G(r,{ao:!1})}),de,He);case 5:var i=e.a,u=function(){if(i.$){var d=i.a;return U(Bu,r.l,d,r)}else{var f=i.a;return U(Bu,f,r.n,r)}}();return se(G(t,{g:u}),p(yr,function(f){return kg},p(LR,pM(u),Td)),He);case 6:return se(G(t,{G:fl}),de,p(_M,dn(t.g.V),iM));case 7:var l=e.a;return se(t,de,p(FR,X2(l),p(Oe,function(f){return f.cI},t.g.V)));case 8:var l=e.a,h=e.b;return se(t,p(Jn,eM,p(sr,function(f){return p(mM,"export.apkg",U(sM,p(Oe,function(d){var y=d.bp,m=d.cv,b=d.bm;return{an:$([m.cv,"",m.cI,RM(b),"[sound:"+(y+"]")]),cD:m.cD}},f),lM,p(oM,p(Oe,function(d){var y=d.bp,m=d.bZ;return n(y,m)},f),cM)))},p(co,rt($M,ht(function(f,d,y,m){return{bm:y,bZ:m,bp:f+".mp3",cv:d}}),l,t.g.V,h),pv(p(Oe,function(f){var d=f.cv;return SM({l:t.g.l,n:t.g.n,cv:d})},t.g.V))))),He);case 9:var v=e.a;return se(G(t,{g:function(){return v.$===1?r:G(r,{ao:!1})}(),G:tM(v)}),de,function(){if(v.$===1){var f=v.a;return Yc({bi:1,cZ:BR(f),be:"Failed to export batch"})}else return He}());default:return se(t,de,He)}}),wM=function(e){return{$:7,a:e}},EM=function(e){return{$:16,a:e}},AM=function(e){return{$:3,a:e}},TM=function(e){return{$:5,a:e}},IM=function(e){return{$:2,a:e}},DM={$:1},kM={$:3},MM=function(e){return{$:25,a:e}},OM=function(e){return{$:21,a:e}},Og=function(e){return{$:12,a:e}},_p=function(e){return{$:2,a:e}},Nd={$:1},jg={$:26},jM=function(e){return{$:15,a:e}},Jv=function(e){return{$:8,a:e}},Kv=function(e){return{$:7,a:e}},zM=function(e){return p(Rl,0,p(At,We,e))},go=function(e){return xt(zM(e))},xM=function(e){var t=e.cI,r=e.cv,s=e.cD;return p(xl,function(o){return Zn($([no({an:"userEnteredValue",bA:fn($([xt(t),xt(r),go(s),Mn(o)])),q:st(2)}),Kv({c6:!0,I:{al:1,bo:2,q:st(4),bH:1}}),zi({an:"userEnteredValue",I:{aV:ne(1),aW:ne(2),q:st(4),ba:ne(0),bb:ne(1)},bA:fn($([xt(t)]))}),Jv({cV:$([{al:2,bo:1,q:st(4),bH:0}]),I:{aV:ne(2),aW:fe,q:st(4),ba:ne(0),bb:ne(1)}}),ji({al:1,I:{aV:ne(2),aW:ne(2),q:st(4),ba:ne(0),bb:ne(1)}})]))},jv(Ov))},NM=function(e){var t=e.cw,r=e.cu,s=e.cR,o=p(Rr,D(function(i,u){return n(i,u)}),t),a=p(Cr,function(i){var u=i.a;return!p(ou,u,r)},o),c=p(Cr,function(i){var u=i.a;return p(ou,u,r)},o);return p(xl,function(i){return Zn($([no({an:"userEnteredValue",bA:Ju(p(Oe,function(u){var l=u.b.cI,h=u.b.cv,v=u.b.cD;return $([xt(l),xt(h),go(v),xt(s),Mn(i)])},c)),q:st(3)}),no({an:"userEnteredValue",bA:Ju(p(Oe,function(u){var l=u.b.cI;return $([xt(l),Mn(i)])},c)),q:st(4)}),no({an:"userEnteredValue",bA:Ju(p(Oe,function(u){var l=u.b.cI,h=u.b.cv,v=u.b.cD;return $([xt(l),xt(h),go(v),Mn(i)])},a)),q:st(5)}),ji({al:1,I:{aV:ne(4),aW:fe,q:st(2),ba:ne(0),bb:ne(1)}})]))},jv(Ov))},qM=D(function(e,t){return Zn($([Kv({c6:!0,I:{al:1,bo:2,q:st(2),bH:1}}),zi({an:"userEnteredValue",I:{aV:ne(4),aW:ne(2),q:st(2),ba:ne(0),bb:ne(1)},bA:fn($([xt(e.cI),xt(e.cv),go(e.cD),Mn(e.cM)]))}),Jv({cV:$([{al:2,bo:4,q:st(2),bH:0}]),I:{aV:ne(4),aW:fe,q:st(2),ba:ne(0),bb:ne(1)}}),no({an:"userEnteredValue",bA:fn($([xt(Fi(t.cI)),xt(t.cv),go(t.cD),Mn(t.cM)])),q:st(2)}),ji({al:1,I:{aV:ne(4),aW:ne(2),q:st(2),ba:ne(0),bb:ne(1)}})]))}),to=function(e){switch(e.$){case 0:var t=e.a;switch(t.$){case 0:var r=t.a;return"Bad url: '"+(r+"'.");case 1:return"Request timed out.";case 2:return"Encountered a network error.";case 3:var s=t.a;return"Bad response status code: "+(Nt(s)+".");default:var o=t.a;return"Received invalid body: "+o}case 1:var a=e.a;return BR(a);default:return"Platform task error."}},UR=yE(ov),LM=Se(function(e,t,r){e:for(;;){var s=p(cv,dr,e),o=s.a,a=s.b;if(dt(md(o),dr)<0)return p(Vb,!0,{m:t,h:r,k:o});var c=a,i=p(it,Hb(o),t),u=r+1;e=c,t=i,r=u;continue e}}),Pp=function(e){return e.b?U(LM,e,q,0):Fb},qd=4294967295>>>32-nu,Ld=a1,BM=Se(function(e,t,r){e:for(;;){var s=qd&t>>>e,o=p(Ld,s,r);if(o.$){var l=o.a;return p(Ld,qd&t,l)}else{var a=o.a,c=e-nu,i=t,u=a;e=c,t=i,r=u;continue e}}}),FM=function(e){return e>>>5<<5},wp=D(function(e,t){var r=t.a,s=t.b,o=t.c,a=t.d;return e<0||dt(e,r)>-1?fe:dt(e,FM(r))>-1?ne(p(Ld,qd&e,a)):ne(U(BM,s,e,o))}),UM=ht(function(e,t,r,s){return{cM:s,cv:t,cD:r,cI:e}}),HM=function(e){var t=e._;return t},WM=p(be,q0(UM),p(be,cn(Dn),p(be,cn(Dn),p(be,cn(p(be,Dn,p(be,Rt(po(_r(ut))),Zr(Tv)))),p(be,cn(p(be,N0,p(be,Rt(L0),Rt(vo)))),HM))))),zg=p(Ed,p(be,function(e){return e.dE},Av(WM)),p(wd,$([ji({al:1,I:{aV:fe,aW:fe,q:st(0),ba:ne(0),bb:ne(0)}}),zi({an:"userEnteredValue",I:{aV:ne(1),aW:ne(1),q:st(0),ba:ne(0),bb:ne(0)},bA:fn($([Rd("=QUERY("+(eo(2)+`!A1:D,"SELECT * WHERE A <> '' ORDER BY D DESC")`))]))})]),$([eo(0)+"!A2:D"]))),VM=D(function(e,t){return Rr(D(function(r,s){return Be(r,e)?t:s}))}),GM=function(e){return jl(U(R0,e.c4,e.dF,NR))},JM=function(e){return GM({c4:f0(e.c4),dF:e.dF})},KM=p(Gn,function(e){return Zt("")},JM({c4:"readClipboard",dF:ut})),ZM=D(function(e,t){var r=t;return p(yv,e,r)}),QM=function(e){return Zn($([Kv({c6:!0,I:{al:1,bo:2,q:st(2),bH:1}}),zi({an:"userEnteredValue",I:{aV:ne(4),aW:ne(2),q:st(2),ba:ne(0),bb:ne(1)},bA:fn($([xt(e.cI),xt(e.cv),go(e.cD),Mn(e.cM)]))}),Jv({cV:$([{al:2,bo:4,q:st(2),bH:0}]),I:{aV:ne(4),aW:fe,q:st(2),ba:ne(0),bb:ne(1)}}),ji({al:1,I:{aV:ne(4),aW:ne(2),q:st(2),ba:ne(0),bb:ne(1)}})]))},YM=bo("^â([^â]+)â\\n\\n\\w+ \\w+\\n[^\\n]+\\n[^\\n]+\\n\\w+ \\w+ \\w+ \\w+ \\w+ \\w+ \\w+.$"),XM=$E,HR=p(pt,"",p(Oe,function(e){return"\\"+e},$(["!",'"',"#","$","%","&","'","(",")","*","+",",","\\","-",".","/",":",";","<","=",">","?","@","[","]","^","_","`","{","|","}","~","s"]))),qo="[^"+(HR+"]"),eO="["+(HR+"]"),tO=bo("(\\.{3}|"+(qo+("+\\-"+(qo+("+|"+(qo+("*\\'(?:"+(qo+("+)?|"+(qo+("+|"+(eO+")")))))))))))),rO=function(e){return p(Cr,p(nt,d0,XM(fR)),p(Oe,function(t){return t.db},p(UR,tO,e)))},nO=function(e){return ll(s0(e))},iO=D(function(e,t){var r=t.j,s=t.d;switch(e.$){case 0:if(e.a.$)return se(t,p(yr,function(F){return jg},qR(Dd)),He);var o=e.a.a;return se(G(t,{j:G(r,{cD:o})}),de,He);case 1:if(e.a){e.a;var a=s.Y;return a.$?se(G(t,{y:1}),de,He):se(G(t,{d:G(s,{Y:Nd}),y:1}),de,Ii(p(Dr,Og,zg)))}else return e.a,se(G(t,{y:0}),de,He);case 3:var u=e.a,c=jr(u),i=function(){var F=p(UR,YM,c);if(F.b){var M=F.a.dA;if(M.b&&!M.a.$){var j=M.a.a;return j}else return c}else return c}();return Be(i,r.cv)?se(t,de,He):se(G(t,{j:G(r,{M:Id,i:fe,cv:i,K:rO(i)})}),de,He);case 4:var u=e.a;return se(G(t,{j:G(r,{M:DM,i:ne(u)})}),de,p(FR,TM,$([u])));case 5:var l=e.a,h=n(l,r.i);e:for(;;)if(h.a.b)if(h.a.a.$){if(h.b.$)break e;return h.a,se(G(t,{j:G(r,{M:kM})}),de,He)}else{if(h.b.$)break e;var v=h.a,f=v.a.a;return se(G(t,{j:G(r,{M:IM(f)})}),de,He)}else break e;return se(t,de,He);case 2:return se(t,p(yr,AM,KM),He);case 6:return se(G(t,{j:G(r,{U:1,M:Id,i:fe,cv:"",K:q}),d:G(s,{Y:F0})}),de,Ii(p(Dr,wM,xM({cv:r.cv,cD:r.cD,cI:p(bt,"",r.i)}))));case 8:return se(G(t,{j:G(r,{u:{ao:!0,B:"",cD:r.cD}})}),de,He);case 9:var T=e.a;return se(G(t,{j:G(r,{u:function(){var F=r.u;switch(T.$){case 0:var M=T.a;return G(F,{B:M});case 1:var j=T.a;return G(F,{B:"",cD:xe(F.cD,$([jr(j)]))});default:var j=T.a;return G(F,{cD:p(Cr,al(j),F.cD)})}}()})}),de,He);case 10:var H=r.u;return se(G(t,{j:G(r,{u:G(H,{ao:!1})})}),de,He);case 11:var H=r.u;return se(G(t,{j:G(r,{cD:H.cD,u:G(H,{ao:!1})})}),p(Jn,function(F){return jg},p(LR,p(At,We,H.cD),Dd)),He);case 7:if(e.a.$){var d=e.a.a;return se(G(t,{j:G(r,{U:0})}),de,Yc({bi:1,cZ:to(d),be:"Failed to mine sentence"}))}else return se(G(t,{j:G(r,{U:0})}),de,He);case 12:var y=e.a,m=s.Y;return m.$===1?se(G(t,{d:G(s,{Y:_p(y),i:fo})}),de,He):se(t,de,He);case 13:var N=e.a,b=p(ou,N,s.i)?ZM:Mv;return se(G(t,{d:G(s,{i:p(b,N,s.i)})}),de,He);case 14:return se(G(t,{d:G(s,{F:1})}),de,nO(jM));case 15:var S=e.a,R=s.Y;if(R.$===2&&!R.a.$){var _=R.a.a;return se(t,de,Ii(p(Dr,EM,NM({cR:S,cu:s.i,cw:_}))))}else return se(G(t,{d:G(s,{F:0})}),de,He);case 16:if(e.a.$){var d=e.a.a;return se(G(t,{d:G(s,{F:0})}),de,Yc({bi:1,cZ:to(d),be:"Failed to confirm batch"}))}else return se(G(t,{d:G(s,{F:0,Y:Nd,i:fo})}),de,Ii(p(Dr,Og,zg)));case 17:var N=e.a;return se(G(t,{d:G(s,{f:function(){var F=s.Y;if(F.$===2&&!F.a.$){var M=F.a.a;return p(bt,s.f,p(Rt,function(j){return{H:N,ao:!0,aq:"",cv:j,E:{cv:fe,cI:fe}}},p(wp,N,Pp(M))))}else return s.f}()})}),de,He);case 18:var T=e.a;return se(G(t,{d:G(s,{f:function(){var F=s.f,M=F,j=M.E,E=F,ee=E.cv;switch(T.$){case 0:var $e=T.a;return G(F,{cv:G(ee,{cI:$e}),E:G(j,{cI:function(){return $e===""?ne("Word field cannot be empty"):fe}()})});case 1:var oe=T.a;return G(F,{cv:G(ee,{cv:oe}),E:G(j,{cv:function(){return oe===""?ne("Sentence field cannot be empty"):fe}()})});case 2:var De=T.a;return G(F,{aq:De});case 3:var te=T.a;return G(F,{aq:"",cv:G(ee,{cD:xe(ee.cD,$([jr(te)]))})});default:var te=T.a;return G(F,{cv:G(ee,{cD:p(Cr,al(te),ee.cD)})})}}()})}),de,He);case 20:var k=function(){var F=s.Y;if(F.$===2&&!F.a.$){var M=F.a.a;return p(wp,s.f.H,Pp(M))}else return fe}();if(k.$)return se(t,de,He);var I=k.a;return se(G(t,{d:G(s,{O:1})}),de,Ii(p(Dr,OM,p(qM,I,s.f.cv))));case 21:if(e.a.$){var d=e.a.a;return se(G(t,{d:G(s,{O:0})}),de,Yc({bi:1,cZ:to(d),be:"Failed to edit sentence"}))}else{var H=s.f,z=H,L=z.cv;return se(G(t,{d:G(s,{f:G(H,{ao:!1}),O:0,Y:function(){var M=s.Y;if(M.$===2&&!M.a.$){var j=M.a.a;return U(nt,_p,ct,U(VM,H.H,G(L,{cI:Fi(L.cI)}),j))}else return s.Y}()})}),de,He)}case 19:var H=s.f;return se(G(t,{d:G(s,{f:G(H,{ao:!1})})}),de,He);case 22:var N=e.a;return se(G(t,{d:G(s,{v:function(){var F=s.Y;if(F.$===2&&!F.a.$){var M=F.a.a;return p(bt,s.v,p(Rt,function(j){return{H:N,ao:!0,cv:j}},p(wp,N,Pp(M))))}else return s.v}()})}),de,He);case 23:var H=s.v;return se(G(t,{d:G(s,{v:G(H,{ao:!1})})}),de,He);case 24:return se(G(t,{d:G(s,{N:1})}),de,Ii(p(Dr,MM,QM(s.v.cv))));case 25:if(e.a.$){var d=e.a.a;return se(G(t,{d:G(s,{N:0})}),de,Yc({bi:1,cZ:to(d),be:"Failed to delete sentence"}))}else{var H=s.v;return se(G(t,{d:G(s,{v:G(H,{ao:!1}),N:0,Y:function(){var M=s.Y;if(M.$===2&&!M.a.$){var j=M.a.a;return p(nt,_p,ct)(p(hu,Ct,p(Rr,D(function(E,ee){return Be(E,H.H)?fe:ne(ee)}),j)))}else return s.Y}()})}),de,He)}default:return se(t,de,He)}}),Zv=D(function(e,t){return p(zA,t,{di:function(r){return p(tu,ro(Al(IA(r))),e)},dj:n(e,de),dk:function(r){var s=r.bi===1?5e3:3e3;return n(G(e,{aa:e.aa+1,ad:xe(e.ad,$([{aj:r,aB:!1,Z:e.aa}]))}),Vn($([p(yr,tg,p(ug,e.aa,s)),p(yr,tg,p(ug,e.aa,s+500))])))},dn:function(r){return p(tu,ro(Tl(r)),e)},$7:function(r){return p(tu,ro(Il(DA(r))),e)}})}),oO=Se(function(e,t,r){e:for(;;)if(r.b){var s=r.a,o=r.b,a=p(tu,s,e),c=a.a,i=a.b,u=c,l=Vn($([t,i])),h=o;e=u,t=l,r=h;continue e}else return n(e,t)}),tu=D(function(e,t){e:for(;;){var r=NA(t.A),s=n(e,t.A);switch(s.a.$){case 0:var o=s.a.a,a=s.b;return n(G(t,{A:p(jA,p(BA,o,r),a)}),de);case 1:var c=s.a.a;return function(_){var T=_.a,k=_.b,I=_.c;return p(Sv,function(z){return Vn($([z,k]))},p(Zv,T,I))}(p(mv,function(_){return G(t,{A:_})},p(gI,Qb(c),p(LA,c,r))));case 2:var i=s.a.a;if(i.$){var u=i.a;return n(t,OA(u))}else{var c=i.a;return n(t,p(qA,l0(r),p0(mI(c))))}case 3:var l=s.a.a;return U(sO,l,t.ax,t);case 4:var h=s.a.a,v=s.b;return U(aO,h,v,t);case 5:var f=s.a.a;if(f.$)return n(G(t,{R:!t.R}),de);var y=f.a;return n(t,p(Jn,function(T){return AA},kA(y)));case 6:return s.a,n(G(t,{R:!t.R}),de);case 7:var y=s.a.a;return n(t,p(yr,TA(y),MA));case 8:var d=s.a,y=d.a,m=d.b;if(dt(m.dv.dH,xA)<0){var b=gv(ne(y)),S=t;e=b,t=S;continue e}else return n(t,de);default:var R=s.a.a;return n(G(t,{ad:p(Oe,function(_){return Be(_.Z,R)?G(_,{aB:!0}):_},p(Cr,function(_){return!Be(_.Z,R)||!_.aB},t.ad))}),de)}}}),sO=D(function(e,t){switch(e.$){case 0:var r=e.a;return Re(Ep,r,t.aA,MD,Al,function(s){return G(t,{aA:s})});case 1:var r=e.a;return Re(Ep,r,t.aP,xR,Il,function(s){return G(t,{aP:s})});default:var r=e.a;return Re(Ep,r,t.aO,WD,Tl,function(s){return G(t,{aO:s})})}}),aO=D(function(e,t){var r=n(e,t);e:for(;;)switch(r.a.$){case 0:if(r.b.$)break e;var s=r.a.a,o=r.b.a;return Re(Ap,s,o,Y2,Dl,dv);case 1:if(r.b.$===1){var s=r.a.a,o=r.b.a;return Re(Ap,s,o,iO,Ml,fv)}else break e;default:if(r.b.$===2){var s=r.a.a,o=r.b.a;return Re(Ap,s,o,PM,kl,vv)}else break e}return function(a){return n(a,de)}}),Ep=Bn(function(e,t,r,s,o,a){return function(c){var i=c.a,u=c.b,l=c.c;return p(Sv,function(h){return Vn($([h,p(hr,p(nt,ro,s),u)]))},U(oO,i,de,SI(l)))}(p(mv,function(c){return G(a,{ax:o(c)})},p(r,e,t)))}),Ap=Bn(function(e,t,r,s,o,a){return function(c){var i=c.a,u=c.b,l=c.c;return p(Sv,function(h){return Vn($([h,p(hr,p(nt,uo,s),u)]))},p(Zv,i,p(u0,p(nt,uo,s),l)))}(p(mv,function(c){return G(a,{A:o(c)})},p(r,e,t)))}),cO=p(Yb,0,q),uO=Se(function(e,t,r){var s=U(pA,r,t,cO),o=bA(s),a=o.a,c=o.b,i=o.c,u=SA(e),l=u.a,h=u.b,v={ax:l,aa:0,A:a,R:!1,ad:q},f=p(Zv,v,i),d=f.a,y=f.b;return n(d,Vn($t($([$([y,h,c,p(yr,uA,dA)]),Be(Qb(t),ne(0))?q:$([p(h0,s,0)])]))))}),Qv=db,WR=vb,Tp=Se(function(e,t,r){return p(WR,p(nt,ro,e),t(r))}),Ro=Qv(q),lO=function(e){return Ro},pO=function(e){return Ro},hO=function(e){return Ro},dO=function(e){return Qv($([U(Tp,Al,lO,e.aA),U(Tp,Il,hO,e.aP),U(Tp,Tl,pO,e.aO)]))},Ip=Se(function(e,t,r){return p(WR,p(nt,uo,e),t(r))}),vO=function(e){return Ro},fO=function(e){return Ro},gO=function(e){return Ro},mO=function(e){switch(e.$){case 0:var t=e.a;return U(Ip,Dl,vO,t);case 1:var t=e.a;return U(Ip,Ml,gO,t);default:var t=e.a;return U(Ip,kl,fO,t)}},SO=function(e){return Qv($([dO(e.ax),mO(e.A)]))},$O=D(function(e,t){return p(Sb,Dw(e),Mw(t))}),W=$O,vu=function(e){return e?"true":"false"},yO=function(e){return p(W,"aria-atomic",vu(e))},VR=function(e){return p(W,"aria-hidden",vu(e))},Qn=D(function(e,t){return p(mb,e,We(t))}),ot=Qn("className"),CO=function(e){var t=e.b;return t},bO=function(e){return ot(p(pt," ",p(Oe,GE,p(Cr,CO,e))))},me=p(be,Oe(function(e){return n(e,!0)}),bO),we=_t("div"),RO=D(function(e,t){return p(fb,e,$b(t))}),qe=RO("http://www.w3.org/2000/svg"),_O=function(e){return U(qe,"svg",xe($([p(W,"aria-hidden","true"),p(W,"xmlns","http://www.w3.org/2000/svg"),p(W,"width","24"),p(W,"height","24"),p(W,"viewBox","0 0 24 24"),p(W,"fill","none"),p(W,"stroke","currentColor"),p(W,"stroke-width","2"),p(W,"stroke-linecap","round"),p(W,"stroke-linejoin","round")]),e),$([U(qe,"circle",$([p(W,"cx","12"),p(W,"cy","12"),p(W,"r","10")]),q),U(qe,"path",$([p(W,"d","m15 9-6 6")]),q),U(qe,"path",$([p(W,"d","m9 9 6 6")]),q)]))},br=_t("h2"),_o=function(e){return p(W,"aria-label",e)},vt=_t("button"),PO=function(e){return p(W,"data-align",e)},GR=function(e){return p(W,"data-side",e)},gn=_t("header"),wO=function(e){return U(qe,"svg",xe($([p(W,"xmlns","http://www.w3.org/2000/svg"),p(W,"xmlns:xlink","http://www.w3.org/1999/xlink"),p(W,"width","24"),p(W,"height","24"),p(W,"viewBox","0 0 24 24"),p(W,"fill","none"),p(W,"stroke","currentColor"),p(W,"stroke-width","2"),p(W,"stroke-linecap","round"),p(W,"stroke-linejoin","round"),p(W,"data-darkreader-inline-stroke",""),p(W,"style","--darkreader-inline-stroke: currentColor;")]),e),$([U(qe,"rect",$([p(W,"width","18"),p(W,"height","18"),p(W,"x","3"),p(W,"y","3"),p(W,"rx","2")]),q),U(qe,"path",$([p(W,"d","M9 3v18")]),q)]))},EO=function(e){return{$:0,a:e}},JR=gb,KR=D(function(e,t){return p(JR,e,EO(t))}),zr=function(e){return p(KR,"click",Lr(e))},Kt=Qn("type"),AO=p(gn,$([me($(["bg-background","sticky","inset-x-0","top-0","isolate","flex","shrink-0","items-center","gap-2","border-b"]))]),$([p(we,$([me($(["flex","h-14","w-full","items-center","gap-2","px-4"]))]),$([p(vt,$([_o("Toggle sidebar"),PO("start"),GR("bottom"),me($(["btn-sm-icon-ghost","mr-auto","size-7","-ml-1.5"])),Kt("button"),zr(gv(fe))]),$([wO(q)]))]))])),tr=Qn("id"),Yv=function(e){return U(qe,"svg",xe($([p(W,"aria-hidden","true"),p(W,"xmlns","http://www.w3.org/2000/svg"),p(W,"width","24"),p(W,"height","24"),p(W,"viewBox","0 0 24 24"),p(W,"fill","none"),p(W,"stroke","currentColor"),p(W,"stroke-width","2"),p(W,"stroke-linecap","round"),p(W,"stroke-linejoin","round")]),e),$([U(qe,"circle",$([p(W,"cx","12"),p(W,"cy","12"),p(W,"r","10")]),q),U(qe,"path",$([p(W,"d","M12 16v-4")]),q),U(qe,"path",$([p(W,"d","M12 8h.01")]),q)]))},TO=_t("main"),Nr=_t("p"),IO={$:1},DO=_t("br"),ZR=hd,Ie=ZR,kO=function(e){return{cW:p(we,q,$t($([$([Ie(e.bc)]),e.aC?$([p(DO,q,q),p(vt,$([zr(IO)]),$([Ie("Try again")]))]):q]))),be:"Authentication"}},MO={$:2},Dp=function(e){return p(we,$([me($(["flex","flex-col","items-start","gap-3","border","p-3","[&:not(:first-child)]:mt-4"]))]),p(Oe,function(t){return p(we,$([me($(["bg-accent","animate-pulse","rounded-md","h-4",t]))]),q)},e))},OO=function(e){return{$:3,a:e}},qi=_t("label"),jO=function(e){switch(e){case 0:return"Jan";case 1:return"Feb";case 2:return"Mar";case 3:return"Apr";case 4:return"May";case 5:return"Jun";case 6:return"Jul";case 7:return"Aug";case 8:return"Sep";case 9:return"Oct";case 10:return"Nov";default:return"Dec"}},Xv=D(function(e,t){return Wb(e/t)}),zO=Se(function(e,t,r){e:for(;;)if(r.b){var s=r.a,o=r.b;if(dt(s.bG,t)<0)return t+s.b;var a=e,c=t,i=o;e=a,t=c,r=i;continue e}else return t+e}),fu=D(function(e,t){var r=e.a,s=e.b;return U(zO,r,p(Xv,sR(t),6e4),s)}),ef=function(e){var t=p(Xv,e,1440)+719468,r=(t>=0?t:t-146096)/146097|0,s=t-r*146097,o=(s-(s/1460|0)+(s/36524|0)-(s/146096|0))/365|0,a=s-(365*o+(o/4|0)-(o/100|0)),c=(5*a+2)/153|0,i=c+(c<10?3:-9),u=o+r*400;return{bS:a-((153*c+2)/5|0)+1,b8:i,cL:u+(i<=2?1:0)}},xO=D(function(e,t){return ef(p(fu,e,t)).bS}),QR=m1,NO=D(function(e,t){return p(QR,24,p(Xv,p(fu,e,t),60))}),qO=D(function(e,t){return p(QR,60,p(fu,e,t))}),LO=D(function(e,t){var r=ef(p(fu,e,t)).b8;switch(r){case 1:return 0;case 2:return 1;case 3:return 2;case 4:return 3;case 5:return 4;case 6:return 5;case 7:return 6;case 8:return 7;case 9:return 8;case 10:return 9;case 11:return 10;default:return 11}}),BO=D(function(e,t){return ef(p(fu,e,t)).cL}),FO=D(function(e,t){return Nt(p(xO,e,t))+(" "+(jO(p(LO,e,t))+(" "+(Nt(p(BO,e,t))+(", "+(U(Tn,2,"0",Nt(p(NO,e,t)))+(":"+U(Tn,2,"0",Nt(p(qO,e,t))))))))))}),UO=function(e){var t=e;return t.bM},HO=D(function(e,t){var r=p(bt,vo(0),p(Rt,function(s){return s.de},Qr(t)));return p(qi,$([me($(["flex","items-start","gap-3","border","p-3","hover:bg-accent/50","rounded-lg","has-[button:disabled]:opacity-50","[&:not(:first-child)]:mt-4"]))]),$([p(vt,$([Kt("button"),zr(OO(t))]),q),p(we,$([me($(["grid","gap-2"]))]),$([p(br,$([me($(["text-sm","leading-none","font-medium"]))]),$([Ie("Mined on "+p(FO,UO(e.at),r))])),p(Nr,$([ot("text-sm")]),$([Ie(p(pt,", ",p(Oe,function(s){return s.cI},t)))]))]))]))}),tf=D(function(e,t){return p(mb,e,xn(t))}),qr=tf("disabled"),WO={$:6},kp={$:4},VO=function(e){return{$:0,a:e}},GO=function(e){return{$:1,a:e}},xg=function(e){return{$:5,a:e}},gl=function(e){return p(W,"aria-invalid",vu(e))},Vl=_t("article"),gu=function(e){return U(qe,"svg",xe($([p(W,"xmlns","http://www.w3.org/2000/svg"),p(W,"width","24"),p(W,"height","24"),p(W,"viewBox","0 0 24 24"),p(W,"fill","none"),p(W,"stroke","currentColor"),p(W,"stroke-width","2"),p(W,"stroke-linecap","round"),p(W,"stroke-linejoin","round"),p(W,"class","lucide lucide-x-icon lucide-x")]),e),$([U(qe,"path",$([p(W,"d","M18 6 6 18")]),q),U(qe,"path",$([p(W,"d","m6 6 12 12")]),q)]))},Gl=_t("footer"),su=Qn("htmlFor"),rf=_t("form"),au=_t("input"),mu=function(e){return U(qe,"svg",xe($([p(W,"xmlns","http://www.w3.org/2000/svg"),p(W,"width","24"),p(W,"height","24"),p(W,"viewBox","0 0 24 24"),p(W,"fill","none"),p(W,"stroke","currentColor"),p(W,"stroke-width","2"),p(W,"stroke-linecap","round"),p(W,"stroke-linejoin","round"),p(W,"class","animate-spin")]),e),$([U(qe,"path",$([p(W,"d","M12 2v4")]),q),U(qe,"path",$([p(W,"d","m16.2 7.8 2.9-2.9")]),q),U(qe,"path",$([p(W,"d","M18 12h4")]),q),U(qe,"path",$([p(W,"d","m16.2 16.2 2.9 2.9")]),q),U(qe,"path",$([p(W,"d","M12 18v4")]),q),U(qe,"path",$([p(W,"d","m4.9 19.1 2.9-2.9")]),q),U(qe,"path",$([p(W,"d","M2 12h4")]),q),U(qe,"path",$([p(W,"d","m4.9 4.9 2.9 2.9")]),q)]))},JO=function(e){return _t($b(e))},KO=JO,Jl=ht(function(e,t,r,s){return U(KO,"dialog",xe(r,e?$([p(W,"open","")]):q),p(it,p(we,$([me($(["w-screen","h-screen","absolute","bg-black","opacity-50","z-15"])),zr(t)]),q),s))}),ZO=function(e){return n(e,!0)},QO=function(e){return{$:1,a:e}},YR=D(function(e,t){return p(JR,e,QO(t))}),XR=D(function(e,t){return U(Wn,Ue,t,e)}),YO=p(XR,$(["target","value"]),ut),cu=function(e){return p(YR,"input",p(Mt,ZO,p(Mt,e,YO)))},Yr=_t("section"),ml=Qn("value"),XO=function(e){return rt(Jl,e.g.ao,kp,$([me($(["dialog","w-full","sm:max-w-[425px]","max-h-[612px]"]))]),$([p(Vl,q,$([p(gn,q,$([p(br,q,$([Ie("Export batch")]))])),p(Yr,q,$([p(rf,$([me($(["form","grid","gap-4"]))]),$([p(we,$([me($(["grid","gap-3"]))]),$t($([$([p(qi,$([su("export-speech-key")]),$([Ie("Azure Speech Key")])),p(au,$([Kt("text"),tr("export-speech-key"),ml(e.g.l),cu(p(nt,xg,VO)),gl(!Be(e.g.E.l,fe))]),q)]),function(){var t=e.g.E.l;if(t.$)return q;var r=t.a;return $([p(Nr,$([me($(["text-destructive","text-sm"]))]),$([Ie(r)]))])}()]))),p(we,$([me($(["grid","gap-3"]))]),$t($([$([p(qi,$([su("export-speech-region")]),$([Ie("Azure Speech Region")])),p(au,$([Kt("text"),tr("export-speech-region"),ml(e.g.n),cu(p(nt,xg,GO)),gl(!Be(e.g.E.n,fe))]),q)]),function(){var t=e.g.E.n;if(t.$)return q;var r=t.a;return $([p(Nr,$([me($(["text-destructive","text-sm"]))]),$([Ie(r)]))])}()])))]))])),p(Gl,q,$([p(vt,$([ot("btn-outline"),zr(kp),qr(Be(e.G,fl))]),$([Ie("Cancel")])),p(vt,$([ot("btn"),zr(WO),qr(Be(e.G,fl)||!Be(e.g.E.l,fe)||!Be(e.g.E.n,fe))]),$t($([function(){var t=e.G;return t.$===1?$([mu(q)]):q}(),$([Ie("Export batch")])])))])),p(vt,$([Kt("button"),_o("Close dialog"),zr(kp)]),$([gu(q)]))]))]))},Kl=function(e){return U(qe,"svg",xe($([p(W,"xmlns","http://www.w3.org/2000/svg"),p(W,"width","24"),p(W,"height","24"),p(W,"viewBox","0 0 24 24"),p(W,"fill","none"),p(W,"stroke","currentColor"),p(W,"stroke-width","2"),p(W,"stroke-linecap","round"),p(W,"stroke-linejoin","round")]),e),$([U(qe,"circle",$([p(W,"cx","12"),p(W,"cy","12"),p(W,"r","10")]),q),U(qe,"line",$([p(W,"x1","12"),p(W,"x2","12"),p(W,"y1","8"),p(W,"y2","12")]),q),U(qe,"line",$([p(W,"x1","12"),p(W,"x2","12.01"),p(W,"y1","16"),p(W,"y2","16")]),q)]))},ej=function(e){return p(we,$([me($(["flex","flex-col","basis-md","h-full"]))]),$([p(we,$([me($(["grow-1","shrink-0","overflow-auto","basis-0"]))]),$t($([p(Oe,HO(e),e.W),function(){var t=n(e.Y,e.W);switch(t.a.$){case 0:return t.a,$([Dp($(["w-[95%]","w-[30%]"])),Dp($(["w-[85%]"])),Dp($(["w-[97%]","w-[50%]"]))]);case 1:return t.b.b?(t.a,q):(t.a,$([p(we,$([ot("alert")]),$([Yv(q),p(br,q,$([Ie("No batches have yet been made.")]))]))]));default:var r=t.a.a;return $([p(we,$([me($(["alert-destructive","[&:not(:first-child)]:mt-4"]))]),$([Kl(q),p(br,q,$([Ie("Unable to fetch batches.")])),p(Yr,q,$([Ie(to(r))]))]))])}}(),e.ak===1&&Nl(e.W)?q:$([p(vt,$([me($(["btn-ghost","w-full","mt-4"])),qr(Be(e.Y,$v)||e.aI),zr(MO)]),$([Ie(e.aI?"No more batches to load":"Load more")]))])]))),XO(e)]))},tj=function(e){return{cW:p(we,$([me($(["flex","shrink-0","grow-0","justify-center","h-full"]))]),$([ej(e)])),be:"Batches"}},rj={$:2},Ng=function(e){return{$:1,a:e}},qg=function(e){return p(W,"aria-controls",e)},Sl=function(e){return p(W,"aria-labelledby",e)},nj=function(e){return p(W,"aria-orientation",e)},Fu=function(e){return p(W,"aria-selected",vu(e))},ij={$:24},Mp={$:23},Ot=function(e){return p(YR,"click",Lr(n(e,!0)))},nf=function(e){return U(qe,"svg",xe($([p(W,"viewBox","0 0 24 24"),p(W,"fill","none"),p(W,"xmlns","http://www.w3.org/2000/svg")]),e),$([U(qe,"path",$([p(W,"d","M7.0498 7.0498H7.0598M10.5118 3H7.8C6.11984 3 5.27976 3 4.63803 3.32698C4.07354 3.6146 3.6146 4.07354 3.32698 4.63803C3 5.27976 3 6.11984 3 7.8V10.5118C3 11.2455 3 11.6124 3.08289 11.9577C3.15638 12.2638 3.27759 12.5564 3.44208 12.8249C3.6276 13.1276 3.88703 13.387 4.40589 13.9059L9.10589 18.6059C10.2939 19.7939 10.888 20.388 11.5729 20.6105C12.1755 20.8063 12.8245 20.8063 13.4271 20.6105C14.112 20.388 14.7061 19.7939 15.8941 18.6059L18.6059 15.8941C19.7939 14.7061 20.388 14.112 20.6105 13.4271C20.8063 12.8245 20.8063 12.1755 20.6105 11.5729C20.388 10.888 19.7939 10.2939 18.6059 9.10589L13.9059 4.40589C13.387 3.88703 13.1276 3.6276 12.8249 3.44208C12.5564 3.27759 12.2638 3.15638 11.9577 3.08289C11.6124 3 11.2455 3 10.5118 3ZM7.5498 7.0498C7.5498 7.32595 7.32595 7.5498 7.0498 7.5498C6.77366 7.5498 6.5498 7.32595 6.5498 7.0498C6.5498 6.77366 6.77366 6.5498 7.0498 6.5498C7.32595 6.5498 7.5498 6.77366 7.5498 7.0498Z"),p(W,"stroke","#000000"),p(W,"stroke-width","2"),p(W,"stroke-linecap","round"),p(W,"stroke-linejoin","round")]),q)]))},e_=D(function(e,t){return p(we,p(it,me($(["grid","gap-2"])),e),$t($([$([p(br,$([me($(["text-sm","leading-none","font-medium","[&:first-letter]:capitalize"]))]),$([Ie(t.cI)])),p(Nr,$([me($(["text-sm","[&:first-letter]:capitalize"]))]),$([Ie(t.cv)]))]),function(){var r=t.cD;if(r.b){var s=r;return $([p(we,$([me($(["flex","flex-wrap","gap-2"]))]),p(Oe,function(o){return p(we,$([me($(["badge","py-0","px-1.5","rounded-2xl"]))]),$([nf(q),Ie(o)]))},s))])}else return q}()])))}),oj=function(e){var t=e.d;return rt(Jl,t.v.ao,Mp,$([me($(["dialog","w-full","sm:max-w-[425px]","max-h-[612px]"]))]),$([p(Vl,q,$([p(gn,q,$([p(br,q,$([Ie("Delete sentence")])),p(Nr,q,$([Ie("Are you sure you want to delete this sentence?")]))])),p(Yr,q,$([p(e_,q,t.v.cv)])),p(Gl,q,$([p(vt,$([ot("btn-outline"),Ot(Mp),qr(t.N===1)]),$([Ie("Cancel")])),p(vt,$([ot("btn-destructive"),Ot(ij),qr(t.N===1)]),$t($([function(){var r=t.N;return r?$([mu(q)]):q}(),$([Ie("Delete permanently")])])))])),p(vt,$([Kt("button"),_o("Close dialog"),Ot(Mp)]),$([gu(q)]))]))]))},sj={$:20},Op={$:19},Lo=function(e){return{$:18,a:e}},aj=function(e){return{$:2,a:e}},cj=function(e){return{$:1,a:e}},uj=function(e){return{$:3,a:e}},lj=function(e){return{$:4,a:e}},pj=function(e){return{$:0,a:e}},hj=Qn("placeholder"),dj=function(e){return U(qe,"svg",xe($([p(W,"xmlns","http://www.w3.org/2000/svg"),p(W,"width","28"),p(W,"height","28"),p(W,"viewBox","0 0 24 24"),p(W,"fill","none"),p(W,"stroke","currentColor"),p(W,"stroke-width","2"),p(W,"stroke-linecap","round"),p(W,"stroke-linejoin","round")]),e),$([U(qe,"path",$([p(W,"d","M5 12h14")]),q),U(qe,"path",$([p(W,"d","M12 5v14")]),q)]))},t_=function(e){var t=e.cD,r=e.B,s=e.a2,o=e.a3,a=e.a1;return p(we,$([me($(["grid","gap-3"]))]),$t($([$([p(qi,$([su("edit-tags")]),$([Ie("Tags")]))]),function(){if(t.b){var c=t;return $([p(we,$([me($(["flex","flex-wrap","gap-2"]))]),p(Oe,function(i){return p(vt,$([me($(["badge","py-0","px-1.5","rounded-2xl"])),Kt("button"),Ot(o(i))]),$([nf(q),Ie(i),gu(q)]))},c))])}else return q}(),$([p(we,$([me($(["flex","gap-2"]))]),$([p(au,$([Kt("text"),tr("edit-tags"),hj("Add a tag..."),ml(r),cu(s)]),q),p(vt,$([ot("btn-icon-outline"),Kt("button"),qr(Hn(r)||p(Nv,Gt(jr(r)),t)),Ot(a(r))]),$([dj(q)]))]))])])))},vj=_t("textarea"),fj=function(e){var t=e.d;return rt(Jl,t.f.ao,Op,$([me($(["dialog","w-full","sm:max-w-[425px]","max-h-[612px]"]))]),$([p(Vl,q,$([p(gn,q,$([p(br,q,$([Ie("Edit sentence")]))])),p(Yr,q,$([p(rf,$([me($(["form","grid","gap-4"]))]),$([p(we,$([me($(["grid","gap-3"]))]),$t($([$([p(qi,$([su("edit-sentence-word")]),$([Ie("Word")])),p(au,$([Kt("text"),tr("edit-sentence-word"),ml(t.f.cv.cI),cu(p(nt,Lo,pj)),gl(!Be(t.f.E.cI,fe))]),q)]),function(){var r=t.f.E.cI;if(r.$)return q;var s=r.a;return $([p(Nr,$([me($(["text-destructive","text-sm"]))]),$([Ie(s)]))])}()]))),p(we,$([me($(["grid","gap-3"]))]),$t($([$([p(qi,$([su("edit-sentence-sentence")]),$([Ie("Sentence")])),p(vj,$([tr("edit-sentence-sentence"),cu(p(nt,Lo,cj)),gl(!Be(t.f.E.cv,fe))]),$([Ie(t.f.cv.cv)]))]),function(){var r=t.f.E.cv;if(r.$)return q;var s=r.a;return $([p(Nr,$([me($(["text-destructive","text-sm"]))]),$([Ie(s)]))])}()]))),t_({B:t.f.aq,a1:p(nt,Lo,uj),a2:p(nt,Lo,aj),a3:p(nt,Lo,lj),cD:t.f.cv.cD})]))])),p(Gl,q,$([p(vt,$([ot("btn-outline"),Ot(Op),qr(t.O===1)]),$([Ie("Cancel")])),p(vt,$([ot("btn"),Ot(sj),qr(t.O===1||!Be(t.f.E.cI,fe)||!Be(t.f.E.cv,fe))]),$t($([function(){var r=t.O;return r?$([mu(q)]):q}(),$([Ie("Save changes")])])))])),p(vt,$([Kt("button"),_o("Close dialog"),Ot(Op)]),$([gu(q)]))]))]))},Lg=tf("hidden"),gj={$:6},mj={$:8},Sj=function(e){return{$:4,a:e}},Bg=p(we,$([me($(["alert","text-amber-500","mt-4"]))]),$([Kl(q),p(br,q,$([Ie("Unable to find word definition.")]))])),ru=_t("li"),$l=_t("ul"),$j=function(e){var t=e.cI,r=e.ae,s=r,o=s;return p(we,q,p(Rr,D(function(a,c){var i=c;return p(we,$([me($(["gap-2","flex","flex-row","items-start","justify-between","rounded-lg","border","p-3","shadow-xs","mt-3","form-usages"]))]),$([p(we,$([me($(["flex","flex-col","gap-0.5"]))]),$([p(Nr,$([ot("leading-normal")]),$([Ie("Etymology "+(Nt(a+1)+(" for "+t)))])),p(Nr,$([me($(["text-muted-foreground","text-sm","pl-4"]))]),$([p($l,$([ot("list-disc")]),p(Oe,function(u){return p(ru,$([ot("list-disc")]),p(Oe,p(nt,Ie,jr),p(du,Wl,u.bK)))},i))]))]))]))}),o))},yj=function(e){return p(ru,$([ot("[&:not(:last-child):has(.form-usages)]:mb-3")]),$t($([p(Oe,p(nt,Ie,jr),p(du,Wl,e.bK)),p(Oe,$j,e.az)])))},Cj=D(function(e,t){var r=t;return p(we,$([me($(["card","p-3","mt-4","gap-0"]))]),$([p(gn,$([me($(["p-0","flex","justify-center"]))]),$([Ie("Etymology "+Nt(e+1))])),p(Yr,$([me($(["pl-0","pr-0"]))]),$([p($l,$([me($(["list-decimal","list-inside"]))]),p(Oe,function(s){return yj(s)},r))]))]))}),bj=function(e){var t=e;return p(Rr,Cj,t)},Rj=D(function(e,t){if(e.$)return q;var r=e.a;return $t($([$([p(we,$([me($(["card","p-1","mt-4"]))]),$([p(gn,$([me($(["p-0","flex","justify-center"]))]),$([p(Nr,$([ot("[&:first-letter]:capitalize")]),$([Ie(r)]))]))]))]),function(){switch(t.$){case 0:return q;case 1:return $([p(we,$([me($(["card","p-3","mt-4","gap-2"]))]),$([p(gn,$([ot("p-0")]),$([p(we,$([me($(["bg-accent","animate-pulse","rounded-md","h-4","w-2/3"]))]),q)])),p(Yr,$([ot("p-0")]),$([p(we,$([me($(["bg-accent","animate-pulse","rounded-md","h-16","w-full"]))]),q)]))]))]);case 2:if(t.a.b){var s=t.a;return bj(s)}else return $([Bg]);default:return $([Bg])}}()]))}),r_=function(e){return U(qe,"svg",xe($([p(W,"xmlns","http://www.w3.org/2000/svg"),p(W,"width","24"),p(W,"height","24"),p(W,"viewBox","0 0 24 24"),p(W,"fill","none"),p(W,"stroke","currentColor"),p(W,"stroke-width","2"),p(W,"stroke-linecap","round"),p(W,"stroke-linejoin","round"),p(W,"style","overflow: visible;")]),e),$([U(qe,"path",$([p(W,"d","M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7")]),q),U(qe,"path",$([p(W,"d","M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z"),p(W,"style","transform: none; transform-origin: 50% 50% 0px; transform-box: fill-box;")]),q)]))},_j=function(e){var t=e.j;return p(we,$([me($(["flex","flex-col","h-full","mt-2"]))]),$([dn(t.K)>0?p(we,$([me($(["grow-1","shrink-0","overflow-auto","basis-0"]))]),$t($([$([p(we,$([me($(["flex","justify-center","flex-wrap"]))]),p(Oe,function(r){return p(vt,$([me($(["btn-outline","m-1","pt-1","pb-1","pr-2","pl-2"])),Ot(Sj(Fi(r)))]),$([Ie(r)]))},t.K))]),p(Rj,t.i,t.M)]))):p(we,$([me($(["grow-1","shrink-1","basis-auto","flex","justify-center","items-center"]))]),$([Ie("Click to paste and analyze a sentence!")])),p(we,$([me($(["grow-0","shrink-1","mt-4"]))]),$([p(we,$([me($(["flex","flex-wrap","gap-2","mb-4"]))]),$t($([p(Oe,function(r){return p(we,$([me($(["badge","rounded-2xl","text-sm"]))]),$([nf(q),Ie(r)]))},t.cD),$([p(vt,$([me($(["badge","rounded-2xl","text-sm"])),Ot(mj),Kt("button")]),$([r_(q)]))])]))),p(vt,$([me($(["btn-primary","w-full","mb-4"])),qr(Be(t.i,fe)||t.U===1),Ot(gj)]),$t($([function(){var r=t.U;return r?$([mu(q)]):q}(),$([Ie("Mine sentence")])])))]))]))},n_=_t("nav"),Pj={$:14},wj=10,i_=D(function(e,t){e:for(;;){if(t.$===-2)return e;var r=t.d,s=t.e,o=p(i_,e+1,s),a=r;e=o,t=a;continue e}}),Ej=function(e){return p(i_,0,e)},Aj=function(e){var t=e;return Ej(t)},o_=function(e){var t=e.d,r=t.Y;if(r.$===2&&!r.a.$){var s=r.a.a,o=Aj(t.i);return!!o&&(Be(o,dn(s))||Be(o,wj))}else return!1},Tj=function(e){return{$:22,a:e}},Ij=function(e){return{$:17,a:e}},Dj=function(e){return{$:13,a:e}},kj=tf("checked"),Mj=p(XR,$(["target","checked"]),E0),Oj=function(e){return p(KR,"change",p(Mt,e,Mj))},jj=function(e){return U(qe,"svg",xe($([p(W,"xmlns","http://www.w3.org/2000/svg"),p(W,"width","24"),p(W,"height","24"),p(W,"viewBox","0 0 24 24"),p(W,"fill","none"),p(W,"stroke","currentColor"),p(W,"stroke-width","2"),p(W,"stroke-linecap","round"),p(W,"stroke-linejoin","round")]),e),$([U(qe,"path",$([p(W,"d","M3 6h18")]),q),U(qe,"path",$([p(W,"d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6")]),q),U(qe,"path",$([p(W,"d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2")]),q)]))},zj=Se(function(e,t,r){var s=e.d;return p(qi,$([me($(["flex","items-start","gap-3","border","p-3","hover:bg-accent/50","rounded-lg","has-[input[type='checkbox']:checked]:border-blue-600","has-[input[type='checkbox']:checked]:bg-blue-50","dark:has-[input[type='checkbox']:checked]:border-blue-900","dark:has-[input[type='checkbox']:checked]:bg-blue-950","has-[input[type='checkbox']:disabled]:opacity-50","[&:not(:first-child)]:mt-4"]))]),$([p(au,function(){var o=p(ou,t,s.i);return $([me($(["input","checked:bg-blue-600","checked:border-blue-600","dark:checked:bg-blue-700","dark:checked:border-blue-700","checked:after:bg-white"])),Kt("checkbox"),kj(o),Oj(function(a){return Dj(t)}),qr(!o&&o_(e)||s.F===1)])}(),q),p(we,$([me($(["grow-1","grid","gap-2"]))]),$([p(we,$([me($(["flex","items-center"]))]),$([p(e_,$([ot("grow-1")]),r),p(vt,$([ot("btn-sm-icon-ghost"),Ot(Ij(t))]),$([r_(q)])),p(vt,$([ot("btn-sm-icon-ghost text-(--destructive)"),Ot(Tj(t))]),$([jj(q)]))]))]))]))}),jp=D(function(e,t){return p(we,$([me($(["flex","flex-col","items-start","gap-3","border","p-3","[&:not(:first-child)]:mt-4"]))]),$([p(we,$([me($(["bg-accent","animate-pulse","rounded-md","h-4",e]))]),q),p(we,$([me($(["bg-accent","animate-pulse","rounded-md","h-4",t]))]),q)]))}),xj=function(e){var t=e.d;return p(we,$([me($(["flex","flex-col","h-full","mt-2"]))]),$([p(we,$([me($(["grow-1","shrink-0","overflow-auto","basis-0"]))]),$([function(){var r=t.Y;switch(r.$){case 0:return p(we,q,q);case 1:return p(we,q,$([p(jp,"w-[7%]","w-[85%]"),p(jp,"w-[10%]","w-[70%]"),p(jp,"w-[5%]","w-[95%]")]));default:if(r.a.$){var o=r.a.a;return p(we,$([ot("alert-destructive")]),$([Kl(q),p(br,q,$([Ie("Unable to fetch pending sentences.")])),p(Yr,q,$([Ie(to(o))]))]))}else if(r.a.a.b){var s=r.a.a;return p(we,q,p(Rr,zj(e),s))}else return p(we,$([ot("alert")]),$([Yv(q),p(br,q,$([Ie("No sentences have yet been mined.")]))]))}}()])),p(we,$([me($(["grow-0","shrink-1","mt-4"]))]),$([p(vt,$([me($(["btn-primary","w-full","mb-4"])),qr(Be(t.Y,Nd)||!o_(e)||t.F===1),Ot(Pj)]),$t($([t.F===1?$([mu(q)]):q,$([Ie("Confirm Batch")])])))]))]))},In=function(e){return p(W,"role",e)},Uu=function(e){return p(W,"tabindex",e)},Nj={$:11},zp={$:10},qj=function(e){return{$:1,a:e}},Lj=function(e){return{$:0,a:e}},Bj=function(e){return{$:2,a:e}},xp=function(e){return{$:9,a:e}},Fj=function(e){var t=e.j;return rt(Jl,t.u.ao,zp,$([me($(["dialog","w-full","sm:max-w-[425px]","max-h-[612px]"]))]),$([p(Vl,q,$([p(gn,q,$([p(br,q,$([Ie("Edit sentence")]))])),p(Yr,q,$([p(rf,$([me($(["form","grid","gap-4"]))]),$([t_({B:t.u.B,a1:p(nt,xp,qj),a2:p(nt,xp,Lj),a3:p(nt,xp,Bj),cD:t.u.cD})]))])),p(Gl,q,$([p(vt,$([ot("btn-outline"),Ot(zp)]),$([Ie("Cancel")])),p(vt,$([ot("btn"),Ot(Nj)]),$([Ie("Save changes")]))])),p(vt,$([Kt("button"),_o("Close dialog"),Ot(zp)]),$([gu(q)]))]))]))},Uj=function(e){return{cW:p(we,$t($([$([me($(["flex","shrink-0","grow-0","justify-center","h-full"]))]),!e.y&&!e.j.u.ao?$([Ot(rj)]):q])),$([p(we,$([me($(["tabs","basis-md"]))]),$([p(n_,$([nj("horizontal"),ot("w-full"),In("tablist")]),$([p(vt,$([qg("tabs-mining"),Fu(!e.y),tr("tabs-mining"),In("tab"),Uu("0"),Kt("button"),Ot(Ng(0))]),$([Ie("Mining")])),p(vt,$([qg("tabs-overview"),Fu(e.y===1),tr("tabs-overview"),In("tab"),Uu("0"),Kt("button"),Ot(Ng(1))]),$([Ie("Overview")]))])),p(we,$([Sl("tabs-mining"),Fu(!e.y),Lg(!!e.y),tr("tabs-mining"),In("tabpanel"),Uu("-1")]),$([_j(e)])),p(we,$([Sl("tabs-overview"),Fu(e.y===1),Lg(e.y!==1),tr("tabs-overview"),In("tabpanel"),Uu("-1")]),$([xj(e)]))])),fj(e),oj(e),Fj(e)])),be:"Mining"}},Hj=ww,Wj=Hj,Np=Se(function(e,t,r){var s=t(r),o=s.be,a=s.cW;return{aS:$([p(Wj,p(nt,uo,e),a)]),be:o}}),Vj=function(e){switch(e.$){case 0:var t=e.a;return U(Np,Dl,kO,t);case 1:var t=e.a;return U(Np,Ml,Uj,t);default:var t=e.a;return U(Np,kl,tj,t)}},Fg=function(e){return{$:7,a:e}},qp=_t("a"),Ug=function(e){return p(W,"aria-current",e)},Gj=_t("aside"),Jj=function(e){return p(W,"data-sidebar-initialized",vu(e))},Kj=ZR,Zj=function(e){return U(qe,"svg",xe($([p(W,"fill","currentColor"),p(W,"viewBox","0 0 24 24"),p(W,"xmlns","http://www.w3.org/2000/svg")]),e),$([U(qe,"title",q,$([Kj("GitHub")])),U(qe,"path",$([p(W,"d","M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12")]),q)]))},Hg=_t("h3"),Lp=function(e){return p(Qn,"href",kw(e))},Qj=function(e){return p(W,"inert",e)},Yj=function(e){return U(qe,"svg",xe($([p(W,"xmlns","http://www.w3.org/2000/svg"),p(W,"width","512"),p(W,"height","512"),p(W,"viewBox","0 0 22 22")]),e),$([U(qe,"path",$([p(W,"fill","currentColor"),p(W,"d","M8 2h3v1h2v1h2v1h2v2h1v2h1v2h1v3h-2v-2h-1v-1h-1v-1h-2V9h-1V8h-1V6h-1V5h-1V4H8m3 5h1v1h1v1h-1v1h-1v1h-1v1H9v1H8v1H7v1H6v1H5v1H4v1H3v1H2v-1H1v-1h1v-1h1v-1h1v-1h1v-1h1v-1h1v-1h1v-1h1v-1h1v-1h1")]),q)]))},Bo=_t("span"),Xj=Qn("target"),ez=function(e){var t=e.R?q:$([Qj("")]),r=function(){var a=e.A;switch(a.$){case 0:return n(q,q);case 1:return n($([Ug("page")]),q);default:return n(q,$([Ug("page")]))}}(),s=r.a,o=r.b;return p(Gj,xe($([VR(!e.R),ot("sidebar"),GR("left"),Jj(!0)]),t),$([p(n_,$([_o("Sidebar navigation")]),$([p(gn,q,$([p(we,$([me($(["flex","p-2","h-12","w-full","justify-start","gap-2"]))]),$([p(we,$([me($(["bg-sidebar-primary","text-sidebar-primary-foreground","flex","aspect-square","size-8","items-center","justify-center","rounded-lg","p-1"]))]),$([Yj(q)])),p(we,$([me($(["grid","flex-1","text-left","text-sm","leading-tight"]))]),$([p(Bo,$([me($(["truncate","font-medium"]))]),$([Ie("Sentence Base")])),p(Bo,$([me($(["truncate","text-xs"]))]),$([Ie("v0.0.1")]))]))]))])),p(Yr,$([ot("scrollbar")]),$([p(we,$([Sl("group-label-content-1"),In("group")]),$([p(Hg,$([tr("group-label-content-1")]),$([Ie("Navigation")])),p($l,q,$([p(ru,q,$([p(qp,xe($([Lp("#mining"),tr("link-mining"),zr(Fg("link-mining"))]),s),$([p(Bo,q,$([Ie("Mining")]))]))])),p(ru,q,$([p(qp,xe($([Lp("#batches"),tr("link-batches"),zr(Fg("link-batches"))]),o),$([p(Bo,q,$([Ie("Batches")]))]))]))]))])),p(we,$([Sl("group-label-content-2"),In("group")]),$([p(Hg,$([tr("group-label-content-2")]),$([Ie("About")])),p($l,q,$([p(ru,q,$([p(qp,$([Lp("https://github.com/InfiniteRain/SentenceBaseWeb"),Xj("_blank")]),$([Zj(q),p(Bo,q,$([Ie("GitHub")]))]))]))]))]))]))])),p(we,$([ot("sidebar-backdrop"),zr(gv(fe))]),q)]))},tz=function(e){return U(qe,"svg",xe($([p(W,"aria-hidden","true"),p(W,"xmlns","http://www.w3.org/2000/svg"),p(W,"width","24"),p(W,"height","24"),p(W,"viewBox","0 0 24 24"),p(W,"fill","none"),p(W,"stroke","currentColor"),p(W,"stroke-width","2"),p(W,"stroke-linecap","round"),p(W,"stroke-linejoin","round")]),e),$([U(qe,"circle",$([p(W,"cx","12"),p(W,"cy","12"),p(W,"r","10")]),q),U(qe,"path",$([p(W,"d","m9 12 2 2 4-4")]),q)]))},rz=function(e){var t=Vj(e.A),r=t.be,s=t.aS,o=p(we,$([me($(["p-4","grow-1","shrink-1","basis-auto"]))]),s);return{aS:$t($([function(){var a=e.A;return a.$?$([ez(e),p(TO,$([tr("content"),me($(["h-screen","flex","flex-col"]))]),$([AO,o]))]):$([o])}(),$([p(we,$([ot("toaster"),tr("toaster")]),p(Oe,function(a){return p(we,$([ot("toast"),In(function(){var c=a.aj.bi;return c===1?"alert":"status"}()),yO(!0),VR(a.aB)]),$([p(we,$([ot("toast-content")]),$([function(){var c=a.aj.bi;switch(c){case 0:return tz(q);case 1:return _O(q);case 2:return Yv(q);default:return Kl(q)}}(),p(Yr,q,$([p(br,q,$([Ie(a.aj.be)])),p(Nr,q,$([Ie(a.aj.cZ)]))]))]))]))},e.ad))])])),be:r}},nz=cA({c7:uO,dl:DE,dm:IE,dB:SO,dD:tu,dG:rz});const iz={Main:{init:nz(p(Zc,function(e){return p(Zc,function(t){return p(Zc,function(r){return p(Zc,function(s){return Lr({bB:s,bC:r,bD:t,bE:e})},p(Ue,"seed1",ki))},p(Ue,"seed2",ki))},p(Ue,"seed3",ki))},p(Ue,"seed4",ki)))(0)}},oz="elmtaskport://";function sz(e){const t=e.match(/^elmtaskport:\/\/([\w-]+\/[\w-]+)?\/([\w]+)\?v=(\d\.\d\.\d)(?:&nsv=([\w.-]+))?$/);if(!t)return;const[r,s,o,a,c]=t;if(!(s!==void 0&&c===void 0))return{namespaceName:s,namespaceVersion:c,apiVersion:a,functionName:o}}function az(e){if(typeof e!="string"||!e.match(/^[\w-.]+$/))throw new Error("Invalid namespace version: "+e);this.version=e,this.functions={},this.register=function(t,r){if(!t.match(/^\w+$/))throw new Error("Invalid function name: "+t);if(t in this.functions)throw new Error(t+" is already used");this.functions[t]=r},this.names=function(){return Object.keys(this.functions)},this.find=function(t){if(t in this.functions)return this.functions[t]}}const Wg="2.0.1",s_={logCallErrors:!1,logInteropErrors:!0};var Bp=s_;const Bd=new az("unversioned"),Fp={};function cz(e,t){try{return Promise.resolve(e(t))}catch(r){return Promise.reject(r)}}function a_(e){if(e instanceof Error){const{name:t,message:r,cause:s,stack:o}=e,a=o===void 0?[]:o.split(/\n/).slice(1);return{name:t,message:r,cause:a_(s),stackLines:a}}else return e===void 0?null:e}function uz(e,t){typeof e=="object"&&(Bp={...s_,...e}),t===void 0&&(t=XMLHttpRequest.prototype),t.__elm_taskport_open=t.open,t.open=function(r,s,o,a,c){if(s.indexOf(oz)===0){this.__elm_taskport_url=s,this.__elm_taskport_function_call=!0,Object.defineProperty(this,"responseType",{writable:!0}),Object.defineProperty(this,"response",{writable:!0}),Object.defineProperty(this,"status",{writable:!0});const i=sz(s);if(i===void 0)this.__elm_taskport_error=[400,`Cannot decode TaskPort url ${s}. Did you update TaskPort package to a new version, but forgot to update the JavaScript code it requires?`];else{const{namespaceName:u,functionName:l,apiVersion:h,namespaceVersion:v}=i;if(h!==Wg)this.__elm_taskport_error=[400,`TaskPort version conflict. Elm-side is ${h}, but JavaScript-side is ${Wg}. Did you update TaskPort package to a new version, but forgot to update the JavaScript code it requires?`];else if(u===void 0){this.__elm_taskport_function_name=l;const f=Bd.find(l);f!==void 0?this.__elm_taskport_function=f:this.__elm_taskport_error=[404,`Cannot find function '${l}' in the default namespace. The default namespace has the following functons registered:
`+Bd.names().join(`
`)]}else if(this.__elm_taskport_function_name=u+"/"+l,u in Fp){const f=Fp[u];if(f.version===v){const d=f.find(l);d!==void 0?this.__elm_taskport_function=d:this.__elm_taskport_error=[404,`Cannot find function '${l}' in namespace ${u}. This namespace has only the following functons registered with it:
`+f.names().join(`
`)]}else this.__elm_taskport_error=[400,`The interop call expected namespace '${u}' to have version '${v}', but it is registered with version '${f.version}'. Did you update the Elm package to a new version, but forgot to update the JavaScript code it requires?`]}else{const f=Object.keys(Fp);this.__elm_taskport_error=[404,`Namespace '${u}' is not registered with TaskPort. Did you follow the instructions to install required JavaScript code for the package? `+(f.length==0)?"There are no namespaces registered with TaskPort.":`Only the following namespaces are known to TaskPort:
`+f.join(`
`)]}}}return this.__elm_taskport_open(r,s,o,a,c)},typeof ProgressEvent=="function"?t.__elm_taskport_dispatch_event=function(r){this.dispatchEvent(new ProgressEvent(r))}:t.__elm_taskport_dispatch_event=t.dispatchEvent,t.__elm_taskport_send=t.send,t.send=function(r){if(!this.__elm_taskport_function_call)return this.__elm_taskport_send(r);if(this.__elm_taskport_function!==void 0){const s=JSON.parse(r);cz(this.__elm_taskport_function,s).then(a=>{this.responseType="json",this.response=a===void 0?"null":JSON.stringify(a),this.status=200,this.__elm_taskport_dispatch_event("load")}).catch(a=>{Bp.logCallErrors&&console.error("JavaScript function "+this.__elm_taskport_function_name+" thrown an error or returned a rejected Promise:",a),this.status=500,this.responseType="json",this.response=JSON.stringify(a_(a)),this.__elm_taskport_dispatch_event("load")})}else{this.__elm_taskport_error===void 0&&this.__elm_taskport_error==[400,"TaskPort call failed without an error message. This could indicate a bug in TaskPort itself."];const[s,o]=this.__elm_taskport_error;Bp.logInteropErrors&&console.error("Unable to execute the interop call. "+o),this.status=s,this.responseType="text",this.response=this.__elm_taskport_function_name,this.__elm_taskport_dispatch_event("load")}}}function Yn(e,t){Bd.register(e,t)}const lz="619703558619-qsc4bk1uotbrgr1om91l12avghlbeme7.apps.googleusercontent.com",pz=["https://www.googleapis.com/auth/userinfo.email","https://www.googleapis.com/auth/drive.file"],oi={GOOGLE_EMAIL:"sentence_base_google_email",GOOGLE_TOKEN:"sentence_base_google_token"};let c_,u_;const Up=google.accounts.oauth2.initTokenClient({client_id:lz,scope:pz.join(" "),callback:e=>{c_(e)},error_callback:e=>{u_(e)}}),hz=async(e,t,r)=>{const s={...r,headers:{...r==null?void 0:r.headers,Authorization:`Bearer ${t}`}};return await(await fetch(e,s)).json()};Yn("googleGetToken",e=>new Promise((t,r)=>{if(Up===null){r(new Error("Token client was not initialized."));return}const s=localStorage.getItem(oi.GOOGLE_TOKEN);if(s&&!e){t(s);return}c_=async a=>{if(a.error)a.error==="interaction_required"?(localStorage.removeItem(oi.GOOGLE_EMAIL),localStorage.removeItem(oi.GOOGLE_TOKEN),location.reload()):r(new Error(a.error_description));else{if(!localStorage.getItem(oi.GOOGLE_EMAIL)){const c=await hz("https://www.googleapis.com/oauth2/v2/userinfo",a.access_token);localStorage.setItem(oi.GOOGLE_EMAIL,c.email)}localStorage.setItem(oi.GOOGLE_TOKEN,a.access_token),t(a.access_token)}},u_=a=>{r(new Error(a.message))};const o=localStorage.getItem(oi.GOOGLE_EMAIL);o?Up.requestAccessToken({prompt:"none",login_hint:o}):Up.requestAccessToken({prompt:"consent"})}));Yn("readClipboard",async()=>{try{return await navigator.clipboard.readText()}catch{}});Yn("timeout",e=>new Promise(t=>{setTimeout(()=>{t(e.id)},e.timeout)}));const of="sentence_base_storage_";Yn("localStorageSet",async({key:e,value:t})=>{localStorage.setItem(`${of}${e}`,JSON.stringify(t))});Yn("localStorageGet",async e=>JSON.parse(localStorage.getItem(`${of}${e}`)??""));Yn("localStorageRemove",async e=>{localStorage.removeItem(`${of}${e}`)});var pn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function l_(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function dz(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var o=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,o.get?o:{enumerable:!0,get:function(){return e[s]}})}),r}var si={},ai={},Fo={},ci={},wt={},Hp={},ui={},Wp={},Uo={},Hu={},Vg;function p_(){if(Vg)return Hu;Vg=1,Object.defineProperty(Hu,"__esModule",{value:!0}),Hu.default=r;let e;const t=new Uint8Array(16);function r(){if(!e&&(e=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!e))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(t)}return Hu}var Zi={},Ho={},Wo={},Gg;function vz(){if(Gg)return Wo;Gg=1,Object.defineProperty(Wo,"__esModule",{value:!0}),Wo.default=void 0;var e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;return Wo.default=e,Wo}var Jg;function Zl(){if(Jg)return Ho;Jg=1,Object.defineProperty(Ho,"__esModule",{value:!0}),Ho.default=void 0;var e=t(vz());function t(o){return o&&o.__esModule?o:{default:o}}function r(o){return typeof o=="string"&&e.default.test(o)}var s=r;return Ho.default=s,Ho}var Kg;function Ql(){if(Kg)return Zi;Kg=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.default=void 0,Zi.unsafeStringify=s;var e=t(Zl());function t(c){return c&&c.__esModule?c:{default:c}}const r=[];for(let c=0;c<256;++c)r.push((c+256).toString(16).slice(1));function s(c,i=0){return r[c[i+0]]+r[c[i+1]]+r[c[i+2]]+r[c[i+3]]+"-"+r[c[i+4]]+r[c[i+5]]+"-"+r[c[i+6]]+r[c[i+7]]+"-"+r[c[i+8]]+r[c[i+9]]+"-"+r[c[i+10]]+r[c[i+11]]+r[c[i+12]]+r[c[i+13]]+r[c[i+14]]+r[c[i+15]]}function o(c,i=0){const u=s(c,i);if(!(0,e.default)(u))throw TypeError("Stringified UUID is invalid");return u}var a=o;return Zi.default=a,Zi}var Zg;function fz(){if(Zg)return Uo;Zg=1,Object.defineProperty(Uo,"__esModule",{value:!0}),Uo.default=void 0;var e=r(p_()),t=Ql();function r(l){return l&&l.__esModule?l:{default:l}}let s,o,a=0,c=0;function i(l,h,v){let f=h&&v||0;const d=h||new Array(16);l=l||{};let y=l.node||s,m=l.clockseq!==void 0?l.clockseq:o;if(y==null||m==null){const k=l.random||(l.rng||e.default)();y==null&&(y=s=[k[0]|1,k[1],k[2],k[3],k[4],k[5]]),m==null&&(m=o=(k[6]<<8|k[7])&16383)}let b=l.msecs!==void 0?l.msecs:Date.now(),S=l.nsecs!==void 0?l.nsecs:c+1;const R=b-a+(S-c)/1e4;if(R<0&&l.clockseq===void 0&&(m=m+1&16383),(R<0||b>a)&&l.nsecs===void 0&&(S=0),S>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=b,c=S,o=m,b+=122192928e5;const _=((b&268435455)*1e4+S)%4294967296;d[f++]=_>>>24&255,d[f++]=_>>>16&255,d[f++]=_>>>8&255,d[f++]=_&255;const T=b/4294967296*1e4&268435455;d[f++]=T>>>8&255,d[f++]=T&255,d[f++]=T>>>24&15|16,d[f++]=T>>>16&255,d[f++]=m>>>8|128,d[f++]=m&255;for(let k=0;k<6;++k)d[f+k]=y[k];return h||(0,t.unsafeStringify)(d)}var u=i;return Uo.default=u,Uo}var Vo={},_n={},Go={},Qg;function h_(){if(Qg)return Go;Qg=1,Object.defineProperty(Go,"__esModule",{value:!0}),Go.default=void 0;var e=t(Zl());function t(o){return o&&o.__esModule?o:{default:o}}function r(o){if(!(0,e.default)(o))throw TypeError("Invalid UUID");let a;const c=new Uint8Array(16);return c[0]=(a=parseInt(o.slice(0,8),16))>>>24,c[1]=a>>>16&255,c[2]=a>>>8&255,c[3]=a&255,c[4]=(a=parseInt(o.slice(9,13),16))>>>8,c[5]=a&255,c[6]=(a=parseInt(o.slice(14,18),16))>>>8,c[7]=a&255,c[8]=(a=parseInt(o.slice(19,23),16))>>>8,c[9]=a&255,c[10]=(a=parseInt(o.slice(24,36),16))/1099511627776&255,c[11]=a/4294967296&255,c[12]=a>>>24&255,c[13]=a>>>16&255,c[14]=a>>>8&255,c[15]=a&255,c}var s=r;return Go.default=s,Go}var Yg;function d_(){if(Yg)return _n;Yg=1,Object.defineProperty(_n,"__esModule",{value:!0}),_n.URL=_n.DNS=void 0,_n.default=c;var e=Ql(),t=r(h_());function r(i){return i&&i.__esModule?i:{default:i}}function s(i){i=unescape(encodeURIComponent(i));const u=[];for(let l=0;l<i.length;++l)u.push(i.charCodeAt(l));return u}const o="6ba7b810-9dad-11d1-80b4-00c04fd430c8";_n.DNS=o;const a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";_n.URL=a;function c(i,u,l){function h(v,f,d,y){var m;if(typeof v=="string"&&(v=s(v)),typeof f=="string"&&(f=(0,t.default)(f)),((m=f)===null||m===void 0?void 0:m.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let b=new Uint8Array(16+v.length);if(b.set(f),b.set(v,f.length),b=l(b),b[6]=b[6]&15|u,b[8]=b[8]&63|128,d){y=y||0;for(let S=0;S<16;++S)d[y+S]=b[S];return d}return(0,e.unsafeStringify)(b)}try{h.name=i}catch{}return h.DNS=o,h.URL=a,h}return _n}var Jo={},Xg;function gz(){if(Xg)return Jo;Xg=1,Object.defineProperty(Jo,"__esModule",{value:!0}),Jo.default=void 0;function e(d){if(typeof d=="string"){const y=unescape(encodeURIComponent(d));d=new Uint8Array(y.length);for(let m=0;m<y.length;++m)d[m]=y.charCodeAt(m)}return t(s(o(d),d.length*8))}function t(d){const y=[],m=d.length*32,b="0123456789abcdef";for(let S=0;S<m;S+=8){const R=d[S>>5]>>>S%32&255,_=parseInt(b.charAt(R>>>4&15)+b.charAt(R&15),16);y.push(_)}return y}function r(d){return(d+64>>>9<<4)+14+1}function s(d,y){d[y>>5]|=128<<y%32,d[r(y)-1]=y;let m=1732584193,b=-271733879,S=-1732584194,R=271733878;for(let _=0;_<d.length;_+=16){const T=m,k=b,I=S,z=R;m=u(m,b,S,R,d[_],7,-680876936),R=u(R,m,b,S,d[_+1],12,-389564586),S=u(S,R,m,b,d[_+2],17,606105819),b=u(b,S,R,m,d[_+3],22,-1044525330),m=u(m,b,S,R,d[_+4],7,-176418897),R=u(R,m,b,S,d[_+5],12,1200080426),S=u(S,R,m,b,d[_+6],17,-1473231341),b=u(b,S,R,m,d[_+7],22,-45705983),m=u(m,b,S,R,d[_+8],7,1770035416),R=u(R,m,b,S,d[_+9],12,-1958414417),S=u(S,R,m,b,d[_+10],17,-42063),b=u(b,S,R,m,d[_+11],22,-1990404162),m=u(m,b,S,R,d[_+12],7,1804603682),R=u(R,m,b,S,d[_+13],12,-40341101),S=u(S,R,m,b,d[_+14],17,-1502002290),b=u(b,S,R,m,d[_+15],22,1236535329),m=l(m,b,S,R,d[_+1],5,-165796510),R=l(R,m,b,S,d[_+6],9,-1069501632),S=l(S,R,m,b,d[_+11],14,643717713),b=l(b,S,R,m,d[_],20,-373897302),m=l(m,b,S,R,d[_+5],5,-701558691),R=l(R,m,b,S,d[_+10],9,38016083),S=l(S,R,m,b,d[_+15],14,-660478335),b=l(b,S,R,m,d[_+4],20,-405537848),m=l(m,b,S,R,d[_+9],5,568446438),R=l(R,m,b,S,d[_+14],9,-1019803690),S=l(S,R,m,b,d[_+3],14,-187363961),b=l(b,S,R,m,d[_+8],20,1163531501),m=l(m,b,S,R,d[_+13],5,-1444681467),R=l(R,m,b,S,d[_+2],9,-51403784),S=l(S,R,m,b,d[_+7],14,1735328473),b=l(b,S,R,m,d[_+12],20,-1926607734),m=h(m,b,S,R,d[_+5],4,-378558),R=h(R,m,b,S,d[_+8],11,-2022574463),S=h(S,R,m,b,d[_+11],16,1839030562),b=h(b,S,R,m,d[_+14],23,-35309556),m=h(m,b,S,R,d[_+1],4,-1530992060),R=h(R,m,b,S,d[_+4],11,1272893353),S=h(S,R,m,b,d[_+7],16,-155497632),b=h(b,S,R,m,d[_+10],23,-1094730640),m=h(m,b,S,R,d[_+13],4,681279174),R=h(R,m,b,S,d[_],11,-358537222),S=h(S,R,m,b,d[_+3],16,-722521979),b=h(b,S,R,m,d[_+6],23,76029189),m=h(m,b,S,R,d[_+9],4,-640364487),R=h(R,m,b,S,d[_+12],11,-421815835),S=h(S,R,m,b,d[_+15],16,530742520),b=h(b,S,R,m,d[_+2],23,-995338651),m=v(m,b,S,R,d[_],6,-198630844),R=v(R,m,b,S,d[_+7],10,1126891415),S=v(S,R,m,b,d[_+14],15,-1416354905),b=v(b,S,R,m,d[_+5],21,-57434055),m=v(m,b,S,R,d[_+12],6,1700485571),R=v(R,m,b,S,d[_+3],10,-1894986606),S=v(S,R,m,b,d[_+10],15,-1051523),b=v(b,S,R,m,d[_+1],21,-2054922799),m=v(m,b,S,R,d[_+8],6,1873313359),R=v(R,m,b,S,d[_+15],10,-30611744),S=v(S,R,m,b,d[_+6],15,-1560198380),b=v(b,S,R,m,d[_+13],21,1309151649),m=v(m,b,S,R,d[_+4],6,-145523070),R=v(R,m,b,S,d[_+11],10,-1120210379),S=v(S,R,m,b,d[_+2],15,718787259),b=v(b,S,R,m,d[_+9],21,-343485551),m=a(m,T),b=a(b,k),S=a(S,I),R=a(R,z)}return[m,b,S,R]}function o(d){if(d.length===0)return[];const y=d.length*8,m=new Uint32Array(r(y));for(let b=0;b<y;b+=8)m[b>>5]|=(d[b/8]&255)<<b%32;return m}function a(d,y){const m=(d&65535)+(y&65535);return(d>>16)+(y>>16)+(m>>16)<<16|m&65535}function c(d,y){return d<<y|d>>>32-y}function i(d,y,m,b,S,R){return a(c(a(a(y,d),a(b,R)),S),m)}function u(d,y,m,b,S,R,_){return i(y&m|~y&b,d,y,S,R,_)}function l(d,y,m,b,S,R,_){return i(y&b|m&~b,d,y,S,R,_)}function h(d,y,m,b,S,R,_){return i(y^m^b,d,y,S,R,_)}function v(d,y,m,b,S,R,_){return i(m^(y|~b),d,y,S,R,_)}var f=e;return Jo.default=f,Jo}var em;function mz(){if(em)return Vo;em=1,Object.defineProperty(Vo,"__esModule",{value:!0}),Vo.default=void 0;var e=r(d_()),t=r(gz());function r(a){return a&&a.__esModule?a:{default:a}}var o=(0,e.default)("v3",48,t.default);return Vo.default=o,Vo}var Ko={},Zo={},tm;function Sz(){if(tm)return Zo;tm=1,Object.defineProperty(Zo,"__esModule",{value:!0}),Zo.default=void 0;var t={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};return Zo.default=t,Zo}var rm;function $z(){if(rm)return Ko;rm=1,Object.defineProperty(Ko,"__esModule",{value:!0}),Ko.default=void 0;var e=s(Sz()),t=s(p_()),r=Ql();function s(c){return c&&c.__esModule?c:{default:c}}function o(c,i,u){if(e.default.randomUUID&&!i&&!c)return e.default.randomUUID();c=c||{};const l=c.random||(c.rng||t.default)();if(l[6]=l[6]&15|64,l[8]=l[8]&63|128,i){u=u||0;for(let h=0;h<16;++h)i[u+h]=l[h];return i}return(0,r.unsafeStringify)(l)}var a=o;return Ko.default=a,Ko}var Qo={},Yo={},nm;function yz(){if(nm)return Yo;nm=1,Object.defineProperty(Yo,"__esModule",{value:!0}),Yo.default=void 0;function e(o,a,c,i){switch(o){case 0:return a&c^~a&i;case 1:return a^c^i;case 2:return a&c^a&i^c&i;case 3:return a^c^i}}function t(o,a){return o<<a|o>>>32-a}function r(o){const a=[1518500249,1859775393,2400959708,3395469782],c=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof o=="string"){const h=unescape(encodeURIComponent(o));o=[];for(let v=0;v<h.length;++v)o.push(h.charCodeAt(v))}else Array.isArray(o)||(o=Array.prototype.slice.call(o));o.push(128);const i=o.length/4+2,u=Math.ceil(i/16),l=new Array(u);for(let h=0;h<u;++h){const v=new Uint32Array(16);for(let f=0;f<16;++f)v[f]=o[h*64+f*4]<<24|o[h*64+f*4+1]<<16|o[h*64+f*4+2]<<8|o[h*64+f*4+3];l[h]=v}l[u-1][14]=(o.length-1)*8/Math.pow(2,32),l[u-1][14]=Math.floor(l[u-1][14]),l[u-1][15]=(o.length-1)*8&4294967295;for(let h=0;h<u;++h){const v=new Uint32Array(80);for(let S=0;S<16;++S)v[S]=l[h][S];for(let S=16;S<80;++S)v[S]=t(v[S-3]^v[S-8]^v[S-14]^v[S-16],1);let f=c[0],d=c[1],y=c[2],m=c[3],b=c[4];for(let S=0;S<80;++S){const R=Math.floor(S/20),_=t(f,5)+e(R,d,y,m)+b+a[R]+v[S]>>>0;b=m,m=y,y=t(d,30)>>>0,d=f,f=_}c[0]=c[0]+f>>>0,c[1]=c[1]+d>>>0,c[2]=c[2]+y>>>0,c[3]=c[3]+m>>>0,c[4]=c[4]+b>>>0}return[c[0]>>24&255,c[0]>>16&255,c[0]>>8&255,c[0]&255,c[1]>>24&255,c[1]>>16&255,c[1]>>8&255,c[1]&255,c[2]>>24&255,c[2]>>16&255,c[2]>>8&255,c[2]&255,c[3]>>24&255,c[3]>>16&255,c[3]>>8&255,c[3]&255,c[4]>>24&255,c[4]>>16&255,c[4]>>8&255,c[4]&255]}var s=r;return Yo.default=s,Yo}var im;function Cz(){if(im)return Qo;im=1,Object.defineProperty(Qo,"__esModule",{value:!0}),Qo.default=void 0;var e=r(d_()),t=r(yz());function r(a){return a&&a.__esModule?a:{default:a}}var o=(0,e.default)("v5",80,t.default);return Qo.default=o,Qo}var Xo={},om;function bz(){if(om)return Xo;om=1,Object.defineProperty(Xo,"__esModule",{value:!0}),Xo.default=void 0;var e="00000000-0000-0000-0000-000000000000";return Xo.default=e,Xo}var es={},sm;function Rz(){if(sm)return es;sm=1,Object.defineProperty(es,"__esModule",{value:!0}),es.default=void 0;var e=t(Zl());function t(o){return o&&o.__esModule?o:{default:o}}function r(o){if(!(0,e.default)(o))throw TypeError("Invalid UUID");return parseInt(o.slice(14,15),16)}var s=r;return es.default=s,es}var am;function _z(){return am||(am=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return c.default}});var t=h(fz()),r=h(mz()),s=h($z()),o=h(Cz()),a=h(bz()),c=h(Rz()),i=h(Zl()),u=h(Ql()),l=h(h_());function h(v){return v&&v.__esModule?v:{default:v}}}(Wp)),Wp}var cm;function Ui(){if(cm)return ui;cm=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui.createNoDashGuid=ui.createGuid=void 0;const e=_z(),t=()=>(0,e.v4)();ui.createGuid=t;const r=()=>t().replace(new RegExp("-","g"),"").toUpperCase();return ui.createNoDashGuid=r,ui}var um;function Su(){return um||(um=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PlatformEvent=e.EventType=void 0;const t=Ui();(function(s){s[s.Debug=0]="Debug",s[s.Info=1]="Info",s[s.Warning=2]="Warning",s[s.Error=3]="Error",s[s.None=4]="None"})(e.EventType||(e.EventType={}));class r{constructor(o,a){this.privName=o,this.privEventId=(0,t.createNoDashGuid)(),this.privEventTime=new Date().toISOString(),this.privEventType=a,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}e.PlatformEvent=r}(Hp)),Hp}var lm;function Pz(){if(lm)return wt;lm=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.AudioStreamNodeErrorEvent=wt.AudioStreamNodeDetachedEvent=wt.AudioStreamNodeAttachedEvent=wt.AudioStreamNodeAttachingEvent=wt.AudioStreamNodeEvent=wt.AudioSourceErrorEvent=wt.AudioSourceOffEvent=wt.AudioSourceReadyEvent=wt.AudioSourceInitializingEvent=wt.AudioSourceEvent=void 0;const e=Su();class t extends e.PlatformEvent{constructor(f,d,y=e.EventType.Info){super(f,y),this.privAudioSourceId=d}get audioSourceId(){return this.privAudioSourceId}}wt.AudioSourceEvent=t;class r extends t{constructor(f){super("AudioSourceInitializingEvent",f)}}wt.AudioSourceInitializingEvent=r;class s extends t{constructor(f){super("AudioSourceReadyEvent",f)}}wt.AudioSourceReadyEvent=s;class o extends t{constructor(f){super("AudioSourceOffEvent",f)}}wt.AudioSourceOffEvent=o;class a extends t{constructor(f,d){super("AudioSourceErrorEvent",f,e.EventType.Error),this.privError=d}get error(){return this.privError}}wt.AudioSourceErrorEvent=a;class c extends t{constructor(f,d,y){super(f,d),this.privAudioNodeId=y}get audioNodeId(){return this.privAudioNodeId}}wt.AudioStreamNodeEvent=c;class i extends c{constructor(f,d){super("AudioStreamNodeAttachingEvent",f,d)}}wt.AudioStreamNodeAttachingEvent=i;class u extends c{constructor(f,d){super("AudioStreamNodeAttachedEvent",f,d)}}wt.AudioStreamNodeAttachedEvent=u;class l extends c{constructor(f,d){super("AudioStreamNodeDetachedEvent",f,d)}}wt.AudioStreamNodeDetachedEvent=l;class h extends c{constructor(f,d,y){super("AudioStreamNodeErrorEvent",f,d),this.privError=y}get error(){return this.privError}}return wt.AudioStreamNodeErrorEvent=h,wt}var Et={},pm;function wz(){if(pm)return Et;pm=1,Object.defineProperty(Et,"__esModule",{value:!0}),Et.ConnectionRedirectEvent=Et.ConnectionMessageSentEvent=Et.ConnectionMessageReceivedEvent=Et.ConnectionEstablishErrorEvent=Et.ConnectionErrorEvent=Et.ConnectionClosedEvent=Et.ConnectionEstablishedEvent=Et.ConnectionStartEvent=Et.ConnectionEvent=Et.ServiceEvent=void 0;const e=Su();class t extends e.PlatformEvent{constructor(f,d,y=e.EventType.Info){super(f,y),this.privJsonResult=d}get jsonString(){return this.privJsonResult}}Et.ServiceEvent=t;class r extends e.PlatformEvent{constructor(f,d,y=e.EventType.Info){super(f,y),this.privConnectionId=d}get connectionId(){return this.privConnectionId}}Et.ConnectionEvent=r;class s extends r{constructor(f,d,y){super("ConnectionStartEvent",f),this.privUri=d,this.privHeaders=y}get uri(){return this.privUri}get headers(){return this.privHeaders}}Et.ConnectionStartEvent=s;class o extends r{constructor(f){super("ConnectionEstablishedEvent",f)}}Et.ConnectionEstablishedEvent=o;class a extends r{constructor(f,d,y){super("ConnectionClosedEvent",f,e.EventType.Debug),this.privReason=y,this.privStatusCode=d}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}Et.ConnectionClosedEvent=a;class c extends r{constructor(f,d,y){super("ConnectionErrorEvent",f,e.EventType.Debug),this.privMessage=d,this.privType=y}get message(){return this.privMessage}get type(){return this.privType}}Et.ConnectionErrorEvent=c;class i extends r{constructor(f,d,y){super("ConnectionEstablishErrorEvent",f,e.EventType.Error),this.privStatusCode=d,this.privReason=y}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}Et.ConnectionEstablishErrorEvent=i;class u extends r{constructor(f,d,y){super("ConnectionMessageReceivedEvent",f),this.privNetworkReceivedTime=d,this.privMessage=y}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}}Et.ConnectionMessageReceivedEvent=u;class l extends r{constructor(f,d,y){super("ConnectionMessageSentEvent",f),this.privNetworkSentTime=d,this.privMessage=y}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}Et.ConnectionMessageSentEvent=l;class h extends r{constructor(f,d,y,m){super("ConnectionRedirectEvent",f,e.EventType.Info),this.privRedirectUrl=d,this.privOriginalUrl=y,this.privContext=m}get redirectUrl(){return this.privRedirectUrl}get originalUrl(){return this.privOriginalUrl}get context(){return this.privContext}}return Et.ConnectionRedirectEvent=h,Et}var Vp={},nn={},hm;function Xr(){if(hm)return nn;hm=1,Object.defineProperty(nn,"__esModule",{value:!0}),nn.ObjectDisposedError=nn.InvalidOperationError=nn.ArgumentNullError=void 0;class e extends Error{constructor(o){super(o),this.name="ArgumentNull",this.message=o}}nn.ArgumentNullError=e;class t extends Error{constructor(o){super(o),this.name="InvalidOperation",this.message=o}}nn.InvalidOperationError=t;class r extends Error{constructor(o,a){super(a),this.name=o+"ObjectDisposed",this.message=a}}return nn.ObjectDisposedError=r,nn}var dm;function v_(){return dm||(dm=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionMessage=e.MessageType=void 0;const t=Xr(),r=Ui();var s;(function(a){a[a.Text=0]="Text",a[a.Binary=1]="Binary"})(s=e.MessageType||(e.MessageType={}));class o{constructor(c,i,u,l){if(this.privBody=null,c===s.Text&&i&&typeof i!="string")throw new t.InvalidOperationError("Payload must be a string");if(c===s.Binary&&i&&!(i instanceof ArrayBuffer))throw new t.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=c,this.privBody=i,this.privHeaders=u||{},this.privId=l||(0,r.createNoDashGuid)(),this.messageType){case s.Binary:this.privSize=this.binaryBody!==null?this.binaryBody.byteLength:0;break;case s.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===s.Binary)throw new t.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===s.Text)throw new t.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}}e.ConnectionMessage=o}(Vp)),Vp}var ts={},vm;function Ez(){if(vm)return ts;vm=1,Object.defineProperty(ts,"__esModule",{value:!0}),ts.ConnectionOpenResponse=void 0;let e=class{constructor(r,s){this.privStatusCode=r,this.privReason=s}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}};return ts.ConnectionOpenResponse=e,ts}var rs={},fm;function Az(){if(fm)return rs;fm=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.DeferralMap=void 0;let e=class{constructor(){this.privMap={}}add(r,s){this.privMap[r]=s}getId(r){return this.privMap[r]}complete(r,s){try{this.privMap[r].resolve(s)}catch(o){this.privMap[r].reject(o)}finally{this.privMap[r]=void 0}}};return rs.DeferralMap=e,rs}var li={},gm;function f_(){if(gm)return li;gm=1,Object.defineProperty(li,"__esModule",{value:!0}),li.SendingAgentContextMessageEvent=li.DialogEvent=void 0;const e=Su();class t extends e.PlatformEvent{constructor(o,a=e.EventType.Info){super(o,a)}}li.DialogEvent=t;class r extends t{constructor(o){super("SendingAgentContextMessageEvent"),this.privAgentConfig=o}get agentConfig(){return this.privAgentConfig}}return li.SendingAgentContextMessageEvent=r,li}var ns={},is={},mm;function g_(){if(mm)return is;mm=1,Object.defineProperty(is,"__esModule",{value:!0}),is.EventSource=void 0;const e=Xr(),t=Ui();let r=class{constructor(o){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=o}onEvent(o){if(this.isDisposed())throw new e.ObjectDisposedError("EventSource");if(this.metadata)for(const a in this.metadata)a&&o.metadata&&(o.metadata[a]||(o.metadata[a]=this.metadata[a]));for(const a in this.privEventListeners)a&&this.privEventListeners[a]&&this.privEventListeners[a](o)}attach(o){const a=(0,t.createNoDashGuid)();return this.privEventListeners[a]=o,{detach:()=>(delete this.privEventListeners[a],Promise.resolve())}}attachListener(o){return this.attach(a=>o.onEvent(a))}attachConsoleListener(o){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(a=>o.onEvent(a)),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}};return is.EventSource=r,is}var Sm;function Tz(){if(Sm)return ns;Sm=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.Events=void 0;const e=Xr(),t=g_();let r=class Fd{static setEventSource(o){if(!o)throw new e.ArgumentNullError("eventSource");Fd.privInstance=o}static get instance(){return Fd.privInstance}};return ns.Events=r,r.privInstance=new t.EventSource,ns}var Gp={},$m;function Iz(){return $m||($m=1,Object.defineProperty(Gp,"__esModule",{value:!0})),Gp}var Jp={},ym;function Dz(){return ym||(ym=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionState=void 0,function(t){t[t.None=0]="None",t[t.Connected=1]="Connected",t[t.Connecting=2]="Connecting",t[t.Disconnected=3]="Disconnected"}(e.ConnectionState||(e.ConnectionState={}))}(Jp)),Jp}var Kp={},Cm;function kz(){return Cm||(Cm=1,Object.defineProperty(Kp,"__esModule",{value:!0})),Kp}var Zp={},bm;function Mz(){return bm||(bm=1,Object.defineProperty(Zp,"__esModule",{value:!0})),Zp}var Qp={},Rm;function Oz(){return Rm||(Rm=1,Object.defineProperty(Qp,"__esModule",{value:!0})),Qp}var Yp={},_m;function jz(){return _m||(_m=1,Object.defineProperty(Yp,"__esModule",{value:!0})),Yp}var Xp={},Pm;function zz(){return Pm||(Pm=1,Object.defineProperty(Xp,"__esModule",{value:!0})),Xp}var eh={},wm;function xz(){return wm||(wm=1,Object.defineProperty(eh,"__esModule",{value:!0})),eh}var th={},Em;function Nz(){return Em||(Em=1,Object.defineProperty(th,"__esModule",{value:!0})),th}var rh={},Am;function qz(){return Am||(Am=1,Object.defineProperty(rh,"__esModule",{value:!0})),rh}var os={},Tm;function m_(){if(Tm)return os;Tm=1,Object.defineProperty(os,"__esModule",{value:!0}),os.List=void 0;const e=Xr();let t=class Di{constructor(s){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],s)for(const o of s)this.privList.push(o)}get(s){return this.throwIfDisposed(),this.privList[s]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(s){this.throwIfDisposed(),this.insertAt(this.privList.length,s)}insertAt(s,o){this.throwIfDisposed(),s===0?this.privList.unshift(o):s===this.privList.length?this.privList.push(o):this.privList.splice(s,0,o),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(s){return this.throwIfDisposed(),this.remove(s,1)[0]}remove(s,o){this.throwIfDisposed();const a=this.privList.splice(s,o);return this.triggerSubscriptions(this.privRemoveSubscriptions),a}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(s){this.throwIfDisposed();const o=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[o]=s,{detach:()=>(delete this.privAddSubscriptions[o],Promise.resolve())}}onRemoved(s){this.throwIfDisposed();const o=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[o]=s,{detach:()=>(delete this.privRemoveSubscriptions[o],Promise.resolve())}}onDisposed(s){this.throwIfDisposed();const o=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[o]=s,{detach:()=>(delete this.privDisposedSubscriptions[o],Promise.resolve())}}join(s){return this.throwIfDisposed(),this.privList.join(s)}toArray(){const s=Array();return this.privList.forEach(o=>{s.push(o)}),s}any(s){return this.throwIfDisposed(),s?this.where(s).length()>0:this.length()>0}all(s){return this.throwIfDisposed(),this.where(s).length()===this.length()}forEach(s){this.throwIfDisposed();for(let o=0;o<this.length();o++)s(this.privList[o],o)}select(s){this.throwIfDisposed();const o=[];for(let a=0;a<this.privList.length;a++)o.push(s(this.privList[a],a));return new Di(o)}where(s){this.throwIfDisposed();const o=new Di;for(let a=0;a<this.privList.length;a++)s(this.privList[a],a)&&o.add(this.privList[a]);return o}orderBy(s){this.throwIfDisposed();const a=this.toArray().sort(s);return new Di(a)}orderByDesc(s){return this.throwIfDisposed(),this.orderBy((o,a)=>s(a,o))}clone(){return this.throwIfDisposed(),new Di(this.toArray())}concat(s){return this.throwIfDisposed(),new Di(this.privList.concat(s.toArray()))}concatArray(s){return this.throwIfDisposed(),new Di(this.privList.concat(s))}isDisposed(){return this.privList==null}dispose(s){this.isDisposed()||(this.privDisposeReason=s,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new e.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(s){if(s)for(const o in s)o&&s[o]()}};return os.List=t,os}var nh={},Im;function S_(){return Im||(Im=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.marshalPromiseToCallbacks=e.Sink=e.Deferred=e.PromiseResultEventSource=e.PromiseResult=e.PromiseState=void 0;var t;(function(i){i[i.None=0]="None",i[i.Resolved=1]="Resolved",i[i.Rejected=2]="Rejected"})(t=e.PromiseState||(e.PromiseState={}));class r{constructor(u){this.throwIfError=()=>{if(this.isError)throw this.error},u.on(l=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=l)},l=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=l)})}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}}e.PromiseResult=r;class s{constructor(){this.setResult=u=>{this.privOnSetResult(u)},this.setError=u=>{this.privOnSetError(u)},this.on=(u,l)=>{this.privOnSetResult=u,this.privOnSetError=l}}}e.PromiseResultEventSource=s;class o{constructor(){this.resolve=u=>(this.privResolve(u),this),this.reject=u=>(this.privReject(u),this),this.privPromise=new Promise((u,l)=>{this.privResolve=u,this.privReject=l})}get promise(){return this.privPromise}}e.Deferred=o;class a{constructor(){this.privState=t.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new s,this.privPromiseResult=new r(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(u){if(this.privState!==t.None)throw new Error("'Cannot resolve a completed promise'");this.privState=t.Resolved,this.privPromiseResultEvents.setResult(u);for(let l=0;l<this.privSuccessHandlers.length;l++)this.executeSuccessCallback(u,this.privSuccessHandlers[l],this.privErrorHandlers[l]);this.detachHandlers()}reject(u){if(this.privState!==t.None)throw new Error("'Cannot reject a completed promise'");this.privState=t.Rejected,this.privPromiseResultEvents.setError(u);for(const l of this.privErrorHandlers)this.executeErrorCallback(u,l);this.detachHandlers()}on(u,l){u==null&&(u=()=>{}),this.privState===t.None?(this.privSuccessHandlers.push(u),this.privErrorHandlers.push(l)):(this.privState===t.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,u,l):this.privState===t.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,l),this.detachHandlers())}executeSuccessCallback(u,l,h){try{l(u)}catch(v){this.executeErrorCallback(`'Unhandled callback error: ${v}'`,h)}}executeErrorCallback(u,l){if(l)try{l(u)}catch(h){throw new Error(`'Unhandled callback error: ${h}. InnerError: ${u}'`)}else throw new Error(`'Unhandled error: ${u}'`)}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}}e.Sink=a;function c(i,u,l){i.then(h=>{try{u&&u(h)}catch(v){if(l)try{if(v instanceof Error){const f=v;l(f.name+": "+f.message)}else l(v)}catch{}}},h=>{if(l)try{if(h instanceof Error){const v=h;l(v.name+": "+v.message)}else l(h)}catch{}})}e.marshalPromiseToCallbacks=c}(nh)),nh}var ss={},Dm;function $_(){if(Dm)return ss;Dm=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.Queue=void 0;const e=Xr(),t=m_(),r=S_();var s;(function(a){a[a.Dequeue=0]="Dequeue",a[a.Peek=1]="Peek"})(s||(s={}));let o=class{constructor(c){this.privPromiseStore=new t.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=c||new t.List,this.privDetachables=[],this.privSubscribers=new t.List,this.privDetachables.push(this.privList.onAdded(()=>this.drain()))}enqueue(c){this.throwIfDispose(),this.enqueueFromPromise(new Promise(i=>i(c)))}enqueueFromPromise(c){this.throwIfDispose(),c.then(i=>{this.privList.add(i)},()=>{})}dequeue(){this.throwIfDispose();const c=new r.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:c,type:s.Dequeue}),this.drain()),c.promise}peek(){this.throwIfDispose();const c=new r.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:c,type:s.Peek}),this.drain()),c.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return this.privSubscribers==null}async drainAndDispose(c,i){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=i,this.privIsDisposing=!0;const u=this.privSubscribers;if(u){for(;u.length()>0;)u.removeFirst().deferral.resolve(void 0);this.privSubscribers===u&&(this.privSubscribers=u)}for(const l of this.privDetachables)await l.detach();if(this.privPromiseStore.length()>0&&c){const l=[];return this.privPromiseStore.toArray().forEach(h=>{l.push(h)}),Promise.all(l).finally(()=>{this.privSubscribers=null,this.privList.forEach(h=>{c(h)}),this.privList=null}).then()}else this.privSubscribers=null,this.privList=null}}async dispose(c){await this.drainAndDispose(null,c)}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const c=this.privSubscribers,i=this.privList;if(c&&i){for(;i.length()>0&&c.length()>0&&!this.privIsDisposing;){const u=c.removeFirst();if(u.type===s.Peek)u.deferral.resolve(i.first());else{const l=i.removeFirst();u.deferral.resolve(l)}}this.privSubscribers===c&&(this.privSubscribers=c),this.privList===i&&(this.privList=i)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed())throw this.privDisposeReason?new e.InvalidOperationError(this.privDisposeReason):new e.ObjectDisposedError("Queue");if(this.privIsDisposing)throw new e.InvalidOperationError("Queue disposing")}};return ss.Queue=o,ss}var as={},km;function Lz(){if(km)return as;km=1,Object.defineProperty(as,"__esModule",{value:!0}),as.RawWebsocketMessage=void 0;const e=v_(),t=Xr(),r=Ui();let s=class{constructor(a,c,i){if(this.privPayload=null,!c)throw new t.ArgumentNullError("payload");if(a===e.MessageType.Binary&&Object.getPrototypeOf(c).constructor.name!=="ArrayBuffer")throw new t.InvalidOperationError("Payload must be ArrayBuffer");if(a===e.MessageType.Text&&typeof c!="string")throw new t.InvalidOperationError("Payload must be a string");this.privMessageType=a,this.privPayload=c,this.privId=i||(0,r.createNoDashGuid)()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===e.MessageType.Binary)throw new t.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===e.MessageType.Text)throw new t.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}};return as.RawWebsocketMessage=s,as}var cs={},Mm;function Bz(){if(Mm)return cs;Mm=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.RiffPcmEncoder=void 0;let e=class{constructor(r,s){this.privActualSampleRate=r,this.privDesiredSampleRate=s}encode(r){const s=this.downSampleAudioFrame(r,this.privActualSampleRate,this.privDesiredSampleRate);if(!s)return null;const o=s.length*2,a=new ArrayBuffer(o),c=new DataView(a);return this.floatTo16BitPCM(c,0,s),a}setString(r,s,o){for(let a=0;a<o.length;a++)r.setUint8(s+a,o.charCodeAt(a))}floatTo16BitPCM(r,s,o){for(let a=0;a<o.length;a++,s+=2){const c=Math.max(-1,Math.min(1,o[a]));r.setInt16(s,c<0?c*32768:c*32767,!0)}}downSampleAudioFrame(r,s,o){if(!r)return null;if(o===s||o>s)return r;const a=s/o,c=Math.round(r.length/a),i=new Float32Array(c);let u=0,l=0;for(;l<c;){const h=Math.round((l+1)*a);let v=0,f=0;for(;u<h&&u<r.length;)v+=r[u++],f++;i[l++]=v/f}return i}};return cs.RiffPcmEncoder=e,cs}var us={},Om;function Fz(){if(Om)return us;Om=1,Object.defineProperty(us,"__esModule",{value:!0}),us.Stream=void 0;const e=Xr(),t=Ui(),r=$_();let s=class{constructor(a){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=a||(0,t.createNoDashGuid)(),this.privReaderQueue=new r.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(a){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(a)}catch{}}read(){if(this.privIsReadEnded)throw new e.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then(async a=>((a===void 0||a.isEnd)&&await this.privReaderQueue.dispose("End of stream reached"),a))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new r.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new e.InvalidOperationError("Stream closed")}};return us.Stream=s,us}var ih={},jm;function sf(){return jm||(jm=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TranslationStatus=void 0,function(t){t[t.Success=0]="Success",t[t.Error=1]="Error"}(e.TranslationStatus||(e.TranslationStatus={}))}(ih)),ih}var ls={},zm;function Uz(){if(zm)return ls;zm=1,Object.defineProperty(ls,"__esModule",{value:!0}),ls.ChunkedArrayBufferStream=void 0;const e=je();let t=class extends e.Stream{constructor(s,o){super(o),this.privTargetChunkSize=Math.round(s),this.privNextBufferReadyBytes=0}writeStreamChunk(s){if(s.isEnd||this.privNextBufferReadyBytes===0&&s.buffer.byteLength===this.privTargetChunkSize){super.writeStreamChunk(s);return}let o=0;for(;o<s.buffer.byteLength;){this.privNextBufferToWrite===void 0&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=s.timeReceived);const a=Math.min(s.buffer.byteLength-o,this.privTargetChunkSize-this.privNextBufferReadyBytes),c=new Uint8Array(this.privNextBufferToWrite),i=new Uint8Array(s.buffer.slice(o,a+o));c.set(i,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=a,o+=a,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){this.privNextBufferReadyBytes!==0&&!this.isClosed&&super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}};return ls.ChunkedArrayBufferStream=t,ls}var oh={},xm;function Hz(){return xm||(xm=1,Object.defineProperty(oh,"__esModule",{value:!0})),oh}var ps={},Nm;function Wz(){if(Nm)return ps;Nm=1,Object.defineProperty(ps,"__esModule",{value:!0}),ps.Timeout=void 0;let e=class Pn{static load(){const r=new Map([[0,()=>{}]]),s=new Map,a="data:text/javascript;base64,"+btoa(`!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error('There is no interval scheduled with the given id "'.concat(e,'".'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error('The given method "'.concat(e.method,'" is not supported'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);`),c=new Worker(a);return c.addEventListener("message",({data:l})=>{if(Pn.isCallNotification(l)){const{params:{timerId:h}}=l,v=r.get(h);if(typeof v=="number"){const f=s.get(v);if(f===void 0||f!==h)throw new Error("The timer is in an undefined state.")}else if(typeof v<"u")v(),r.delete(h);else throw new Error("The timer is in an undefined state.")}else if(Pn.isClearResponse(l)){const{id:h}=l,v=s.get(h);if(v===void 0)throw new Error("The timer is in an undefined state.");s.delete(h),r.delete(v)}else{const{error:{message:h}}=l;throw new Error(h)}}),{clearTimeout:l=>{const h=Math.random();s.set(h,l),r.set(l,h),c.postMessage({id:h,method:"clear",params:{timerId:l}})},setTimeout:(l,h)=>{const v=Math.random();return r.set(v,l),c.postMessage({id:null,method:"set",params:{delay:h,now:performance.now(),timerId:v}}),v}}}static loadWorkerTimers(){return()=>(Pn.workerTimers!==null||(Pn.workerTimers=Pn.load()),Pn.workerTimers)}static isCallNotification(r){return r.method!==void 0&&r.method==="call"}static isClearResponse(r){return r.error===null&&typeof r.id=="number"}};return ps.Timeout=e,e.workerTimers=null,e.clearTimeout=t=>e.timers().clearTimeout(t),e.setTimeout=(t,r)=>e.timers().setTimeout(t,r),e.timers=e.loadWorkerTimers(),ps}var Xe={},qm;function Vz(){if(qm)return Xe;qm=1,Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.OCSPCacheUpdateErrorEvent=Xe.OCSPResponseRetrievedEvent=Xe.OCSPCacheFetchErrorEvent=Xe.OCSPVerificationFailedEvent=Xe.OCSPCacheHitEvent=Xe.OCSPCacheEntryNeedsRefreshEvent=Xe.OCSPCacheEntryExpiredEvent=Xe.OCSPWSUpgradeStartedEvent=Xe.OCSPStapleReceivedEvent=Xe.OCSPCacheUpdateCompleteEvent=Xe.OCSPDiskCacheStoreEvent=Xe.OCSPMemoryCacheStoreEvent=Xe.OCSPCacheUpdateNeededEvent=Xe.OCSPDiskCacheHitEvent=Xe.OCSPCacheMissEvent=Xe.OCSPMemoryCacheHitEvent=Xe.OCSPEvent=void 0;const e=Su();class t extends e.PlatformEvent{constructor(_,T,k){super(_,T),this.privSignature=k}}Xe.OCSPEvent=t;class r extends t{constructor(_){super("OCSPMemoryCacheHitEvent",e.EventType.Debug,_)}}Xe.OCSPMemoryCacheHitEvent=r;class s extends t{constructor(_){super("OCSPCacheMissEvent",e.EventType.Debug,_)}}Xe.OCSPCacheMissEvent=s;class o extends t{constructor(_){super("OCSPDiskCacheHitEvent",e.EventType.Debug,_)}}Xe.OCSPDiskCacheHitEvent=o;class a extends t{constructor(_){super("OCSPCacheUpdateNeededEvent",e.EventType.Debug,_)}}Xe.OCSPCacheUpdateNeededEvent=a;class c extends t{constructor(_){super("OCSPMemoryCacheStoreEvent",e.EventType.Debug,_)}}Xe.OCSPMemoryCacheStoreEvent=c;class i extends t{constructor(_){super("OCSPDiskCacheStoreEvent",e.EventType.Debug,_)}}Xe.OCSPDiskCacheStoreEvent=i;class u extends t{constructor(_){super("OCSPCacheUpdateCompleteEvent",e.EventType.Debug,_)}}Xe.OCSPCacheUpdateCompleteEvent=u;class l extends t{constructor(){super("OCSPStapleReceivedEvent",e.EventType.Debug,"")}}Xe.OCSPStapleReceivedEvent=l;class h extends t{constructor(_){super("OCSPWSUpgradeStartedEvent",e.EventType.Debug,_)}}Xe.OCSPWSUpgradeStartedEvent=h;class v extends t{constructor(_,T){super("OCSPCacheEntryExpiredEvent",e.EventType.Debug,_),this.privExpireTime=T}}Xe.OCSPCacheEntryExpiredEvent=v;class f extends t{constructor(_,T,k){super("OCSPCacheEntryNeedsRefreshEvent",e.EventType.Debug,_),this.privExpireTime=k,this.privStartTime=T}}Xe.OCSPCacheEntryNeedsRefreshEvent=f;class d extends t{constructor(_,T,k){super("OCSPCacheHitEvent",e.EventType.Debug,_),this.privExpireTime=k,this.privExpireTimeString=new Date(k).toLocaleDateString(),this.privStartTime=T,this.privStartTimeString=new Date(T).toLocaleTimeString()}}Xe.OCSPCacheHitEvent=d;class y extends t{constructor(_,T){super("OCSPVerificationFailedEvent",e.EventType.Debug,_),this.privError=T}}Xe.OCSPVerificationFailedEvent=y;class m extends t{constructor(_,T){super("OCSPCacheFetchErrorEvent",e.EventType.Debug,_),this.privError=T}}Xe.OCSPCacheFetchErrorEvent=m;class b extends t{constructor(_){super("OCSPResponseRetrievedEvent",e.EventType.Debug,_)}}Xe.OCSPResponseRetrievedEvent=b;class S extends t{constructor(_,T){super("OCSPCacheUpdateErrorEvent",e.EventType.Debug,_),this.privError=T}}return Xe.OCSPCacheUpdateErrorEvent=S,Xe}var hs={},Lm;function Gz(){if(Lm)return hs;Lm=1,Object.defineProperty(hs,"__esModule",{value:!0}),hs.BackgroundEvent=void 0;const e=je();class t extends e.PlatformEvent{constructor(s){super("BackgroundEvent",e.EventType.Error),this.privError=s}get error(){return this.privError}}return hs.BackgroundEvent=t,hs}var Bm;function je(){return Bm||(Bm=1,function(e){var t=ci&&ci.__createBinding||(Object.create?function(o,a,c,i){i===void 0&&(i=c),Object.defineProperty(o,i,{enumerable:!0,get:function(){return a[c]}})}:function(o,a,c,i){i===void 0&&(i=c),o[i]=a[c]}),r=ci&&ci.__exportStar||function(o,a){for(var c in o)c!=="default"&&!Object.prototype.hasOwnProperty.call(a,c)&&t(a,o,c)};Object.defineProperty(e,"__esModule",{value:!0}),e.TranslationStatus=void 0,r(Pz(),e),r(wz(),e),r(v_(),e),r(Ez(),e),r(Az(),e),r(f_(),e),r(Xr(),e),r(Tz(),e),r(g_(),e),r(Ui(),e),r(Iz(),e),r(Dz(),e),r(kz(),e),r(Mz(),e),r(Oz(),e),r(jz(),e),r(zz(),e),r(xz(),e),r(Nz(),e),r(qz(),e),r(m_(),e),r(Su(),e),r(S_(),e),r($_(),e),r(Lz(),e),r(Bz(),e),r(Fz(),e);var s=sf();Object.defineProperty(e,"TranslationStatus",{enumerable:!0,get:function(){return s.TranslationStatus}}),r(Uz(),e),r(Hz(),e),r(Wz(),e),r(Vz(),e),r(Gz(),e)}(ci)),ci}var ds={},Fm;function nr(){if(Fm)return ds;Fm=1,Object.defineProperty(ds,"__esModule",{value:!0}),ds.HeaderNames=void 0;let e=class{};return ds.HeaderNames=e,e.AuthKey="Ocp-Apim-Subscription-Key",e.Authorization="Authorization",e.SpIDAuthKey="Apim-Subscription-Id",e.ConnectionId="X-ConnectionId",e.ContentType="Content-Type",e.CustomCommandsAppId="X-CommandsAppId",e.Path="Path",e.RequestId="X-RequestId",e.RequestStreamId="X-StreamId",e.RequestTimestamp="X-Timestamp",ds}var vs={},Um;function af(){if(Um)return vs;Um=1,Object.defineProperty(vs,"__esModule",{value:!0}),vs.AuthInfo=void 0;class e{constructor(r,s){this.privHeaderName=r,this.privToken=s}get headerName(){return this.privHeaderName}get token(){return this.privToken}}return vs.AuthInfo=e,vs}var Hm;function Jz(){if(Hm)return Fo;Hm=1,Object.defineProperty(Fo,"__esModule",{value:!0}),Fo.CognitiveSubscriptionKeyAuthentication=void 0;const e=je(),t=nr(),r=af();let s=class{constructor(a){if(!a)throw new e.ArgumentNullError("subscriptionKey");this.privAuthInfo=new r.AuthInfo(t.HeaderNames.AuthKey,a)}fetch(a){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(a){return Promise.resolve(this.privAuthInfo)}};return Fo.CognitiveSubscriptionKeyAuthentication=s,Fo}var fs={},Wm;function Kz(){if(Wm)return fs;Wm=1,Object.defineProperty(fs,"__esModule",{value:!0}),fs.CognitiveTokenAuthentication=void 0;const e=je(),t=af(),r=nr();let s=class Ud{constructor(a,c){if(!a)throw new e.ArgumentNullError("fetchCallback");if(!c)throw new e.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=a,this.privFetchOnExpiryCallback=c}fetch(a){return this.privFetchCallback(a).then(c=>new t.AuthInfo(r.HeaderNames.Authorization,c===void 0?void 0:Ud.privTokenPrefix+c))}fetchOnExpiry(a){return this.privFetchOnExpiryCallback(a).then(c=>new t.AuthInfo(r.HeaderNames.Authorization,c===void 0?void 0:Ud.privTokenPrefix+c))}};return fs.CognitiveTokenAuthentication=s,s.privTokenPrefix="Bearer ",fs}var sh={},Vm;function Zz(){return Vm||(Vm=1,Object.defineProperty(sh,"__esModule",{value:!0})),sh}var ah={},Gm;function Qz(){return Gm||(Gm=1,Object.defineProperty(ah,"__esModule",{value:!0})),ah}var gs={},pi={},Ar={};const Yz={},Xz=Object.freeze(Object.defineProperty({__proto__:null,default:Yz},Symbol.toStringTag,{value:"Module"})),Mr=dz(Xz);var ch={},Jm;function y_(){return Jm||(Jm=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LogLevel=void 0;const t=je();Object.defineProperty(e,"LogLevel",{enumerable:!0,get:function(){return t.EventType}})}(ch)),ch}var ms={},Km;function Le(){if(Km)return ms;Km=1,Object.defineProperty(ms,"__esModule",{value:!0}),ms.Contracts=void 0;let e=class wn{static throwIfNullOrUndefined(r,s){if(r==null)throw new Error("throwIfNullOrUndefined:"+s)}static throwIfNull(r,s){if(r===null)throw new Error("throwIfNull:"+s)}static throwIfNullOrWhitespace(r,s){if(wn.throwIfNullOrUndefined(r,s),(""+r).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+s)}static throwIfNullOrTooLong(r,s,o){if(wn.throwIfNullOrUndefined(r,s),(""+r).length>o)throw new Error("throwIfNullOrTooLong:"+s+" (more than "+o.toString()+" characters)")}static throwIfNullOrTooShort(r,s,o){if(wn.throwIfNullOrUndefined(r,s),(""+r).length<o)throw new Error("throwIfNullOrTooShort:"+s+" (less than "+o.toString()+" characters)")}static throwIfDisposed(r){if(r)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(r,s){if(wn.throwIfNullOrUndefined(r,s),r.length===0)throw new Error("throwIfArrayEmptyOrWhitespace:"+s);for(const o of r)wn.throwIfNullOrWhitespace(o,s)}static throwIfFileDoesNotExist(r,s){wn.throwIfNullOrWhitespace(r,s)}static throwIfNotUndefined(r,s){if(r!==void 0)throw new Error("throwIfNotUndefined:"+s)}static throwIfNumberOutOfRange(r,s,o,a){if(wn.throwIfNullOrUndefined(r,s),r<o||r>a)throw new Error("throwIfNumberOutOfRange:"+s+" (must be between "+o.toString()+" and "+a.toString()+")")}};return ms.Contracts=e,ms}var Zm;function ex(){if(Zm)return Ar;Zm=1;var e=Ar&&Ar.__createBinding||(Object.create?function(i,u,l,h){h===void 0&&(h=l),Object.defineProperty(i,h,{enumerable:!0,get:function(){return u[l]}})}:function(i,u,l,h){h===void 0&&(h=l),i[h]=u[l]}),t=Ar&&Ar.__setModuleDefault||(Object.create?function(i,u){Object.defineProperty(i,"default",{enumerable:!0,value:u})}:function(i,u){i.default=u}),r=Ar&&Ar.__importStar||function(i){if(i&&i.__esModule)return i;var u={};if(i!=null)for(var l in i)l!=="default"&&Object.prototype.hasOwnProperty.call(i,l)&&e(u,i,l);return t(u,i),u};Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.ConsoleLoggingListener=void 0;const s=r(Mr),o=y_(),a=Le();let c=class{constructor(u=o.LogLevel.None){this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=u}set logPath(u){a.Contracts.throwIfNullOrUndefined(s.openSync,`
File System access not available`),this.privLogPath=u}set enableConsoleOutput(u){this.privEnableConsoleOutput=u}onEvent(u){if(u.eventType>=this.privLogLevelFilter){const l=this.toString(u);if(this.logCallback&&this.logCallback(l),this.privLogPath&&s.writeFileSync(this.privLogPath,l+`
`,{flag:"a+"}),this.privEnableConsoleOutput)switch(u.eventType){case o.LogLevel.Debug:console.debug(l);break;case o.LogLevel.Info:console.info(l);break;case o.LogLevel.Warning:console.warn(l);break;case o.LogLevel.Error:console.error(l);break;default:console.log(l);break}}}toString(u){const l=[`${u.eventTime}`,`${u.name}`],h=u;for(const v in h)if(v&&u.hasOwnProperty(v)&&v!=="eventTime"&&v!=="eventType"&&v!=="eventId"&&v!=="name"&&v!=="constructor"){const f=h[v];let d="<NULL>";f!=null&&(typeof f=="number"||typeof f=="string"?d=f.toString():d=JSON.stringify(f)),l.push(`${v}: ${d}`)}return l.join(" | ")}};return Ar.ConsoleLoggingListener=c,Ar}var uh={},Qm;function tx(){return Qm||(Qm=1,Object.defineProperty(uh,"__esModule",{value:!0})),uh}var lh={},ph={},Ym;function Hi(){return Ym||(Ym=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AudioStreamFormatImpl=e.AudioStreamFormat=e.AudioFormatTag=void 0;var t;(function(o){o[o.PCM=1]="PCM",o[o.MuLaw=2]="MuLaw",o[o.Siren=3]="Siren",o[o.MP3=4]="MP3",o[o.SILKSkype=5]="SILKSkype",o[o.OGG_OPUS=6]="OGG_OPUS",o[o.WEBM_OPUS=7]="WEBM_OPUS",o[o.ALaw=8]="ALaw",o[o.FLAC=9]="FLAC",o[o.OPUS=10]="OPUS",o[o.AMR_WB=11]="AMR_WB",o[o.G722=12]="G722"})(t=e.AudioFormatTag||(e.AudioFormatTag={}));class r{static getDefaultInputFormat(){return s.getDefaultInputFormat()}static getWaveFormat(a,c,i,u){return new s(a,c,i,u)}static getWaveFormatPCM(a,c,i){return new s(a,c,i)}}e.AudioStreamFormat=r;class s extends r{constructor(a=16e3,c=16,i=1,u=t.PCM){super();let l=!0;switch(u){case t.PCM:this.formatTag=1;break;case t.ALaw:this.formatTag=6;break;case t.MuLaw:this.formatTag=7;break;default:l=!1}if(this.bitsPerSample=c,this.samplesPerSec=a,this.channels=i,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),l){this.privHeader=new ArrayBuffer(44);const h=new DataView(this.privHeader);this.setString(h,0,"RIFF"),h.setUint32(4,0,!0),this.setString(h,8,"WAVEfmt "),h.setUint32(16,16,!0),h.setUint16(20,this.formatTag,!0),h.setUint16(22,this.channels,!0),h.setUint32(24,this.samplesPerSec,!0),h.setUint32(28,this.avgBytesPerSec,!0),h.setUint16(32,this.channels*(this.bitsPerSample/8),!0),h.setUint16(34,this.bitsPerSample,!0),this.setString(h,36,"data"),h.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new s}static getAudioContext(a){const c=window.AudioContext||window.webkitAudioContext||!1;if(c)return a!==void 0&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new c({sampleRate:a}):new c;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(a,c,i){for(let u=0;u<i.length;u++)a.setUint8(c+u,i.charCodeAt(u))}}e.AudioStreamFormatImpl=s}(ph)),ph}var Xm;function rx(){return Xm||(Xm=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MicAudioSource=e.AudioWorkletSourceURLPropertyName=void 0;const t=Pe(),r=je(),s=Hi();e.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";class o{constructor(c,i,u,l){this.privRecorder=c,this.deviceId=i,this.privStreams={},this.privOutputChunkSize=o.AUDIOFORMAT.avgBytesPerSec/10,this.privId=u||(0,r.createNoDashGuid)(),this.privEvents=new r.EventSource,this.privMediaStream=l||null,this.privIsClosing=!1}get format(){return Promise.resolve(o.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new r.Deferred;try{this.createAudioContext()}catch(u){if(u instanceof Error){const l=u;this.privInitializeDeferral.reject(l.name+": "+l.message)}else this.privInitializeDeferral.reject(u);return this.privInitializeDeferral.promise}const c=window.navigator;let i=c.getUserMedia||c.webkitGetUserMedia||c.mozGetUserMedia||c.msGetUserMedia;if(c.mediaDevices&&(i=(u,l,h)=>{c.mediaDevices.getUserMedia(u).then(l).catch(h)}),i){const u=()=>{this.onEvent(new r.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new r.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):i({audio:this.deviceId?{deviceId:this.deviceId}:!0,video:!1},l=>{this.privMediaStream=l,this.onEvent(new r.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()},l=>{const h=`Error occurred during microphone initialization: ${l}`;this.privInitializeDeferral.reject(h),this.onEvent(new r.AudioSourceErrorEvent(this.privId,h))})};this.privContext.state==="suspended"?this.privContext.resume().then(u).catch(l=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${l}`)}):u()}else{const u="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(u),this.onEvent(new r.AudioSourceErrorEvent(u,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(c){return this.onEvent(new r.AudioStreamNodeAttachingEvent(this.privId,c)),this.listen(c).then(i=>(this.onEvent(new r.AudioStreamNodeAttachedEvent(this.privId,c)),{detach:async()=>(i.readEnded(),delete this.privStreams[c],this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,c)),this.turnOff()),id:()=>c,read:()=>i.read()}))}detach(c){c&&this.privStreams[c]&&(this.privStreams[c].close(),delete this.privStreams[c],this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,c)))}async turnOff(){for(const c in this.privStreams)if(c){const i=this.privStreams[c];i&&i.close()}this.onEvent(new r.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(await this.privInitializeDeferral,this.privInitializeDeferral=null),await this.destroyAudioContext()}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(c=>({bitspersample:o.AUDIOFORMAT.bitsPerSample,channelcount:o.AUDIOFORMAT.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:c,samplerate:o.AUDIOFORMAT.samplesPerSec,type:t.type.Microphones}))}setProperty(c,i){if(c===e.AudioWorkletSourceURLPropertyName)this.privRecorder.setWorkletUrl(i);else throw new Error("Property '"+c+"' is not supported on Microphone.")}getMicrophoneLabel(){const c="microphone";if(this.privMicrophoneLabel!==void 0)return Promise.resolve(this.privMicrophoneLabel);if(this.privMediaStream===void 0||!this.privMediaStream.active)return Promise.resolve(c);this.privMicrophoneLabel=c;const i=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(i===void 0)return Promise.resolve(this.privMicrophoneLabel);const u=new r.Deferred;return navigator.mediaDevices.enumerateDevices().then(l=>{for(const h of l)if(h.deviceId===i){this.privMicrophoneLabel=h.label;break}u.resolve(this.privMicrophoneLabel)},()=>u.resolve(this.privMicrophoneLabel)),u.promise}async listen(c){await this.turnOn();const i=new r.ChunkedArrayBufferStream(this.privOutputChunkSize,c);this.privStreams[c]=i;try{this.privRecorder.record(this.privContext,this.privMediaStream,i)}catch(l){throw this.onEvent(new r.AudioStreamNodeErrorEvent(this.privId,c,l)),l}return i}onEvent(c){this.privEvents.onEvent(c),r.Events.instance.onEvent(c)}createAudioContext(){this.privContext||(this.privContext=s.AudioStreamFormatImpl.getAudioContext(o.AUDIOFORMAT.samplesPerSec))}async destroyAudioContext(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let c=!1;"close"in this.privContext&&(c=!0),c?this.privIsClosing||(this.privIsClosing=!0,await this.privContext.close(),this.privContext=null,this.privIsClosing=!1):this.privContext!==null&&this.privContext.state==="running"&&await this.privContext.suspend()}}e.MicAudioSource=o,o.AUDIOFORMAT=s.AudioStreamFormat.getDefaultInputFormat()}(lh)),lh}var Ss={},eS;function nx(){if(eS)return Ss;eS=1,Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.FileAudioSource=void 0;const e=Pe(),t=je(),r=Hi();let s=class{constructor(a,c,i){this.privStreams={},this.privHeaderEnd=44,this.privId=i||(0,t.createNoDashGuid)(),this.privEvents=new t.EventSource,this.privSource=a,typeof window<"u"&&typeof Blob<"u"&&this.privSource instanceof Blob?this.privFilename=a.name:this.privFilename=c||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const a=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new t.AudioSourceErrorEvent(a,"")),Promise.reject(a)}this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}id(){return this.privId}async attach(a){this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,a));const c=await this.upload(a);return this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,a)),Promise.resolve({detach:async()=>{c.readEnded(),delete this.privStreams[a],this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,a)),await this.turnOff()},id:()=>a,read:()=>c.read()})}detach(a){a&&this.privStreams[a]&&(this.privStreams[a].close(),delete this.privStreams[a],this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,a)))}turnOff(){for(const a in this.privStreams)if(a){const c=this.privStreams[a];c&&!c.isClosed&&c.close()}return this.onEvent(new t.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(a=>Promise.resolve({bitspersample:a.bitsPerSample,channelcount:a.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:a.samplesPerSec,type:e.type.File}))}readHeader(){const c=this.privSource.slice(0,4296),i=new t.Deferred,u=l=>{const h=new DataView(l),v=S=>String.fromCharCode(h.getUint8(S),h.getUint8(S+1),h.getUint8(S+2),h.getUint8(S+3));if(v(0)!=="RIFF"){i.reject("Invalid WAV header in file, RIFF was not found");return}if(v(8)!=="WAVE"||v(12)!=="fmt "){i.reject("Invalid WAV header in file, WAVEfmt was not found");return}const f=h.getInt32(16,!0),d=h.getUint16(22,!0),y=h.getUint32(24,!0),m=h.getUint16(34,!0);let b=36+Math.max(f-16,0);for(;v(b)!=="data";b+=2)if(b>4288){i.reject("Invalid WAV header in file, data block was not found");return}this.privHeaderEnd=b+8,i.resolve(r.AudioStreamFormat.getWaveFormatPCM(y,m,d))};if(typeof window<"u"&&typeof Blob<"u"&&c instanceof Blob){const l=new FileReader;l.onload=h=>{const v=h.target.result;u(v)},l.readAsArrayBuffer(c)}else{const l=c;u(l.buffer.slice(l.byteOffset,l.byteOffset+l.byteLength))}return i.promise}async upload(a){const c=i=>{const u=`Error occurred while processing '${this.privFilename}'. ${i}`;throw this.onEvent(new t.AudioStreamNodeErrorEvent(this.privId,a,u)),new Error(u)};try{await this.turnOn();const i=await this.privAudioFormatPromise,u=new t.ChunkedArrayBufferStream(i.avgBytesPerSec/10,a);this.privStreams[a]=u;const l=this.privSource.slice(this.privHeaderEnd),h=v=>{u.isClosed||(u.writeStreamChunk({buffer:v,isEnd:!1,timeReceived:Date.now()}),u.close())};if(typeof window<"u"&&typeof Blob<"u"&&l instanceof Blob){const v=new FileReader;v.onerror=f=>c(f.toString()),v.onload=f=>{const d=f.target.result;h(d)},v.readAsArrayBuffer(l)}else{const v=l;h(v.buffer.slice(v.byteOffset,v.byteOffset+v.byteLength))}return u}catch(i){c(i)}}onEvent(a){this.privEvents.onEvent(a),t.Events.instance.onEvent(a)}};return Ss.FileAudioSource=s,Ss}var $s={},tS;function ix(){if(tS)return $s;tS=1,Object.defineProperty($s,"__esModule",{value:!0}),$s.PcmRecorder=void 0;const e=je();class t{constructor(s){this.privStopInputOnRelease=s}record(s,o,a){const i=new e.RiffPcmEncoder(s.sampleRate,16e3),u=s.createMediaStreamSource(o),l=()=>{const v=(()=>{let f=0;try{return s.createScriptProcessor(f,1,1)}catch{f=2048;let y=s.sampleRate;for(;f<16384&&y>=32e3;)f<<=1,y>>=1;return s.createScriptProcessor(f,1,1)}})();v.onaudioprocess=f=>{const d=f.inputBuffer.getChannelData(0);if(a&&!a.isClosed){const y=i.encode(d);y&&a.writeStreamChunk({buffer:y,isEnd:!1,timeReceived:Date.now()})}},u.connect(v),v.connect(s.destination),this.privMediaResources={scriptProcessorNode:v,source:u,stream:o}},h=!!this.privSpeechProcessorScript&&this.privSpeechProcessorScript.toLowerCase()==="ignore";if(s.audioWorklet&&!h){if(!this.privSpeechProcessorScript){const v=`class SP extends AudioWorkletProcessor {
                    constructor(options) {
                      super(options);
                    }
                    process(inputs, outputs) {
                      const input = inputs[0];
                      const output = [];
                      for (let channel = 0; channel < input.length; channel += 1) {
                        output[channel] = input[channel];
                      }
                      this.port.postMessage(output[0]);
                      return true;
                    }
                  }
                  registerProcessor('speech-processor', SP);`,f=new Blob([v],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(f)}s.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{const v=new AudioWorkletNode(s,"speech-processor");v.port.onmessage=f=>{const d=f.data;if(a&&!a.isClosed){const y=i.encode(d);y&&a.writeStreamChunk({buffer:y,isEnd:!1,timeReceived:Date.now()})}},u.connect(v),v.connect(s.destination),this.privMediaResources={scriptProcessorNode:v,source:u,stream:o}}).catch(()=>{l()})}else try{l()}catch(v){throw new Error(`Unable to start audio worklet node for PCMRecorder: ${v}`)}}releaseMediaResources(s){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(s.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(o=>o.stop()),this.privMediaResources.source=null))}setWorkletUrl(s){this.privSpeechProcessorScript=s}}return $s.PcmRecorder=t,$s}var ys={},ur={},rS;function C_(){if(rS)return ur;rS=1;var e=ur&&ur.__createBinding||(Object.create?function(f,d,y,m){m===void 0&&(m=y),Object.defineProperty(f,m,{enumerable:!0,get:function(){return d[y]}})}:function(f,d,y,m){m===void 0&&(m=y),f[m]=d[y]}),t=ur&&ur.__setModuleDefault||(Object.create?function(f,d){Object.defineProperty(f,"default",{enumerable:!0,value:d})}:function(f,d){f.default=d}),r=ur&&ur.__importStar||function(f){if(f&&f.__esModule)return f;var d={};if(f!=null)for(var y in f)y!=="default"&&Object.prototype.hasOwnProperty.call(f,y)&&e(d,f,y);return t(d,f),d},s=ur&&ur.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(ur,"__esModule",{value:!0}),ur.WebsocketMessageAdapter=void 0;const o=r(Mr),a=r(Mr),c=s(Mr),i=s(Mr),u=s(Mr),l=nr(),h=je();let v=class Hd{constructor(d,y,m,b,S,R){if(!d)throw new h.ArgumentNullError("uri");if(!m)throw new h.ArgumentNullError("messageFormatter");this.proxyInfo=b,this.privConnectionEvents=new h.EventSource,this.privConnectionId=y,this.privMessageFormatter=m,this.privConnectionState=h.ConnectionState.None,this.privUri=d,this.privHeaders=S,this.privEnableCompression=R,this.privHeaders[l.HeaderNames.ConnectionId]=this.privConnectionId,this.privHeaders.connectionId=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===h.ConnectionState.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new h.Deferred,this.privCertificateValidatedDeferral=new h.Deferred,this.privConnectionState=h.ConnectionState.Connecting;try{if(typeof WebSocket<"u"&&!Hd.forceNpmWebSocket)this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);else{let y=new URL(this.privUri).protocol;(y==null?void 0:y.toLocaleLowerCase())==="wss:"?y="https:":(y==null?void 0:y.toLocaleLowerCase())==="ws:"&&(y="http:");const m={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression,followRedirects:y.toLocaleLowerCase()==="https:"};this.privCertificateValidatedDeferral.resolve(),m.agent=this.getAgent(),m.agent.protocol=y,this.privWebsocketClient=new u.default(this.privUri,m),this.privWebsocketClient.on("redirect",b=>{const S=new h.ConnectionRedirectEvent(this.privConnectionId,b,this.privUri,`Getting redirect URL from endpoint ${this.privUri} with redirect URL '${b}'`);h.Events.instance.onEvent(S)})}this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new h.Queue,this.privDisconnectDeferral=new h.Deferred,this.privSendMessageQueue=new h.Queue,this.processSendQueue().catch(d=>{h.Events.instance.onEvent(new h.BackgroundEvent(d))})}catch(d){return this.privConnectionEstablishDeferral.resolve(new h.ConnectionOpenResponse(500,d)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new h.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=h.ConnectionState.Connected,this.onEvent(new h.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new h.ConnectionOpenResponse(200,""))},d=>{this.privConnectionEstablishDeferral.reject(d)})},this.privWebsocketClient.onerror=d=>{this.onEvent(new h.ConnectionErrorEvent(this.privConnectionId,d.message,d.type)),this.privLastErrorReceived=d.message},this.privWebsocketClient.onclose=d=>{this.privConnectionState===h.ConnectionState.Connecting?(this.privConnectionState=h.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new h.ConnectionOpenResponse(d.code,d.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=h.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new h.ConnectionClosedEvent(this.privConnectionId,d.code,d.reason))),this.onClose(d.code,d.reason).catch(y=>{h.Events.instance.onEvent(new h.BackgroundEvent(y))})},this.privWebsocketClient.onmessage=d=>{const y=new Date().toISOString();if(this.privConnectionState===h.ConnectionState.Connected){const m=new h.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(m.promise),d.data instanceof ArrayBuffer){const b=new h.RawWebsocketMessage(h.MessageType.Binary,d.data);this.privMessageFormatter.toConnectionMessage(b).then(S=>{this.onEvent(new h.ConnectionMessageReceivedEvent(this.privConnectionId,y,S)),m.resolve(S)},S=>{m.reject(`Invalid binary message format. Error: ${S}`)})}else{const b=new h.RawWebsocketMessage(h.MessageType.Text,d.data);this.privMessageFormatter.toConnectionMessage(b).then(S=>{this.onEvent(new h.ConnectionMessageReceivedEvent(this.privConnectionId,y,S)),m.resolve(S)},S=>{m.reject(`Invalid text message format. Error: ${S}`)})}}},this.privConnectionEstablishDeferral.promise}send(d){if(this.privConnectionState!==h.ConnectionState.Connected)return Promise.reject(`Cannot send on connection that is in ${h.ConnectionState[this.privConnectionState]} state`);const y=new h.Deferred,m=new h.Deferred;return this.privSendMessageQueue.enqueueFromPromise(m.promise),this.privMessageFormatter.fromConnectionMessage(d).then(b=>{m.resolve({Message:d,RawWebsocketMessage:b,sendStatusDeferral:y})},b=>{m.reject(`Error formatting the message. ${b}`)}),y.promise}read(){return this.privConnectionState!==h.ConnectionState.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(d){if(this.privWebsocketClient)this.privConnectionState!==h.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,d||"Normal closure by client");else return Promise.resolve();return this.privDisconnectDeferral.promise}get events(){return this.privConnectionEvents}sendRawMessage(d){try{if(!d)return Promise.resolve();if(this.onEvent(new h.ConnectionMessageSentEvent(this.privConnectionId,new Date().toISOString(),d.Message)),this.isWebsocketOpen)this.privWebsocketClient.send(d.RawWebsocketMessage.payload);else return Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+d.Message.id+" "+new Error().stack);return Promise.resolve()}catch(y){return Promise.reject(`websocket send error: ${y}`)}}async onClose(d,y){const m=`Connection closed. ${d}: ${y}`;this.privConnectionState=h.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),await this.privReceivingMessageQueue.drainAndDispose(()=>{},m),await this.privSendMessageQueue.drainAndDispose(b=>{b.sendStatusDeferral.reject(m)},m)}async processSendQueue(){for(;;){const y=await this.privSendMessageQueue.dequeue();if(!y)return;try{await this.sendRawMessage(y),y.sendStatusDeferral.resolve()}catch(m){y.sendStatusDeferral.reject(m)}}}onEvent(d){this.privConnectionEvents.onEvent(d),h.Events.instance.onEvent(d)}getAgent(){const d=new c.default.Agent(this.createConnection);return this.proxyInfo!==void 0&&this.proxyInfo.HostName!==void 0&&this.proxyInfo.Port>0&&(d.proxyInfo=this.proxyInfo),d}static GetProxyAgent(d){const y={host:d.HostName,port:d.Port};return d.UserName?y.headers={"Proxy-Authentication":"Basic "+Buffer.from(`${d.UserName}:${d.Password===void 0?"":d.Password}`).toString("base64")}:y.headers={},y.headers.requestOCSP="true",new i.default(y)}createConnection(d,y){let m;if(y={...y,requestOCSP:!0,servername:y.host},this.proxyInfo){const S=Hd.GetProxyAgent(this.proxyInfo);m=new Promise((R,_)=>{S.callback(d,y,(T,k)=>{T?_(T):R(k)})})}else y.secureEndpoint?m=Promise.resolve(a.connect(y)):m=Promise.resolve(o.connect(y));return m}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}};return ur.WebsocketMessageAdapter=v,v.forceNpmWebSocket=!1,ur}var nS;function ox(){if(nS)return ys;nS=1,Object.defineProperty(ys,"__esModule",{value:!0}),ys.WebsocketConnection=void 0;const e=je(),t=C_();let r=class{constructor(o,a,c,i,u,l=!1,h){if(this.privIsDisposed=!1,!o)throw new e.ArgumentNullError("uri");if(!i)throw new e.ArgumentNullError("messageFormatter");this.privMessageFormatter=i;let v="",f=0;if(a){for(const d in a)if(d){v+=f===0&&o.indexOf("?")===-1?"?":"&";const y=encodeURIComponent(d);v+=y;let m=a[d];m&&(m=encodeURIComponent(m),v+=`=${m}`),f++}}if(c){for(const d in c)if(d){v+=f===0&&o.indexOf("?")===-1?"?":"&";const y=encodeURIComponent(c[d]);v+=`${d}=${y}`,f++}}this.privUri=o+v,this.privId=h||(0,e.createNoDashGuid)(),this.privConnectionMessageAdapter=new t.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,u,c,l)}async dispose(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&await this.privConnectionMessageAdapter.close()}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(o){return this.privConnectionMessageAdapter.send(o)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}};return ys.WebsocketConnection=r,ys}var Cs={},iS;function sx(){if(iS)return Cs;iS=1,Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.ReplayableAudioNode=void 0;let e=class{constructor(s,o){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=s,this.privBytesPerSecond=o}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&this.privBuffers.length!==0){const s=this.privReplayOffset-this.privBufferStartOffset;let o=Math.round(s*this.privBytesPerSecond*1e-7);o%2!==0&&o++;let a=0;for(;a<this.privBuffers.length&&o>=this.privBuffers[a].chunk.buffer.byteLength;)o-=this.privBuffers[a++].chunk.buffer.byteLength;if(a<this.privBuffers.length){const c=this.privBuffers[a].chunk.buffer.slice(o);return this.privReplayOffset+=c.byteLength/this.privBytesPerSecond*1e7,a===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:c,isEnd:!1,timeReceived:this.privBuffers[a].chunk.timeReceived})}}return this.privAudioNode.read().then(s=>(s&&s.buffer&&this.privBuffers&&(this.privBuffers.push(new t(s,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=s.buffer.byteLength),s))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&this.privBuffers.length!==0&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(s){if(this.privBuffers===void 0||this.privBuffers.length===0)return;this.privLastShrinkOffset=s;const o=s-this.privBufferStartOffset;let a=Math.round(o*this.privBytesPerSecond*1e-7),c=0;for(;c<this.privBuffers.length&&a>=this.privBuffers[c].chunk.buffer.byteLength;)a-=this.privBuffers[c++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(s-a/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(c)}findTimeAtOffset(s){if(s<this.privBufferStartOffset||this.privBuffers===void 0)return 0;for(const o of this.privBuffers){const a=o.byteOffset/this.privBytesPerSecond*1e7,c=a+o.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(s>=a&&s<=c)return o.chunk.timeReceived}return 0}};Cs.ReplayableAudioNode=e;class t{constructor(s,o,a){this.chunk=s,this.serial=o,this.byteOffset=a}}return Cs}var bs={},hh={},on={},Tr={},oS;function b_(){if(oS)return Tr;oS=1;var e=Tr&&Tr.__createBinding||(Object.create?function(c,i,u,l){l===void 0&&(l=u),Object.defineProperty(c,l,{enumerable:!0,get:function(){return i[u]}})}:function(c,i,u,l){l===void 0&&(l=u),c[l]=i[u]}),t=Tr&&Tr.__setModuleDefault||(Object.create?function(c,i){Object.defineProperty(c,"default",{enumerable:!0,value:i})}:function(c,i){c.default=i}),r=Tr&&Tr.__importStar||function(c){if(c&&c.__esModule)return c;var i={};if(c!=null)for(var u in c)u!=="default"&&Object.prototype.hasOwnProperty.call(c,u)&&e(i,c,u);return t(i,c),i};Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.AudioFileWriter=void 0;const s=r(Mr),o=Le();let a=class{constructor(i){o.Contracts.throwIfNullOrUndefined(s.openSync,`
File System access not available, please use Push or PullAudioOutputStream`),this.privFd=s.openSync(i,"w")}set format(i){o.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=i;let u=0;this.privAudioFormat.hasHeader&&(u=this.privAudioFormat.header.byteLength),this.privFd!==void 0&&(this.privWriteStream=s.createWriteStream("",{fd:this.privFd,start:u,autoClose:!1}))}write(i){o.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),this.privWriteStream!==void 0&&this.privWriteStream.write(new Uint8Array(i.slice(0)))}close(){this.privFd!==void 0&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),s.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),s.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}id(){return this.privId}};return Tr.AudioFileWriter=a,Tr}var lr={},sS;function R_(){if(sS)return lr;sS=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.PullAudioInputStreamImpl=lr.PullAudioInputStream=lr.PushAudioInputStreamImpl=lr.PushAudioInputStream=lr.AudioInputStream=void 0;const e=Pe(),t=je(),r=Ui(),s=le(),o=Hi();let a=class{constructor(){}static createPushStream(v){return c.create(v)}static createPullStream(v,f){return u.create(v,f)}};lr.AudioInputStream=a;class c extends a{static create(v){return new i(v)}}lr.PushAudioInputStream=c;class i extends c{constructor(v){super(),v===void 0?this.privFormat=o.AudioStreamFormatImpl.getDefaultInputFormat():this.privFormat=v,this.privEvents=new t.EventSource,this.privId=(0,r.createNoDashGuid)(),this.privStream=new t.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(v){this.privStream.writeStreamChunk({buffer:v,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}async attach(v){this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,v)),await this.turnOn();const f=this.privStream;return this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,v)),{detach:async()=>(this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,v)),this.turnOff()),id:()=>v,read:()=>f.read()}}detach(v){this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,v))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:e.type.Stream})}onEvent(v){this.privEvents.onEvent(v),t.Events.instance.onEvent(v)}toBuffer(v){const f=Buffer.alloc(v.byteLength),d=new Uint8Array(v);for(let y=0;y<f.length;++y)f[y]=d[y];return f}}lr.PushAudioInputStreamImpl=i;class u extends a{constructor(){super()}static create(v,f){return new l(v,f)}}lr.PullAudioInputStream=u;class l extends u{constructor(v,f){super(),f===void 0?this.privFormat=s.AudioStreamFormat.getDefaultInputFormat():this.privFormat=f,this.privEvents=new t.EventSource,this.privId=(0,r.createNoDashGuid)(),this.privCallback=v,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}async attach(v){return this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,v)),await this.turnOn(),this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,v)),{detach:()=>(this.privCallback.close(),this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,v)),this.turnOff()),id:()=>v,read:()=>{let f=0,d;for(;f<this.privBufferSize;){const y=new ArrayBuffer(this.privBufferSize-f),m=this.privCallback.read(y);if(d===void 0?d=y:new Int8Array(d).set(new Int8Array(y),f),m===0)break;f+=m}return Promise.resolve({buffer:d.slice(0,f),isEnd:this.privIsClosed||f===0,timeReceived:Date.now()})}}}detach(v){this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,v))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:e.type.Stream})}onEvent(v){this.privEvents.onEvent(v),t.Events.instance.onEvent(v)}}return lr.PullAudioInputStreamImpl=l,lr}var pr={},Rs={},dh={},aS;function __(){return aS||(aS=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SpeechSynthesisOutputFormat=void 0,function(t){t[t.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",t[t.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",t[t.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",t[t.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",t[t.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",t[t.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",t[t.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",t[t.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",t[t.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",t[t.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",t[t.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",t[t.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",t[t.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",t[t.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",t[t.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",t[t.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",t[t.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",t[t.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",t[t.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",t[t.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",t[t.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",t[t.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",t[t.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",t[t.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",t[t.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",t[t.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",t[t.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",t[t.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",t[t.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",t[t.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",t[t.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",t[t.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",t[t.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",t[t.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",t[t.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",t[t.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",t[t.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm",t[t.AmrWb16000Hz=37]="AmrWb16000Hz",t[t.G72216Khz64Kbps=38]="G72216Khz64Kbps"}(e.SpeechSynthesisOutputFormat||(e.SpeechSynthesisOutputFormat={}))}(dh)),dh}var cS;function $u(){if(cS)return Rs;cS=1,Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.AudioOutputFormatImpl=void 0;const e=__(),t=Hi();class r extends t.AudioStreamFormatImpl{constructor(o,a,c,i,u,l,h,v,f){super(c,l,a,o),this.formatTag=o,this.avgBytesPerSec=i,this.blockAlign=u,this.priAudioFormatString=h,this.priRequestAudioFormatString=v,this.priHasHeader=f}static fromSpeechSynthesisOutputFormat(o){return o===void 0?r.getDefaultOutputFormat():r.fromSpeechSynthesisOutputFormatString(r.SpeechSynthesisOutputFormatToString[o])}static fromSpeechSynthesisOutputFormatString(o){switch(o){case"raw-8khz-8bit-mono-mulaw":return new r(t.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,o,o,!1);case"riff-16khz-16kbps-mono-siren":return new r(t.AudioFormatTag.Siren,1,16e3,2e3,40,0,o,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new r(t.AudioFormatTag.Siren,1,16e3,2e3,40,0,o,o,!1);case"audio-16khz-32kbitrate-mono-mp3":return new r(t.AudioFormatTag.MP3,1,16e3,4096,2,16,o,o,!1);case"audio-16khz-128kbitrate-mono-mp3":return new r(t.AudioFormatTag.MP3,1,16e3,16384,2,16,o,o,!1);case"audio-16khz-64kbitrate-mono-mp3":return new r(t.AudioFormatTag.MP3,1,16e3,8192,2,16,o,o,!1);case"audio-24khz-48kbitrate-mono-mp3":return new r(t.AudioFormatTag.MP3,1,24e3,6144,2,16,o,o,!1);case"audio-24khz-96kbitrate-mono-mp3":return new r(t.AudioFormatTag.MP3,1,24e3,12288,2,16,o,o,!1);case"audio-24khz-160kbitrate-mono-mp3":return new r(t.AudioFormatTag.MP3,1,24e3,20480,2,16,o,o,!1);case"raw-16khz-16bit-mono-truesilk":return new r(t.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,o,o,!1);case"riff-8khz-16bit-mono-pcm":return new r(t.AudioFormatTag.PCM,1,8e3,16e3,2,16,o,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new r(t.AudioFormatTag.PCM,1,24e3,48e3,2,16,o,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new r(t.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,o,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new r(t.AudioFormatTag.PCM,1,16e3,32e3,2,16,o,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new r(t.AudioFormatTag.PCM,1,24e3,48e3,2,16,o,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new r(t.AudioFormatTag.PCM,1,8e3,16e3,2,16,o,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new r(t.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,o,o,!1);case"ogg-24khz-16bit-mono-opus":return new r(t.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,o,o,!1);case"raw-48khz-16bit-mono-pcm":return new r(t.AudioFormatTag.PCM,1,48e3,96e3,2,16,o,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new r(t.AudioFormatTag.PCM,1,48e3,96e3,2,16,o,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new r(t.AudioFormatTag.MP3,1,48e3,12288,2,16,o,o,!1);case"audio-48khz-192kbitrate-mono-mp3":return new r(t.AudioFormatTag.MP3,1,48e3,24576,2,16,o,o,!1);case"ogg-48khz-16bit-mono-opus":return new r(t.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,o,o,!1);case"webm-16khz-16bit-mono-opus":return new r(t.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,o,o,!1);case"webm-24khz-16bit-mono-opus":return new r(t.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,o,o,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new r(t.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,o,o,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new r(t.AudioFormatTag.OPUS,1,16e3,4e3,2,16,o,o,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new r(t.AudioFormatTag.OPUS,1,24e3,6e3,2,16,o,o,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new r(t.AudioFormatTag.OPUS,1,24e3,3e3,2,16,o,o,!1);case"audio-24khz-16bit-mono-flac":return new r(t.AudioFormatTag.FLAC,1,24e3,24e3,2,16,o,o,!1);case"audio-48khz-16bit-mono-flac":return new r(t.AudioFormatTag.FLAC,1,48e3,3e4,2,16,o,o,!1);case"raw-24khz-16bit-mono-truesilk":return new r(t.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,o,o,!1);case"raw-8khz-8bit-mono-alaw":return new r(t.AudioFormatTag.ALaw,1,8e3,8e3,1,8,o,o,!1);case"riff-8khz-8bit-mono-alaw":return new r(t.AudioFormatTag.ALaw,1,8e3,8e3,1,8,o,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new r(t.AudioFormatTag.PCM,1,22050,44100,2,16,o,o,!1);case"riff-22050hz-16bit-mono-pcm":return new r(t.AudioFormatTag.PCM,1,22050,44100,2,16,o,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new r(t.AudioFormatTag.PCM,1,44100,88200,2,16,o,o,!1);case"riff-44100hz-16bit-mono-pcm":return new r(t.AudioFormatTag.PCM,1,44100,88200,2,16,o,"raw-44100hz-16bit-mono-pcm",!0);case"amr-wb-16000h":return new r(t.AudioFormatTag.AMR_WB,1,16e3,3052,2,16,o,o,!1);case"g722-16khz-64kbps":return new r(t.AudioFormatTag.G722,1,16e3,8e3,2,16,o,o,!1);case"riff-16khz-16bit-mono-pcm":default:return new r(t.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return r.fromSpeechSynthesisOutputFormatString(typeof window<"u"?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(o){if(this.priHasHeader){const a=new DataView(this.privHeader);a.setUint32(4,o+this.privHeader.byteLength-8,!0),a.setUint32(40,o,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(o){if(!this.hasHeader)return o;this.updateHeader(o.byteLength);const a=new Uint8Array(o.byteLength+this.header.byteLength);return a.set(new Uint8Array(this.header),0),a.set(new Uint8Array(o),this.header.byteLength),a.buffer}}return Rs.AudioOutputFormatImpl=r,r.SpeechSynthesisOutputFormatToString={[e.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[e.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[e.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[e.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[e.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[e.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[e.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[e.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[e.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[e.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[e.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[e.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[e.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[e.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[e.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[e.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[e.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[e.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[e.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[e.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[e.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[e.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[e.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[e.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[e.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[e.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[e.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[e.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[e.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[e.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[e.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[e.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[e.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[e.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[e.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[e.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[e.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm",[e.SpeechSynthesisOutputFormat.AmrWb16000Hz]:"amr-wb-16000hz",[e.SpeechSynthesisOutputFormat.G72216Khz64Kbps]:"g722-16khz-64kbps"},Rs}var uS;function Po(){if(uS)return pr;uS=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.PushAudioOutputStreamImpl=pr.PushAudioOutputStream=pr.PullAudioOutputStreamImpl=pr.PullAudioOutputStream=pr.AudioOutputStream=void 0;const e=je(),t=Le(),r=$u();let s=class{constructor(){}static createPullStream(){return o.create()}};pr.AudioOutputStream=s;class o extends s{static create(){return new a}}pr.PullAudioOutputStream=o;class a extends o{constructor(){super(),this.privId=(0,e.createNoDashGuid)(),this.privStream=new e.Stream}set format(l){l==null&&(this.privFormat=r.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=l}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}async read(l){const h=new Int8Array(l);let v=0;if(this.privLastChunkView!==void 0){if(this.privLastChunkView.length>l.byteLength)return h.set(this.privLastChunkView.slice(0,l.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(l.byteLength),Promise.resolve(l.byteLength);h.set(this.privLastChunkView),v=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;v<l.byteLength&&!this.privStream.isReadEnded;){const f=await this.privStream.read();if(f!==void 0&&!f.isEnd){let d;f.buffer.byteLength>l.byteLength-v?(d=f.buffer.slice(0,l.byteLength-v),this.privLastChunkView=new Int8Array(f.buffer.slice(l.byteLength-v))):d=f.buffer,h.set(new Int8Array(d),v),v+=d.byteLength}else this.privStream.readEnded()}return v}write(l){t.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:l,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}pr.PullAudioOutputStreamImpl=a;class c extends s{constructor(){super()}static create(l){return new i(l)}}pr.PushAudioOutputStream=c;class i extends c{constructor(l){super(),this.privId=(0,e.createNoDashGuid)(),this.privCallback=l}set format(l){}write(l){this.privCallback.write&&this.privCallback.write(l)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}return pr.PushAudioOutputStreamImpl=i,pr}var lS;function w_(){if(lS)return on;lS=1,Object.defineProperty(on,"__esModule",{value:!0}),on.AudioOutputConfigImpl=on.AudioConfigImpl=on.AudioConfig=void 0;const e=Lt(),t=Le(),r=le(),s=b_(),o=R_(),a=Po();let c=class P_{static fromDefaultMicrophoneInput(){const h=new e.PcmRecorder(!0);return new i(new e.MicAudioSource(h))}static fromMicrophoneInput(h){const v=new e.PcmRecorder(!0);return new i(new e.MicAudioSource(v,h))}static fromWavFileInput(h,v="unnamedBuffer.wav"){return new i(new e.FileAudioSource(h,v))}static fromStreamInput(h){if(h instanceof r.PullAudioInputStreamCallback)return new i(new o.PullAudioInputStreamImpl(h));if(h instanceof r.AudioInputStream)return new i(h);if(typeof MediaStream<"u"&&h instanceof MediaStream){const v=new e.PcmRecorder(!1);return new i(new e.MicAudioSource(v,null,null,h))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new u(new r.SpeakerAudioDestination)}static fromSpeakerOutput(h){if(h===void 0)return P_.fromDefaultSpeakerOutput();if(h instanceof r.SpeakerAudioDestination)return new u(h);throw new Error("Not Supported Type")}static fromAudioFileOutput(h){return new u(new s.AudioFileWriter(h))}static fromStreamOutput(h){if(h instanceof r.PushAudioOutputStreamCallback)return new u(new a.PushAudioOutputStreamImpl(h));if(h instanceof r.PushAudioOutputStream)return new u(h);if(h instanceof r.PullAudioOutputStream)return new u(h);throw new Error("Not Supported Type")}};on.AudioConfig=c;class i extends c{constructor(h){super(),this.privSource=h}get format(){return this.privSource.format}close(h,v){this.privSource.turnOff().then(()=>{h&&h()},f=>{v&&v(f)})}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(h){return this.privSource.attach(h)}detach(h){return this.privSource.detach(h)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(h,v){if(t.Contracts.throwIfNull(v,"value"),this.privSource.setProperty!==void 0)this.privSource.setProperty(h,v);else throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(h,v){if(this.privSource.getProperty!==void 0)return this.privSource.getProperty(h,v);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}on.AudioConfigImpl=i;class u extends c{constructor(h){super(),this.privDestination=h}set format(h){this.privDestination.format=h}write(h){this.privDestination.write(h)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}}return on.AudioOutputConfigImpl=u,on}var vh={},pS;function ax(){return pS||(pS=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationReason=void 0,function(t){t[t.Error=0]="Error",t[t.EndOfStream=1]="EndOfStream"}(e.CancellationReason||(e.CancellationReason={}))}(vh)),vh}var _s={},hS;function cx(){if(hS)return _s;hS=1,Object.defineProperty(_s,"__esModule",{value:!0}),_s.PullAudioInputStreamCallback=void 0;let e=class{};return _s.PullAudioInputStreamCallback=e,_s}var Ps={},dS;function ux(){if(dS)return Ps;dS=1,Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.PushAudioOutputStreamCallback=void 0;let e=class{};return Ps.PushAudioOutputStreamCallback=e,Ps}var ws={},vS;function lx(){if(vS)return ws;vS=1,Object.defineProperty(ws,"__esModule",{value:!0}),ws.KeywordRecognitionModel=void 0;const e=Le();let t=class{constructor(){this.privDisposed=!1}static fromFile(s){throw e.Contracts.throwIfFileDoesNotExist(s,"fileName"),new Error("Not yet implemented.")}static fromStream(s){throw e.Contracts.throwIfNull(s,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}};return ws.KeywordRecognitionModel=t,ws}var Es={},fS;function px(){if(fS)return Es;fS=1,Object.defineProperty(Es,"__esModule",{value:!0}),Es.SessionEventArgs=void 0;let e=class{constructor(r){this.privSessionId=r}get sessionId(){return this.privSessionId}};return Es.SessionEventArgs=e,Es}var As={},gS;function hx(){if(gS)return As;gS=1,Object.defineProperty(As,"__esModule",{value:!0}),As.RecognitionEventArgs=void 0;const e=le();let t=class extends e.SessionEventArgs{constructor(s,o){super(o),this.privOffset=s}get offset(){return this.privOffset}};return As.RecognitionEventArgs=t,As}var fh={},mS;function dx(){return mS||(mS=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.OutputFormat=void 0,function(t){t[t.Simple=0]="Simple",t[t.Detailed=1]="Detailed"}(e.OutputFormat||(e.OutputFormat={}))}(fh)),fh}var Ts={},SS;function vx(){if(SS)return Ts;SS=1,Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.IntentRecognitionEventArgs=void 0;const e=le();let t=class extends e.RecognitionEventArgs{constructor(s,o,a){super(o,a),this.privResult=s}get result(){return this.privResult}};return Ts.IntentRecognitionEventArgs=t,Ts}var Is={},$S;function fx(){if($S)return Is;$S=1,Object.defineProperty(Is,"__esModule",{value:!0}),Is.RecognitionResult=void 0;let e=class{constructor(r,s,o,a,c,i,u,l,h,v){this.privResultId=r,this.privReason=s,this.privText=o,this.privDuration=a,this.privOffset=c,this.privLanguage=i,this.privLanguageDetectionConfidence=u,this.privErrorDetails=l,this.privJson=h,this.privProperties=v}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}};return Is.RecognitionResult=e,Is}var Ds={},yS;function gx(){if(yS)return Ds;yS=1,Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.SpeechRecognitionResult=void 0;const e=le();let t=class extends e.RecognitionResult{constructor(s,o,a,c,i,u,l,h,v,f,d){super(s,o,a,c,i,u,l,v,f,d),this.privSpeakerId=h}get speakerId(){return this.privSpeakerId}};return Ds.SpeechRecognitionResult=t,Ds}var ks={},CS;function mx(){if(CS)return ks;CS=1,Object.defineProperty(ks,"__esModule",{value:!0}),ks.IntentRecognitionResult=void 0;const e=le();let t=class extends e.SpeechRecognitionResult{constructor(s,o,a,c,i,u,l,h,v,f,d){super(o,a,c,i,u,l,h,void 0,v,f,d),this.privIntentId=s}get intentId(){return this.privIntentId}};return ks.IntentRecognitionResult=t,ks}var hi={},bS;function Sx(){if(bS)return hi;bS=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.LanguageUnderstandingModelImpl=hi.LanguageUnderstandingModel=void 0;const e=Le();let t=class{constructor(){}static fromEndpoint(o){e.Contracts.throwIfNull(o,"uri"),e.Contracts.throwIfNullOrWhitespace(o.hostname,"uri");const a=new r,c=o.host.indexOf(".");if(c===-1)throw new Error("Could not determine region from endpoint");a.region=o.host.substr(0,c);const i=o.pathname.lastIndexOf("/")+1;if(i===-1)throw new Error("Could not determine appId from endpoint");if(a.appId=o.pathname.substr(i),a.subscriptionKey=o.searchParams.get("subscription-key"),a.subscriptionKey===void 0)throw new Error("Could not determine subscription key from endpoint");return a}static fromAppId(o){e.Contracts.throwIfNullOrWhitespace(o,"appId");const a=new r;return a.appId=o,a}static fromSubscription(o,a,c){e.Contracts.throwIfNullOrWhitespace(o,"subscriptionKey"),e.Contracts.throwIfNullOrWhitespace(a,"appId"),e.Contracts.throwIfNullOrWhitespace(c,"region");const i=new r;return i.appId=a,i.region=c,i.subscriptionKey=o,i}};hi.LanguageUnderstandingModel=t;class r extends t{}return hi.LanguageUnderstandingModelImpl=r,hi}var sn={},RS;function $x(){if(RS)return sn;RS=1,Object.defineProperty(sn,"__esModule",{value:!0}),sn.MeetingTranscriptionEventArgs=sn.ConversationTranscriptionEventArgs=sn.SpeechRecognitionEventArgs=void 0;const e=le();let t=class extends e.RecognitionEventArgs{constructor(a,c,i){super(c,i),this.privResult=a}get result(){return this.privResult}};sn.SpeechRecognitionEventArgs=t;class r extends e.RecognitionEventArgs{constructor(a,c,i){super(c,i),this.privResult=a}get result(){return this.privResult}}sn.ConversationTranscriptionEventArgs=r;class s extends t{}return sn.MeetingTranscriptionEventArgs=s,sn}var Ms={},Os={},_S;function yu(){if(_S)return Os;_S=1,Object.defineProperty(Os,"__esModule",{value:!0}),Os.CancellationEventArgsBase=void 0;const e=le();let t=class extends e.RecognitionEventArgs{constructor(s,o,a,c,i){super(c,i),this.privReason=s,this.privErrorDetails=o,this.privErrorCode=a}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return Os.CancellationEventArgsBase=t,Os}var PS;function yx(){if(PS)return Ms;PS=1,Object.defineProperty(Ms,"__esModule",{value:!0}),Ms.SpeechRecognitionCanceledEventArgs=void 0;const e=yu();let t=class extends e.CancellationEventArgsBase{};return Ms.SpeechRecognitionCanceledEventArgs=t,Ms}var js={},wS;function Cx(){if(wS)return js;wS=1,Object.defineProperty(js,"__esModule",{value:!0}),js.TranslationRecognitionEventArgs=void 0;const e=le();let t=class extends e.RecognitionEventArgs{constructor(s,o,a){super(o,a),this.privResult=s}get result(){return this.privResult}};return js.TranslationRecognitionEventArgs=t,js}var zs={},ES;function bx(){if(ES)return zs;ES=1,Object.defineProperty(zs,"__esModule",{value:!0}),zs.TranslationSynthesisEventArgs=void 0;const e=le();let t=class extends e.SessionEventArgs{constructor(s,o){super(o),this.privResult=s}get result(){return this.privResult}};return zs.TranslationSynthesisEventArgs=t,zs}var xs={},AS;function A_(){if(AS)return xs;AS=1,Object.defineProperty(xs,"__esModule",{value:!0}),xs.TranslationRecognitionResult=void 0;const e=le();let t=class E_ extends e.SpeechRecognitionResult{constructor(s,o,a,c,i,u,l,h,v,f,d){super(o,a,c,i,u,l,h,void 0,v,f,d),this.privTranslations=s}static fromSpeechRecognitionResult(s){return new E_(void 0,s.resultId,s.reason,s.text,s.duration,s.offset,s.language,s.languageDetectionConfidence,s.errorDetails,s.json,s.properties)}get translations(){return this.privTranslations}};return xs.TranslationRecognitionResult=t,xs}var Ns={},TS;function Rx(){if(TS)return Ns;TS=1,Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.TranslationSynthesisResult=void 0;let e=class{constructor(r,s){this.privReason=r,this.privAudio=s}get audio(){return this.privAudio}get reason(){return this.privReason}};return Ns.TranslationSynthesisResult=e,Ns}var gh={},IS;function _x(){return IS||(IS=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ResultReason=void 0,function(t){t[t.NoMatch=0]="NoMatch",t[t.Canceled=1]="Canceled",t[t.RecognizingSpeech=2]="RecognizingSpeech",t[t.RecognizedSpeech=3]="RecognizedSpeech",t[t.RecognizedKeyword=4]="RecognizedKeyword",t[t.RecognizingIntent=5]="RecognizingIntent",t[t.RecognizedIntent=6]="RecognizedIntent",t[t.TranslatingSpeech=7]="TranslatingSpeech",t[t.TranslatedSpeech=8]="TranslatedSpeech",t[t.SynthesizingAudio=9]="SynthesizingAudio",t[t.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",t[t.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",t[t.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",t[t.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",t[t.RecognizedSpeakers=14]="RecognizedSpeakers",t[t.RecognizedSpeaker=15]="RecognizedSpeaker",t[t.ResetVoiceProfile=16]="ResetVoiceProfile",t[t.DeletedVoiceProfile=17]="DeletedVoiceProfile",t[t.VoicesListRetrieved=18]="VoicesListRetrieved",t[t.TranslatingParticipantSpeech=19]="TranslatingParticipantSpeech",t[t.TranslatedParticipantSpeech=20]="TranslatedParticipantSpeech",t[t.TranslatedInstantMessage=21]="TranslatedInstantMessage",t[t.TranslatedParticipantInstantMessage=22]="TranslatedParticipantInstantMessage"}(e.ResultReason||(e.ResultReason={}))}(gh)),gh}var di={},DS;function Px(){if(DS)return di;DS=1,Object.defineProperty(di,"__esModule",{value:!0}),di.SpeechConfigImpl=di.SpeechConfig=void 0;const e=Pe(),t=Le(),r=le();let s=class{constructor(){}static fromSubscription(c,i){t.Contracts.throwIfNullOrWhitespace(c,"subscriptionKey"),t.Contracts.throwIfNullOrWhitespace(i,"region");const u=new o;return u.setProperty(r.PropertyId.SpeechServiceConnection_Region,i),u.setProperty(r.PropertyId.SpeechServiceConnection_IntentRegion,i),u.setProperty(r.PropertyId.SpeechServiceConnection_Key,c),u}static fromEndpoint(c,i){t.Contracts.throwIfNull(c,"endpoint");const u=typeof i=="string"&&i.trim().length>0,l=typeof i=="object"&&i!==null&&typeof i.getToken=="function",h=typeof i=="object"&&i!==null&&typeof i.key=="string";if(i!==void 0&&!u&&!l&&!h)throw new Error("Invalid 'auth' parameter: expected a non-empty API key string, a TokenCredential, or a KeyCredential.");let v;return typeof i=="string"?(v=new o,v.setProperty(r.PropertyId.SpeechServiceConnection_Key,i)):typeof i=="object"&&typeof i.getToken=="function"?v=new o(i):typeof i=="object"&&typeof i.key=="string"?(v=new o,v.setProperty(r.PropertyId.SpeechServiceConnection_Key,i.key)):v=new o,v.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,c.href),v}static fromHost(c,i){t.Contracts.throwIfNull(c,"hostName");const u=new o;return u.setProperty(r.PropertyId.SpeechServiceConnection_Host,c.protocol+"//"+c.hostname+(c.port===""?"":":"+c.port)),u.setProperty(r.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),i!==void 0&&u.setProperty(r.PropertyId.SpeechServiceConnection_Key,i),u}static fromAuthorizationToken(c,i){t.Contracts.throwIfNull(c,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(i,"region");const u=new o;return u.setProperty(r.PropertyId.SpeechServiceConnection_Region,i),u.setProperty(r.PropertyId.SpeechServiceConnection_IntentRegion,i),u.authorizationToken=c,u}close(){}};di.SpeechConfig=s;class o extends s{constructor(c){super(),this.privProperties=new r.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=r.OutputFormat.Simple,this.privTokenCredential=c}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(c){this.privProperties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,c)}get speechRecognitionLanguage(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(c){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,c)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(c){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,c)}get outputFormat(){return r.OutputFormat[this.privProperties.getProperty(e.OutputFormatPropertyName,void 0)]}set outputFormat(c){this.privProperties.setProperty(e.OutputFormatPropertyName,r.OutputFormat[c])}get endpointId(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(c){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_EndpointId,c)}get tokenCredential(){return this.privTokenCredential}setProperty(c,i){t.Contracts.throwIfNull(i,"value"),this.privProperties.setProperty(c,i)}getProperty(c,i){return this.privProperties.getProperty(c,i)}setProxy(c,i,u,l){this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyHostName],c),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPort],i),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyUserName],u),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPassword],l)}setServiceProperty(c,i){const u=JSON.parse(this.privProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));u[c]=i,this.privProperties.setProperty(e.ServicePropertiesPropertyName,JSON.stringify(u))}setProfanity(c){this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_ProfanityOption,r.ProfanityOption[c])}enableAudioLogging(){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true"),this.privProperties.setProperty(e.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Detailed])}enableDictation(){this.privProperties.setProperty(e.ForceDictationPropertyName,"true")}clone(){const c=new o(this.tokenCredential);return c.privProperties=this.privProperties.clone(),c}get speechSynthesisLanguage(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(c){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage,c)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(c){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthVoice,c)}get speechSynthesisOutputFormat(){return r.SpeechSynthesisOutputFormat[this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(c){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,r.SpeechSynthesisOutputFormat[c])}}return di.SpeechConfigImpl=o,di}var vi={},kS;function wx(){if(kS)return vi;kS=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.SpeechTranslationConfigImpl=vi.SpeechTranslationConfig=void 0;const e=Pe(),t=Le(),r=le();let s=class extends r.SpeechConfig{constructor(){super()}static fromSubscription(c,i){t.Contracts.throwIfNullOrWhitespace(c,"subscriptionKey"),t.Contracts.throwIfNullOrWhitespace(i,"region");const u=new o;return u.properties.setProperty(r.PropertyId.SpeechServiceConnection_Key,c),u.properties.setProperty(r.PropertyId.SpeechServiceConnection_Region,i),u}static fromAuthorizationToken(c,i){t.Contracts.throwIfNullOrWhitespace(c,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(i,"region");const u=new o;return u.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,c),u.properties.setProperty(r.PropertyId.SpeechServiceConnection_Region,i),u}static fromHost(c,i){t.Contracts.throwIfNull(c,"hostName");const u=new o;return u.setProperty(r.PropertyId.SpeechServiceConnection_Host,c.protocol+"//"+c.hostname+(c.port===""?"":":"+c.port)),i!==void 0&&u.setProperty(r.PropertyId.SpeechServiceConnection_Key,i),u}static fromEndpoint(c,i){t.Contracts.throwIfNull(c,"endpoint");const u=typeof i=="string"&&i.trim().length>0,l=typeof i=="object"&&i!==null&&typeof i.getToken=="function",h=typeof i=="object"&&i!==null&&typeof i.key=="string";if(i!==void 0&&!u&&!l&&!h)throw new Error("Invalid 'auth' parameter: expected a non-empty API key string, a TokenCredential, or a KeyCredential.");let v;return typeof i=="string"?(v=new o,v.setProperty(r.PropertyId.SpeechServiceConnection_Key,i)):typeof i=="object"&&typeof i.getToken=="function"?v=new o(i):typeof i=="object"&&typeof i.key=="string"?(v=new o,v.setProperty(r.PropertyId.SpeechServiceConnection_Key,i.key)):v=new o,v.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,c.href),v}};vi.SpeechTranslationConfig=s;class o extends s{constructor(c){super(),this.privSpeechProperties=new r.PropertyCollection,this.outputFormat=r.OutputFormat.Simple,this.privTokenCredential=c}set authorizationToken(c){t.Contracts.throwIfNullOrWhitespace(c,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,c)}set speechRecognitionLanguage(c){t.Contracts.throwIfNullOrWhitespace(c,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,c)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return r.OutputFormat[this.privSpeechProperties.getProperty(e.OutputFormatPropertyName,void 0)]}set outputFormat(c){this.privSpeechProperties.setProperty(e.OutputFormatPropertyName,r.OutputFormat[c])}get endpointId(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(c){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_EndpointId,c)}addTargetLanguage(c){t.Contracts.throwIfNullOrWhitespace(c,"value");const i=this.targetLanguages;i.includes(c)||(i.push(c),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,i.join(",")))}get targetLanguages(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(c){t.Contracts.throwIfNullOrWhitespace(c,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,c)}get region(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_Region)}get tokenCredential(){return this.privTokenCredential}setProxy(c,i,u,l){this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyHostName],c),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPort],i),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyUserName],u),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPassword],l)}getProperty(c,i){return this.privSpeechProperties.getProperty(c,i)}setProperty(c,i){this.privSpeechProperties.setProperty(c,i)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(c,i){const u=JSON.parse(this.privSpeechProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));u[c]=i,this.privSpeechProperties.setProperty(e.ServicePropertiesPropertyName,JSON.stringify(u))}setProfanity(c){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceResponse_ProfanityOption,r.ProfanityOption[c])}enableAudioLogging(){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(e.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(c){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage,c)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(c){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthVoice,c)}get speechSynthesisOutputFormat(){return r.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(c){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,r.SpeechSynthesisOutputFormat[c])}}return vi.SpeechTranslationConfigImpl=o,vi}var qs={},MS;function I_(){if(MS)return qs;MS=1,Object.defineProperty(qs,"__esModule",{value:!0}),qs.PropertyCollection=void 0;const e=le();let t=class T_{constructor(){this.privKeys=[],this.privValues=[]}getProperty(s,o){let a;typeof s=="string"?a=s:a=e.PropertyId[s];for(let c=0;c<this.privKeys.length;c++)if(this.privKeys[c]===a)return this.privValues[c];if(o!==void 0)return String(o)}setProperty(s,o){let a;typeof s=="string"?a=s:a=e.PropertyId[s];for(let c=0;c<this.privKeys.length;c++)if(this.privKeys[c]===a){this.privValues[c]=o;return}this.privKeys.push(a),this.privValues.push(o)}clone(){const s=new T_;for(let o=0;o<this.privKeys.length;o++)s.privKeys.push(this.privKeys[o]),s.privValues.push(this.privValues[o]);return s}mergeTo(s){this.privKeys.forEach(o=>{if(s.getProperty(o,void 0)===void 0){const a=this.getProperty(o);s.setProperty(o,a)}})}get keys(){return this.privKeys}};return qs.PropertyCollection=t,qs}var mh={},OS;function cf(){return OS||(OS=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PropertyId=void 0,function(t){t[t.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",t[t.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",t[t.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",t[t.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",t[t.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",t[t.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",t[t.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",t[t.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",t[t.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",t[t.SpeechServiceConnection_TranslationCategoryId=9]="SpeechServiceConnection_TranslationCategoryId",t[t.SpeechServiceConnection_IntentRegion=10]="SpeechServiceConnection_IntentRegion",t[t.SpeechServiceConnection_ProxyHostName=11]="SpeechServiceConnection_ProxyHostName",t[t.SpeechServiceConnection_ProxyPort=12]="SpeechServiceConnection_ProxyPort",t[t.SpeechServiceConnection_ProxyUserName=13]="SpeechServiceConnection_ProxyUserName",t[t.SpeechServiceConnection_ProxyPassword=14]="SpeechServiceConnection_ProxyPassword",t[t.SpeechServiceConnection_RecoMode=15]="SpeechServiceConnection_RecoMode",t[t.SpeechServiceConnection_RecoLanguage=16]="SpeechServiceConnection_RecoLanguage",t[t.Speech_SessionId=17]="Speech_SessionId",t[t.SpeechServiceConnection_SynthLanguage=18]="SpeechServiceConnection_SynthLanguage",t[t.SpeechServiceConnection_SynthVoice=19]="SpeechServiceConnection_SynthVoice",t[t.SpeechServiceConnection_SynthOutputFormat=20]="SpeechServiceConnection_SynthOutputFormat",t[t.SpeechServiceConnection_AutoDetectSourceLanguages=21]="SpeechServiceConnection_AutoDetectSourceLanguages",t[t.SpeechServiceResponse_RequestDetailedResultTrueFalse=22]="SpeechServiceResponse_RequestDetailedResultTrueFalse",t[t.SpeechServiceResponse_RequestProfanityFilterTrueFalse=23]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",t[t.SpeechServiceResponse_JsonResult=24]="SpeechServiceResponse_JsonResult",t[t.SpeechServiceResponse_JsonErrorDetails=25]="SpeechServiceResponse_JsonErrorDetails",t[t.CancellationDetails_Reason=26]="CancellationDetails_Reason",t[t.CancellationDetails_ReasonText=27]="CancellationDetails_ReasonText",t[t.CancellationDetails_ReasonDetailedText=28]="CancellationDetails_ReasonDetailedText",t[t.LanguageUnderstandingServiceResponse_JsonResult=29]="LanguageUnderstandingServiceResponse_JsonResult",t[t.SpeechServiceConnection_Url=30]="SpeechServiceConnection_Url",t[t.SpeechServiceConnection_InitialSilenceTimeoutMs=31]="SpeechServiceConnection_InitialSilenceTimeoutMs",t[t.SpeechServiceConnection_EndSilenceTimeoutMs=32]="SpeechServiceConnection_EndSilenceTimeoutMs",t[t.Speech_SegmentationSilenceTimeoutMs=33]="Speech_SegmentationSilenceTimeoutMs",t[t.Speech_SegmentationMaximumTimeMs=34]="Speech_SegmentationMaximumTimeMs",t[t.Speech_SegmentationStrategy=35]="Speech_SegmentationStrategy",t[t.SpeechServiceConnection_EnableAudioLogging=36]="SpeechServiceConnection_EnableAudioLogging",t[t.SpeechServiceConnection_LanguageIdMode=37]="SpeechServiceConnection_LanguageIdMode",t[t.SpeechServiceConnection_RecognitionEndpointVersion=38]="SpeechServiceConnection_RecognitionEndpointVersion",t[t.SpeechServiceConnection_SpeakerIdMode=39]="SpeechServiceConnection_SpeakerIdMode",t[t.SpeechServiceResponse_ProfanityOption=40]="SpeechServiceResponse_ProfanityOption",t[t.SpeechServiceResponse_PostProcessingOption=41]="SpeechServiceResponse_PostProcessingOption",t[t.SpeechServiceResponse_RequestWordLevelTimestamps=42]="SpeechServiceResponse_RequestWordLevelTimestamps",t[t.SpeechServiceResponse_StablePartialResultThreshold=43]="SpeechServiceResponse_StablePartialResultThreshold",t[t.SpeechServiceResponse_OutputFormatOption=44]="SpeechServiceResponse_OutputFormatOption",t[t.SpeechServiceResponse_TranslationRequestStablePartialResult=45]="SpeechServiceResponse_TranslationRequestStablePartialResult",t[t.SpeechServiceResponse_RequestWordBoundary=46]="SpeechServiceResponse_RequestWordBoundary",t[t.SpeechServiceResponse_RequestPunctuationBoundary=47]="SpeechServiceResponse_RequestPunctuationBoundary",t[t.SpeechServiceResponse_RequestSentenceBoundary=48]="SpeechServiceResponse_RequestSentenceBoundary",t[t.SpeechServiceResponse_DiarizeIntermediateResults=49]="SpeechServiceResponse_DiarizeIntermediateResults",t[t.Conversation_ApplicationId=50]="Conversation_ApplicationId",t[t.Conversation_DialogType=51]="Conversation_DialogType",t[t.Conversation_Initial_Silence_Timeout=52]="Conversation_Initial_Silence_Timeout",t[t.Conversation_From_Id=53]="Conversation_From_Id",t[t.Conversation_Conversation_Id=54]="Conversation_Conversation_Id",t[t.Conversation_Custom_Voice_Deployment_Ids=55]="Conversation_Custom_Voice_Deployment_Ids",t[t.Conversation_Speech_Activity_Template=56]="Conversation_Speech_Activity_Template",t[t.Conversation_Request_Bot_Status_Messages=57]="Conversation_Request_Bot_Status_Messages",t[t.Conversation_Agent_Connection_Id=58]="Conversation_Agent_Connection_Id",t[t.SpeechServiceConnection_Host=59]="SpeechServiceConnection_Host",t[t.ConversationTranslator_Host=60]="ConversationTranslator_Host",t[t.ConversationTranslator_Name=61]="ConversationTranslator_Name",t[t.ConversationTranslator_CorrelationId=62]="ConversationTranslator_CorrelationId",t[t.ConversationTranslator_Token=63]="ConversationTranslator_Token",t[t.PronunciationAssessment_ReferenceText=64]="PronunciationAssessment_ReferenceText",t[t.PronunciationAssessment_GradingSystem=65]="PronunciationAssessment_GradingSystem",t[t.PronunciationAssessment_Granularity=66]="PronunciationAssessment_Granularity",t[t.PronunciationAssessment_EnableMiscue=67]="PronunciationAssessment_EnableMiscue",t[t.PronunciationAssessment_Json=68]="PronunciationAssessment_Json",t[t.PronunciationAssessment_Params=69]="PronunciationAssessment_Params",t[t.SpeakerRecognition_Api_Version=70]="SpeakerRecognition_Api_Version",t[t.WebWorkerLoadType=71]="WebWorkerLoadType",t[t.TalkingAvatarService_WebRTC_SDP=72]="TalkingAvatarService_WebRTC_SDP"}(e.PropertyId||(e.PropertyId={}))}(mh)),mh}var Ls={},jS;function Ex(){if(jS)return Ls;jS=1,Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.Recognizer=void 0;const e=Pe(),t=je(),r=Le(),s=le();let o=class D_{constructor(c,i,u,l){this.audioConfig=c!==void 0?c:s.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=i.clone(),this.privConnectionFactory=u,this.tokenCredential=l,this.implCommonRecognizerSetup()}close(c,i){r.Contracts.throwIfDisposed(this.privDisposed),(0,t.marshalPromiseToCallbacks)(this.dispose(!0),c,i)}get internalData(){return this.privReco}async dispose(c){this.privDisposed||(this.privDisposed=!0,c&&this.privReco&&(await this.privReco.audioSource.turnOff(),await this.privReco.dispose()))}static get telemetryEnabled(){return e.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(c){e.ServiceRecognizerBase.telemetryDataEnabled=c}implCommonRecognizerSetup(){let c=typeof window<"u"?"Browser":"Node",i="unknown",u="unknown";typeof navigator<"u"&&(c=c+"/"+navigator.platform,i=navigator.userAgent,u=navigator.appVersion);const l=this.createRecognizerConfig(new e.SpeechServiceConfig(new e.Context(new e.OS(c,i,u))));this.privReco=this.createServiceRecognizer(D_.getAuth(this.privProperties,this.tokenCredential),this.privConnectionFactory,this.audioConfig,l)}async recognizeOnceAsyncImpl(c){r.Contracts.throwIfDisposed(this.privDisposed);const i=new t.Deferred;await this.implRecognizerStop(),await this.privReco.recognize(c,i.resolve,i.reject);const u=await i.promise;return await this.implRecognizerStop(),u}async startContinuousRecognitionAsyncImpl(c){r.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop(),await this.privReco.recognize(c,void 0,void 0)}async stopContinuousRecognitionAsyncImpl(){r.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop()}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}static getAuth(c,i){const u=c.getProperty(s.PropertyId.SpeechServiceConnection_Key,void 0);return u&&u!==""?new e.CognitiveSubscriptionKeyAuthentication(u):i?new e.CognitiveTokenAuthentication(async()=>{try{const l=await i.getToken("https://cognitiveservices.azure.com/.default");return(l==null?void 0:l.token)??""}catch(l){throw l}},async()=>{try{const l=await i.getToken("https://cognitiveservices.azure.com/.default");return(l==null?void 0:l.token)??""}catch(l){throw l}}):new e.CognitiveTokenAuthentication(()=>{const l=c.getProperty(s.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(l)},()=>{const l=c.getProperty(s.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(l)})}};return Ls.Recognizer=o,Ls}var Bs={},Sh={},zS;function Pr(){return zS||(zS=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognitionMode=void 0,function(t){t.Interactive="Interactive",t.Dictation="Dictation",t.Conversation="Conversation",t.None="None"}(e.RecognitionMode||(e.RecognitionMode={}))}(Sh)),Sh}var xS;function Ax(){if(xS)return Bs;xS=1,Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.SpeechRecognizer=void 0;const e=Pe(),t=Pr(),r=je(),s=Le(),o=le();let a=class k_ extends o.Recognizer{constructor(i,u){const l=i;s.Contracts.throwIfNull(l,"speechConfig"),s.Contracts.throwIfNullOrWhitespace(l.properties.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage),o.PropertyId[o.PropertyId.SpeechServiceConnection_RecoLanguage]),super(u,l.properties,new e.SpeechConnectionFactory,i.tokenCredential),this.privDisposedRecognizer=!1}static FromConfig(i,u,l){const h=i;return u.properties.mergeTo(h.properties),new k_(i,l)}get endpointId(){return s.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(o.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(i){s.Contracts.throwIfNullOrWhitespace(i,"token"),this.properties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,i)}get speechRecognitionLanguage(){return s.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return s.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(e.OutputFormatPropertyName,o.OutputFormat[o.OutputFormat.Simple])===o.OutputFormat[o.OutputFormat.Simple]?o.OutputFormat.Simple:o.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(i,u){(0,r.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),i,u)}startContinuousRecognitionAsync(i,u){(0,r.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(this.properties.getProperty(e.ForceDictationPropertyName,void 0)===void 0?t.RecognitionMode.Conversation:t.RecognitionMode.Dictation),i,u)}stopContinuousRecognitionAsync(i,u){(0,r.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),i,u)}startKeywordRecognitionAsync(i,u,l){s.Contracts.throwIfNull(i,"model"),l&&l("Not yet implemented.")}stopKeywordRecognitionAsync(i){i&&i()}close(i,u){s.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,r.marshalPromiseToCallbacks)(this.dispose(!0),i,u)}async dispose(i){this.privDisposedRecognizer||(i&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(i))}createRecognizerConfig(i){return new e.RecognizerConfig(i,this.privProperties)}createServiceRecognizer(i,u,l,h){const v=l;return new e.SpeechServiceRecognizer(i,u,v,h,this)}};return Bs.SpeechRecognizer=a,Bs}var Fs={},NS;function Tx(){if(NS)return Fs;NS=1,Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.IntentRecognizer=void 0;const e=Pe(),t=Pr(),r=je(),s=Le(),o=le();let a=class extends o.Recognizer{constructor(i,u){s.Contracts.throwIfNullOrUndefined(i,"speechConfig");const l=i;s.Contracts.throwIfNullOrUndefined(l,"speechConfig"),super(u,l.properties,new e.IntentConnectionFactory),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=l.properties,s.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage),o.PropertyId[o.PropertyId.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return s.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty(o.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(i){this.properties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,i)}get properties(){return this.privProperties}recognizeOnceAsync(i,u){if(s.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const l=this.buildSpeechContext();this.privReco.speechContext.getContext().intent=l.Intent,this.privReco.dynamicGrammar.addReferenceGrammar(l.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}(0,r.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),i,u)}startContinuousRecognitionAsync(i,u){if(Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const l=this.buildSpeechContext();this.privReco.speechContext.getContext().intent=l.Intent,this.privReco.dynamicGrammar.addReferenceGrammar(l.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}(0,r.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),i,u)}stopContinuousRecognitionAsync(i,u){(0,r.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),i,u)}startKeywordRecognitionAsync(i,u,l){s.Contracts.throwIfNull(i,"model"),l&&l("Not yet implemented.")}stopKeywordRecognitionAsync(i,u){if(i)try{i()}catch(l){u&&u(l)}}addIntent(i,u){s.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),s.Contracts.throwIfNullOrWhitespace(u,"intentId"),s.Contracts.throwIfNullOrWhitespace(i,"simplePhrase"),this.privAddedIntents.push([u,i])}addIntentWithLanguageModel(i,u,l){s.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),s.Contracts.throwIfNullOrWhitespace(i,"intentId"),s.Contracts.throwIfNull(u,"model");const h=u;s.Contracts.throwIfNullOrWhitespace(h.appId,"model.appId"),this.privAddedLmIntents[i]=new e.AddedLmIntent(h,l)}addAllIntents(i,u){s.Contracts.throwIfNull(i,"model");const l=i;s.Contracts.throwIfNullOrWhitespace(l.appId,"model.appId"),this.privUmbrellaIntent=new e.AddedLmIntent(l,u)}close(i,u){s.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),(0,r.marshalPromiseToCallbacks)(this.dispose(!0),i,u)}createRecognizerConfig(i){return new e.RecognizerConfig(i,this.privProperties)}createServiceRecognizer(i,u,l,h){const v=l;return new e.IntentServiceRecognizer(i,u,v,h,this)}async dispose(i){this.privDisposedIntentRecognizer||i&&(this.privDisposedIntentRecognizer=!0,await super.dispose(i))}buildSpeechContext(){let i,u,l;const h=[];this.privUmbrellaIntent!==void 0&&(i=this.privUmbrellaIntent.modelImpl.appId,u=this.privUmbrellaIntent.modelImpl.region,l=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(const v of Object.keys(this.privAddedLmIntents)){const f=this.privAddedLmIntents[v];if(i===void 0)i=f.modelImpl.appId;else if(i!==f.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(u===void 0)u=f.modelImpl.region;else if(u!==f.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(l===void 0)l=f.modelImpl.subscriptionKey;else if(l!==f.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");const d="luis/"+i+"-PRODUCTION#"+v;h.push(d)}return{Intent:{id:i,key:l===void 0?this.privProperties.getProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_Key]):l,provider:"LUIS"},ReferenceGrammars:this.privUmbrellaIntent===void 0?h:["luis/"+i+"-PRODUCTION"]}}};return Fs.IntentRecognizer=a,Fs}var $h={},qS;function Ix(){return qS||(qS=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.VoiceProfileType=void 0,function(t){t[t.TextIndependentIdentification=0]="TextIndependentIdentification",t[t.TextDependentVerification=1]="TextDependentVerification",t[t.TextIndependentVerification=2]="TextIndependentVerification"}(e.VoiceProfileType||(e.VoiceProfileType={}))}($h)),$h}var Us={},Hs={},fi={},LS;function M_(){if(LS)return fi;LS=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.ConnectionMessageImpl=fi.ConnectionMessage=void 0;const e=nr(),t=je(),r=I_(),s=cf();let o=class{};fi.ConnectionMessage=o;class a{constructor(i){this.privConnectionMessage=i,this.privProperties=new r.PropertyCollection,this.privConnectionMessage.headers[e.HeaderNames.ConnectionId]&&this.privProperties.setProperty(s.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[e.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(u=>{this.privProperties.setProperty(u,this.privConnectionMessage.headers[u])})}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(i=>i.toLowerCase()==="path".toLowerCase())]}get isTextMessage(){return this.privConnectionMessage.messageType===t.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===t.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}}return fi.ConnectionMessageImpl=a,fi}var BS;function O_(){if(BS)return Hs;BS=1,Object.defineProperty(Hs,"__esModule",{value:!0}),Hs.Connection=void 0;const e=Pe(),t=je(),r=M_(),s=Le(),o=le();let a=class Wd{static fromRecognizer(i){const u=i.internalData,l=new Wd;return l.privInternalData=u,l.setupEvents(),l}static fromSynthesizer(i){const u=i.internalData,l=new Wd;return l.privInternalData=u,l.setupEvents(),l}openConnection(i,u){(0,t.marshalPromiseToCallbacks)(this.privInternalData.connect(),i,u)}closeConnection(i,u){if(this.privInternalData instanceof e.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");(0,t.marshalPromiseToCallbacks)(this.privInternalData.disconnect(),i,u)}setMessageProperty(i,u,l){if(s.Contracts.throwIfNullOrWhitespace(u,"propertyName"),this.privInternalData instanceof e.ServiceRecognizerBase){if(i.toLowerCase()!=="speech.context")throw new Error("Only speech.context message property sets are currently supported for recognizer");{const h=this.privInternalData.speechContext.getContext();h[u]=l}}else if(this.privInternalData instanceof e.SynthesisAdapterBase){if(i.toLowerCase()!=="speech.config"&&i.toLowerCase()!=="synthesis.context")throw new Error("Only speech.config and synthesis.context message paths are currently supported for synthesizer");if(i.toLowerCase()==="speech.config"){if(u.toLowerCase()!=="context")throw new Error("Only context property is currently supported for speech.config message path for synthesizer");this.privInternalData.synthesizerConfig.setContextFromJson(l)}else this.privInternalData.synthesisContext.setSection(u,l)}}sendMessageAsync(i,u,l,h){(0,t.marshalPromiseToCallbacks)(this.privInternalData.sendNetworkMessage(i,u),l,h)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach(i=>{i.name==="ConnectionEstablishedEvent"?this.connected&&this.connected(new o.ConnectionEventArgs(i.connectionId)):i.name==="ConnectionClosedEvent"?this.disconnected&&this.disconnected(new o.ConnectionEventArgs(i.connectionId)):i.name==="ConnectionMessageSentEvent"?this.messageSent&&this.messageSent(new o.ConnectionMessageEventArgs(new r.ConnectionMessageImpl(i.message))):i.name==="ConnectionMessageReceivedEvent"&&this.messageReceived&&this.messageReceived(new o.ConnectionMessageEventArgs(new r.ConnectionMessageImpl(i.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(i=>{this.receivedServiceMessage&&this.receivedServiceMessage(new o.ServiceEventArgs(i.jsonString,i.name))})}};return Hs.Connection=a,Hs}var FS;function Dx(){if(FS)return Us;FS=1,Object.defineProperty(Us,"__esModule",{value:!0}),Us.TranslationRecognizer=void 0;const e=Pe(),t=Pr(),r=je(),s=O_(),o=Le(),a=le();let c=class j_ extends a.Recognizer{constructor(u,l,h){const v=u;o.Contracts.throwIfNull(v,"speechConfig"),super(l,v.properties,h||new e.TranslationConnectionFactory,u.tokenCredential),this.privDisposedTranslationRecognizer=!1,this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&o.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationVoice),a.PropertyId[a.PropertyId.SpeechServiceConnection_TranslationVoice]),o.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages),a.PropertyId[a.PropertyId.SpeechServiceConnection_TranslationToLanguages]),o.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage),a.PropertyId[a.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(u,l,h){const v=u;return l.properties.mergeTo(v.properties),l.properties.getProperty(a.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)===e.AutoDetectSourceLanguagesOpenRangeOptionName&&v.properties.setProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),new j_(u,h)}get speechRecognitionLanguage(){return o.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return o.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return o.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(a.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(u){this.properties.setProperty(a.PropertyId.SpeechServiceAuthorization_Token,u)}recognizeOnceAsync(u,l){o.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),(0,r.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),u,l)}startContinuousRecognitionAsync(u,l){(0,r.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),u,l)}stopContinuousRecognitionAsync(u,l){(0,r.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),u,l)}removeTargetLanguage(u){if(o.Contracts.throwIfNullOrUndefined(u,"language to be removed"),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0){const l=this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),h=l.indexOf(u);h>-1&&(l.splice(h,1),this.properties.setProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages,l.join(",")),this.updateLanguages(l))}}addTargetLanguage(u){o.Contracts.throwIfNullOrUndefined(u,"language to be added");let l=[];this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?(l=this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),l.includes(u)||(l.push(u),this.properties.setProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages,l.join(",")))):(this.properties.setProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages,u),l=[u]),this.updateLanguages(l)}close(u,l){o.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),(0,r.marshalPromiseToCallbacks)(this.dispose(!0),u,l)}onConnection(){}async dispose(u){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,u&&(await this.implRecognizerStop(),await super.dispose(u)))}createRecognizerConfig(u){return new e.RecognizerConfig(u,this.privProperties)}createServiceRecognizer(u,l,h,v){const f=h;return new e.TranslationServiceRecognizer(u,l,f,v,this)}updateLanguages(u){const l=s.Connection.fromRecognizer(this);l&&(l.setMessageProperty("speech.context","translationcontext",{to:u}),l.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:u})))}};return Us.TranslationRecognizer=c,Us}var Ws={},US;function kx(){if(US)return Ws;US=1,Object.defineProperty(Ws,"__esModule",{value:!0}),Ws.Translations=void 0;const e=le();let t=class{constructor(){this.privMap=new e.PropertyCollection}get languages(){return this.privMap.keys}get(s,o){return this.privMap.getProperty(s,o)}set(s,o){this.privMap.setProperty(s,o)}};return Ws.Translations=t,Ws}var yh={},HS;function Mx(){return HS||(HS=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.NoMatchReason=void 0,function(t){t[t.NotRecognized=0]="NotRecognized",t[t.InitialSilenceTimeout=1]="InitialSilenceTimeout",t[t.InitialBabbleTimeout=2]="InitialBabbleTimeout"}(e.NoMatchReason||(e.NoMatchReason={}))}(yh)),yh}var Vs={},WS;function Ox(){if(WS)return Vs;WS=1,Object.defineProperty(Vs,"__esModule",{value:!0}),Vs.NoMatchDetails=void 0;const e=Pe(),t=le();let r=class z_{constructor(o){this.privReason=o}static fromResult(o){const a=e.SimpleSpeechPhrase.fromJSON(o.json,0);let c=t.NoMatchReason.NotRecognized;switch(a.RecognitionStatus){case e.RecognitionStatus.BabbleTimeout:c=t.NoMatchReason.InitialBabbleTimeout;break;case e.RecognitionStatus.InitialSilenceTimeout:c=t.NoMatchReason.InitialSilenceTimeout;break;default:c=t.NoMatchReason.NotRecognized;break}return new z_(c)}get reason(){return this.privReason}};return Vs.NoMatchDetails=r,Vs}var Gs={},VS;function jx(){if(VS)return Gs;VS=1,Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.TranslationRecognitionCanceledEventArgs=void 0;let e=class{constructor(r,s,o,a,c){this.privCancelReason=s,this.privErrorDetails=o,this.privResult=c,this.privSessionId=r,this.privErrorCode=a}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return Gs.TranslationRecognitionCanceledEventArgs=e,Gs}var Js={},GS;function zx(){if(GS)return Js;GS=1,Object.defineProperty(Js,"__esModule",{value:!0}),Js.IntentRecognitionCanceledEventArgs=void 0;const e=le();let t=class extends e.IntentRecognitionEventArgs{constructor(s,o,a,c,i,u){super(c,i,u),this.privReason=s,this.privErrorDetails=o,this.privErrorCode=a}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return Js.IntentRecognitionCanceledEventArgs=t,Js}var Ks={},JS;function x_(){if(JS)return Ks;JS=1,Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.CancellationDetailsBase=void 0;let e=class{constructor(r,s,o){this.privReason=r,this.privErrorDetails=s,this.privErrorCode=o}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}};return Ks.CancellationDetailsBase=e,Ks}var Zs={},KS;function xx(){if(KS)return Zs;KS=1,Object.defineProperty(Zs,"__esModule",{value:!0}),Zs.CancellationDetails=void 0;const e=Pe(),t=x_(),r=le();let s=class N_ extends t.CancellationDetailsBase{constructor(a,c,i){super(a,c,i)}static fromResult(a){let c=r.CancellationReason.Error,i=r.CancellationErrorCode.NoError;if(a instanceof r.RecognitionResult&&a.json){const u=e.SimpleSpeechPhrase.fromJSON(a.json,0);c=e.EnumTranslation.implTranslateCancelResult(u.RecognitionStatus)}return a.properties&&(i=r.CancellationErrorCode[a.properties.getProperty(e.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new N_(c,a.errorDetails||e.EnumTranslation.implTranslateErrorDetails(i),i)}};return Zs.CancellationDetails=s,Zs}var Ch={},ZS;function Nx(){return ZS||(ZS=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationErrorCode=void 0,function(t){t[t.NoError=0]="NoError",t[t.AuthenticationFailure=1]="AuthenticationFailure",t[t.BadRequestParameters=2]="BadRequestParameters",t[t.TooManyRequests=3]="TooManyRequests",t[t.ConnectionFailure=4]="ConnectionFailure",t[t.ServiceTimeout=5]="ServiceTimeout",t[t.ServiceError=6]="ServiceError",t[t.RuntimeError=7]="RuntimeError",t[t.Forbidden=8]="Forbidden"}(e.CancellationErrorCode||(e.CancellationErrorCode={}))}(Ch)),Ch}var Qs={},QS;function qx(){if(QS)return Qs;QS=1,Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.ConnectionEventArgs=void 0;const e=le();let t=class extends e.SessionEventArgs{};return Qs.ConnectionEventArgs=t,Qs}var Ys={},YS;function Lx(){if(YS)return Ys;YS=1,Object.defineProperty(Ys,"__esModule",{value:!0}),Ys.ServiceEventArgs=void 0;const e=le();let t=class extends e.SessionEventArgs{constructor(s,o,a){super(a),this.privJsonResult=s,this.privEventName=o}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}};return Ys.ServiceEventArgs=t,Ys}var Xs={},XS;function Bx(){if(XS)return Xs;XS=1,Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.PhraseListGrammar=void 0;const e=Le();let t=class q_{constructor(s){this.privGrammerBuilder=s.dynamicGrammar}static fromRecognizer(s){const o=s.internalData;return new q_(o)}addPhrase(s){this.privGrammerBuilder.addPhrase(s)}addPhrases(s){this.privGrammerBuilder.addPhrase(s)}clear(){this.privGrammerBuilder.clearPhrases()}setWeight(s){e.Contracts.throwIfNumberOutOfRange(s,"weight",0,2),this.privGrammerBuilder.setWeight(s)}};return Xs.PhraseListGrammar=t,Xs}var gi={},e$;function uf(){if(e$)return gi;e$=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.DialogServiceConfigImpl=gi.DialogServiceConfig=void 0;const e=Le(),t=le();let r=class{constructor(){}set applicationId(a){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}};gi.DialogServiceConfig=r;class s extends r{constructor(){super(),this.privSpeechConfig=new t.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(a){e.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechConfig.speechRecognitionLanguage=a}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(a){this.privSpeechConfig.outputFormat=a}setProperty(a,c){this.privSpeechConfig.setProperty(a,c)}getProperty(a,c){return this.privSpeechConfig.getProperty(a)}setProxy(a,c,i,u){this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyHostName,a),this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyPort,`${c}`),i&&this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyUserName,i),u&&this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyPassword,u)}setServiceProperty(a,c,i){this.privSpeechConfig.setServiceProperty(a,c)}close(){}}return gi.DialogServiceConfigImpl=s,gi}var ea={},t$;function Fx(){if(t$)return ea;t$=1,Object.defineProperty(ea,"__esModule",{value:!0}),ea.BotFrameworkConfig=void 0;const e=Le(),t=uf(),r=le();let s=class extends t.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(a,c,i){e.Contracts.throwIfNullOrWhitespace(a,"subscription"),e.Contracts.throwIfNullOrWhitespace(c,"region");const u=new t.DialogServiceConfigImpl;return u.setProperty(r.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),u.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),u.setProperty(r.PropertyId.SpeechServiceConnection_Region,c),i&&u.setProperty(r.PropertyId.Conversation_ApplicationId,i),u}static fromAuthorizationToken(a,c,i){e.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(c,"region");const u=new t.DialogServiceConfigImpl;return u.setProperty(r.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),u.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a),u.setProperty(r.PropertyId.SpeechServiceConnection_Region,c),i&&u.setProperty(r.PropertyId.Conversation_ApplicationId,i),u}static fromHost(a,c,i){e.Contracts.throwIfNullOrUndefined(a,"host");const u=a instanceof URL?a:new URL(`wss://${a}.convai.speech.azure.us`);e.Contracts.throwIfNullOrUndefined(u,"resolvedHost");const l=new t.DialogServiceConfigImpl;return l.setProperty(r.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),l.setProperty(r.PropertyId.SpeechServiceConnection_Host,u.toString()),c!==void 0&&l.setProperty(r.PropertyId.SpeechServiceConnection_Key,c),l}static fromEndpoint(a,c){e.Contracts.throwIfNull(a,"endpoint");const i=new t.DialogServiceConfigImpl;return i.setProperty(r.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),i.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,a.toString()),c!==void 0&&i.setProperty(r.PropertyId.SpeechServiceConnection_Key,c),i}};return ea.BotFrameworkConfig=s,ea}var ta={},r$;function Ux(){if(r$)return ta;r$=1,Object.defineProperty(ta,"__esModule",{value:!0}),ta.CustomCommandsConfig=void 0;const e=Le(),t=uf(),r=le();let s=class extends t.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(a,c,i){e.Contracts.throwIfNullOrWhitespace(a,"applicationId"),e.Contracts.throwIfNullOrWhitespace(c,"subscription"),e.Contracts.throwIfNullOrWhitespace(i,"region");const u=new t.DialogServiceConfigImpl;return u.setProperty(r.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.CustomCommands),u.setProperty(r.PropertyId.Conversation_ApplicationId,a),u.setProperty(r.PropertyId.SpeechServiceConnection_Key,c),u.setProperty(r.PropertyId.SpeechServiceConnection_Region,i),u}static fromAuthorizationToken(a,c,i){e.Contracts.throwIfNullOrWhitespace(a,"applicationId"),e.Contracts.throwIfNullOrWhitespace(c,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(i,"region");const u=new t.DialogServiceConfigImpl;return u.setProperty(r.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.CustomCommands),u.setProperty(r.PropertyId.Conversation_ApplicationId,a),u.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,c),u.setProperty(r.PropertyId.SpeechServiceConnection_Region,i),u}set applicationId(a){e.Contracts.throwIfNullOrWhitespace(a,"value"),this.setProperty(r.PropertyId.Conversation_ApplicationId,a)}get applicationId(){return this.getProperty(r.PropertyId.Conversation_ApplicationId)}};return ta.CustomCommandsConfig=s,ta}var ra={},na={},ia={},oa={},n$;function Xn(){if(n$)return oa;n$=1,Object.defineProperty(oa,"__esModule",{value:!0}),oa.QueryParameterNames=void 0;let e=class{};return oa.QueryParameterNames=e,e.BotId="botid",e.CustomSpeechDeploymentId="cid",e.CustomVoiceDeploymentId="deploymentId",e.EnableAudioLogging="storeAudio",e.EnableLanguageId="lidEnabled",e.EnableWordLevelTimestamps="wordLevelTimestamps",e.EndSilenceTimeoutMs="endSilenceTimeoutMs",e.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs",e.SegmentationMaximumTimeMs="segmentationMaximumTimeMs",e.SegmentationStrategy="segmentationStrategy",e.Format="format",e.InitialSilenceTimeoutMs="initialSilenceTimeoutMs",e.Language="language",e.Profanity="profanity",e.RequestBotStatusMessages="enableBotMessageStatus",e.StableIntermediateThreshold="stableIntermediateThreshold",e.StableTranslation="stableTranslation",e.TestHooks="testhooks",e.Postprocessing="postprocessing",e.CtsMeetingId="meetingId",e.CtsDeviceId="deviceId",e.CtsIsParticipant="isParticipant",e.EnableAvatar="enableTalkingAvatar",oa}var i$;function Fr(){if(i$)return ia;i$=1,Object.defineProperty(ia,"__esModule",{value:!0}),ia.ConnectionFactoryBase=void 0;const e=Pe(),t=je(),r=le(),s=Xn();let o=class{static getHostSuffix(c){if(c){if(c.toLowerCase().startsWith("china"))return".azure.cn";if(c.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(c,i,u){new Map([[r.PropertyId.Speech_SegmentationSilenceTimeoutMs,s.QueryParameterNames.SegmentationSilenceTimeoutMs],[r.PropertyId.SpeechServiceConnection_EnableAudioLogging,s.QueryParameterNames.EnableAudioLogging],[r.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,s.QueryParameterNames.EndSilenceTimeoutMs],[r.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,s.QueryParameterNames.InitialSilenceTimeoutMs],[r.PropertyId.SpeechServiceResponse_PostProcessingOption,s.QueryParameterNames.Postprocessing],[r.PropertyId.SpeechServiceResponse_ProfanityOption,s.QueryParameterNames.Profanity],[r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,s.QueryParameterNames.EnableWordLevelTimestamps],[r.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,s.QueryParameterNames.StableIntermediateThreshold]]).forEach((v,f)=>{this.setUrlParameter(f,v,c,i,u)});const h=JSON.parse(c.parameters.getProperty(e.ServicePropertiesPropertyName,"{}"));Object.keys(h).forEach(v=>{i[v]=h[v]})}setUrlParameter(c,i,u,l,h){const v=u.parameters.getProperty(c,void 0);v&&(!h||h.search(i)===-1)&&(l[i]=v.toLocaleLowerCase())}static async getRedirectUrlFromEndpoint(c){const i=new URL(c);i.protocol="https:",i.port="443",i.searchParams.append("GenerateRedirectResponse","true");const l=i.toString();t.Events.instance.onEvent(new t.ConnectionRedirectEvent("",l,void 0,"ConnectionFactoryBase: redirectUrl request"));const h=await fetch(l);if(h.status!==200)return c;const v=await h.text();t.Events.instance.onEvent(new t.ConnectionRedirectEvent("",v,c,"ConnectionFactoryBase: redirectUrlString"));try{return new URL(v.trim()).toString()}catch{return c}}};return ia.ConnectionFactoryBase=o,ia}var o$;function Hx(){if(o$)return na;o$=1,Object.defineProperty(na,"__esModule",{value:!0}),na.DialogConnectionFactory=void 0;const e=Lt(),t=Pe(),r=le(),s=Fr(),o=Pe(),a=nr(),c=Xn();class i extends s.ConnectionFactoryBase{create(l,h,v){const f=l.parameters.getProperty(r.PropertyId.Conversation_ApplicationId,""),d=l.parameters.getProperty(r.PropertyId.Conversation_DialogType),y=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region),m=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),b=l.parameters.getProperty(r.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),S={};S[a.HeaderNames.ConnectionId]=v,S[c.QueryParameterNames.Format]=l.parameters.getProperty(t.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase(),S[c.QueryParameterNames.Language]=m,S[c.QueryParameterNames.RequestBotStatusMessages]=b,f&&(S[c.QueryParameterNames.BotId]=f,d===r.DialogServiceConfig.DialogTypes.CustomCommands&&(S[a.HeaderNames.CustomCommandsAppId]=f));const R=d===r.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",_=d===r.DialogServiceConfig.DialogTypes.CustomCommands?"v1":d===r.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",T={};h.token!=null&&h.token!==""&&(T[h.headerName]=h.token);let k=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,"");if(!k){const z=s.ConnectionFactoryBase.getHostSuffix(y),L=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,`wss://${y}.${i.BaseUrl}${z}`);k=`${L.endsWith("/")?L:L+"/"}${R}${i.ApiKey}/${_}`}this.setCommonUrlParams(l,S,k);const I=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new e.WebsocketConnection(k,S,T,new o.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(l),I,v))}}return na.DialogConnectionFactory=i,i.ApiKey="api",i.BaseUrl="convai.speech",na}var s$;function Wx(){if(s$)return ra;s$=1,Object.defineProperty(ra,"__esModule",{value:!0}),ra.DialogServiceConnector=void 0;const e=Hx(),t=Pe(),r=Pr(),s=je(),o=Le(),a=le(),c=cf();let i=class extends a.Recognizer{constructor(l,h){const v=l;o.Contracts.throwIfNull(l,"dialogConfig"),super(h,v.properties,new e.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=v.properties.clone();const f=this.buildAgentConfig();this.privReco.agentConfig.set(f)}connect(l,h){(0,s.marshalPromiseToCallbacks)(this.privReco.connect(),l,h)}disconnect(l,h){(0,s.marshalPromiseToCallbacks)(this.privReco.disconnect(),l,h)}get authorizationToken(){return this.properties.getProperty(c.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(l){o.Contracts.throwIfNullOrWhitespace(l,"token"),this.properties.setProperty(c.PropertyId.SpeechServiceAuthorization_Token,l)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(c.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(l){this.properties.setProperty(c.PropertyId.Conversation_Speech_Activity_Template,l)}listenOnceAsync(l,h){if(this.isTurnComplete){o.Contracts.throwIfDisposed(this.privIsDisposed);const f=(async()=>{await this.privReco.connect(),await this.implRecognizerStop(),this.isTurnComplete=!1;const d=new s.Deferred;await this.privReco.recognize(r.RecognitionMode.Conversation,d.resolve,d.reject);const y=await d.promise;return await this.implRecognizerStop(),y})();f.catch(()=>{this.dispose(!0).catch(()=>{})}),(0,s.marshalPromiseToCallbacks)(f.finally(()=>{this.isTurnComplete=!0}),l,h)}}sendActivityAsync(l,h,v){(0,s.marshalPromiseToCallbacks)(this.privReco.sendMessage(l),h,v)}close(l,h){o.Contracts.throwIfDisposed(this.privIsDisposed),(0,s.marshalPromiseToCallbacks)(this.dispose(!0),l,h)}async dispose(l){this.privIsDisposed||l&&(this.privIsDisposed=!0,await this.implRecognizerStop(),await super.dispose(l))}createRecognizerConfig(l){return new t.RecognizerConfig(l,this.privProperties)}createServiceRecognizer(l,h,v,f){const d=v;return new t.DialogServiceAdapter(l,h,d,f,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(c.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(c.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(c.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(c.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}};return ra.DialogServiceConnector=i,ra}var sa={},a$;function Vx(){if(a$)return sa;a$=1,Object.defineProperty(sa,"__esModule",{value:!0}),sa.ActivityReceivedEventArgs=void 0;let e=class{constructor(r,s){this.privActivity=r,this.privAudioStream=s}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}};return sa.ActivityReceivedEventArgs=e,sa}var aa={},ca={},c$;function Gx(){if(c$)return ca;c$=1,Object.defineProperty(ca,"__esModule",{value:!0}),ca.TurnStatusResponsePayload=void 0;class e{constructor(r){this.privMessageStatusResponse=JSON.parse(r)}static fromJSON(r){return new e(r)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}}return ca.TurnStatusResponsePayload=e,ca}var u$;function Jx(){if(u$)return aa;u$=1,Object.defineProperty(aa,"__esModule",{value:!0}),aa.TurnStatusReceivedEventArgs=void 0;const e=Gx();let t=class{constructor(s){this.privTurnStatus=e.TurnStatusResponsePayload.fromJSON(s)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}};return aa.TurnStatusReceivedEventArgs=t,aa}var bh={},l$;function Kx(){return l$||(l$=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ServicePropertyChannel=void 0,function(t){t[t.UriQueryParameter=0]="UriQueryParameter"}(e.ServicePropertyChannel||(e.ServicePropertyChannel={}))}(bh)),bh}var Rh={},p$;function Zx(){return p$||(p$=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ProfanityOption=void 0,function(t){t[t.Masked=0]="Masked",t[t.Removed=1]="Removed",t[t.Raw=2]="Raw"}(e.ProfanityOption||(e.ProfanityOption={}))}(Rh)),Rh}var ua={},h$;function Qx(){if(h$)return ua;h$=1,Object.defineProperty(ua,"__esModule",{value:!0}),ua.BaseAudioPlayer=void 0;const e=Xr(),t=le(),r=Hi();let s=class{constructor(a){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,a===void 0&&(a=t.AudioStreamFormat.getDefaultInputFormat()),this.init(a)}playAudioSample(a,c,i){try{this.ensureInitializedContext();const u=this.formatAudioData(a),l=new Float32Array(this.samples.length+u.length);l.set(this.samples,0),l.set(u,this.samples.length),this.samples=l,c&&c()}catch(u){i&&i(u)}}stopAudio(a,c){this.audioContext!==null&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(()=>{a&&a()},i=>{c&&c(i)}),this.audioContext=null)}init(a){this.audioFormat=a,this.samples=new Float32Array}ensureInitializedContext(){if(this.audioContext===null){this.createAudioContext();const a=200;this.autoUpdateBufferTimer=setInterval(()=>{this.updateAudioBuffer()},a)}}createAudioContext(){this.audioContext=r.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(a){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(a),128);case 16:return this.formatArrayBuffer(new Int16Array(a),32768);case 32:return this.formatArrayBuffer(new Int32Array(a),2147483648);default:throw new e.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(a,c){const i=new Float32Array(a.length);for(let u=0;u<a.length;u++)i[u]=a[u]/c;return i}updateAudioBuffer(){if(this.samples.length===0)return;const a=this.audioFormat.channels,c=this.audioContext.createBufferSource(),i=this.samples.length/a,u=this.audioContext.createBuffer(a,i,this.audioFormat.samplesPerSec);for(let l=0;l<a;l++){let h=l;const v=u.getChannelData(l);for(let f=0;f<this.samples.length;f++,h+=a)v[f]=this.samples[h]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),c.buffer=u,c.connect(this.gainNode),c.start(this.startTime),this.startTime+=u.duration,this.samples=new Float32Array}async playAudio(a){this.audioContext===null&&this.createAudioContext();const c=this.audioContext.createBufferSource(),i=this.audioContext.destination;await this.audioContext.decodeAudioData(a,u=>{c.buffer=u,c.connect(i),c.start(0)})}};return ua.BaseAudioPlayer=s,ua}var la={},d$;function Yx(){if(d$)return la;d$=1,Object.defineProperty(la,"__esModule",{value:!0}),la.ConnectionMessageEventArgs=void 0;let e=class{constructor(r){this.privConnectionMessage=r}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}};return la.ConnectionMessageEventArgs=e,la}var pa={},v$;function Xx(){if(v$)return pa;v$=1,Object.defineProperty(pa,"__esModule",{value:!0}),pa.VoiceProfile=void 0;let e=class{constructor(r,s){this.privId=r,this.privProfileType=s}get profileId(){return this.privId}get profileType(){return this.privProfileType}};return pa.VoiceProfile=e,pa}var mi={},f$;function e3(){if(f$)return mi;f$=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.VoiceProfileEnrollmentCancellationDetails=mi.VoiceProfileEnrollmentResult=void 0;const e=Pe(),t=le();let r=class Vd{constructor(a,c,i){this.privReason=a,this.privProperties=new t.PropertyCollection,this.privReason!==t.ResultReason.Canceled?c&&(this.privDetails=JSON.parse(c),this.privDetails.enrollmentStatus.toLowerCase()==="enrolling"&&(this.privReason=t.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=i,this.privProperties.setProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[t.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLength(){return this.privDetails.enrollmentsLength}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static FromIdentificationProfileList(a){const c=[];for(const i of a.value){const u=i.enrollmentStatus.toLowerCase()==="enrolling"?t.ResultReason.EnrollingVoiceProfile:i.enrollmentStatus.toLowerCase()==="enrolled"?t.ResultReason.EnrolledVoiceProfile:t.ResultReason.Canceled,l=new Vd(u,null,null);l.privDetails=this.getIdentificationDetails(i),c.push(l)}return c}static FromVerificationProfileList(a){const c=[];for(const i of a.value){const u=i.enrollmentStatus.toLowerCase()==="enrolling"?t.ResultReason.EnrollingVoiceProfile:i.enrollmentStatus.toLowerCase()==="enrolled"?t.ResultReason.EnrolledVoiceProfile:t.ResultReason.Canceled,l=new Vd(u,null,null);l.privDetails=this.getVerificationDetails(i),c.push(l)}return c}static getIdentificationDetails(a){return{audioLength:a.audioLength?parseFloat(a.audioLength):0,audioSpeechLength:a.audioSpeechLength?parseFloat(a.audioSpeechLength):0,enrollmentStatus:a.enrollmentStatus,enrollmentsCount:a.enrollmentsCount||0,enrollmentsLength:a.enrollmentsLength?parseFloat(a.enrollmentsLength):0,enrollmentsSpeechLength:a.enrollmentsSpeechLength?parseFloat(a.enrollmentsSpeechLength):0,profileId:a.profileId||a.identificationProfileId,remainingEnrollmentsSpeechLength:a.remainingEnrollmentsSpeechLength?parseFloat(a.remainingEnrollmentsSpeechLength):0}}static getVerificationDetails(a){return{audioLength:a.audioLength?parseFloat(a.audioLength):0,audioSpeechLength:a.audioSpeechLength?parseFloat(a.audioSpeechLength):0,enrollmentStatus:a.enrollmentStatus,enrollmentsCount:a.enrollmentsCount,enrollmentsLength:a.enrollmentsLength?parseFloat(a.enrollmentsLength):0,enrollmentsSpeechLength:a.enrollmentsSpeechLength?parseFloat(a.enrollmentsSpeechLength):0,profileId:a.profileId||a.verificationProfileId,remainingEnrollmentsCount:a.remainingEnrollments||a.remainingEnrollmentsCount,remainingEnrollmentsSpeechLength:a.remainingEnrollmentsSpeechLength?parseFloat(a.remainingEnrollmentsSpeechLength):0}}};mi.VoiceProfileEnrollmentResult=r;class s extends t.CancellationDetailsBase{constructor(a,c,i){super(a,c,i)}static fromResult(a){const c=t.CancellationReason.Error;let i=t.CancellationErrorCode.NoError;return a.properties&&(i=t.CancellationErrorCode[a.properties.getProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[t.CancellationErrorCode.NoError])]),new s(c,a.errorDetails,i)}}return mi.VoiceProfileEnrollmentCancellationDetails=s,mi}var Si={},g$;function t3(){if(g$)return Si;g$=1,Object.defineProperty(Si,"__esModule",{value:!0}),Si.VoiceProfileCancellationDetails=Si.VoiceProfileResult=void 0;const e=Pe(),t=Le(),r=le();let s=class{constructor(c,i){this.privReason=c,this.privProperties=new r.PropertyCollection,c===r.ResultReason.Canceled&&(t.Contracts.throwIfNullOrUndefined(i,"statusText"),this.privErrorDetails=i,this.privProperties.setProperty(e.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}};Si.VoiceProfileResult=s;class o extends r.CancellationDetailsBase{constructor(c,i,u){super(c,i,u)}static fromResult(c){const i=r.CancellationReason.Error;let u=r.CancellationErrorCode.NoError;return c.properties&&(u=r.CancellationErrorCode[c.properties.getProperty(e.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new o(i,c.errorDetails,u)}}return Si.VoiceProfileCancellationDetails=o,Si}var ha={},m$;function r3(){if(m$)return ha;m$=1,Object.defineProperty(ha,"__esModule",{value:!0}),ha.VoiceProfilePhraseResult=void 0;const e=Le(),t=le();let r=class extends t.VoiceProfileResult{constructor(o,a,c,i){super(o,a),this.privPhrases=[],e.Contracts.throwIfNullOrUndefined(i,"phrase array"),this.privType=c,i&&i[0]&&(this.privPhrases=i)}get phrases(){return this.privPhrases}get type(){return this.privType}};return ha.VoiceProfilePhraseResult=r,ha}var da={},S$;function n3(){if(S$)return da;S$=1,Object.defineProperty(da,"__esModule",{value:!0}),da.VoiceProfileClient=void 0;const e=Pe(),t=w_(),r=Le(),s=le();let o=class extends s.Recognizer{constructor(c){r.Contracts.throwIfNullOrUndefined(c,"speechConfig");const i=c;r.Contracts.throwIfNull(i,"speechConfig"),super(t.AudioConfig.fromStreamInput(s.AudioInputStream.createPushStream()),i.properties,new e.VoiceProfileConnectionFactory),this.privProperties=i.properties.clone(),this.privVoiceAdapter=this.privReco,this.privDisposedVoiceAdapter=!1}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(c){r.Contracts.throwIfNullOrWhitespace(c,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,c)}async createProfileAsync(c,i){const u=await this.privVoiceAdapter.createProfile(c,i);return new s.VoiceProfile(u[0],c)}async retrieveEnrollmentResultAsync(c){return this.privVoiceAdapter.retrieveEnrollmentResult(c)}async getAllProfilesAsync(c){return this.privVoiceAdapter.getAllProfiles(c)}async getActivationPhrasesAsync(c,i){return this.privVoiceAdapter.getActivationPhrases(c,i)}async enrollProfileAsync(c,i){const u=i;return r.Contracts.throwIfNullOrUndefined(u,"audioConfig"),this.audioConfig=i,this.privVoiceAdapter.SpeakerAudioSource=u,this.privVoiceAdapter.enrollProfile(c)}async deleteProfileAsync(c){return this.privVoiceAdapter.deleteProfile(c)}async resetProfileAsync(c){return this.privVoiceAdapter.resetProfile(c)}async close(){await this.dispose(!0)}createServiceRecognizer(c,i,u,l){const h=u;return new e.VoiceServiceRecognizer(c,i,h,l,this)}async dispose(c){this.privDisposedVoiceAdapter||(this.privDisposedVoiceAdapter=!0,c&&await super.dispose(c))}createRecognizerConfig(c){return new e.RecognizerConfig(c,this.properties)}getResult(c,i){return new s.VoiceProfileResult(c.ok?i:s.ResultReason.Canceled,c.statusText)}};return da.VoiceProfileClient=o,da}var va={},$$;function i3(){if($$)return va;$$=1,Object.defineProperty(va,"__esModule",{value:!0}),va.SpeakerRecognizer=void 0;const e=Pe(),t=Le(),r=le();let s=class extends r.Recognizer{constructor(a,c){t.Contracts.throwIfNullOrUndefined(a,"speechConfig");const i=a;t.Contracts.throwIfNullOrUndefined(i,"speechConfig"),super(c,i.properties,new e.SpeakerRecognitionConnectionFactory),this.privAudioConfigImpl=c,t.Contracts.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privDisposedSpeakerRecognizer=!1,this.privProperties=i.properties}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){t.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}get properties(){return this.privProperties}async recognizeOnceAsync(a){return t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),this.recognizeSpeakerOnceAsyncImpl(a)}async close(){t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.dispose(!0)}async recognizeSpeakerOnceAsyncImpl(a){t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.implRecognizerStop();const c=await this.privReco.recognizeSpeaker(a);return await this.implRecognizerStop(),c}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}createRecognizerConfig(a){return new e.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,c,i,u){const l=i;return new e.SpeakerServiceRecognizer(a,c,l,u,this)}async dispose(a){this.privDisposedSpeakerRecognizer||a&&(this.privDisposedSpeakerRecognizer=!0,await super.dispose(a))}};return va.SpeakerRecognizer=s,va}var fa={},y$;function o3(){if(y$)return fa;y$=1,Object.defineProperty(fa,"__esModule",{value:!0}),fa.SpeakerIdentificationModel=void 0;const e=Le(),t=le();let r=class L_{constructor(o){if(this.privVoiceProfiles=[],this.privProfileIds=[],e.Contracts.throwIfNullOrUndefined(o,"VoiceProfiles"),o.length===0)throw new Error("Empty Voice Profiles array");for(const a of o){if(a.profileType!==t.VoiceProfileType.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+a.profileId);this.privVoiceProfiles.push(a),this.privProfileIds.push(a.profileId)}}static fromProfiles(o){return new L_(o)}get voiceProfileIds(){return this.privProfileIds.join(",")}get profileIds(){return this.privProfileIds}get scenario(){return"TextIndependentIdentification"}};return fa.SpeakerIdentificationModel=r,fa}var ga={},C$;function s3(){if(C$)return ga;C$=1,Object.defineProperty(ga,"__esModule",{value:!0}),ga.SpeakerVerificationModel=void 0;const e=Le(),t=le();let r=class B_{constructor(o){if(e.Contracts.throwIfNullOrUndefined(o,"VoiceProfile"),o.profileType===t.VoiceProfileType.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=o}static fromProfile(o){return new B_(o)}get voiceProfile(){return this.privVoiceProfile}get profileIds(){return[this.voiceProfile.profileId]}get scenario(){return this.voiceProfile.profileType===t.VoiceProfileType.TextDependentVerification?"TextDependentVerification":"TextIndependentVerification"}};return ga.SpeakerVerificationModel=r,ga}var ma={},_h={},b$;function F_(){return b$||(b$=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LanguageIdMode=void 0,function(t){t[t.AtStart=0]="AtStart",t[t.Continuous=1]="Continuous"}(e.LanguageIdMode||(e.LanguageIdMode={}))}(_h)),_h}var R$;function a3(){if(R$)return ma;R$=1,Object.defineProperty(ma,"__esModule",{value:!0}),ma.AutoDetectSourceLanguageConfig=void 0;const e=Pe(),t=Le(),r=le(),s=F_();let o=class Qu{constructor(){this.privProperties=new r.PropertyCollection,this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=s.LanguageIdMode.AtStart}static fromOpenRange(){const c=new Qu;return c.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e.AutoDetectSourceLanguagesOpenRangeOptionName),c.properties.setProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),c}static fromLanguages(c){t.Contracts.throwIfArrayEmptyOrWhitespace(c,"languages");const i=new Qu;return i.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,c.join()),i}static fromSourceLanguageConfigs(c){if(c.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");const i=new Qu,u=[];return c.forEach(l=>{if(u.push(l.language),l.endpointId!==void 0&&l.endpointId!==""){const h=l.language+r.PropertyId.SpeechServiceConnection_EndpointId.toString();i.properties.setProperty(h,l.endpointId)}}),i.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,u.join()),i}get properties(){return this.privProperties}set mode(c){c===s.LanguageIdMode.Continuous?(this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=c}};return ma.AutoDetectSourceLanguageConfig=o,ma}var Sa={},_$;function c3(){if(_$)return Sa;_$=1,Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.AutoDetectSourceLanguageResult=void 0;const e=Le();let t=class Gd{constructor(s,o){e.Contracts.throwIfNullOrUndefined(s,"language"),e.Contracts.throwIfNullOrUndefined(o,"languageDetectionConfidence"),this.privLanguage=s,this.privLanguageDetectionConfidence=o}static fromResult(s){return new Gd(s.language,s.languageDetectionConfidence)}static fromConversationTranscriptionResult(s){return new Gd(s.language,s.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}};return Sa.AutoDetectSourceLanguageResult=t,Sa}var $a={},P$;function u3(){if(P$)return $a;P$=1,Object.defineProperty($a,"__esModule",{value:!0}),$a.SourceLanguageConfig=void 0;const e=Le();let t=class U_{constructor(s,o){e.Contracts.throwIfNullOrUndefined(s,"language"),this.privLanguage=s,this.privEndpointId=o}static fromLanguage(s,o){return new U_(s,o)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}};return $a.SourceLanguageConfig=t,$a}var Ph={},w$;function l3(){return w$||(w$=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SpeakerRecognitionCancellationDetails=e.SpeakerRecognitionResult=e.SpeakerRecognitionResultType=void 0;const t=Pe(),r=le();var s;(function(c){c[c.Verify=0]="Verify",c[c.Identify=1]="Identify"})(s=e.SpeakerRecognitionResultType||(e.SpeakerRecognitionResultType={}));class o{constructor(i,u=r.ResultReason.RecognizedSpeaker,l=r.CancellationErrorCode.NoError,h=""){this.privProperties=new r.PropertyCollection;const v=i.scenario==="TextIndependentIdentification"?s.Identify:s.Verify;this.privReason=u,this.privReason!==r.ResultReason.Canceled?v===s.Identify?(this.privProfileId=i.identificationResult.identifiedProfile.profileId,this.privScore=i.identificationResult.identifiedProfile.score,this.privReason=r.ResultReason.RecognizedSpeakers):(this.privScore=i.verificationResult.score,i.verificationResult.recognitionResult.toLowerCase()!=="accept"&&(this.privReason=r.ResultReason.NoMatch),i.verificationResult.profileId!==void 0&&i.verificationResult.profileId!==""&&(this.privProfileId=i.verificationResult.profileId)):(this.privErrorDetails=h,this.privProperties.setProperty(t.CancellationErrorCodePropertyName,r.CancellationErrorCode[l])),this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,JSON.stringify(i))}get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}}e.SpeakerRecognitionResult=o;class a extends r.CancellationDetailsBase{constructor(i,u,l){super(i,u,l)}static fromResult(i){const u=r.CancellationReason.Error;let l=r.CancellationErrorCode.NoError;return i.properties&&(l=r.CancellationErrorCode[i.properties.getProperty(t.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new a(u,i.errorDetails,l)}}e.SpeakerRecognitionCancellationDetails=a}(Ph)),Ph}var wh={},$i={},E$;function H_(){if(E$)return $i;E$=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.ConversationImpl=$i.Conversation=void 0;const e=Pe(),t=je(),r=Le(),s=le();let o=class{constructor(){}static createConversationAsync(i,u,l,h){r.Contracts.throwIfNullOrUndefined(i,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),r.Contracts.throwIfNullOrUndefined(i.region,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),!i.subscriptionKey&&!i.getProperty(s.PropertyId[s.PropertyId.SpeechServiceAuthorization_Token])&&r.Contracts.throwIfNullOrUndefined(i.subscriptionKey,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));let v,f,d;return typeof u=="string"?(v=new a(i,u),(0,t.marshalPromiseToCallbacks)((async()=>{})(),l,h)):(v=new a(i),f=u,d=l,v.createConversationAsync(()=>{f&&f()},y=>{d&&d(y)})),v}};$i.Conversation=o;class a extends o{constructor(i,u){if(super(),this.privErrors=e.ConversationConnectionConfig.restErrors,this.onConnected=v=>{var f;this.privIsConnected=!0;try{(f=this.privConversationTranslator)!=null&&f.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,v)}catch{}},this.onDisconnected=v=>{var f;try{(f=this.privConversationTranslator)!=null&&f.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,v)}catch{}finally{this.close(!1)}},this.onCanceled=(v,f)=>{var d;try{(d=this.privConversationTranslator)!=null&&d.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,f)}catch{}},this.onParticipantUpdateCommandReceived=(v,f)=>{try{const d=this.privParticipants.getParticipant(f.id);if(d!==void 0){switch(f.key){case e.ConversationTranslatorCommandTypes.changeNickname:d.displayName=f.value;break;case e.ConversationTranslatorCommandTypes.setUseTTS:d.isUsingTts=f.value;break;case e.ConversationTranslatorCommandTypes.setProfanityFiltering:d.profanity=f.value;break;case e.ConversationTranslatorCommandTypes.setMute:d.isMuted=f.value;break;case e.ConversationTranslatorCommandTypes.setTranslateToLanguages:d.translateToLanguages=f.value;break}this.privParticipants.addOrUpdateParticipant(d),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new s.ConversationParticipantsChangedEventArgs(s.ParticipantChangedReason.Updated,[this.toParticipant(d)],f.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(v,f)=>{try{this.privParticipants.participants.forEach(d=>d.isMuted=d.isHost?!1:f.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new s.ConversationParticipantsChangedEventArgs(s.ParticipantChangedReason.Updated,this.toParticipants(!1),f.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(v,f)=>{try{const d=this.privParticipants.addOrUpdateParticipant(f.participant);d!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new s.ConversationParticipantsChangedEventArgs(s.ParticipantChangedReason.JoinedConversation,[this.toParticipant(d)],f.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(v,f)=>{try{const d=this.privParticipants.getParticipant(f.participant.id);d!==void 0&&(this.privParticipants.deleteParticipant(f.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new s.ConversationParticipantsChangedEventArgs(s.ParticipantChangedReason.LeftConversation,[this.toParticipant(d)],f.sessionId)))}catch{}},this.onTranslationReceived=(v,f)=>{try{switch(f.command){case e.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new s.ConversationTranslationEventArgs(f.payload,void 0,f.sessionId));break;case e.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new s.ConversationTranslationEventArgs(f.payload,void 0,f.sessionId));break;case e.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new s.ConversationTranslationEventArgs(f.payload,void 0,f.sessionId));break}}catch{}},this.onParticipantsListReceived=(v,f)=>{var d;try{if(f.sessionToken!==void 0&&f.sessionToken!==null&&(this.privRoom.token=f.sessionToken),this.privParticipants.participants=[...f.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new s.ConversationParticipantsChangedEventArgs(s.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),f.sessionId)),this.me.isHost){const y=(d=this.privConversationTranslator)==null?void 0:d.properties.getProperty(s.PropertyId.ConversationTranslator_Name);y!==void 0&&y.length>0&&y!==this.me.displayName&&this.changeNicknameAsync(y)}}catch{}},this.onConversationExpiration=(v,f)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,f)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new s.PropertyCollection,this.privManager=new e.ConversationManager,i.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage])||i.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage],e.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=i.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage]),u)this.privConversationId=u;else{i.targetLanguages.length===0&&i.addTargetLanguage(this.privLanguage),i.getProperty(s.PropertyId[s.PropertyId.SpeechServiceResponse_ProfanityOption])||i.setProfanity(s.ProfanityOption.Masked);let f=i.getProperty(s.PropertyId[s.PropertyId.ConversationTranslator_Name]);f==null&&(f="Host"),r.Contracts.throwIfNullOrTooLong(f,"nickname",50),r.Contracts.throwIfNullOrTooShort(f,"nickname",2),i.setProperty(s.PropertyId[s.PropertyId.ConversationTranslator_Name],f)}this.privConfig=i;const h=i;r.Contracts.throwIfNull(h,"speechConfig"),this.privProperties=h.properties.clone(),this.privIsConnected=!1,this.privParticipants=new e.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var i,u;return(i=this.privParticipants.me)!=null&&i.isHost?!1:(u=this.privParticipants.me)==null?void 0:u.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){const i=this.conversationId,u=this.participants.map(v=>({id:v.id,preferredLanguage:v.preferredLanguage,voice:v.voice})),l={};for(const v of e.ConversationConnectionConfig.transcriptionEventKeys){const f=this.properties.getProperty(v,"");f!==""&&(l[v]=f)}return{id:i,participants:u,conversationProperties:l}}get canSend(){var i;return this.privIsConnected&&!((i=this.privParticipants.me)!=null&&i.isMuted)}get canSendAsHost(){var i;return this.privIsConnected&&((i=this.privParticipants.me)==null?void 0:i.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(i){r.Contracts.throwIfNullOrWhitespace(i,"authorizationToken"),this.privToken=i}set conversationTranslator(i){this.privConversationTranslator=i}onToken(i){this.privConversationTranslator.onToken(i)}createConversationAsync(i,u){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),u),this.privManager.createOrJoin(this.privProperties,void 0,l=>{l||this.handleError(new Error(this.privErrors.permissionDeniedConnect),u),this.privRoom=l,this.handleCallback(i,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}startConversationAsync(i,u){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),u),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=e.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(i,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}addParticipantAsync(i,u,l){r.Contracts.throwIfNullOrUndefined(i,"Participant"),(0,t.marshalPromiseToCallbacks)(this.addParticipantImplAsync(i),u,l)}joinConversationAsync(i,u,l,h,v){try{r.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","conversationId")),r.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,i,f=>{r.Contracts.throwIfNullOrUndefined(f,this.privErrors.permissionDeniedConnect),this.privRoom=f,this.privConfig.authorizationToken=f.cognitiveSpeechAuthToken,h&&h(f.cognitiveSpeechAuthToken)},f=>{this.handleError(f,v)})}catch(f){this.handleError(f,v)}}deleteConversationAsync(i,u){(0,t.marshalPromiseToCallbacks)(this.deleteConversationImplAsync(),i,u)}async deleteConversationImplAsync(){r.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),r.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endConversationAsync(i,u){(0,t.marshalPromiseToCallbacks)(this.endConversationImplAsync(),i,u)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(i,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(i,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}muteAllParticipantsAsync(i,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(i,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}muteParticipantAsync(i,u,l){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),!this.me.isHost&&this.me.id!==i&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),l),this.privParticipants.getParticipantIndex(i)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(i,!0),()=>{this.handleCallback(u,l)},v=>{this.handleError(v,l)})}catch(h){this.handleError(h,l)}}removeParticipantAsync(i,u,l){try{if(r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&i.hasOwnProperty("id"))(0,t.marshalPromiseToCallbacks)(this.removeParticipantImplAsync(i),u,l);else{r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),l);let h="";typeof i=="string"?h=i:i.hasOwnProperty("id")?h=i.id:i.hasOwnProperty("userId")&&(h=i.userId),r.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(f=>f.id===h)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(h),()=>{this.handleCallback(u,l)},f=>{this.handleError(f,l)})}}catch(h){this.handleError(h,l)}}unlockConversationAsync(i,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(i,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}unmuteAllParticipantsAsync(i,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(i,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}unmuteParticipantAsync(i,u,l){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),!this.me.isHost&&this.me.id!==i&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),l),this.privParticipants.getParticipantIndex(i)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(i,!1),()=>{this.handleCallback(u,l)},v=>{this.handleError(v,l)})}catch(h){this.handleError(h,l)}}sendTextMessageAsync(i,u,l){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","message")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),i.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(i),()=>{this.handleCallback(u,l)},h=>{this.handleError(h,l)})}catch(h){this.handleError(h,l)}}setTranslatedLanguagesAsync(i,u,l){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfArrayEmptyOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","languages")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(i),()=>{this.handleCallback(u,l)},h=>{this.handleError(h,l)})}catch(h){this.handleError(h,l)}}changeNicknameAsync(i,u,l){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(i),()=>{this.handleCallback(u,l)},h=>{this.handleError(h,l)})}catch(h){this.handleError(h,l)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(i){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await i.enforceAudioGating(),this.privTranscriberRecognizer=i,this.privTranscriberRecognizer.conversation=this}getKeepAlive(){const i=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:i,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(i){if(this.privParticipants.addOrUpdateParticipant(i)!==void 0&&this.privTranscriberRecognizer){const l=this.conversationInfo;return l.participants=[i],this.privTranscriberRecognizer.pushConversationEvent(l,"join")}}removeParticipantImplAsync(i){this.privParticipants.deleteParticipant(i.id);const u=this.conversationInfo;return u.participants=[i],this.privTranscriberRecognizer.pushConversationEvent(u,"leave")}async close(i){var u;try{this.privIsConnected=!1,await((u=this.privConversationRecognizer)==null?void 0:u.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(l){throw l}i&&this.dispose()}handleCallback(i,u){if(i){try{i()}catch(l){u&&u(l)}i=void 0}}handleError(i,u){if(u)if(i instanceof Error){const l=i;u(l.name+": "+l.message)}else u(i)}toParticipants(i){const u=this.privParticipants.participants.map(l=>this.toParticipant(l));return i?u:u.filter(l=>l.isHost===!1)}toParticipant(i){return new s.Participant(i.id,i.avatar,i.displayName,i.isHost,i.isMuted,i.isUsingTts,i.preferredLanguage,i.voice)}getMuteAllCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:i})}getMuteCommand(i,u){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(i,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMute,participantId:i,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:u})}getLockCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:i})}getEjectCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(i,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.ejectParticipant,participantId:i,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:i})}getChangeNicknameCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(i,"nickname"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.changeNickname,nickname:i,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:i})}getMessageCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),r.Contracts.throwIfNullOrWhitespace(i,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:i,type:e.ConversationTranslatorMessageTypes.instantMessage})}}return $i.ConversationImpl=a,$i}var ya={},A$;function p3(){if(A$)return ya;A$=1,Object.defineProperty(ya,"__esModule",{value:!0}),ya.ConversationCommon=void 0;let e=class{constructor(r){this.privAudioConfig=r}handleCallback(r,s){if(r){try{r()}catch(o){s&&s(o)}r=void 0}}handleError(r,s){if(s)if(r instanceof Error){const o=r;s(o.name+": "+o.message)}else s(r)}};return ya.ConversationCommon=e,ya}var Ca={},T$;function h3(){if(T$)return Ca;T$=1,Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.ConversationExpirationEventArgs=void 0;const e=le();let t=class extends e.SessionEventArgs{constructor(s,o){super(o),this.privExpirationTime=s}get expirationTime(){return this.privExpirationTime}};return Ca.ConversationExpirationEventArgs=t,Ca}var ba={},I$;function d3(){if(I$)return ba;I$=1,Object.defineProperty(ba,"__esModule",{value:!0}),ba.ConversationParticipantsChangedEventArgs=void 0;const e=le();let t=class extends e.SessionEventArgs{constructor(s,o,a){super(a),this.privReason=s,this.privParticipant=o}get reason(){return this.privReason}get participants(){return this.privParticipant}};return ba.ConversationParticipantsChangedEventArgs=t,ba}var Ra={},D$;function v3(){if(D$)return Ra;D$=1,Object.defineProperty(Ra,"__esModule",{value:!0}),Ra.ConversationTranslationCanceledEventArgs=void 0;const e=yu();let t=class extends e.CancellationEventArgsBase{};return Ra.ConversationTranslationCanceledEventArgs=t,Ra}var _a={},k$;function f3(){if(k$)return _a;k$=1,Object.defineProperty(_a,"__esModule",{value:!0}),_a.ConversationTranslationEventArgs=void 0;const e=le();let t=class extends e.RecognitionEventArgs{constructor(s,o,a){super(o,a),this.privResult=s}get result(){return this.privResult}};return _a.ConversationTranslationEventArgs=t,_a}var Pa={},M$;function g3(){if(M$)return Pa;M$=1,Object.defineProperty(Pa,"__esModule",{value:!0}),Pa.ConversationTranslationResult=void 0;const e=A_();let t=class extends e.TranslationRecognitionResult{constructor(s,o,a,c,i,u,l,h,v,f,d){super(o,c,i,u,l,h,void 0,void 0,v,f,d),this.privId=s,this.privOrigLang=a}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}};return Pa.ConversationTranslationResult=t,Pa}var Eh={},wa={},Ea={},O$;function W_(){if(O$)return Ea;O$=1,Object.defineProperty(Ea,"__esModule",{value:!0}),Ea.StringUtils=void 0;let e=class{static formatString(r,s){if(!r)return"";if(!s)return r;let o="",a="";const c=l=>{o+=l},i=l=>{a+=l};let u=c;for(let l=0;l<r.length;l++){const h=r[l],v=l+1<r.length?r[l+1]:"";switch(h){case"{":v==="{"?(u("{"),l++):u=i;break;case"}":v==="}"?(u("}"),l++):(s.hasOwnProperty(a)&&(o+=s[a]),u=c,a="");break;default:u(h);break}}return o}};return Ea.StringUtils=e,Ea}var j$;function m3(){if(j$)return wa;j$=1,Object.defineProperty(wa,"__esModule",{value:!0}),wa.ConversationTranslatorConnectionFactory=void 0;const e=Lt(),t=W_(),r=Le(),s=le(),o=nr(),a=Xn(),c=Fr(),i=Pe();let u=class V_ extends c.ConnectionFactoryBase{constructor(h){super(),r.Contracts.throwIfNullOrUndefined(h,"convGetter"),this.privConvGetter=h}create(h,v,f){const d=h.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase()==="TRUE",y=this.privConvGetter().room,m=y.cognitiveSpeechRegion||h.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Region,""),b={hostSuffix:c.ConnectionFactoryBase.getHostSuffix(m),path:V_.CTS_VIRT_MIC_PATH,region:encodeURIComponent(m)};b[a.QueryParameterNames.Language]=encodeURIComponent(h.parameters.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,"")),b[a.QueryParameterNames.CtsMeetingId]=encodeURIComponent(y.roomId),b[a.QueryParameterNames.CtsDeviceId]=encodeURIComponent(y.participantId),b[a.QueryParameterNames.CtsIsParticipant]=y.isHost?"":"&"+a.QueryParameterNames.CtsIsParticipant;let S="";const R={},_={};if(d){S=h.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint),S||(S="wss://"+h.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"),S=t.StringUtils.formatString(S,b);const k=new URL(S);k.searchParams.forEach((z,L)=>{R[L]=z}),new i.TranscriberConnectionFactory().setQueryParams(R,h,S),R[a.QueryParameterNames.CtsMeetingId]=b[a.QueryParameterNames.CtsMeetingId],R[a.QueryParameterNames.CtsDeviceId]=b[a.QueryParameterNames.CtsDeviceId],y.isHost||(R[a.QueryParameterNames.CtsIsParticipant]=""),a.QueryParameterNames.Format in R||(R[a.QueryParameterNames.Format]="simple"),k.searchParams.forEach((z,L)=>{k.searchParams.set(L,R[L]),delete R[L]}),S=k.toString()}else{const k=new i.TranslationConnectionFactory;S=k.getEndpointUrl(h,!0),S=t.StringUtils.formatString(S,b),k.setQueryParams(R,h,S)}_[o.HeaderNames.ConnectionId]=f,_[e.RestConfigBase.configParams.token]=y.token,v.token&&(_[v.headerName]=v.token);const T=h.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase()==="TRUE";return Promise.resolve(new e.WebsocketConnection(S,R,_,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(h),T,f))}};return wa.ConversationTranslatorConnectionFactory=u,u.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio",wa}var z$;function S3(){return z$||(z$=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConversationTranslator=e.SpeechState=void 0;const t=Pe(),r=m3(),s=je(),o=Le(),a=le(),c=H_(),i=lf();var u;(function(v){v[v.Inactive=0]="Inactive",v[v.Connecting=1]="Connecting",v[v.Connected=2]="Connected"})(u=e.SpeechState||(e.SpeechState={}));class l extends a.TranslationRecognizer{constructor(f,d,y,m){super(f,d,new r.ConversationTranslatorConnectionFactory(m)),this.privSpeechState=u.Inactive,y&&(this.privTranslator=y,this.sessionStarted=()=>{this.privSpeechState=u.Connected},this.sessionStopped=()=>{this.privSpeechState=u.Inactive},this.recognizing=(b,S)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,S)},this.recognized=async(b,S)=>{var R;(R=S.result)!=null&&R.errorDetails?(await this.cancelSpeech(),this.fireCancelEvent(S.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,S)},this.canceled=async()=>{if(this.privSpeechState!==u.Inactive)try{await this.cancelSpeech()}catch{this.privSpeechState=u.Inactive}})}get state(){return this.privSpeechState}set state(f){this.privSpeechState=f}set authentication(f){this.privReco.authentication=f}onConnection(){this.privSpeechState=u.Connected}async onCancelSpeech(){this.privSpeechState=u.Inactive,await this.cancelSpeech()}fireCancelEvent(f){try{if(this.privTranslator.canceled){const d=new i.ConversationTranslationCanceledEventArgs(a.CancellationReason.Error,f,a.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,d)}}catch{}}async cancelSpeech(){var f;try{this.stopContinuousRecognitionAsync(),await((f=this.privReco)==null?void 0:f.disconnect()),this.privSpeechState=u.Inactive}catch{}}}class h extends i.ConversationCommon{constructor(f){super(f),this.privErrors=t.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new a.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){var f;return(f=this.privConversation)==null?void 0:f.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer||this.privIsSpeaking||this.privCTRecognizer.state===u.Connected||this.privCTRecognizer.state===u.Connecting||this.privConversation.isMutedByHost)}onToken(f){this.privCTRecognizer.authentication=f}setServiceProperty(f,d){const y=JSON.parse(this.privProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));y[f]=d,this.privProperties.setProperty(t.ServicePropertiesPropertyName,JSON.stringify(y))}joinConversationAsync(f,d,y,m,b){try{if(typeof f=="string"){o.Contracts.throwIfNullOrUndefined(f,this.privErrors.invalidArgs.replace("{arg}","conversation id")),o.Contracts.throwIfNullOrWhitespace(d,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),b);let S=y;(S==null||S==="")&&(S=t.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=a.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(a.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(S),this.privSpeechTranslationConfig.setProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_RecoLanguage],S),this.privSpeechTranslationConfig.setProperty(a.PropertyId[a.PropertyId.ConversationTranslator_Name],d);const R=[a.PropertyId.SpeechServiceConnection_Host,a.PropertyId.ConversationTranslator_Host,a.PropertyId.SpeechServiceConnection_Endpoint,a.PropertyId.SpeechServiceConnection_ProxyHostName,a.PropertyId.SpeechServiceConnection_ProxyPassword,a.PropertyId.SpeechServiceConnection_ProxyPort,a.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(const T of R){const k=this.privProperties.getProperty(T);if(k){const I=typeof T=="string"?T:a.PropertyId[T];this.privSpeechTranslationConfig.setProperty(I,k)}}const _=JSON.parse(this.privProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));for(const T of Object.keys(_))this.privSpeechTranslationConfig.setServiceProperty(T,_[T],a.ServicePropertyChannel.UriQueryParameter);this.privConversation=new c.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(f,d,S,T=>{T||this.handleError(new Error(this.privErrors.permissionDeniedConnect),b),this.privSpeechTranslationConfig.authorizationToken=T,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync(()=>{this.handleCallback(m,b)},k=>{this.handleError(k,b)})},T=>{this.handleError(T,b)})}else typeof f=="object"?(o.Contracts.throwIfNullOrUndefined(f,this.privErrors.invalidArgs.replace("{arg}","conversation id")),o.Contracts.throwIfNullOrWhitespace(d,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(a.PropertyId.ConversationTranslator_Name,d),this.privConversation=f,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,o.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),o.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=f.config,this.handleCallback(y,m)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),m)}catch(S){this.handleError(S,typeof y=="string"?b:m)}}leaveConversationAsync(f,d){(0,s.marshalPromiseToCallbacks)((async()=>{await this.cancelSpeech(),await this.privConversation.endConversationImplAsync(),await this.privConversation.deleteConversationImplAsync(),this.dispose()})(),f,d)}sendTextMessageAsync(f,d,y){try{o.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),o.Contracts.throwIfNullOrWhitespace(f,this.privErrors.invalidArgs.replace("{arg}",f)),this.privConversation.sendTextMessageAsync(f,d,y)}catch(m){this.handleError(m,y)}}startTranscribingAsync(f,d){(0,s.marshalPromiseToCallbacks)((async()=>{try{o.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),o.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privCTRecognizer===void 0&&await this.connectTranslatorRecognizer(),o.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),await this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(y){throw this.privIsSpeaking=!1,await this.cancelSpeech(),y}})(),f,d)}stopTranscribingAsync(f,d){(0,s.marshalPromiseToCallbacks)((async()=>{try{if(!this.privIsSpeaking){await this.cancelSpeech();return}this.privIsSpeaking=!1,await new Promise((y,m)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(y,m)})}catch{await this.cancelSpeech()}})(),f,d)}isDisposed(){return this.privIsDisposed}dispose(f,d,y){(0,s.marshalPromiseToCallbacks)((async()=>{this.isDisposed&&!this.privIsSpeaking||(await this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)})(),d,y)}async cancelSpeech(){var f;try{this.privIsSpeaking=!1,await((f=this.privCTRecognizer)==null?void 0:f.onCancelSpeech()),this.privCTRecognizer=void 0}catch{}}async connectTranslatorRecognizer(){try{this.privAudioConfig===void 0&&(this.privAudioConfig=a.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_Key],"");const f=()=>this.privConversation;this.privCTRecognizer=new l(this.privSpeechTranslationConfig,this.privAudioConfig,this,f)}catch(f){throw await this.cancelSpeech(),f}}startContinuousRecognition(){return new Promise((f,d)=>{this.privCTRecognizer.startContinuousRecognitionAsync(f,d)})}}e.ConversationTranslator=h}(Eh)),Eh}var Aa={},x$;function $3(){if(x$)return Aa;x$=1,Object.defineProperty(Aa,"__esModule",{value:!0}),Aa.ConversationTranscriber=void 0;const e=Pe(),t=Pr(),r=je(),s=Le(),o=le();let a=class G_ extends o.Recognizer{constructor(i,u){const l=i;s.Contracts.throwIfNull(l,"speechConfig"),s.Contracts.throwIfNullOrWhitespace(l.properties.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage),o.PropertyId[o.PropertyId.SpeechServiceConnection_RecoLanguage]),super(u,l.properties,new e.ConversationTranscriberConnectionFactory,i.tokenCredential),this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(i,u,l){const h=i;return u.properties.mergeTo(h.properties),new G_(i,l)}get endpointId(){return s.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(o.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(i){s.Contracts.throwIfNullOrWhitespace(i,"token"),this.properties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,i)}get speechRecognitionLanguage(){return s.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return s.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(e.OutputFormatPropertyName,o.OutputFormat[o.OutputFormat.Simple])===o.OutputFormat[o.OutputFormat.Simple]?o.OutputFormat.Simple:o.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(i,u){(0,r.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),i,u)}stopTranscribingAsync(i,u){(0,r.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),i,u)}close(i,u){s.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,r.marshalPromiseToCallbacks)(this.dispose(!0),i,u)}async dispose(i){this.privDisposedRecognizer||(i&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(i))}createRecognizerConfig(i){return new e.RecognizerConfig(i,this.privProperties)}createServiceRecognizer(i,u,l,h){const v=l;return h.isSpeakerDiarizationEnabled=!0,new e.ConversationTranscriptionServiceRecognizer(i,u,v,h,this)}};return Aa.ConversationTranscriber=a,Aa}var yi={},N$;function y3(){if(N$)return yi;N$=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.Participant=yi.User=void 0;const e=le();class t{constructor(o){this.privUserId=o}get userId(){return this.privUserId}}yi.User=t;class r{constructor(o,a,c,i,u,l,h,v){this.privId=o,this.privAvatar=a,this.privDisplayName=c,this.privIsHost=i,this.privIsMuted=u,this.privIsUsingTts=l,this.privPreferredLanguage=h,this.privVoice=v,this.privProperties=new e.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(o,a,c){return new r(o,"",o,!1,!1,!1,a,c)}}return yi.Participant=r,yi}var Ah={},q$;function C3(){return q$||(q$=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ParticipantChangedReason=void 0,function(t){t[t.JoinedConversation=0]="JoinedConversation",t[t.LeftConversation=1]="LeftConversation",t[t.Updated=2]="Updated"}(e.ParticipantChangedReason||(e.ParticipantChangedReason={}))}(Ah)),Ah}var Ci={},L$;function b3(){if(L$)return Ci;L$=1,Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.MeetingImpl=Ci.Meeting=void 0;const e=Pe(),t=je(),r=Le(),s=le();let o=class{constructor(){}static createMeetingAsync(i,u,l,h){if(r.Contracts.throwIfNullOrUndefined(i,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),r.Contracts.throwIfNullOrUndefined(i.region,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),r.Contracts.throwIfNull(u,"meetingId"),u.length===0)throw new Error("meetingId cannot be empty");!i.subscriptionKey&&!i.getProperty(s.PropertyId[s.PropertyId.SpeechServiceAuthorization_Token])&&r.Contracts.throwIfNullOrUndefined(i.subscriptionKey,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));const v=new a(i,u);return(0,t.marshalPromiseToCallbacks)((async()=>{})(),l,h),v}};Ci.Meeting=o;class a extends o{constructor(i,u){super(),this.privErrors=e.ConversationConnectionConfig.restErrors,this.onConnected=v=>{var f;this.privIsConnected=!0;try{(f=this.privConversationTranslator)!=null&&f.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,v)}catch{}},this.onDisconnected=v=>{var f;try{(f=this.privConversationTranslator)!=null&&f.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,v)}catch{}finally{this.close(!1)}},this.onCanceled=(v,f)=>{var d;try{(d=this.privConversationTranslator)!=null&&d.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,f)}catch{}},this.onParticipantUpdateCommandReceived=(v,f)=>{try{const d=this.privParticipants.getParticipant(f.id);if(d!==void 0){switch(f.key){case e.ConversationTranslatorCommandTypes.changeNickname:d.displayName=f.value;break;case e.ConversationTranslatorCommandTypes.setUseTTS:d.isUsingTts=f.value;break;case e.ConversationTranslatorCommandTypes.setProfanityFiltering:d.profanity=f.value;break;case e.ConversationTranslatorCommandTypes.setMute:d.isMuted=f.value;break;case e.ConversationTranslatorCommandTypes.setTranslateToLanguages:d.translateToLanguages=f.value;break}this.privParticipants.addOrUpdateParticipant(d),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new s.ConversationParticipantsChangedEventArgs(s.ParticipantChangedReason.Updated,[this.toParticipant(d)],f.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(v,f)=>{try{this.privParticipants.participants.forEach(d=>d.isMuted=d.isHost?!1:f.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new s.ConversationParticipantsChangedEventArgs(s.ParticipantChangedReason.Updated,this.toParticipants(!1),f.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(v,f)=>{try{const d=this.privParticipants.addOrUpdateParticipant(f.participant);d!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new s.ConversationParticipantsChangedEventArgs(s.ParticipantChangedReason.JoinedConversation,[this.toParticipant(d)],f.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(v,f)=>{try{const d=this.privParticipants.getParticipant(f.participant.id);d!==void 0&&(this.privParticipants.deleteParticipant(f.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new s.ConversationParticipantsChangedEventArgs(s.ParticipantChangedReason.LeftConversation,[this.toParticipant(d)],f.sessionId)))}catch{}},this.onTranslationReceived=(v,f)=>{try{switch(f.command){case e.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new s.ConversationTranslationEventArgs(f.payload,void 0,f.sessionId));break;case e.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new s.ConversationTranslationEventArgs(f.payload,void 0,f.sessionId));break;case e.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new s.ConversationTranslationEventArgs(f.payload,void 0,f.sessionId));break}}catch{}},this.onParticipantsListReceived=(v,f)=>{var d;try{if(f.sessionToken!==void 0&&f.sessionToken!==null&&(this.privRoom.token=f.sessionToken),this.privParticipants.participants=[...f.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new s.ConversationParticipantsChangedEventArgs(s.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),f.sessionId)),this.me.isHost){const y=(d=this.privConversationTranslator)==null?void 0:d.properties.getProperty(s.PropertyId.ConversationTranslator_Name);y!==void 0&&y.length>0&&y!==this.me.displayName&&this.changeNicknameAsync(y)}}catch{}},this.onConversationExpiration=(v,f)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,f)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new s.PropertyCollection,this.privManager=new e.ConversationManager,i.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage])||i.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage],e.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=i.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=u,this.privConfig=i;const h=i;r.Contracts.throwIfNull(h,"speechConfig"),this.privProperties=h.properties.clone(),this.privIsConnected=!1,this.privParticipants=new e.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var i,u;return(i=this.privParticipants.me)!=null&&i.isHost?!1:(u=this.privParticipants.me)==null?void 0:u.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){const i=this.meetingId,u=this.participants.map(v=>({id:v.id,preferredLanguage:v.preferredLanguage,voice:v.voice})),l={};for(const v of e.ConversationConnectionConfig.transcriptionEventKeys){const f=this.properties.getProperty(v,"");f!==""&&(l[v]=f)}return{id:i,participants:u,meetingProperties:l}}get canSend(){var i;return this.privIsConnected&&!((i=this.privParticipants.me)!=null&&i.isMuted)}get canSendAsHost(){var i;return this.privIsConnected&&((i=this.privParticipants.me)==null?void 0:i.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(i){r.Contracts.throwIfNullOrWhitespace(i,"authorizationToken"),this.privToken=i}createMeetingAsync(i,u){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),u),this.privManager.createOrJoin(this.privProperties,void 0,l=>{l||this.handleError(new Error(this.privErrors.permissionDeniedConnect),u),this.privRoom=l,this.handleCallback(i,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}startMeetingAsync(i,u){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),u),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(i,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}addParticipantAsync(i,u,l){r.Contracts.throwIfNullOrUndefined(i,"Participant"),(0,t.marshalPromiseToCallbacks)(this.addParticipantImplAsync(i),u,l)}joinMeetingAsync(i,u,l,h,v){try{r.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","conversationId")),r.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,i,f=>{r.Contracts.throwIfNullOrUndefined(f,this.privErrors.permissionDeniedConnect),this.privRoom=f,this.privConfig.authorizationToken=f.cognitiveSpeechAuthToken,h&&h(f.cognitiveSpeechAuthToken)},f=>{this.handleError(f,v)})}catch(f){this.handleError(f,v)}}deleteMeetingAsync(i,u){(0,t.marshalPromiseToCallbacks)(this.deleteMeetingImplAsync(),i,u)}async deleteMeetingImplAsync(){r.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),r.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endMeetingAsync(i,u){(0,t.marshalPromiseToCallbacks)(this.endMeetingImplAsync(),i,u)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(i,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(i,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}muteAllParticipantsAsync(i,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(i,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}muteParticipantAsync(i,u,l){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),!this.me.isHost&&this.me.id!==i&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),l),this.privParticipants.getParticipantIndex(i)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(i,!0),()=>{this.handleCallback(u,l)},v=>{this.handleError(v,l)})}catch(h){this.handleError(h,l)}}removeParticipantAsync(i,u,l){try{if(r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&i.hasOwnProperty("id"))(0,t.marshalPromiseToCallbacks)(this.removeParticipantImplAsync(i),u,l);else{r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),l);let h="";typeof i=="string"?h=i:i.hasOwnProperty("id")?h=i.id:i.hasOwnProperty("userId")&&(h=i.userId),r.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(f=>f.id===h)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(h),()=>{this.handleCallback(u,l)},f=>{this.handleError(f,l)})}}catch(h){this.handleError(h,l)}}unlockMeetingAsync(i,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(i,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}unmuteAllParticipantsAsync(i,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(i,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}unmuteParticipantAsync(i,u,l){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),!this.me.isHost&&this.me.id!==i&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),l),this.privParticipants.getParticipantIndex(i)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(i,!1),()=>{this.handleCallback(u,l)},v=>{this.handleError(v,l)})}catch(h){this.handleError(h,l)}}sendTextMessageAsync(i,u,l){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","message")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),i.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(i),()=>{this.handleCallback(u,l)},h=>{this.handleError(h,l)})}catch(h){this.handleError(h,l)}}setTranslatedLanguagesAsync(i,u,l){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfArrayEmptyOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","languages")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(i),()=>{this.handleCallback(u,l)},h=>{this.handleError(h,l)})}catch(h){this.handleError(h,l)}}changeNicknameAsync(i,u,l){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(i),()=>{this.handleCallback(u,l)},h=>{this.handleError(h,l)})}catch(h){this.handleError(h,l)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(i){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await i.enforceAudioGating(),this.privTranscriberRecognizer=i,this.privTranscriberRecognizer.meeting=this}getKeepAlive(){const i=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:i,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(i){if(this.privParticipants.addOrUpdateParticipant(i)!==void 0&&this.privTranscriberRecognizer){const l=this.meetingInfo;return l.participants=[i],this.privTranscriberRecognizer.pushMeetingEvent(l,"join")}}removeParticipantImplAsync(i){this.privParticipants.deleteParticipant(i.id);const u=this.meetingInfo;return u.participants=[i],this.privTranscriberRecognizer.pushMeetingEvent(u,"leave")}async close(i){var u;try{this.privIsConnected=!1,await((u=this.privConversationRecognizer)==null?void 0:u.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(l){throw l}i&&this.dispose()}handleCallback(i,u){if(i){try{i()}catch(l){u&&u(l)}i=void 0}}handleError(i,u){if(u)if(i instanceof Error){const l=i;u(l.name+": "+l.message)}else u(i)}toParticipants(i){const u=this.privParticipants.participants.map(l=>this.toParticipant(l));return i?u:u.filter(l=>l.isHost===!1)}toParticipant(i){return new s.Participant(i.id,i.avatar,i.displayName,i.isHost,i.isMuted,i.isUsingTts,i.preferredLanguage,i.voice)}getMuteAllCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:i})}getMuteCommand(i,u){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(i,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMute,participantId:i,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:u})}getLockCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:i})}getEjectCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(i,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.ejectParticipant,participantId:i,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:i})}getChangeNicknameCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(i,"nickname"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.changeNickname,nickname:i,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:i})}getMessageCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),r.Contracts.throwIfNullOrWhitespace(i,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:i,type:e.ConversationTranslatorMessageTypes.instantMessage})}}return Ci.MeetingImpl=a,Ci}var Ta={},B$;function R3(){if(B$)return Ta;B$=1,Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.MeetingTranscriptionCanceledEventArgs=void 0;const e=yu();class t extends e.CancellationEventArgsBase{}return Ta.MeetingTranscriptionCanceledEventArgs=t,Ta}var Ia={},F$;function _3(){if(F$)return Ia;F$=1,Object.defineProperty(Ia,"__esModule",{value:!0}),Ia.MeetingTranscriber=void 0;const e=Pe(),t=je(),r=Le(),s=le(),o=lf();let a=class{constructor(i){this.privAudioConfig=i,this.privProperties=new s.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return s.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(i){r.Contracts.throwIfNullOrWhitespace(i,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,i)}joinMeetingAsync(i,u,l){const h=i;r.Contracts.throwIfNullOrUndefined(o.MeetingImpl,"Meeting"),this.privRecognizer=new e.TranscriberRecognizer(i.config,this.privAudioConfig),r.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),(0,t.marshalPromiseToCallbacks)(h.connectTranscriberRecognizer(this.privRecognizer),u,l)}startTranscribingAsync(i,u){this.privRecognizer.startContinuousRecognitionAsync(i,u)}stopTranscribingAsync(i,u){this.privRecognizer.stopContinuousRecognitionAsync(i,u)}leaveMeetingAsync(i,u){this.privRecognizer.disconnectCallbacks(),(0,t.marshalPromiseToCallbacks)((async()=>{})(),i,u)}close(i,u){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,t.marshalPromiseToCallbacks)(this.dispose(!0),i,u)}async dispose(i){this.privDisposedRecognizer||(this.privRecognizer&&(await this.privRecognizer.close(),this.privRecognizer=void 0),i&&(this.privDisposedRecognizer=!0))}};return Ia.MeetingTranscriber=a,Ia}var Da={},U$;function P3(){if(U$)return Da;U$=1,Object.defineProperty(Da,"__esModule",{value:!0}),Da.ConversationTranscriptionResult=void 0;const e=le();let t=class extends e.RecognitionResult{constructor(s,o,a,c,i,u,l,h,v,f,d){super(s,o,a,c,i,u,l,v,f,d),this.privSpeakerId=h}get speakerId(){return this.privSpeakerId}};return Da.ConversationTranscriptionResult=t,Da}var H$;function lf(){return H$||(H$=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConversationTranscriptionResult=e.MeetingTranscriber=e.MeetingTranscriptionCanceledEventArgs=e.MeetingImpl=e.Meeting=e.ParticipantChangedReason=e.User=e.Participant=e.ConversationTranscriber=e.ConversationTranslator=e.ConversationTranslationResult=e.ConversationTranslationEventArgs=e.ConversationTranslationCanceledEventArgs=e.ConversationParticipantsChangedEventArgs=e.ConversationExpirationEventArgs=e.ConversationCommon=e.ConversationImpl=e.Conversation=void 0;var t=H_();Object.defineProperty(e,"Conversation",{enumerable:!0,get:function(){return t.Conversation}}),Object.defineProperty(e,"ConversationImpl",{enumerable:!0,get:function(){return t.ConversationImpl}});var r=p3();Object.defineProperty(e,"ConversationCommon",{enumerable:!0,get:function(){return r.ConversationCommon}});var s=h3();Object.defineProperty(e,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return s.ConversationExpirationEventArgs}});var o=d3();Object.defineProperty(e,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return o.ConversationParticipantsChangedEventArgs}});var a=v3();Object.defineProperty(e,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return a.ConversationTranslationCanceledEventArgs}});var c=f3();Object.defineProperty(e,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return c.ConversationTranslationEventArgs}});var i=g3();Object.defineProperty(e,"ConversationTranslationResult",{enumerable:!0,get:function(){return i.ConversationTranslationResult}});var u=S3();Object.defineProperty(e,"ConversationTranslator",{enumerable:!0,get:function(){return u.ConversationTranslator}});var l=$3();Object.defineProperty(e,"ConversationTranscriber",{enumerable:!0,get:function(){return l.ConversationTranscriber}});var h=y3();Object.defineProperty(e,"Participant",{enumerable:!0,get:function(){return h.Participant}}),Object.defineProperty(e,"User",{enumerable:!0,get:function(){return h.User}});var v=C3();Object.defineProperty(e,"ParticipantChangedReason",{enumerable:!0,get:function(){return v.ParticipantChangedReason}});var f=b3();Object.defineProperty(e,"Meeting",{enumerable:!0,get:function(){return f.Meeting}}),Object.defineProperty(e,"MeetingImpl",{enumerable:!0,get:function(){return f.MeetingImpl}});var d=R3();Object.defineProperty(e,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return d.MeetingTranscriptionCanceledEventArgs}});var y=_3();Object.defineProperty(e,"MeetingTranscriber",{enumerable:!0,get:function(){return y.MeetingTranscriber}});var m=P3();Object.defineProperty(e,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return m.ConversationTranscriptionResult}})}(wh)),wh}var bi={},W$;function pf(){if(W$)return bi;W$=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.SynthesisRequest=bi.Synthesizer=void 0;const e=Pe(),t=je(),r=Le(),s=le();let o=class J_{constructor(i){const u=i;r.Contracts.throwIfNull(u,"speechConfig"),this.privProperties=u.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new t.Queue,this.tokenCredential=i.tokenCredential}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(i){r.Contracts.throwIfNullOrWhitespace(i,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,i)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(s.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===e.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(i){const u={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-AvaMultilingualNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"};let l=this.properties.getProperty(s.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),h=this.properties.getProperty(s.PropertyId.SpeechServiceConnection_SynthVoice,""),v=J_.XMLEncode(i);return this.autoDetectSourceLanguage?l="en-US":h=h||u[l],h&&(v=`<voice name='${h}'>${v}</voice>`),v=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${l}'>${v}</speak>`,v}async dispose(i){this.privDisposed||(i&&this.privAdapter&&await this.privAdapter.dispose(),this.privDisposed=!0)}async adapterSpeak(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const i=await this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(i.text,i.isSSML,i.requestId,i.cb,i.err,i.dataStream)}}createSynthesizerConfig(i){return new e.SynthesizerConfig(i,this.privProperties)}implCommonSynthesizeSetup(){let i=typeof window<"u"?"Browser":"Node",u="unknown",l="unknown";typeof navigator<"u"&&(i=i+"/"+navigator.platform,u=navigator.userAgent,l=navigator.appVersion);const h=this.createSynthesizerConfig(new e.SpeechServiceConfig(new e.Context(new e.OS(i,u,l)))),v=this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_Key,void 0),f=v&&v!==""?new e.CognitiveSubscriptionKeyAuthentication(v):this.tokenCredential?new e.CognitiveTokenAuthentication(async()=>{try{const d=await this.tokenCredential.getToken("https://cognitiveservices.azure.com/.default");return(d==null?void 0:d.token)??""}catch(d){throw d}},async()=>{try{const d=await this.tokenCredential.getToken("https://cognitiveservices.azure.com/.default");return(d==null?void 0:d.token)??""}catch(d){throw d}}):new e.CognitiveTokenAuthentication(()=>{const d=this.privProperties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(d)},()=>{const d=this.privProperties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(d)});this.privAdapter=this.createSynthesisAdapter(f,this.privConnectionFactory,h),this.privRestAdapter=this.createRestSynthesisAdapter(f,h)}static XMLEncode(i){return i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}};bi.Synthesizer=o;class a{constructor(i,u,l,h,v,f){this.requestId=i,this.text=u,this.isSSML=l,this.cb=h,this.err=v,this.dataStream=f}}return bi.SynthesisRequest=a,bi}var ka={},V$;function w3(){if(V$)return ka;V$=1,Object.defineProperty(ka,"__esModule",{value:!0}),ka.SpeechSynthesizer=void 0;const e=Pe(),t=je(),r=b_(),s=$u(),o=Po(),a=Le(),c=le(),i=pf();let u=class K_ extends c.Synthesizer{constructor(h,v){super(h),v!==null&&(v===void 0?this.audioConfig=typeof window>"u"?void 0:c.AudioConfig.fromDefaultSpeakerOutput():this.audioConfig=v),this.privConnectionFactory=new e.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(h,v,f){const d=h;return v.properties.mergeTo(d.properties),new K_(h,f)}speakTextAsync(h,v,f,d){this.speakImpl(h,!1,v,f,d)}speakSsmlAsync(h,v,f,d){this.speakImpl(h,!0,v,f,d)}async getVoicesAsync(h=""){return this.getVoices(h)}close(h,v){a.Contracts.throwIfDisposed(this.privDisposed),(0,t.marshalPromiseToCallbacks)(this.dispose(!0),h,v)}get internalData(){return this.privAdapter}createSynthesisAdapter(h,v,f){return new e.SpeechSynthesisAdapter(h,v,f,this,this.audioConfig)}createRestSynthesisAdapter(h,v){return new e.SynthesisRestAdapter(v,h)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=s.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(c.SpeechSynthesisOutputFormat[this.properties.getProperty(c.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(h,v,f,d,y){try{a.Contracts.throwIfDisposed(this.privDisposed);const m=(0,t.createNoDashGuid)();let b;y instanceof c.PushAudioOutputStreamCallback?b=new o.PushAudioOutputStreamImpl(y):y instanceof c.PullAudioOutputStream?b=y:y!==void 0?b=new r.AudioFileWriter(y):b=void 0,this.synthesisRequestQueue.enqueue(new i.SynthesisRequest(m,h,v,S=>{if(this.privSynthesizing=!1,f)try{f(S)}catch(R){d&&d(R)}f=void 0,this.adapterSpeak().catch(()=>{})},S=>{d&&d(S)},b)),this.adapterSpeak().catch(()=>{})}catch(m){if(d)if(m instanceof Error){const b=m;d(b.name+": "+b.message)}else d(m);this.dispose(!0).catch(()=>{})}}async getVoices(h){const v=(0,t.createNoDashGuid)(),f=await this.privRestAdapter.getVoicesList(v);if(f.ok&&Array.isArray(f.json)){let d=f.json;return h&&h.length>0&&(d=d.filter(y=>!!y.Locale&&y.Locale.toLowerCase()===h.toLowerCase())),new c.SynthesisVoicesResult(v,d,void 0)}else return new c.SynthesisVoicesResult(v,void 0,`Error: ${f.status}: ${f.statusText}`)}};return ka.SpeechSynthesizer=u,ka}var Ma={},G$;function E3(){if(G$)return Ma;G$=1,Object.defineProperty(Ma,"__esModule",{value:!0}),Ma.SynthesisResult=void 0;let e=class{constructor(r,s,o,a){this.privResultId=r,this.privReason=s,this.privErrorDetails=o,this.privProperties=a}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}};return Ma.SynthesisResult=e,Ma}var Oa={},J$;function A3(){if(J$)return Oa;J$=1,Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.SpeechSynthesisResult=void 0;const e=le();let t=class extends e.SynthesisResult{constructor(s,o,a,c,i,u){super(s,o,c,i),this.privAudioData=a,this.privAudioDuration=u}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}};return Oa.SpeechSynthesisResult=t,Oa}var ja={},K$;function T3(){if(K$)return ja;K$=1,Object.defineProperty(ja,"__esModule",{value:!0}),ja.SpeechSynthesisEventArgs=void 0;let e=class{constructor(r){this.privResult=r}get result(){return this.privResult}};return ja.SpeechSynthesisEventArgs=e,ja}var za={},Z$;function I3(){if(Z$)return za;Z$=1,Object.defineProperty(za,"__esModule",{value:!0}),za.SpeechSynthesisWordBoundaryEventArgs=void 0;let e=class{constructor(r,s,o,a,c,i){this.privAudioOffset=r,this.privDuration=s,this.privText=o,this.privWordLength=a,this.privTextOffset=c,this.privBoundaryType=i}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}};return za.SpeechSynthesisWordBoundaryEventArgs=e,za}var xa={},Q$;function D3(){if(Q$)return xa;Q$=1,Object.defineProperty(xa,"__esModule",{value:!0}),xa.SpeechSynthesisBookmarkEventArgs=void 0;let e=class{constructor(r,s){this.privAudioOffset=r,this.privText=s}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}};return xa.SpeechSynthesisBookmarkEventArgs=e,xa}var Na={},Y$;function k3(){if(Y$)return Na;Y$=1,Object.defineProperty(Na,"__esModule",{value:!0}),Na.SpeechSynthesisVisemeEventArgs=void 0;let e=class{constructor(r,s,o){this.privAudioOffset=r,this.privVisemeId=s,this.privAnimation=o}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}};return Na.SpeechSynthesisVisemeEventArgs=e,Na}var Th={},X$;function M3(){return X$||(X$=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SpeechSynthesisBoundaryType=void 0,function(t){t.Word="WordBoundary",t.Punctuation="PunctuationBoundary",t.Sentence="SentenceBoundary"}(e.SpeechSynthesisBoundaryType||(e.SpeechSynthesisBoundaryType={}))}(Th)),Th}var qa={},ey;function O3(){if(ey)return qa;ey=1,Object.defineProperty(qa,"__esModule",{value:!0}),qa.SynthesisVoicesResult=void 0;const e=le();let t=class extends e.SynthesisResult{constructor(s,o,a){if(Array.isArray(o)){super(s,e.ResultReason.VoicesListRetrieved,void 0,new e.PropertyCollection),this.privVoices=[];for(const c of o)this.privVoices.push(new e.VoiceInfo(c))}else super(s,e.ResultReason.Canceled,a||"Error information unavailable",new e.PropertyCollection)}get voices(){return this.privVoices}};return qa.SynthesisVoicesResult=t,qa}var Ih={},ty;function j3(){return ty||(ty=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.VoiceInfo=e.SynthesisVoiceType=e.SynthesisVoiceGender=void 0;var t;(function(c){c[c.Unknown=0]="Unknown",c[c.Female=1]="Female",c[c.Male=2]="Male",c[c.Neutral=3]="Neutral"})(t=e.SynthesisVoiceGender||(e.SynthesisVoiceGender={}));var r;(function(c){c[c.Unknown=0]="Unknown",c[c.OnlineNeural=1]="OnlineNeural",c[c.OnlineStandard=2]="OnlineStandard",c[c.OfflineNeural=3]="OfflineNeural",c[c.OfflineStandard=4]="OfflineStandard",c[c.OnlineNeuralHD=5]="OnlineNeuralHD"})(r=e.SynthesisVoiceType||(e.SynthesisVoiceType={}));const s={[t[t.Neutral]]:t.Neutral,[t[t.Male]]:t.Male,[t[t.Female]]:t.Female},o={Neural:r.OnlineNeural,NeuralHD:r.OnlineNeuralHD};class a{constructor(i){if(this.privStyleList=[],i){if(this.privName=i.Name,this.privLocale=i.Locale,this.privShortName=i.ShortName,this.privLocaleName=i.LocaleName,this.privDisplayName=i.DisplayName,this.privLocalName=i.LocalName,this.privVoiceType=o[i.VoiceType]||r.Unknown,this.privGender=s[i.Gender]||t.Unknown,i.StyleList&&Array.isArray(i.StyleList))for(const u of i.StyleList)this.privStyleList.push(u);this.privSampleRateHertz=i.SampleRateHertz,this.privStatus=i.Status,i.ExtendedPropertyMap&&(this.privExtendedPropertyMap=i.ExtendedPropertyMap),this.privWordsPerMinute=i.WordsPerMinute,Array.isArray(i.SecondaryLocaleList)&&(this.privSecondaryLocaleList=[...i.SecondaryLocaleList]),Array.isArray(i.RolePlayList)&&(this.privRolePlayList=[...i.RolePlayList]),i.VoiceTag&&(this.privVoiceTag=i.VoiceTag)}}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get sampleRateHertz(){return this.privSampleRateHertz}get status(){return this.privStatus}get extendedPropertyMap(){return this.privExtendedPropertyMap}get wordsPerMinute(){return this.privWordsPerMinute}get secondaryLocaleList(){return this.privSecondaryLocaleList}get rolePlayList(){return this.privRolePlayList}get voiceTag(){return this.privVoiceTag}}e.VoiceInfo=a}(Ih)),Ih}var La={},ry;function z3(){if(ry)return La;ry=1,Object.defineProperty(La,"__esModule",{value:!0}),La.SpeakerAudioDestination=void 0;const e=je(),t=Po(),r=Hi(),s=60*30,o={[r.AudioFormatTag.PCM]:"audio/wav",[r.AudioFormatTag.MuLaw]:"audio/x-wav",[r.AudioFormatTag.MP3]:"audio/mpeg",[r.AudioFormatTag.OGG_OPUS]:"audio/ogg",[r.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[r.AudioFormatTag.ALaw]:"audio/x-wav",[r.AudioFormatTag.FLAC]:"audio/flac",[r.AudioFormatTag.AMR_WB]:"audio/amr-wb",[r.AudioFormatTag.G722]:"audio/G722"};let a=class{constructor(i){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=i||(0,e.createNoDashGuid)(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(i,u,l){this.privAudioBuffer!==void 0?(this.privAudioBuffer.push(i),this.updateSourceBuffer().then(()=>{u&&u()},h=>{l&&l(h)})):this.privAudioOutputStream!==void 0&&(this.privAudioOutputStream.write(i),this.privBytesReceived+=i.byteLength)}close(i,u){if(this.privIsClosed=!0,this.privSourceBuffer!==void 0)this.handleSourceBufferUpdateEnd().then(()=>{i&&i()},l=>{u&&u(l)});else if(this.privAudioOutputStream!==void 0&&typeof window<"u")if((this.privFormat.formatTag===r.AudioFormatTag.PCM||this.privFormat.formatTag===r.AudioFormatTag.MuLaw||this.privFormat.formatTag===r.AudioFormatTag.ALaw)&&this.privFormat.hasHeader===!1)console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else{let l=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(l).then(()=>{l=this.privFormat.addHeader(l);const h=new Blob([l],{type:o[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(h),this.notifyPlayback().then(()=>{i&&i()},v=>{u&&u(v)})},h=>{u&&u(h)})}else this.onAudioEnd&&this.onAudioEnd(this)}set format(i){if(typeof AudioContext<"u"||typeof window<"u"&&typeof window.webkitAudioContext<"u"){this.privFormat=i;const u=o[this.privFormat.formatTag];u===void 0?console.warn(`Unknown mimeType for format ${r.AudioFormatTag[this.privFormat.formatTag]}; playback is not supported.`):typeof MediaSource<"u"&&MediaSource.isTypeSupported(u)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=s,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(u),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch(l=>{e.Events.instance.onEvent(new e.BackgroundEvent(l))})},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch(l=>{e.Events.instance.onEvent(new e.BackgroundEvent(l))})},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(l=>{e.Events.instance.onEvent(new e.BackgroundEvent(l))})):(console.warn(`Format ${r.AudioFormatTag[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new t.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){var i;return((i=this.privAudio)==null?void 0:i.volume)??-1}set volume(i){this.privAudio&&(this.privAudio.volume=i)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return this.privAudio!==void 0?this.privAudio.currentTime:-1}pause(){!this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.pause(),this.privIsPaused=!0)}resume(i,u){this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.play().then(()=>{i&&i()},l=>{u&&u(l)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}async updateSourceBuffer(){if(this.privAudioBuffer!==void 0&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const i=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(i)}catch{this.privAudioBuffer.unshift(i),console.log("buffer filled, pausing addition of binaries until space is made");return}await this.notifyPlayback()}else this.canEndStream()&&await this.handleSourceBufferUpdateEnd()}async handleSourceBufferUpdateEnd(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),await this.notifyPlayback())}async notifyPlayback(){!this.privPlaybackStarted&&this.privAudio!==void 0&&(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||await this.privAudio.play())}canEndStream(){return this.isClosed&&this.privSourceBuffer!==void 0&&this.privAudioBuffer.length===0&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&this.privMediaSource.readyState==="open"}sourceBufferAvailable(){return this.privSourceBuffer!==void 0&&!this.privSourceBuffer.updating}};return La.SpeakerAudioDestination=a,La}var Ba={},ny;function x3(){if(ny)return Ba;ny=1,Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.ConversationTranscriptionCanceledEventArgs=void 0;const e=yu();let t=class extends e.CancellationEventArgsBase{};return Ba.ConversationTranscriptionCanceledEventArgs=t,Ba}var Fa={},iy;function N3(){if(iy)return Fa;iy=1,Object.defineProperty(Fa,"__esModule",{value:!0}),Fa.MeetingTranscriptionCanceledEventArgs=void 0;const e=yu();let t=class extends e.CancellationEventArgsBase{};return Fa.MeetingTranscriptionCanceledEventArgs=t,Fa}var Dh={},oy;function q3(){return oy||(oy=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PronunciationAssessmentGradingSystem=void 0,function(t){t[t.FivePoint=1]="FivePoint",t[t.HundredMark=2]="HundredMark"}(e.PronunciationAssessmentGradingSystem||(e.PronunciationAssessmentGradingSystem={}))}(Dh)),Dh}var kh={},sy;function L3(){return sy||(sy=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PronunciationAssessmentGranularity=void 0,function(t){t[t.Phoneme=1]="Phoneme",t[t.Word=2]="Word",t[t.FullText=3]="FullText"}(e.PronunciationAssessmentGranularity||(e.PronunciationAssessmentGranularity={}))}(kh)),kh}var Ua={},ay;function B3(){if(ay)return Ua;ay=1,Object.defineProperty(Ua,"__esModule",{value:!0}),Ua.PronunciationAssessmentConfig=void 0;const e=Le(),t=le();let r=class Z_{constructor(o,a=t.PronunciationAssessmentGradingSystem.FivePoint,c=t.PronunciationAssessmentGranularity.Phoneme,i=!1){e.Contracts.throwIfNullOrUndefined(o,"referenceText"),this.privProperties=new t.PropertyCollection,this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_ReferenceText,o),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_GradingSystem,t.PronunciationAssessmentGradingSystem[a]),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_Granularity,t.PronunciationAssessmentGranularity[c]),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_EnableMiscue,String(i))}static fromJSON(o){e.Contracts.throwIfNullOrUndefined(o,"json");const a=new Z_("");return a.privProperties=new t.PropertyCollection,a.properties.setProperty(t.PropertyId.PronunciationAssessment_Json,o),a}toJSON(){return this.updateJson(),this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_Params)}applyTo(o){this.updateJson();const a=o.internalData;a.expectContentAssessmentResponse=!!this.privContentAssessmentTopic,a.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(t.PropertyId.PronunciationAssessment_Params),this.privContentAssessmentTopic,a.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(t.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(o){e.Contracts.throwIfNullOrWhitespace(o,"referenceText"),this.properties.setProperty(t.PropertyId.PronunciationAssessment_ReferenceText,o)}set phonemeAlphabet(o){e.Contracts.throwIfNullOrWhitespace(o,"phonemeAlphabet"),this.privPhonemeAlphabet=o}set enableMiscue(o){const a=o?"true":"false";this.properties.setProperty(t.PropertyId.PronunciationAssessment_EnableMiscue,a)}get enableMiscue(){return this.properties.getProperty(t.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()==="true"}set nbestPhonemeCount(o){this.privNBestPhonemeCount=o}set enableProsodyAssessment(o){this.privEnableProsodyAssessment=o}enableContentAssessmentWithTopic(o){this.privContentAssessmentTopic=o}get properties(){return this.privProperties}updateJson(){const o=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_Json,"{}"),a=JSON.parse(o),c=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_ReferenceText);c&&(a.referenceText=c);const i=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_GradingSystem);i&&(a.gradingSystem=i);const u=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_Granularity);u&&(a.granularity=u),this.privPhonemeAlphabet&&(a.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(a.nbestPhonemeCount=this.privNBestPhonemeCount),a.enableProsodyAssessment=this.privEnableProsodyAssessment,a.dimension="Comprehensive",this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_EnableMiscue)&&(a.enableMiscue=this.enableMiscue),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_Params,JSON.stringify(a))}};return Ua.PronunciationAssessmentConfig=r,Ua}var Ri={},cy;function F3(){if(cy)return Ri;cy=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.PronunciationAssessmentResult=Ri.ContentAssessmentResult=void 0;const e=Le(),t=le();class r{constructor(a){this.privPronJson=a}get grammarScore(){return this.privPronJson.ContentAssessment.GrammarScore}get vocabularyScore(){return this.privPronJson.ContentAssessment.VocabularyScore}get topicScore(){return this.privPronJson.ContentAssessment.TopicScore}}Ri.ContentAssessmentResult=r;let s=class Q_{constructor(a){const c=JSON.parse(a);e.Contracts.throwIfNullOrUndefined(c.NBest[0],"NBest"),this.privPronJson=c.NBest[0]}static fromResult(a){e.Contracts.throwIfNullOrUndefined(a,"result");const c=a.properties.getProperty(t.PropertyId.SpeechServiceResponse_JsonResult);return e.Contracts.throwIfNullOrUndefined(c,"json"),new Q_(c)}get detailResult(){return this.privPronJson}get accuracyScore(){var a;return(a=this.detailResult.PronunciationAssessment)==null?void 0:a.AccuracyScore}get pronunciationScore(){var a;return(a=this.detailResult.PronunciationAssessment)==null?void 0:a.PronScore}get completenessScore(){var a;return(a=this.detailResult.PronunciationAssessment)==null?void 0:a.CompletenessScore}get fluencyScore(){var a;return(a=this.detailResult.PronunciationAssessment)==null?void 0:a.FluencyScore}get prosodyScore(){var a;return(a=this.detailResult.PronunciationAssessment)==null?void 0:a.ProsodyScore}get contentAssessmentResult(){if(this.detailResult.ContentAssessment!==void 0)return new r(this.detailResult)}};return Ri.PronunciationAssessmentResult=s,Ri}var Ha={},uy;function U3(){if(uy)return Ha;uy=1,Object.defineProperty(Ha,"__esModule",{value:!0}),Ha.AvatarConfig=void 0;const e=Le(),t=le();let r=class{constructor(o,a,c){this.privCustomized=!1,this.privUseBuiltInVoice=!1,e.Contracts.throwIfNullOrWhitespace(o,"character"),this.character=o,this.style=a,c===void 0&&(c=new t.AvatarVideoFormat),this.videoFormat=c}get customized(){return this.privCustomized}set customized(o){this.privCustomized=o}get useBuiltInVoice(){return this.privUseBuiltInVoice}set useBuiltInVoice(o){this.privUseBuiltInVoice=o}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(o){this.privBackgroundColor=o}get backgroundImage(){return this.privBackgroundImage}set backgroundImage(o){this.privBackgroundImage=o}get remoteIceServers(){return this.privRemoteIceServers}set remoteIceServers(o){this.privRemoteIceServers=o}};return Ha.AvatarConfig=r,Ha}var Mh={},ly;function H3(){return ly||(ly=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AvatarEventArgs=e.AvatarEventTypes=void 0,function(r){r.SwitchedToSpeaking="SwitchedToSpeaking",r.SwitchedToIdle="SwitchedToIdle",r.SessionClosed="SessionClosed"}(e.AvatarEventTypes||(e.AvatarEventTypes={}));class t{constructor(s,o){this.privOffset=s,this.privDescription=o}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}}e.AvatarEventArgs=t}(Mh)),Mh}var Wa={},Va={},py;function Y_(){if(py)return Va;py=1,Object.defineProperty(Va,"__esModule",{value:!0}),Va.SpeechSynthesisConnectionFactory=void 0;const e=Lt(),t=le(),r=Fr(),s=Pe(),o=nr(),a=Xn();let c=class{constructor(){this.synthesisUri="/tts/cognitiveservices/websocket/v1"}async create(u,l,h){let v=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const f=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,void 0),d=r.ConnectionFactoryBase.getHostSuffix(f),y=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),m=y===void 0?"tts":"voice",b=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+f+"."+m+".speech"+d),S={},R={};if(l.token!==void 0&&l.token!==""&&(R[l.headerName]=l.token),R[o.HeaderNames.ConnectionId]=h,y!==void 0&&y!==""&&(!v||v.search(a.QueryParameterNames.CustomVoiceDeploymentId)===-1)&&(S[a.QueryParameterNames.CustomVoiceDeploymentId]=y),u.avatarEnabled&&(!v||v.search(a.QueryParameterNames.EnableAvatar)===-1)&&(S[a.QueryParameterNames.EnableAvatar]="true"),v){const T=new URL(v),k=T.pathname;(k===""||k==="/")&&(T.pathname=this.synthesisUri,v=await r.ConnectionFactoryBase.getRedirectUrlFromEndpoint(T.toString()))}v||(v=b+this.synthesisUri),u.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,v);const _=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(v,S,R,new s.WebsocketMessageFormatter,e.ProxyInfo.fromParameters(u.parameters),_,h)}};return Va.SpeechSynthesisConnectionFactory=c,Va}var hy;function W3(){if(hy)return Wa;hy=1,Object.defineProperty(Wa,"__esModule",{value:!0}),Wa.AvatarSynthesizer=void 0;const e=Y_(),t=Pe(),r=je(),s=$u(),o=le(),a=Le(),c=pf();let i=class extends o.Synthesizer{constructor(l,h){super(l),a.Contracts.throwIfNullOrUndefined(h,"avatarConfig"),this.privConnectionFactory=new e.SpeechSynthesisConnectionFactory,this.privAvatarConfig=h,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=s.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(o.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}async startAvatarAsync(l){a.Contracts.throwIfNullOrUndefined(l,"peerConnection"),this.privIceServers=l.getConfiguration().iceServers,a.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");const h=new r.Deferred;l.onicegatheringstatechange=()=>{r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering state: "+l.iceGatheringState,r.EventType.Debug)),l.iceGatheringState==="complete"&&(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering complete.",r.EventType.Info)),h.resolve())},l.onicecandidate=m=>{m.candidate?r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice candidate: "+m.candidate.candidate,r.EventType.Debug)):(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice candidate: complete",r.EventType.Debug)),h.resolve())},setTimeout(()=>{l.iceGatheringState!=="complete"&&(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering timeout.",r.EventType.Warning)),h.resolve())},2e3);const v=await l.createOffer();await l.setLocalDescription(v),await h.promise,r.Events.instance.onEvent(new r.PlatformEvent("peer connection: got local SDP.",r.EventType.Info)),this.privProperties.setProperty(o.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(l.localDescription));const f=await this.speak("",!1);if(f.reason!==o.ResultReason.SynthesizingAudioCompleted)return new o.SynthesisResult(f.resultId,f.reason,f.errorDetails,f.properties);const d=atob(f.properties.getProperty(o.PropertyId.TalkingAvatarService_WebRTC_SDP)),y=new RTCSessionDescription(JSON.parse(d));return await l.setRemoteDescription(y),new o.SynthesisResult(f.resultId,f.reason,void 0,f.properties)}async speakTextAsync(l){const h=await this.speak(l,!1);return new o.SynthesisResult(h.resultId,h.reason,h.errorDetails,h.properties)}async speakSsmlAsync(l){const h=await this.speak(l,!0);return new o.SynthesisResult(h.resultId,h.reason,h.errorDetails,h.properties)}async stopSpeakingAsync(){for(;this.synthesisRequestQueue.length()>0;)(await this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.");return this.privAdapter.stopSpeaking()}async stopAvatarAsync(){return a.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)}async close(){if(!this.privDisposed)return this.dispose(!0)}get iceServers(){return this.privIceServers}createSynthesisAdapter(l,h,v){return new t.AvatarSynthesisAdapter(l,h,v,this,this.privAvatarConfig)}createRestSynthesisAdapter(l,h){}createSynthesizerConfig(l){const h=super.createSynthesizerConfig(l);return h.avatarEnabled=!0,h}async speak(l,h){const v=(0,r.createNoDashGuid)(),f=new r.Deferred;return this.synthesisRequestQueue.enqueue(new c.SynthesisRequest(v,l,h,d=>{f.resolve(d),this.privSynthesizing=!1,this.adapterSpeak()},d=>{f.reject(d),this.privSynthesizing=!1})),this.adapterSpeak(),f.promise}};return Wa.AvatarSynthesizer=i,Wa}var _i={},dy;function V3(){if(dy)return _i;dy=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.AvatarVideoFormat=_i.Coordinate=void 0;class e{constructor(s,o){this.x=s,this.y=o}}_i.Coordinate=e;let t=class{constructor(s="H264",o=2e6,a=1920,c=1080){this.codec=s,this.bitrate=o,this.width=a,this.height=c}setCropRange(s,o){this.cropRange={bottomRight:o,topLeft:s}}};return _i.AvatarVideoFormat=t,_i}var Ga={},vy;function G3(){if(vy)return Ga;vy=1,Object.defineProperty(Ga,"__esModule",{value:!0}),Ga.AvatarWebRTCConnectionResult=void 0;const e=le();let t=class extends e.SynthesisResult{constructor(s,o,a,c,i){super(o,a,c,i),this.privSDPAnswer=s}get SDPAnswer(){return this.privSDPAnswer}};return Ga.AvatarWebRTCConnectionResult=t,Ga}var Ja={},fy;function J3(){if(fy)return Ja;fy=1,Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.Diagnostics=void 0;const e=Lt(),t=je();let r=class{static SetLoggingLevel(o){this.privListener=new e.ConsoleLoggingListener(o),t.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(o){if(typeof window>"u")this.privListener&&(this.privListener.logPath=o);else throw new Error("File system logging not available in browser.")}static set onLogOutput(o){this.privListener&&(this.privListener.logCallback=o)}};return Ja.Diagnostics=r,r.privListener=void 0,Ja}var gy;function le(){return gy||(gy=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionEventArgs=e.CancellationErrorCode=e.CancellationDetails=e.CancellationDetailsBase=e.IntentRecognitionCanceledEventArgs=e.TranslationRecognitionCanceledEventArgs=e.NoMatchDetails=e.NoMatchReason=e.Translations=e.TranslationRecognizer=e.VoiceProfileType=e.IntentRecognizer=e.SpeechRecognizer=e.Recognizer=e.PropertyId=e.PropertyCollection=e.SpeechTranslationConfigImpl=e.SpeechTranslationConfig=e.SpeechConfigImpl=e.SpeechConfig=e.ResultReason=e.TranslationSynthesisResult=e.TranslationRecognitionResult=e.TranslationSynthesisEventArgs=e.TranslationRecognitionEventArgs=e.SpeechRecognitionCanceledEventArgs=e.MeetingTranscriptionEventArgs=e.ConversationTranscriptionEventArgs=e.SpeechRecognitionEventArgs=e.LanguageUnderstandingModel=e.IntentRecognitionResult=e.SpeechRecognitionResult=e.RecognitionResult=e.IntentRecognitionEventArgs=e.OutputFormat=e.RecognitionEventArgs=e.SessionEventArgs=e.KeywordRecognitionModel=e.PushAudioOutputStreamCallback=e.PullAudioInputStreamCallback=e.CancellationReason=e.PushAudioOutputStream=e.PullAudioOutputStream=e.AudioOutputStream=e.PushAudioInputStream=e.PullAudioInputStream=e.AudioInputStream=e.AudioFormatTag=e.AudioStreamFormat=e.AudioConfig=void 0,e.SpeechSynthesisEventArgs=e.SpeechSynthesisResult=e.SynthesisResult=e.SpeechSynthesizer=e.SpeechSynthesisOutputFormat=e.Synthesizer=e.User=e.ParticipantChangedReason=e.Participant=e.MeetingTranscriber=e.Meeting=e.ConversationTranscriptionResult=e.ConversationTranscriber=e.ConversationTranslator=e.ConversationTranslationResult=e.ConversationTranslationEventArgs=e.ConversationTranslationCanceledEventArgs=e.ConversationParticipantsChangedEventArgs=e.ConversationExpirationEventArgs=e.Conversation=e.SpeakerRecognitionCancellationDetails=e.SpeakerRecognitionResultType=e.SpeakerRecognitionResult=e.SourceLanguageConfig=e.AutoDetectSourceLanguageResult=e.AutoDetectSourceLanguageConfig=e.SpeakerVerificationModel=e.SpeakerIdentificationModel=e.SpeakerRecognizer=e.VoiceProfileClient=e.VoiceProfilePhraseResult=e.VoiceProfileCancellationDetails=e.VoiceProfileResult=e.VoiceProfileEnrollmentCancellationDetails=e.VoiceProfileEnrollmentResult=e.VoiceProfile=e.ConnectionMessage=e.ConnectionMessageEventArgs=e.BaseAudioPlayer=e.ProfanityOption=e.ServicePropertyChannel=e.TurnStatusReceivedEventArgs=e.ActivityReceivedEventArgs=e.DialogServiceConnector=e.CustomCommandsConfig=e.BotFrameworkConfig=e.DialogServiceConfig=e.PhraseListGrammar=e.Connection=e.ServiceEventArgs=void 0,e.LogLevel=e.Diagnostics=e.AvatarWebRTCConnectionResult=e.Coordinate=e.AvatarVideoFormat=e.AvatarSynthesizer=e.AvatarEventArgs=e.AvatarConfig=e.LanguageIdMode=e.PronunciationAssessmentResult=e.PronunciationAssessmentConfig=e.PronunciationAssessmentGranularity=e.PronunciationAssessmentGradingSystem=e.MeetingTranscriptionCanceledEventArgs=e.ConversationTranscriptionCanceledEventArgs=e.SpeakerAudioDestination=e.VoiceInfo=e.SynthesisVoiceType=e.SynthesisVoiceGender=e.SynthesisVoicesResult=e.SpeechSynthesisBoundaryType=e.SpeechSynthesisVisemeEventArgs=e.SpeechSynthesisBookmarkEventArgs=e.SpeechSynthesisWordBoundaryEventArgs=void 0;var t=w_();Object.defineProperty(e,"AudioConfig",{enumerable:!0,get:function(){return t.AudioConfig}});var r=Hi();Object.defineProperty(e,"AudioStreamFormat",{enumerable:!0,get:function(){return r.AudioStreamFormat}}),Object.defineProperty(e,"AudioFormatTag",{enumerable:!0,get:function(){return r.AudioFormatTag}});var s=R_();Object.defineProperty(e,"AudioInputStream",{enumerable:!0,get:function(){return s.AudioInputStream}}),Object.defineProperty(e,"PullAudioInputStream",{enumerable:!0,get:function(){return s.PullAudioInputStream}}),Object.defineProperty(e,"PushAudioInputStream",{enumerable:!0,get:function(){return s.PushAudioInputStream}});var o=Po();Object.defineProperty(e,"AudioOutputStream",{enumerable:!0,get:function(){return o.AudioOutputStream}}),Object.defineProperty(e,"PullAudioOutputStream",{enumerable:!0,get:function(){return o.PullAudioOutputStream}}),Object.defineProperty(e,"PushAudioOutputStream",{enumerable:!0,get:function(){return o.PushAudioOutputStream}});var a=ax();Object.defineProperty(e,"CancellationReason",{enumerable:!0,get:function(){return a.CancellationReason}});var c=cx();Object.defineProperty(e,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return c.PullAudioInputStreamCallback}});var i=ux();Object.defineProperty(e,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return i.PushAudioOutputStreamCallback}});var u=lx();Object.defineProperty(e,"KeywordRecognitionModel",{enumerable:!0,get:function(){return u.KeywordRecognitionModel}});var l=px();Object.defineProperty(e,"SessionEventArgs",{enumerable:!0,get:function(){return l.SessionEventArgs}});var h=hx();Object.defineProperty(e,"RecognitionEventArgs",{enumerable:!0,get:function(){return h.RecognitionEventArgs}});var v=dx();Object.defineProperty(e,"OutputFormat",{enumerable:!0,get:function(){return v.OutputFormat}});var f=vx();Object.defineProperty(e,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return f.IntentRecognitionEventArgs}});var d=fx();Object.defineProperty(e,"RecognitionResult",{enumerable:!0,get:function(){return d.RecognitionResult}});var y=gx();Object.defineProperty(e,"SpeechRecognitionResult",{enumerable:!0,get:function(){return y.SpeechRecognitionResult}});var m=mx();Object.defineProperty(e,"IntentRecognitionResult",{enumerable:!0,get:function(){return m.IntentRecognitionResult}});var b=Sx();Object.defineProperty(e,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return b.LanguageUnderstandingModel}});var S=$x();Object.defineProperty(e,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return S.SpeechRecognitionEventArgs}}),Object.defineProperty(e,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return S.ConversationTranscriptionEventArgs}}),Object.defineProperty(e,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return S.MeetingTranscriptionEventArgs}});var R=yx();Object.defineProperty(e,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return R.SpeechRecognitionCanceledEventArgs}});var _=Cx();Object.defineProperty(e,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return _.TranslationRecognitionEventArgs}});var T=bx();Object.defineProperty(e,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return T.TranslationSynthesisEventArgs}});var k=A_();Object.defineProperty(e,"TranslationRecognitionResult",{enumerable:!0,get:function(){return k.TranslationRecognitionResult}});var I=Rx();Object.defineProperty(e,"TranslationSynthesisResult",{enumerable:!0,get:function(){return I.TranslationSynthesisResult}});var z=_x();Object.defineProperty(e,"ResultReason",{enumerable:!0,get:function(){return z.ResultReason}});var L=Px();Object.defineProperty(e,"SpeechConfig",{enumerable:!0,get:function(){return L.SpeechConfig}}),Object.defineProperty(e,"SpeechConfigImpl",{enumerable:!0,get:function(){return L.SpeechConfigImpl}});var N=wx();Object.defineProperty(e,"SpeechTranslationConfig",{enumerable:!0,get:function(){return N.SpeechTranslationConfig}}),Object.defineProperty(e,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return N.SpeechTranslationConfigImpl}});var H=I_();Object.defineProperty(e,"PropertyCollection",{enumerable:!0,get:function(){return H.PropertyCollection}});var F=cf();Object.defineProperty(e,"PropertyId",{enumerable:!0,get:function(){return F.PropertyId}});var M=Ex();Object.defineProperty(e,"Recognizer",{enumerable:!0,get:function(){return M.Recognizer}});var j=Ax();Object.defineProperty(e,"SpeechRecognizer",{enumerable:!0,get:function(){return j.SpeechRecognizer}});var E=Tx();Object.defineProperty(e,"IntentRecognizer",{enumerable:!0,get:function(){return E.IntentRecognizer}});var ee=Ix();Object.defineProperty(e,"VoiceProfileType",{enumerable:!0,get:function(){return ee.VoiceProfileType}});var $e=Dx();Object.defineProperty(e,"TranslationRecognizer",{enumerable:!0,get:function(){return $e.TranslationRecognizer}});var oe=kx();Object.defineProperty(e,"Translations",{enumerable:!0,get:function(){return oe.Translations}});var De=Mx();Object.defineProperty(e,"NoMatchReason",{enumerable:!0,get:function(){return De.NoMatchReason}});var te=Ox();Object.defineProperty(e,"NoMatchDetails",{enumerable:!0,get:function(){return te.NoMatchDetails}});var _e=jx();Object.defineProperty(e,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return _e.TranslationRecognitionCanceledEventArgs}});var X=zx();Object.defineProperty(e,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return X.IntentRecognitionCanceledEventArgs}});var Z=x_();Object.defineProperty(e,"CancellationDetailsBase",{enumerable:!0,get:function(){return Z.CancellationDetailsBase}});var Ae=xx();Object.defineProperty(e,"CancellationDetails",{enumerable:!0,get:function(){return Ae.CancellationDetails}});var ye=Nx();Object.defineProperty(e,"CancellationErrorCode",{enumerable:!0,get:function(){return ye.CancellationErrorCode}});var ve=qx();Object.defineProperty(e,"ConnectionEventArgs",{enumerable:!0,get:function(){return ve.ConnectionEventArgs}});var ft=Lx();Object.defineProperty(e,"ServiceEventArgs",{enumerable:!0,get:function(){return ft.ServiceEventArgs}});var Tt=O_();Object.defineProperty(e,"Connection",{enumerable:!0,get:function(){return Tt.Connection}});var Ge=Bx();Object.defineProperty(e,"PhraseListGrammar",{enumerable:!0,get:function(){return Ge.PhraseListGrammar}});var tt=uf();Object.defineProperty(e,"DialogServiceConfig",{enumerable:!0,get:function(){return tt.DialogServiceConfig}});var Pt=Fx();Object.defineProperty(e,"BotFrameworkConfig",{enumerable:!0,get:function(){return Pt.BotFrameworkConfig}});var gt=Ux();Object.defineProperty(e,"CustomCommandsConfig",{enumerable:!0,get:function(){return gt.CustomCommandsConfig}});var It=Wx();Object.defineProperty(e,"DialogServiceConnector",{enumerable:!0,get:function(){return It.DialogServiceConnector}});var Bt=Vx();Object.defineProperty(e,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return Bt.ActivityReceivedEventArgs}});var P=Jx();Object.defineProperty(e,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return P.TurnStatusReceivedEventArgs}});var ie=Kx();Object.defineProperty(e,"ServicePropertyChannel",{enumerable:!0,get:function(){return ie.ServicePropertyChannel}});var Q=Zx();Object.defineProperty(e,"ProfanityOption",{enumerable:!0,get:function(){return Q.ProfanityOption}});var x=Qx();Object.defineProperty(e,"BaseAudioPlayer",{enumerable:!0,get:function(){return x.BaseAudioPlayer}});var O=Yx();Object.defineProperty(e,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return O.ConnectionMessageEventArgs}});var V=M_();Object.defineProperty(e,"ConnectionMessage",{enumerable:!0,get:function(){return V.ConnectionMessage}});var ae=Xx();Object.defineProperty(e,"VoiceProfile",{enumerable:!0,get:function(){return ae.VoiceProfile}});var ce=e3();Object.defineProperty(e,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return ce.VoiceProfileEnrollmentResult}}),Object.defineProperty(e,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return ce.VoiceProfileEnrollmentCancellationDetails}});var Y=t3();Object.defineProperty(e,"VoiceProfileResult",{enumerable:!0,get:function(){return Y.VoiceProfileResult}}),Object.defineProperty(e,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return Y.VoiceProfileCancellationDetails}});var pe=r3();Object.defineProperty(e,"VoiceProfilePhraseResult",{enumerable:!0,get:function(){return pe.VoiceProfilePhraseResult}});var Ce=n3();Object.defineProperty(e,"VoiceProfileClient",{enumerable:!0,get:function(){return Ce.VoiceProfileClient}});var he=i3();Object.defineProperty(e,"SpeakerRecognizer",{enumerable:!0,get:function(){return he.SpeakerRecognizer}});var Te=o3();Object.defineProperty(e,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return Te.SpeakerIdentificationModel}});var Ze=s3();Object.defineProperty(e,"SpeakerVerificationModel",{enumerable:!0,get:function(){return Ze.SpeakerVerificationModel}});var Je=a3();Object.defineProperty(e,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return Je.AutoDetectSourceLanguageConfig}});var Ft=c3();Object.defineProperty(e,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return Ft.AutoDetectSourceLanguageResult}});var Ur=u3();Object.defineProperty(e,"SourceLanguageConfig",{enumerable:!0,get:function(){return Ur.SourceLanguageConfig}});var Ht=l3();Object.defineProperty(e,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return Ht.SpeakerRecognitionResult}}),Object.defineProperty(e,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return Ht.SpeakerRecognitionResultType}}),Object.defineProperty(e,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return Ht.SpeakerRecognitionCancellationDetails}});var Dt=lf();Object.defineProperty(e,"Conversation",{enumerable:!0,get:function(){return Dt.Conversation}}),Object.defineProperty(e,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return Dt.ConversationExpirationEventArgs}}),Object.defineProperty(e,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return Dt.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(e,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return Dt.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(e,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return Dt.ConversationTranslationEventArgs}}),Object.defineProperty(e,"ConversationTranslationResult",{enumerable:!0,get:function(){return Dt.ConversationTranslationResult}}),Object.defineProperty(e,"ConversationTranslator",{enumerable:!0,get:function(){return Dt.ConversationTranslator}}),Object.defineProperty(e,"ConversationTranscriber",{enumerable:!0,get:function(){return Dt.ConversationTranscriber}}),Object.defineProperty(e,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return Dt.ConversationTranscriptionResult}}),Object.defineProperty(e,"Meeting",{enumerable:!0,get:function(){return Dt.Meeting}}),Object.defineProperty(e,"MeetingTranscriber",{enumerable:!0,get:function(){return Dt.MeetingTranscriber}}),Object.defineProperty(e,"Participant",{enumerable:!0,get:function(){return Dt.Participant}}),Object.defineProperty(e,"ParticipantChangedReason",{enumerable:!0,get:function(){return Dt.ParticipantChangedReason}}),Object.defineProperty(e,"User",{enumerable:!0,get:function(){return Dt.User}});var mt=pf();Object.defineProperty(e,"Synthesizer",{enumerable:!0,get:function(){return mt.Synthesizer}});var Ne=__();Object.defineProperty(e,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return Ne.SpeechSynthesisOutputFormat}});var $n=w3();Object.defineProperty(e,"SpeechSynthesizer",{enumerable:!0,get:function(){return $n.SpeechSynthesizer}});var Qt=E3();Object.defineProperty(e,"SynthesisResult",{enumerable:!0,get:function(){return Qt.SynthesisResult}});var ei=A3();Object.defineProperty(e,"SpeechSynthesisResult",{enumerable:!0,get:function(){return ei.SpeechSynthesisResult}});var Hr=T3();Object.defineProperty(e,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return Hr.SpeechSynthesisEventArgs}});var Eo=I3();Object.defineProperty(e,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return Eo.SpeechSynthesisWordBoundaryEventArgs}});var fr=D3();Object.defineProperty(e,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return fr.SpeechSynthesisBookmarkEventArgs}});var ti=k3();Object.defineProperty(e,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return ti.SpeechSynthesisVisemeEventArgs}});var Wr=M3();Object.defineProperty(e,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return Wr.SpeechSynthesisBoundaryType}});var en=O3();Object.defineProperty(e,"SynthesisVoicesResult",{enumerable:!0,get:function(){return en.SynthesisVoicesResult}});var ge=j3();Object.defineProperty(e,"SynthesisVoiceGender",{enumerable:!0,get:function(){return ge.SynthesisVoiceGender}}),Object.defineProperty(e,"SynthesisVoiceType",{enumerable:!0,get:function(){return ge.SynthesisVoiceType}}),Object.defineProperty(e,"VoiceInfo",{enumerable:!0,get:function(){return ge.VoiceInfo}});var Yl=z3();Object.defineProperty(e,"SpeakerAudioDestination",{enumerable:!0,get:function(){return Yl.SpeakerAudioDestination}});var Xl=x3();Object.defineProperty(e,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return Xl.ConversationTranscriptionCanceledEventArgs}});var ir=N3();Object.defineProperty(e,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return ir.MeetingTranscriptionCanceledEventArgs}});var Ao=q3();Object.defineProperty(e,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return Ao.PronunciationAssessmentGradingSystem}});var To=L3();Object.defineProperty(e,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return To.PronunciationAssessmentGranularity}});var Io=B3();Object.defineProperty(e,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return Io.PronunciationAssessmentConfig}});var tn=F3();Object.defineProperty(e,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return tn.PronunciationAssessmentResult}});var Cu=F_();Object.defineProperty(e,"LanguageIdMode",{enumerable:!0,get:function(){return Cu.LanguageIdMode}});var Wt=U3();Object.defineProperty(e,"AvatarConfig",{enumerable:!0,get:function(){return Wt.AvatarConfig}});var bu=H3();Object.defineProperty(e,"AvatarEventArgs",{enumerable:!0,get:function(){return bu.AvatarEventArgs}});var yn=W3();Object.defineProperty(e,"AvatarSynthesizer",{enumerable:!0,get:function(){return yn.AvatarSynthesizer}});var Do=V3();Object.defineProperty(e,"AvatarVideoFormat",{enumerable:!0,get:function(){return Do.AvatarVideoFormat}}),Object.defineProperty(e,"Coordinate",{enumerable:!0,get:function(){return Do.Coordinate}});var Ru=G3();Object.defineProperty(e,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return Ru.AvatarWebRTCConnectionResult}});var Wi=J3();Object.defineProperty(e,"Diagnostics",{enumerable:!0,get:function(){return Wi.Diagnostics}});var Ut=y_();Object.defineProperty(e,"LogLevel",{enumerable:!0,get:function(){return Ut.LogLevel}})}(hh)),hh}var my;function K3(){if(my)return bs;my=1,Object.defineProperty(bs,"__esModule",{value:!0}),bs.ProxyInfo=void 0;const e=le();let t=class X_{constructor(s,o,a,c){this.privProxyHostName=s,this.privProxyPort=o,this.privProxyUserName=a,this.privProxyPassword=c}static fromParameters(s){return new X_(s.getProperty(e.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(s.getProperty(e.PropertyId.SpeechServiceConnection_ProxyPort),10),s.getProperty(e.PropertyId.SpeechServiceConnection_ProxyUserName),s.getProperty(e.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(s){return this.fromParameters(s.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}};return bs.ProxyInfo=t,bs}var Ka={},Oh,Sy;function Z3(){if(Sy)return Oh;Sy=1;const e=new Set(["json","buffer","string"]);return Oh=t=>(...r)=>{const s=new Set;let o,a,c,i="";return r.forEach(u=>{if(typeof u=="string")if(u.toUpperCase()===u)if(o){const l=`Can't set method to ${u}, already set to ${o}.`;throw new Error(l)}else o=u;else if(u.startsWith("http:")||u.startsWith("https:"))i=u;else if(e.has(u))a=u;else throw new Error(`Unknown encoding, ${u}`);else if(typeof u=="number")s.add(u);else if(typeof u=="object")if(Array.isArray(u)||u instanceof Set)u.forEach(l=>s.add(l));else{if(c)throw new Error("Cannot set headers twice.");c=u}else throw new Error(`Unknown type: ${typeof u}`)}),o||(o="GET"),s.size===0&&s.add(200),t(s,o,a,c,i)},Oh}var jh,$y;function Q3(){if($y)return jh;$y=1;const e=Z3();class t extends Error{constructor(o,...a){super(...a),Error.captureStackTrace&&Error.captureStackTrace(this,t),this.name="StatusError",this.message=o.statusMessage,this.statusCode=o.status,this.res=o,this.json=o.json.bind(o),this.text=o.text.bind(o),this.arrayBuffer=o.arrayBuffer.bind(o);let c;Object.defineProperty(this,"responseBody",{get:()=>(c||(c=this.arrayBuffer()),c)}),this.headers={};for(const[u,l]of o.headers.entries())this.headers[u.toLowerCase()]=l}}return jh=e((s,o,a,c,i)=>async(u,l,h={})=>{u=i+(u||"");let v=new URL(u);if(c||(c={}),v.username&&(c.Authorization="Basic "+btoa(v.username+":"+v.password),v=new URL(v.protocol+"//"+v.host+v.pathname+v.search)),v.protocol!=="https:"&&v.protocol!=="http:")throw new Error(`Unknown protocol, ${v.protocol}`);if(l&&!(l instanceof ArrayBuffer||ArrayBuffer.isView(l)||typeof l=="string"))if(typeof l=="object")l=JSON.stringify(l),c["Content-Type"]="application/json";else throw new Error("Unknown body type.");h=new Headers({...c||{},...h});const f=await fetch(v,{method:o,headers:h,body:l});if(f.statusCode=f.status,!s.has(f.status))throw new t(f);return a==="json"?f.json():a==="buffer"?f.arrayBuffer():a==="string"?f.text():f}),jh}var yy;function Y3(){return yy||(yy=1,function(e){var t=Ka&&Ka.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.RestMessageAdapter=e.RestRequestType=void 0;const r=t(Q3()),s=je();var o;(function(c){c.Get="GET",c.Post="POST",c.Delete="DELETE",c.File="file"})(o=e.RestRequestType||(e.RestRequestType={}));let a=class{constructor(i){if(!i)throw new s.ArgumentNullError("configParams");this.privHeaders=i.headers,this.privIgnoreCache=i.ignoreCache}static extractHeaderValue(i,u){let l="";try{const h=u.trim().split(/[\r\n]+/),v={};h.forEach(f=>{const d=f.split(": "),y=d.shift().toLowerCase(),m=d.join(": ");v[y]=m}),l=v[i.toLowerCase()]}catch{}return l}set options(i){this.privHeaders=i.headers,this.privIgnoreCache=i.ignoreCache}setHeaders(i,u){this.privHeaders[i]=u}request(i,u,l={},h=null){const v=new s.Deferred,f=i===o.File?"POST":i,d=(m,b={})=>{const S=m;return{data:JSON.stringify(b),headers:JSON.stringify(m.headers),json:b,ok:m.statusCode>=200&&m.statusCode<300,status:m.statusCode,statusText:b.error?b.error.message:S.statusText?S.statusText:S.statusMessage}},y=m=>{const b=(0,r.default)(u,f,this.privHeaders,200,201,202,204,400,401,402,403,404),S=this.queryParams(l)===""?"":`?${this.queryParams(l)}`;b(S,m).then(async R=>{if(i===o.Delete||R.statusCode===204)v.resolve(d(R));else try{const _=await R.json();v.resolve(d(R,_))}catch{v.resolve(d(R))}}).catch(R=>{v.reject(R)})};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),i===o.Post&&h&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),y(h),v.promise}queryParams(i={}){return Object.keys(i).map(u=>encodeURIComponent(u)+"="+encodeURIComponent(i[u])).join("&")}};e.RestMessageAdapter=a}(Ka)),Ka}var Za={},Cy;function eP(){if(Cy)return Za;Cy=1,Object.defineProperty(Za,"__esModule",{value:!0}),Za.RestConfigBase=void 0;let e=class Yu{static get requestOptions(){return Yu.privDefaultRequestOptions}static get configParams(){return Yu.privDefaultParams}static get restErrors(){return Yu.privRestErrors}};return Za.RestConfigBase=e,e.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4},e.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."},e.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"},Za}var by;function Lt(){return by||(by=1,function(e){var t=pi&&pi.__createBinding||(Object.create?function(s,o,a,c){c===void 0&&(c=a),Object.defineProperty(s,c,{enumerable:!0,get:function(){return o[a]}})}:function(s,o,a,c){c===void 0&&(c=a),s[c]=o[a]}),r=pi&&pi.__exportStar||function(s,o){for(var a in s)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,s,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(ex(),e),r(tx(),e),r(rx(),e),r(nx(),e),r(ix(),e),r(ox(),e),r(C_(),e),r(sx(),e),r(K3(),e),r(Y3(),e),r(eP(),e)}(pi)),pi}var Ry;function X3(){if(Ry)return gs;Ry=1,Object.defineProperty(gs,"__esModule",{value:!0}),gs.IntentConnectionFactory=void 0;const e=Lt(),t=le(),r=Fr(),s=Pe(),o=nr();let a=class extends r.ConnectionFactoryBase{create(i,u,l){let h=i.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint);if(!h){const y=i.parameters.getProperty(t.PropertyId.SpeechServiceConnection_IntentRegion),m=r.ConnectionFactoryBase.getHostSuffix(y);h=i.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+y+".sr.speech"+m)+"/speech/recognition/interactive/cognitiveservices/v1"}const v={format:"simple",language:i.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(i,v,h);const f={};u.token!==void 0&&u.token!==""&&(f[u.headerName]=u.token),f[o.HeaderNames.ConnectionId]=l,i.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,h);const d=i.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new e.WebsocketConnection(h,v,f,new s.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(i),d,l))}getSpeechRegionFromIntentRegion(i){switch(i){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return i}}};return gs.IntentConnectionFactory=a,gs}var Pi={},_y;function eN(){if(_y)return Pi;_y=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.VoiceProfileConnectionFactory=Pi.SpeakerRecognitionConnectionFactory=void 0;const e=Lt(),t=le(),r=Fr(),s=Pe(),o=nr();class a extends r.ConnectionFactoryBase{create(l,h,v,f){let d=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint);if(!d){const S=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region),R=r.ConnectionFactoryBase.getHostSuffix(S),_=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,`wss://${S}.spr-frontend.speech${R}`),T=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_SpeakerIdMode,"TextIndependentIdentification");d=`${_}/speaker/ws/${this.scenarioToPath(T)}/${v}`}const y={format:"simple",language:l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(l,y,d);const m={};h.token!==void 0&&h.token!==""&&(m[h.headerName]=h.token),m[o.HeaderNames.ConnectionId]=f,m[o.HeaderNames.SpIDAuthKey]=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Key),l.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,d);const b=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new e.WebsocketConnection(d,y,m,new s.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(l),b,f))}scenarioToPath(l){switch(l){case"TextIndependentVerification":case"2":return"verification/text-independent";case"TextDependentVerification":case"1":return"verification/text-dependent";default:return"identification/text-independent"}}}let c=class extends a{create(l,h,v){return super.create(l,h,"recognition",v)}};Pi.SpeakerRecognitionConnectionFactory=c;class i extends a{create(l,h,v){return super.create(l,h,"profile",v)}}return Pi.VoiceProfileConnectionFactory=i,Pi}var zh={},Py;function hf(){return Py||(Py=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognitionEndedEvent=e.RecognitionCompletionStatus=e.RecognitionStartedEvent=e.ConnectingToServiceEvent=e.ListeningStartedEvent=e.RecognitionTriggeredEvent=e.SpeechRecognitionEvent=void 0;const t=je();class r extends t.PlatformEvent{constructor(h,v,f,d=t.EventType.Info){super(h,d),this.privRequestId=v,this.privSessionId=f}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}e.SpeechRecognitionEvent=r;class s extends r{constructor(h,v,f,d){super("RecognitionTriggeredEvent",h,v),this.privAudioSourceId=f,this.privAudioNodeId=d}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}e.RecognitionTriggeredEvent=s;class o extends r{constructor(h,v,f,d){super("ListeningStartedEvent",h,v),this.privAudioSourceId=f,this.privAudioNodeId=d}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}e.ListeningStartedEvent=o;class a extends r{constructor(h,v,f){super("ConnectingToServiceEvent",h,f),this.privAuthFetchEventid=v}get authFetchEventid(){return this.privAuthFetchEventid}}e.ConnectingToServiceEvent=a;class c extends r{constructor(h,v,f,d,y){super("RecognitionStartedEvent",h,y),this.privAudioSourceId=v,this.privAudioNodeId=f,this.privAuthFetchEventId=d}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}}e.RecognitionStartedEvent=c;var i;(function(l){l[l.Success=0]="Success",l[l.AudioSourceError=1]="AudioSourceError",l[l.AudioSourceTimeout=2]="AudioSourceTimeout",l[l.AuthTokenFetchError=3]="AuthTokenFetchError",l[l.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",l[l.UnAuthorized=5]="UnAuthorized",l[l.ConnectTimeout=6]="ConnectTimeout",l[l.ConnectError=7]="ConnectError",l[l.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",l[l.UnknownError=9]="UnknownError"})(i=e.RecognitionCompletionStatus||(e.RecognitionCompletionStatus={}));class u extends r{constructor(h,v,f,d,y,m,b,S){super("RecognitionEndedEvent",h,y,b===i.Success?t.EventType.Info:t.EventType.Error),this.privAudioSourceId=v,this.privAudioNodeId=f,this.privAuthFetchEventId=d,this.privStatus=b,this.privError=S,this.privServiceTag=m}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}}e.RecognitionEndedEvent=u}(zh)),zh}var Qa={},Ya={},wy;function wo(){if(wy)return Ya;wy=1,Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.SpeechConnectionMessage=void 0;const e=je(),t=nr();class r extends e.ConnectionMessage{constructor(o,a,c,i,u,l,h,v){if(!a)throw new e.ArgumentNullError("path");if(!c)throw new e.ArgumentNullError("requestId");const f={};if(f[t.HeaderNames.Path]=a,f[t.HeaderNames.RequestId]=c,f[t.HeaderNames.RequestTimestamp]=new Date().toISOString(),i&&(f[t.HeaderNames.ContentType]=i),l&&(f[t.HeaderNames.RequestStreamId]=l),h)for(const d in h)d&&(f[d]=h[d]);v?super(o,u,f,v):super(o,u,f),this.privPath=a,this.privRequestId=c,this.privContentType=i,this.privStreamId=l,this.privAdditionalHeaders=h}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(o){let a=null,c=null,i=null,u=null;const l={};if(o.headers)for(const h in o.headers)h&&(h.toLowerCase()===t.HeaderNames.Path.toLowerCase()?a=o.headers[h]:h.toLowerCase()===t.HeaderNames.RequestId.toLowerCase()?c=o.headers[h]:h.toLowerCase()===t.HeaderNames.ContentType.toLowerCase()?i=o.headers[h]:h.toLowerCase()===t.HeaderNames.RequestStreamId.toLowerCase()?u=o.headers[h]:l[h]=o.headers[h]);return new r(o.messageType,a,c,i,o.body,u,l,o.id)}}return Ya.SpeechConnectionMessage=r,Ya}var xh={},Ey;function tN(){return Ey||(Ey=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SegmentationMode=void 0,function(t){t.Normal="Normal",t.Disabled="Disabled",t.Custom="Custom",t.Semantic="Semantic"}(e.SegmentationMode||(e.SegmentationMode={}))}(xh)),xh}var Nh={},Ay;function rN(){return Ay||(Ay=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.NextAction=void 0,function(t){t.None="None",t.Synthesize="Synthesize"}(e.NextAction||(e.NextAction={}))}(Nh)),Nh}var qh={},Ty;function nN(){return Ty||(Ty=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Mode=void 0,function(t){t.None="None",t.Always="Always"}(e.Mode||(e.Mode={}))}(qh)),qh}var Lh={},Iy;function iN(){return Iy||(Iy=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LanguageIdDetectionPriority=e.LanguageIdDetectionMode=void 0,function(t){t.DetectAtAudioStart="DetectAtAudioStart",t.DetectContinuous="DetectContinuous",t.DetectSegments="DetectSegments"}(e.LanguageIdDetectionMode||(e.LanguageIdDetectionMode={})),function(t){t.Auto="Auto",t.PrioritizeLatency="PrioritizeLatency",t.PrioritizeAccuracy="PrioritizeAccuracy"}(e.LanguageIdDetectionPriority||(e.LanguageIdDetectionPriority={}))}(Lh)),Lh}var Bh={},Dy;function oN(){return Dy||(Dy=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.NextAction=void 0,function(t){t.Recognize="Recognize",t.None="None"}(e.NextAction||(e.NextAction={}))}(Bh)),Bh}var Fh={},ky;function sN(){return ky||(ky=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.OnUnknownAction=void 0,function(t){t.RecognizeWithDefaultLanguage="RecognizeWithDefaultLanguage",t.None="None"}(e.OnUnknownAction||(e.OnUnknownAction={}))}(Fh)),Fh}var Uh={},My;function aN(){return My||(My=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ResultType=void 0,function(t){t.Auto="Auto",t.StableFragment="StableFragment",t.Hypothesis="Hypothesis",t.None="None"}(e.ResultType||(e.ResultType={}))}(Uh)),Uh}var Hh={},Oy;function cN(){return Oy||(Oy=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PhraseResultOutputType=void 0,function(t){t.Always="Always",t.None="None"}(e.PhraseResultOutputType||(e.PhraseResultOutputType={}))}(Hh)),Hh}var Wh={},jy;function uN(){return jy||(jy=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.NextAction=void 0,function(t){t.None="None",t.Translate="Translate"}(e.NextAction||(e.NextAction={}))}(Wh)),Wh}var zy;function lN(){if(zy)return Qa;zy=1,Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.ServiceRecognizerBase=void 0;const e=Lt(),t=je(),r=le(),s=Pe(),o=wo(),a=tN(),c=Pr(),i=rN(),u=nN(),l=iN(),h=oN(),v=sN(),f=aN(),d=cN(),y=uN();let m=class Xc{constructor(S,R,_,T,k){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.recognizeSpeaker=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!S)throw new t.ArgumentNullError("authentication");if(!R)throw new t.ArgumentNullError("connectionFactory");if(!_)throw new t.ArgumentNullError("audioSource");if(!T)throw new t.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=T.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=S,this.privConnectionFactory=R,this.privAudioSource=_,this.privRecognizerConfig=T,this.privIsDisposed=!1,this.privRecognizer=k,this.privRequestSession=new s.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new t.EventSource,this.privServiceEvents=new t.EventSource,this.privDynamicGrammar=new s.DynamicGrammarBuilder,this.privSpeechContext=new s.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new s.AgentConfig,this.privRecognizerConfig.parameters.getProperty(r.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?this.privSetTimeout=t.Timeout.setTimeout:(typeof window<"u"&&(this.privSetTimeout=window.setTimeout.bind(window)),typeof globalThis<"u"&&(this.privSetTimeout=globalThis.setTimeout.bind(globalThis))),this.connectionEvents.attach(z=>{if(z.name==="ConnectionClosedEvent"){const L=z;(L.statusCode===1003||L.statusCode===1007||L.statusCode===1002||L.statusCode===4e3||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(r.CancellationReason.Error,L.statusCode===1007?r.CancellationErrorCode.BadRequestParameters:r.CancellationErrorCode.ConnectionFailure,`${L.reason} websocket error code: ${L.statusCode}`)}}),this.privEnableSpeakerId&&(this.privDiarizationSessionId=(0,t.createNoDashGuid)())}setTranslationJson(){const S=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(S!==void 0){const R=S.split(","),_=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,void 0),T=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationCategoryId,void 0),k=_!==void 0?i.NextAction.Synthesize:i.NextAction.None;if(this.privSpeechContext.getContext().translation={onPassthrough:{action:k},onSuccess:{action:k},output:{includePassThroughResults:!0,interimResults:{mode:u.Mode.Always}},targetLanguages:R},T!==void 0&&(this.privSpeechContext.getContext().translation.category=T),_!==void 0){const z={};for(const L of R)z[L]=_;this.privSpeechContext.getContext().synthesis={defaultVoices:z}}const I=this.privSpeechContext.getContext().phraseDetection||{};I.onSuccess={action:y.NextAction.Translate},I.onInterim={action:y.NextAction.Translate},this.privSpeechContext.getContext().phraseDetection=I}}setSpeechSegmentationTimeoutJson(){const S=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0),R=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.Speech_SegmentationMaximumTimeMs,void 0),_=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.Speech_SegmentationStrategy,void 0),T={mode:a.SegmentationMode.Normal};let k=!1;if(_!==void 0){k=!0;let I=a.SegmentationMode.Normal;switch(_.toLowerCase()){case"default":break;case"time":I=a.SegmentationMode.Custom;break;case"semantic":I=a.SegmentationMode.Semantic;break}T.mode=I}if(S!==void 0){k=!0;const I=parseInt(S,10);T.mode=a.SegmentationMode.Custom,T.segmentationSilenceTimeoutMs=I}if(R!==void 0){k=!0;const I=parseInt(R,10);T.mode=a.SegmentationMode.Custom,T.segmentationForcedTimeoutMs=I}if(k){const I=this.privSpeechContext.getContext().phraseDetection||{};switch(I.mode=this.recognitionMode,this.recognitionMode){case c.RecognitionMode.Conversation:I.conversation=I.conversation??{segmentation:{}},I.conversation.segmentation=T;break;case c.RecognitionMode.Interactive:I.interactive=I.interactive??{segmentation:{}},I.interactive.segmentation=T;break;case c.RecognitionMode.Dictation:I.dictation=I.dictation??{},I.dictation.segmentation=T;break}this.privSpeechContext.getContext().phraseDetection=I}}setLanguageIdJson(){const S=this.privSpeechContext.getContext().phraseDetection||{};if(this.privRecognizerConfig.autoDetectSourceLanguages!==void 0){const R=this.privRecognizerConfig.autoDetectSourceLanguages.split(",");R.length===1&&R[0]===s.AutoDetectSourceLanguagesOpenRangeOptionName&&(R[0]="UND");let _;this.privRecognizerConfig.languageIdMode==="Continuous"?_=l.LanguageIdDetectionMode.DetectContinuous:_=l.LanguageIdDetectionMode.DetectAtAudioStart,this.privSpeechContext.getContext().languageId={languages:R,mode:_,onSuccess:{action:h.NextAction.Recognize},onUnknown:{action:v.OnUnknownAction.None},priority:l.LanguageIdDetectionPriority.PrioritizeLatency},this.privSpeechContext.getContext().phraseOutput={interimResults:{resultType:f.ResultType.Auto},phraseResults:{resultType:d.PhraseResultOutputType.Always}};const T=this.privRecognizerConfig.sourceLanguageModels;T!==void 0&&(S.customModels=T,S.onInterim={action:y.NextAction.None},S.onSuccess={action:y.NextAction.None})}this.privSpeechContext.getContext().phraseDetection=S}setOutputDetailLevelJson(){this.privEnableSpeakerId&&(this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true"?this.privSpeechContext.setWordLevelTimings():this.privRecognizerConfig.parameters.getProperty(s.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase()===r.OutputFormat[r.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat())}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(S){this.privRecognizerConfig.parameters.setProperty(r.PropertyId.ConversationTranslator_Token,S)}set voiceProfileType(S){this.privRecognizerConfig.parameters.setProperty(r.PropertyId.SpeechServiceConnection_SpeakerIdMode,S)}set authentication(S){this.privAuthentication=S}isDisposed(){return this.privIsDisposed}async dispose(S){if(this.privIsDisposed=!0,this.privConnectionPromise!==void 0)try{await(await this.privConnectionPromise).dispose(S)}catch{return}}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}async recognize(S,R,_){if(this.recognizeOverride!==void 0){await this.recognizeOverride(S,R,_);return}if(this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=S,this.privRecognizerConfig.recognitionEndpointVersion==="2"){const L=this.privSpeechContext.getContext().phraseDetection||{};L.mode=S,this.privSpeechContext.getContext().phraseDetection=L}this.setLanguageIdJson(),this.setTranslationJson(),this.privRecognizerConfig.autoDetectSourceLanguages!==void 0&&this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0&&this.setupTranslationWithLanguageId(),this.setSpeechSegmentationTimeoutJson(),this.setOutputDetailLevelJson(),this.privSuccessCallback=R,this.privErrorCallback=_,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const T=this.connectImpl();let k;try{const L=await this.audioSource.attach(this.privRequestSession.audioNodeId),N=await this.audioSource.format,H=await this.audioSource.deviceInfo;this.privIsLiveAudio=H.type&&H.type===s.type.Microphones,k=new e.ReplayableAudioNode(L,N.avgBytesPerSec),await this.privRequestSession.onAudioSourceAttachCompleted(k,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:H}}catch(L){throw await this.privRequestSession.onStopRecognizing(),L}try{await T}catch(L){await this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,L);return}const I=new r.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,I),this.receiveMessage(),this.sendAudio(k).catch(async L=>{await this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,L)})}async stopRecognizing(){if(this.privRequestSession.isRecognizing)try{await this.audioSource.turnOff(),await this.sendFinalAudio(),await this.privRequestSession.onStopRecognizing(),await this.privRequestSession.turnCompletionPromise}finally{await this.privRequestSession.dispose()}}async connect(){return await this.connectImpl(),Promise.resolve()}connectAsync(S,R){this.connectImpl().then(()=>{try{S&&S()}catch(_){R&&R(_)}},_=>{try{R&&R(_)}catch{}})}async disconnect(){if(await this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.NoError,"Disconnecting"),this.disconnectOverride!==void 0&&await this.disconnectOverride(),this.privConnectionPromise!==void 0)try{await(await this.privConnectionPromise).dispose()}catch{}this.privConnectionPromise=void 0}sendMessage(S){}async sendNetworkMessage(S,R){const _=typeof R=="string"?t.MessageType.Text:t.MessageType.Binary,T=typeof R=="string"?"application/json":"";return(await this.fetchConnection()).send(new o.SpeechConnectionMessage(_,S,this.privRequestSession.requestId,T,R))}set activityTemplate(S){this.privActivityTemplate=S}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(S){this.privExpectContentAssessmentResponse=S}async sendTelemetryData(){const S=this.privRequestSession.getTelemetry();if(Xc.telemetryDataEnabled!==!0||this.privIsDisposed||S===null)return;if(Xc.telemetryData)try{Xc.telemetryData(S)}catch{}await(await this.fetchConnection()).send(new o.SpeechConnectionMessage(t.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",S))}async cancelRecognitionLocal(S,R,_){this.privRequestSession.isRecognizing&&(await this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,S,R,_))}async receiveMessage(){try{if(this.privIsDisposed)return;let S=await this.fetchConnection();const R=await S.read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(!R)return this.receiveMessage();this.privServiceHasSentMessage=!0;const _=o.SpeechConnectionMessage.fromConnectionMessage(R);if(_.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(_.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const T=s.SpeechDetected.fromJSON(_.textBody,this.privRequestSession.currentTurnAudioOffset),k=new r.RecognitionEventArgs(T.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,k);break;case"speech.enddetected":let I;_.textBody.length>0?I=_.textBody:I="{ Offset: 0 }";const z=s.SpeechDetected.fromJSON(I,this.privRequestSession.currentTurnAudioOffset),L=new r.RecognitionEventArgs(z.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,L);break;case"turn.end":await this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,await this.cancelRecognitionLocal(r.CancellationReason.EndOfStream,r.CancellationErrorCode.NoError,void 0));const N=new r.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing){this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,N);return}else S=await this.fetchConnection(),await this.sendPrePayloadJSON(S);break;default:await this.processTypeSpecificMessages(_)||this.privServiceEvents&&this.serviceEvents.onEvent(new t.ServiceEvent(_.path.toLowerCase(),_.textBody))}return this.receiveMessage()}catch{return null}}updateSpeakerDiarizationAudioOffset(){const S=this.privRequestSession.recognitionBytesSent,R=this.privAverageBytesPerMs!==0?S/this.privAverageBytesPerMs:0;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(R)}sendSpeechContext(S,R){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();const _=this.speechContext.toJSON();if(R&&this.privRequestSession.onSpeechContext(),_)return S.send(new o.SpeechConnectionMessage(t.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",_))}setupTranslationWithLanguageId(){const S=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0),R=this.privRecognizerConfig.autoDetectSourceLanguages!==void 0;if(S!==void 0&&R){this.privSpeechContext.getContext().phraseOutput={interimResults:{resultType:f.ResultType.None},phraseResults:{resultType:d.PhraseResultOutputType.None}};const _=this.privSpeechContext.getContext().translation;if(_){const T=this.privRecognizerConfig.sourceLanguageModels;if(T!==void 0&&T.length>0){const I=this.privSpeechContext.getContext().phraseDetection||{};I.customModels=T,this.privSpeechContext.getContext().phraseDetection=I}this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&(_.onSuccess={action:i.NextAction.Synthesize},_.onPassthrough={action:i.NextAction.Synthesize})}}}noOp(){}async sendPrePayloadJSON(S,R=!0){if(this.sendPrePayloadJSONOverride!==void 0)return this.sendPrePayloadJSONOverride(S);await this.sendSpeechContext(S,R),await this.sendWaveHeader(S)}async sendWaveHeader(S){const R=await this.audioSource.format;return S.send(new o.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",R.header))}connectImpl(){return this.privConnectionPromise!==void 0?this.privConnectionPromise.then(S=>S.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),this.postConnectImplOverride!==void 0?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(S,R,_){if(R.onSpeechContext(),Xc.telemetryDataEnabled!==!0){const k={context:{system:JSON.parse(_).context.system}};_=JSON.stringify(k)}if(this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()==="true"){const T=JSON.parse(_);T.context.DisableReferenceChannel="True",T.context.MicSpec="1_0_0",_=JSON.stringify(T)}if(_)return S.send(new o.SpeechConnectionMessage(t.MessageType.Text,"speech.config",R.requestId,"application/json",_))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(S=>S.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async sendAudio(S){const R=await this.audioSource.format;this.privAverageBytesPerMs=R.avgBytesPerSec/1e3;let _=Date.now();const T=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),k=R.avgBytesPerSec/1e3*parseInt(T,10),I=this.privRequestSession.recogNumber,z=async()=>{if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===I){const L=await this.fetchConnection(),N=await S.read();if(this.privRequestSession.isSpeechEnded)return;let H,F;if(!N||N.isEnd?(H=null,F=0):(H=N.buffer,this.privRequestSession.onAudioSent(H.byteLength),k>=this.privRequestSession.bytesSent?F=0:F=Math.max(0,_-Date.now())),F!==0&&await this.delay(F),H!==null&&(_=Date.now()+H.byteLength*1e3/(R.avgBytesPerSec*2)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===I)if(L.send(new o.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,null,H)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),N!=null&&N.isEnd)this.privIsLiveAudio||this.privRequestSession.onSpeechEnded();else return z()}};return z()}async retryableConnect(){let S=!1;this.privAuthFetchEventId=(0,t.createNoDashGuid)();const R=this.privRequestSession.sessionId;this.privConnectionId=R!==void 0?R:(0,t.createNoDashGuid)(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let _=0,T="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){this.privRequestSession.onRetryConnection();const I=await(S?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId));await this.privRequestSession.onAuthCompleted(!1);const z=await this.privConnectionFactory.create(this.privRecognizerConfig,I,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(z.events),z.events.attach(N=>{this.connectionEvents.onEvent(N)});const L=await z.open();if(L.statusCode===200)return await this.privRequestSession.onConnectionEstablishCompleted(L.statusCode),Promise.resolve(z);L.statusCode===1006&&(S=!0),_=L.statusCode,T=L.reason}return await this.privRequestSession.onConnectionEstablishCompleted(_,T),Promise.reject(`Unable to contact server. StatusCode: ${_}, ${this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${T}`)}delay(S){return new Promise(R=>this.privSetTimeout(R,S))}writeBufferToConsole(S){let R="Buffer Size: ";if(S===null)R+="null";else{const _=new Uint8Array(S);R+=`${S.byteLength}\r
`;for(let T=0;T<S.byteLength;T++)R+=_[T].toString(16).padStart(2,"0")+" ",(T+1)%16===0&&(console.info(R),R="")}console.info(R)}async sendFinalAudio(){await(await this.fetchConnection()).send(new o.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))}async configureConnection(){const S=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(S):(await this.sendSpeechServiceConfig(S,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendPrePayloadJSON(S,!1),S)}};return Qa.ServiceRecognizerBase=m,m.telemetryDataEnabled=!0,Qa}var Xa={},xy;function pN(){if(xy)return Xa;xy=1,Object.defineProperty(Xa,"__esModule",{value:!0}),Xa.ConversationServiceRecognizer=void 0;const e=le(),t=Pe();let r=class extends t.ServiceRecognizerBase{constructor(o,a,c,i,u){super(o,a,c,i,u),this.handleSpeechPhraseMessage=async l=>this.handleSpeechPhrase(l),this.handleSpeechHypothesisMessage=l=>this.handleSpeechHypothesis(l)}processTypeSpecificMessages(o){}handleRecognizedCallback(o,a,c){}handleRecognizingCallback(o,a,c){}async processSpeechMessages(o){let a=!1;switch(o.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(o.textBody),a=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&await this.handleSpeechPhraseMessage(o.textBody),a=!0;break}return a}cancelRecognition(o,a,c,i,u){}async handleSpeechPhrase(o){const a=t.SimpleSpeechPhrase.fromJSON(o,this.privRequestSession.currentTurnAudioOffset),c=t.EnumTranslation.implTranslateRecognitionResult(a.RecognitionStatus);let i;const u=new e.PropertyCollection;if(u.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,o),this.privRequestSession.onPhraseRecognized(a.Offset+a.Duration),e.ResultReason.Canceled===c){const l=t.EnumTranslation.implTranslateCancelResult(a.RecognitionStatus),h=t.EnumTranslation.implTranslateCancelErrorCode(a.RecognitionStatus);await this.cancelRecognitionLocal(l,h,t.EnumTranslation.implTranslateErrorDetails(h))}else if(a.RecognitionStatus!==t.RecognitionStatus.EndOfDictation){if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])i=new e.SpeechRecognitionResult(this.privRequestSession.requestId,c,a.DisplayText,a.Duration,a.Offset,a.Language,a.LanguageDetectionConfidence,a.SpeakerId,void 0,a.asJson(),u);else{const l=t.DetailedSpeechPhrase.fromJSON(o,this.privRequestSession.currentTurnAudioOffset);i=new e.SpeechRecognitionResult(this.privRequestSession.requestId,c,l.Text,l.Duration,l.Offset,l.Language,l.LanguageDetectionConfidence,l.SpeakerId,void 0,l.asJson(),u)}this.handleRecognizedCallback(i,i.offset,this.privRequestSession.sessionId)}}handleSpeechHypothesis(o){const a=t.SpeechHypothesis.fromJSON(o,this.privRequestSession.currentTurnAudioOffset),c=new e.PropertyCollection;c.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,o);const i=new e.SpeechRecognitionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,a.Text,a.Duration,a.Offset,a.Language,a.LanguageDetectionConfidence,a.SpeakerId,void 0,a.asJson(),c);this.privRequestSession.onHypothesis(a.Offset),this.handleRecognizingCallback(i,a.Duration,this.privRequestSession.sessionId)}};return Xa.ConversationServiceRecognizer=r,Xa}var Vh={},Ny;function hN(){return Ny||(Ny=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognizerConfig=e.SpeechResultFormat=void 0;const t=le(),r=Pe(),s=Pr();(function(a){a[a.Simple=0]="Simple",a[a.Detailed=1]="Detailed"})(e.SpeechResultFormat||(e.SpeechResultFormat={}));class o{constructor(c,i){this.privSpeechServiceConfig=c||new r.SpeechServiceConfig(new r.Context(null)),this.privParameters=i,this.privMaxRetryCount=parseInt(i.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=i.getProperty(t.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(c){this.privRecognitionMode=c,this.privRecognitionActivityTimeout=c===s.RecognitionMode.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=s.RecognitionMode[c]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==s.RecognitionMode.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(t.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2")}set recognitionEndpointVersion(c){this.parameters.setProperty(t.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,c)}get sourceLanguageModels(){const c=[];let i=!1;if(this.autoDetectSourceLanguages!==void 0)for(const u of this.autoDetectSourceLanguages.split(",")){const l=u+t.PropertyId.SpeechServiceConnection_EndpointId.toString(),h=this.parameters.getProperty(l,void 0);h!==void 0?(c.push({language:u,endpoint:h}),i=!0):c.push({language:u,endpoint:""})}return i?c:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(c){this.privEnableSpeakerId=c}}e.RecognizerConfig=o}(Vh)),Vh}var Gh={},qy;function dN(){return qy||(qy=1,Object.defineProperty(Gh,"__esModule",{value:!0})),Gh}var ec={},Ly;function vN(){if(Ly)return ec;Ly=1,Object.defineProperty(ec,"__esModule",{value:!0}),ec.WebsocketMessageFormatter=void 0;const e=je(),t=`\r
`;let r=class{toConnectionMessage(o){const a=new e.Deferred;try{if(o.messageType===e.MessageType.Text){const c=o.textContent;let i={},u=null;if(c){const l=c.split(`\r
\r
`);l&&l.length>0&&(i=this.parseHeaders(l[0]),l.length>1&&(u=l[1]))}a.resolve(new e.ConnectionMessage(o.messageType,u,i,o.id))}else if(o.messageType===e.MessageType.Binary){const c=o.binaryContent;let i={},u=null;if(!c||c.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const l=new DataView(c),h=l.getInt16(0);if(c.byteLength<h+2)throw new Error("Invalid binary message format. Header content missing.");let v="";for(let f=0;f<h;f++)v+=String.fromCharCode(l.getInt8(f+2));i=this.parseHeaders(v),c.byteLength>h+2&&(u=c.slice(2+h)),a.resolve(new e.ConnectionMessage(o.messageType,u,i,o.id))}}catch(c){a.reject(`Error formatting the message. Error: ${c}`)}return a.promise}fromConnectionMessage(o){const a=new e.Deferred;try{if(o.messageType===e.MessageType.Text){const c=`${this.makeHeaders(o)}${t}${o.textBody?o.textBody:""}`;a.resolve(new e.RawWebsocketMessage(e.MessageType.Text,c,o.id))}else if(o.messageType===e.MessageType.Binary){const c=this.makeHeaders(o),i=o.binaryBody,u=this.stringToArrayBuffer(c),l=new Int8Array(u),h=l.byteLength,v=new Int8Array(2+h+(i?i.byteLength:0));if(v[0]=h>>8&255,v[1]=h&255,v.set(l,2),i){const d=new Int8Array(i);v.set(d,2+h)}const f=v.buffer;a.resolve(new e.RawWebsocketMessage(e.MessageType.Binary,f,o.id))}}catch(c){a.reject(`Error formatting the message. ${c}`)}return a.promise}makeHeaders(o){let a="";if(o.headers)for(const c in o.headers)c&&(a+=`${c}: ${o.headers[c]}${t}`);return a}parseHeaders(o){const a={};if(o){const c=o.match(/[^\r\n]+/g);if(a){for(const i of c)if(i){const u=i.indexOf(":"),l=u>0?i.substr(0,u).trim().toLowerCase():i,h=u>0&&i.length>u+1?i.substr(u+1).trim():"";a[l]=h}}}return a}stringToArrayBuffer(o){const a=new ArrayBuffer(o.length),c=new DataView(a);for(let i=0;i<o.length;i++)c.setUint8(i,o.charCodeAt(i));return a}};return ec.WebsocketMessageFormatter=r,ec}var tc={},By;function fN(){if(By)return tc;By=1,Object.defineProperty(tc,"__esModule",{value:!0}),tc.SpeechConnectionFactory=void 0;const e=Lt(),t=Pe(),r=le(),s=Fr(),o=Pe(),a=nr(),c=Xn(),i=Pr();let u=class extends s.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/stt/speech/universal/v"}async create(h,v,f){let d=h.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,void 0);const y=h.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region,void 0),m=s.ConnectionFactoryBase.getHostSuffix(y),b=h.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://"+y+".stt.speech"+m),S={},R=h.parameters.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId,void 0),_=h.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(R?(!d||d.search(c.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(S[c.QueryParameterNames.CustomSpeechDeploymentId]=R):_&&(!d||d.search(c.QueryParameterNames.Language)===-1)&&(S[c.QueryParameterNames.Language]=_),(!d||d.search(c.QueryParameterNames.Format)===-1)&&(S[c.QueryParameterNames.Format]=h.parameters.getProperty(t.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase()),h.autoDetectSourceLanguages!==void 0&&(S[c.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(h,S,d),d){const L=new URL(d),N=L.pathname;(N===""||N==="/")&&(L.pathname=this.universalUri+h.recognitionEndpointVersion,d=await s.ConnectionFactoryBase.getRedirectUrlFromEndpoint(L.toString()))}if(!d)switch(h.recognitionMode){case i.RecognitionMode.Conversation:h.parameters.getProperty(t.ForceDictationPropertyName,"false")==="true"?d=b+this.dictationRelativeUri:h.recognitionEndpointVersion!==void 0&&parseInt(h.recognitionEndpointVersion,10)>1?d=`${b}${this.universalUri}${h.recognitionEndpointVersion}`:d=b+this.conversationRelativeUri;break;case i.RecognitionMode.Dictation:d=b+this.dictationRelativeUri;break;default:h.recognitionEndpointVersion!==void 0&&parseInt(h.recognitionEndpointVersion,10)>1?d=`${b}${this.universalUri}${h.recognitionEndpointVersion}`:d=b+this.interactiveRelativeUri;break}const T={};v.token!==void 0&&v.token!==""&&(T[v.headerName]=v.token),T[a.HeaderNames.ConnectionId]=f,T.connectionId=f;const k=h.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",I=new e.WebsocketConnection(d,S,T,new o.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(h),k,f),z=I.uri;return h.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,z),I}};return tc.SpeechConnectionFactory=u,tc}var rc={},Fy;function gN(){if(Fy)return rc;Fy=1,Object.defineProperty(rc,"__esModule",{value:!0}),rc.ConversationTranscriberConnectionFactory=void 0;const e=Lt(),t=le(),r=Pe(),s=Fr(),o=Pe(),a=nr(),c=Xn();let i=class extends s.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/stt/speech/universal/v2"}async create(l,h,v){let f=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const d=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,void 0),y=s.ConnectionFactoryBase.getHostSuffix(d),m=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+d+".stt.speech"+y),b={},S=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),R=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(S?(!f||f.search(c.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(b[c.QueryParameterNames.CustomSpeechDeploymentId]=S):R&&(!f||f.search(c.QueryParameterNames.Language)===-1)&&(b[c.QueryParameterNames.Language]=R),l.autoDetectSourceLanguages!==void 0&&(b[c.QueryParameterNames.EnableLanguageId]="true"),this.setV2UrlParams(l,b,f),f){const z=new URL(f),L=z.pathname;(L===""||L==="/")&&(z.pathname=this.universalUri,f=await s.ConnectionFactoryBase.getRedirectUrlFromEndpoint(z.toString()))}f||(f=`${m}${this.universalUri}`);const _={};h.token!==void 0&&h.token!==""&&(_[h.headerName]=h.token),_[a.HeaderNames.ConnectionId]=v;const T=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",k=new e.WebsocketConnection(f,b,_,new o.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(l),T,v),I=k.uri;return l.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,I),k}setV2UrlParams(l,h,v){new Map([[t.PropertyId.Speech_SegmentationSilenceTimeoutMs,c.QueryParameterNames.SegmentationSilenceTimeoutMs],[t.PropertyId.SpeechServiceConnection_EnableAudioLogging,c.QueryParameterNames.EnableAudioLogging],[t.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,c.QueryParameterNames.EndSilenceTimeoutMs],[t.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,c.QueryParameterNames.InitialSilenceTimeoutMs],[t.PropertyId.SpeechServiceResponse_PostProcessingOption,c.QueryParameterNames.Postprocessing],[t.PropertyId.SpeechServiceResponse_ProfanityOption,c.QueryParameterNames.Profanity],[t.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,c.QueryParameterNames.StableIntermediateThreshold]]).forEach((y,m)=>{this.setUrlParameter(m,y,l,h,v)});const d=JSON.parse(l.parameters.getProperty(r.ServicePropertiesPropertyName,"{}"));Object.keys(d).forEach(y=>{h[y]=d[y]})}};return rc.ConversationTranscriberConnectionFactory=i,rc}var nc={},Uy;function mN(){if(Uy)return nc;Uy=1,Object.defineProperty(nc,"__esModule",{value:!0}),nc.TranscriberConnectionFactory=void 0;const e=Lt(),t=le(),r=Fr(),s=Pe(),o=nr(),a=Xn();let c=class extends r.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(u,l,h){let v=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const f=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,"centralus"),d=r.ConnectionFactoryBase.getHostSuffix(f),y="wss://transcribe."+f+".cts.speech"+d+this.multiaudioRelativeUri,m=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,y),b={};this.setQueryParams(b,u,v),v||(v=m);const S={};l.token!==void 0&&l.token!==""&&(S[l.headerName]=l.token),S[o.HeaderNames.ConnectionId]=h,u.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,v);const R=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new e.WebsocketConnection(v,b,S,new s.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(u),R,h))}setQueryParams(u,l,h){const v=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),f=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);v&&!(a.QueryParameterNames.CustomSpeechDeploymentId in u)&&(u[a.QueryParameterNames.CustomSpeechDeploymentId]=v),f&&!(a.QueryParameterNames.Language in u)&&(u[a.QueryParameterNames.Language]=f);const d=l.parameters.getProperty(t.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true",y=l.parameters.getProperty(s.OutputFormatPropertyName,t.OutputFormat[t.OutputFormat.Simple])!==t.OutputFormat[t.OutputFormat.Simple];(d||y)&&(u[a.QueryParameterNames.Format]=t.OutputFormat[t.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(l,u,h)}};return nc.TranscriberConnectionFactory=c,nc}var ic={},Hy;function SN(){if(Hy)return ic;Hy=1,Object.defineProperty(ic,"__esModule",{value:!0}),ic.TranslationConnectionFactory=void 0;const e=Lt(),t=W_(),r=le(),s=Fr(),o=Pe(),a=nr(),c=Xn(),i=Pr();let u=class extends s.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/stt/speech/universal/v2",this.translationV1Uri="/speech/translation/cognitiveservices/v1"}async create(h,v,f){let d=this.getEndpointUrl(h);const y={};if(this.setQueryParams(y,h,d),d){const R=new URL(d),_=R.pathname;(_===""||_==="/")&&(R.pathname=this.universalUri,d=await s.ConnectionFactoryBase.getRedirectUrlFromEndpoint(R.toString()))}const m={};v.token!==void 0&&v.token!==""&&(m[v.headerName]=v.token),m[a.HeaderNames.ConnectionId]=f,h.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,d);const b=h.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(d,y,m,new o.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(h),b,f)}getEndpointUrl(h,v){const f=h.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region),d=s.ConnectionFactoryBase.getHostSuffix(f);let y=h.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,void 0);return y?v===!0?y:t.StringUtils.formatString(y,{region:f}):(h.parameters.getProperty("SPEECH-ForceV1Endpoint","false")==="true"?y=h.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+d)+this.translationV1Uri:y=h.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+d)+this.universalUri,v===!0?y:t.StringUtils.formatString(y,{region:f}))}setQueryParams(h,v,f){h.from=v.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage),h.to=v.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages),h.scenario=v.recognitionMode===i.RecognitionMode.Interactive?"interactive":v.recognitionMode===i.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(v,h,f),this.setUrlParameter(r.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,c.QueryParameterNames.StableTranslation,v,h,f);const d=v.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);d!==void 0&&(h.voice=d,h.features="requireVoice")}};return ic.TranslationConnectionFactory=u,ic}var oc={},Wy;function $N(){if(Wy)return oc;Wy=1,Object.defineProperty(oc,"__esModule",{value:!0}),oc.EnumTranslation=void 0;const e=le(),t=Pe();let r=class{static implTranslateRecognitionResult(o,a=!1){let c=e.ResultReason.Canceled;switch(o){case t.RecognitionStatus.Success:c=e.ResultReason.RecognizedSpeech;break;case t.RecognitionStatus.EndOfDictation:c=a?e.ResultReason.RecognizedSpeech:e.ResultReason.NoMatch;break;case t.RecognitionStatus.NoMatch:case t.RecognitionStatus.InitialSilenceTimeout:case t.RecognitionStatus.BabbleTimeout:c=e.ResultReason.NoMatch;break;case t.RecognitionStatus.Error:case t.RecognitionStatus.BadRequest:case t.RecognitionStatus.Forbidden:default:c=e.ResultReason.Canceled;break}return c}static implTranslateCancelResult(o){let a=e.CancellationReason.EndOfStream;switch(o){case t.RecognitionStatus.Success:case t.RecognitionStatus.EndOfDictation:case t.RecognitionStatus.NoMatch:a=e.CancellationReason.EndOfStream;break;case t.RecognitionStatus.InitialSilenceTimeout:case t.RecognitionStatus.BabbleTimeout:case t.RecognitionStatus.Error:case t.RecognitionStatus.BadRequest:case t.RecognitionStatus.Forbidden:default:a=e.CancellationReason.Error;break}return a}static implTranslateCancelErrorCode(o){let a=e.CancellationErrorCode.NoError;switch(o){case t.RecognitionStatus.Error:a=e.CancellationErrorCode.ServiceError;break;case t.RecognitionStatus.TooManyRequests:a=e.CancellationErrorCode.TooManyRequests;break;case t.RecognitionStatus.BadRequest:a=e.CancellationErrorCode.BadRequestParameters;break;case t.RecognitionStatus.Forbidden:a=e.CancellationErrorCode.Forbidden;break;default:a=e.CancellationErrorCode.NoError;break}return a}static implTranslateErrorDetails(o){let a="The speech service encountered an internal error and could not continue.";switch(o){case e.CancellationErrorCode.Forbidden:a="The recognizer is using a free subscription that ran out of quota.";break;case e.CancellationErrorCode.BadRequestParameters:a="Invalid parameter or unsupported audio format in the request.";break;case e.CancellationErrorCode.TooManyRequests:a="The number of parallel requests exceeded the number of allowed concurrent transcriptions.";break}return a}};return oc.EnumTranslation=r,oc}var Jh={},Vy;function yN(){return Vy||(Vy=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognitionStatus=e.SynthesisStatus=void 0,function(t){t[t.Success=0]="Success",t[t.SynthesisEnd=1]="SynthesisEnd",t[t.Error=2]="Error"}(e.SynthesisStatus||(e.SynthesisStatus={})),function(t){t[t.Success=0]="Success",t[t.NoMatch=1]="NoMatch",t[t.InitialSilenceTimeout=2]="InitialSilenceTimeout",t[t.BabbleTimeout=3]="BabbleTimeout",t[t.Error=4]="Error",t[t.EndOfDictation=5]="EndOfDictation",t[t.TooManyRequests=6]="TooManyRequests",t[t.BadRequest=7]="BadRequest",t[t.Forbidden=8]="Forbidden"}(e.RecognitionStatus||(e.RecognitionStatus={}))}(Jh)),Jh}var sc={},Gy;function CN(){if(Gy)return sc;Gy=1,Object.defineProperty(sc,"__esModule",{value:!0}),sc.TranslationSynthesisEnd=void 0;const e=Pe();let t=class tP{constructor(s){this.privSynthesisEnd=JSON.parse(s),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=e.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=e.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(s){return new tP(s)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}};return sc.TranslationSynthesisEnd=t,sc}var ac={},Jy;function bN(){if(Jy)return ac;Jy=1,Object.defineProperty(ac,"__esModule",{value:!0}),ac.TranslationHypothesis=void 0;const e=Le(),t=sf();let r=class Jd{constructor(o,a){this.privTranslationHypothesis=o,this.privTranslationHypothesis.Offset+=a,this.privTranslationHypothesis.Translation.TranslationStatus=this.mapTranslationStatus(this.privTranslationHypothesis.Translation.TranslationStatus)}static fromJSON(o,a){return new Jd(JSON.parse(o),a)}static fromTranslationResponse(o,a){e.Contracts.throwIfNullOrUndefined(o,"translationHypothesis");const c=o.SpeechHypothesis;return o.SpeechHypothesis=void 0,c.Translation=o,new Jd(c,a)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){var o;return(o=this.privTranslationHypothesis.PrimaryLanguage)==null?void 0:o.Language}asJson(){const o={...this.privTranslationHypothesis};return o.Translation!==void 0?JSON.stringify({...o,TranslationStatus:t.TranslationStatus[o.Translation.TranslationStatus]}):JSON.stringify(o)}mapTranslationStatus(o){if(typeof o=="string")return t.TranslationStatus[o];if(typeof o=="number")return o}};return ac.TranslationHypothesis=r,ac}var cc={},Ky;function RN(){if(Ky)return cc;Ky=1,Object.defineProperty(cc,"__esModule",{value:!0}),cc.TranslationPhrase=void 0;const e=Le(),t=Pe(),r=sf();let s=class Kd{constructor(a,c){this.privTranslationPhrase=a,this.privTranslationPhrase.Offset+=c,this.privTranslationPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privTranslationPhrase.RecognitionStatus),this.privTranslationPhrase.Translation!==void 0&&(this.privTranslationPhrase.Translation.TranslationStatus=this.mapTranslationStatus(this.privTranslationPhrase.Translation.TranslationStatus))}static fromJSON(a,c){return new Kd(JSON.parse(a),c)}static fromTranslationResponse(a,c){e.Contracts.throwIfNullOrUndefined(a,"translationResponse");const i=a.SpeechPhrase;return a.SpeechPhrase=void 0,i.Translation=a,i.Text=i.DisplayText,new Kd(i,c)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){var a;return(a=this.privTranslationPhrase.PrimaryLanguage)==null?void 0:a.Language}get Confidence(){var a;return(a=this.privTranslationPhrase.PrimaryLanguage)==null?void 0:a.Confidence}get Translation(){return this.privTranslationPhrase.Translation}asJson(){const a={...this.privTranslationPhrase},c={...a,RecognitionStatus:t.RecognitionStatus[a.RecognitionStatus]};return a.Translation&&(c.Translation={...a.Translation,TranslationStatus:r.TranslationStatus[a.Translation.TranslationStatus]}),JSON.stringify(c)}mapRecognitionStatus(a){if(typeof a=="string")return t.RecognitionStatus[a];if(typeof a=="number")return a}mapTranslationStatus(a){if(typeof a=="string")return r.TranslationStatus[a];if(typeof a=="number")return a}};return cc.TranslationPhrase=s,cc}var uc={},Zy;function _N(){if(Zy)return uc;Zy=1,Object.defineProperty(uc,"__esModule",{value:!0}),uc.TranslationServiceRecognizer=void 0;const e=je(),t=le(),r=Pe();let s=class extends r.ConversationServiceRecognizer{constructor(a,c,i,u,l){super(a,c,i,u,l),this.privTranslationRecognizer=l,this.connectionEvents.attach(h=>{h.name==="ConnectionEstablishedEvent"&&this.privTranslationRecognizer.onConnection()})}async processTypeSpecificMessages(a){const c=new t.PropertyCollection;let i=await this.processSpeechMessages(a);if(i)return!0;const u=async h=>{if(c.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,h.asJson()),this.privRequestSession.onPhraseRecognized(h.Offset+h.Duration),h.RecognitionStatus===r.RecognitionStatus.Success){const v=this.fireEventForResult(h,c);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,v)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(v.result)}catch(f){this.privErrorCallback&&this.privErrorCallback(f)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{const v=r.EnumTranslation.implTranslateRecognitionResult(h.RecognitionStatus),f=new t.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,v,h.Text,h.Duration,h.Offset,h.Language,h.Confidence,void 0,h.asJson(),c);if(v===t.ResultReason.Canceled){const d=r.EnumTranslation.implTranslateCancelResult(h.RecognitionStatus),y=r.EnumTranslation.implTranslateCancelErrorCode(h.RecognitionStatus);await this.cancelRecognitionLocal(d,y,r.EnumTranslation.implTranslateErrorDetails(y))}else if(h.RecognitionStatus!==r.RecognitionStatus.EndOfDictation){const d=new t.TranslationRecognitionEventArgs(f,f.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,d)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(f)}catch(y){this.privErrorCallback&&this.privErrorCallback(y)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}i=!0}},l=h=>{c.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,h.asJson());const v=this.fireEventForResult(h,c);if(this.privRequestSession.onHypothesis(v.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,v)}catch{}i=!0};switch(a.messageType===e.MessageType.Text&&c.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,a.textBody),a.path.toLowerCase()){case"translation.hypothesis":l(r.TranslationHypothesis.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset));break;case"translation.response":const h=JSON.parse(a.textBody);if(h.SpeechPhrase)await u(r.TranslationPhrase.fromTranslationResponse(h,this.privRequestSession.currentTurnAudioOffset));else{const f=JSON.parse(a.textBody);f.SpeechHypothesis&&l(r.TranslationHypothesis.fromTranslationResponse(f,this.privRequestSession.currentTurnAudioOffset))}break;case"translation.phrase":await u(r.TranslationPhrase.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset));break;case"translation.synthesis":case"audio":this.sendSynthesisAudio(a.binaryBody,this.privRequestSession.sessionId),i=!0;break;case"audio.end":case"translation.synthesis.end":const v=r.TranslationSynthesisEnd.fromJSON(a.textBody);switch(v.SynthesisStatus){case r.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){const f=new t.TranslationSynthesisResult(t.ResultReason.Canceled,void 0),d=new t.TranslationSynthesisEventArgs(f,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,d)}catch{}}if(this.privTranslationRecognizer.canceled){const f=new t.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,t.CancellationReason.Error,v.FailureReason,t.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,f)}catch{}}break;case r.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId);break}i=!0;break}return i}cancelRecognition(a,c,i,u,l){const h=new t.PropertyCollection;if(h.setProperty(r.CancellationErrorCodePropertyName,t.CancellationErrorCode[u]),this.privTranslationRecognizer.canceled){const v=new t.TranslationRecognitionCanceledEventArgs(a,i,l,u,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,v)}catch{}}if(this.privSuccessCallback){const v=new t.TranslationRecognitionResult(void 0,c,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,l,void 0,h);try{this.privSuccessCallback(v),this.privSuccessCallback=void 0}catch{}}}handleRecognizingCallback(a,c,i){try{const u=new t.TranslationRecognitionEventArgs(t.TranslationRecognitionResult.fromSpeechRecognitionResult(a),c,i);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,u)}catch{}}handleRecognizedCallback(a,c,i){try{const u=new t.TranslationRecognitionEventArgs(t.TranslationRecognitionResult.fromSpeechRecognitionResult(a),c,i);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,u)}catch{}}fireEventForResult(a,c){let i;if(a.Translation.Translations!==void 0){i=new t.Translations;for(const d of a.Translation.Translations)i.set(d.Language,d.Text||d.DisplayText)}let u,l;a instanceof r.TranslationPhrase?(a.Translation&&a.Translation.TranslationStatus===e.TranslationStatus.Success?u=t.ResultReason.TranslatedSpeech:u=t.ResultReason.RecognizedSpeech,l=a.Confidence):u=t.ResultReason.TranslatingSpeech;const h=a.Language,v=new t.TranslationRecognitionResult(i,this.privRequestSession.requestId,u,a.Text,a.Duration,a.Offset,h,l,a.Translation.FailureReason,a.asJson(),c);return new t.TranslationRecognitionEventArgs(v,a.Offset,this.privRequestSession.sessionId)}sendSynthesisAudio(a,c){const i=a===void 0?t.ResultReason.SynthesizingAudioCompleted:t.ResultReason.SynthesizingAudio,u=new t.TranslationSynthesisResult(i,a),l=new t.TranslationSynthesisEventArgs(u,c);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,l)}catch{}}};return uc.TranslationServiceRecognizer=s,uc}var lc={},Qy;function PN(){if(Qy)return lc;Qy=1,Object.defineProperty(lc,"__esModule",{value:!0}),lc.SpeechDetected=void 0;let e=class rP{constructor(r,s){this.privSpeechStartDetected=JSON.parse(r),this.privSpeechStartDetected.Offset+=s}static fromJSON(r,s){return new rP(r,s)}get Offset(){return this.privSpeechStartDetected.Offset}};return lc.SpeechDetected=e,lc}var pc={},Yy;function wN(){if(Yy)return pc;Yy=1,Object.defineProperty(pc,"__esModule",{value:!0}),pc.SpeechHypothesis=void 0;let e=class nP{constructor(r,s){this.privSpeechHypothesis=JSON.parse(r),this.updateOffset(s)}static fromJSON(r,s){return new nP(r,s)}updateOffset(r){this.privSpeechHypothesis.Offset+=r}asJson(){return JSON.stringify(this.privSpeechHypothesis)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}};return pc.SpeechHypothesis=e,pc}var hc={},Xy;function EN(){if(Xy)return hc;Xy=1,Object.defineProperty(hc,"__esModule",{value:!0}),hc.SpeechKeyword=void 0;let e=class iP{constructor(r,s){this.privSpeechKeyword=JSON.parse(r),this.privSpeechKeyword.Offset+=s}static fromJSON(r,s){return new iP(r,s)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}asJson(){return JSON.stringify(this.privSpeechKeyword)}};return hc.SpeechKeyword=e,hc}var dc={},eC;function AN(){if(eC)return dc;eC=1,Object.defineProperty(dc,"__esModule",{value:!0}),dc.SpeechServiceRecognizer=void 0;const e=le(),t=Pe();let r=class extends t.ServiceRecognizerBase{constructor(o,a,c,i,u){super(o,a,c,i,u),this.privSpeechRecognizer=u}async processTypeSpecificMessages(o){let a;const c=new e.PropertyCollection;let i=!1;switch(o.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const u=t.SpeechHypothesis.fromJSON(o.textBody,this.privRequestSession.currentTurnAudioOffset);c.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,u.asJson()),a=new e.SpeechRecognitionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,u.Text,u.Duration,u.Offset,u.Language,u.LanguageDetectionConfidence,void 0,void 0,u.asJson(),c),this.privRequestSession.onHypothesis(u.Offset);const l=new e.SpeechRecognitionEventArgs(a,u.Offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,l)}catch{}i=!0;break;case"speech.phrase":const h=t.SimpleSpeechPhrase.fromJSON(o.textBody,this.privRequestSession.currentTurnAudioOffset);c.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,h.asJson());const v=t.EnumTranslation.implTranslateRecognitionResult(h.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(h.Offset+h.Duration),e.ResultReason.Canceled===v){const f=t.EnumTranslation.implTranslateCancelResult(h.RecognitionStatus),d=t.EnumTranslation.implTranslateCancelErrorCode(h.RecognitionStatus);await this.cancelRecognitionLocal(f,d,t.EnumTranslation.implTranslateErrorDetails(d))}else{if(h.RecognitionStatus===t.RecognitionStatus.EndOfDictation)break;if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])a=new e.SpeechRecognitionResult(this.privRequestSession.requestId,v,h.DisplayText,h.Duration,h.Offset,h.Language,h.LanguageDetectionConfidence,void 0,void 0,h.asJson(),c);else{const d=t.DetailedSpeechPhrase.fromJSON(o.textBody,this.privRequestSession.currentTurnAudioOffset);c.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,d.asJson()),a=new e.SpeechRecognitionResult(this.privRequestSession.requestId,v,d.RecognitionStatus===t.RecognitionStatus.Success?d.NBest[0].Display:"",d.Duration,d.Offset,d.Language,d.LanguageDetectionConfidence,void 0,void 0,d.asJson(),c)}const f=new e.SpeechRecognitionEventArgs(a,a.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,f)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(d){this.privErrorCallback&&this.privErrorCallback(d)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}i=!0;break}return i}cancelRecognition(o,a,c,i,u){const l=new e.PropertyCollection;if(l.setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[i]),this.privSpeechRecognizer.canceled){const h=new e.SpeechRecognitionCanceledEventArgs(c,u,i,void 0,o);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,h)}catch{}}if(this.privSuccessCallback){const h=new e.SpeechRecognitionResult(a,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,u,void 0,l);try{this.privSuccessCallback(h),this.privSuccessCallback=void 0}catch{}}}};return dc.SpeechServiceRecognizer=r,dc}var vc={},Kh={},tC;function TN(){return tC||(tC=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.IdentityProvider=e.SpeakerDiarizationMode=void 0,function(t){t.None="None",t.Identity="Identity",t.Anonymous="Anonymous"}(e.SpeakerDiarizationMode||(e.SpeakerDiarizationMode={})),function(t){t.CallCenter="CallCenter"}(e.IdentityProvider||(e.IdentityProvider={}))}(Kh)),Kh}var rC;function IN(){if(rC)return vc;rC=1,Object.defineProperty(vc,"__esModule",{value:!0}),vc.ConversationTranscriptionServiceRecognizer=void 0;const e=le(),t=Pe(),r=TN(),s=Pr();let o=class extends t.ServiceRecognizerBase{constructor(c,i,u,l,h){super(c,i,u,l,h),this.privConversationTranscriber=h,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){const c=this.privSpeechContext.getContext().phraseDetection||{};c.mode=s.RecognitionMode.Conversation;const i={};i.mode=r.SpeakerDiarizationMode.Anonymous,i.audioSessionId=this.privDiarizationSessionId,i.audioOffsetMs=0,i.diarizeIntermediates=this.privRecognizerConfig.parameters.getProperty(e.PropertyId.SpeechServiceResponse_DiarizeIntermediateResults,"false")==="true",c.speakerDiarization=i,this.privSpeechContext.getContext().phraseDetection=c}}async processTypeSpecificMessages(c){let i;const u=new e.PropertyCollection;u.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,c.textBody);let l=!1;switch(c.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const h=t.SpeechHypothesis.fromJSON(c.textBody,this.privRequestSession.currentTurnAudioOffset);i=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,h.Text,h.Duration,h.Offset,h.Language,h.LanguageDetectionConfidence,h.SpeakerId,void 0,h.asJson(),u),this.privRequestSession.onHypothesis(h.Offset);const v=new e.ConversationTranscriptionEventArgs(i,h.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,v)}catch{}l=!0;break;case"speech.phrase":const f=t.SimpleSpeechPhrase.fromJSON(c.textBody,this.privRequestSession.currentTurnAudioOffset),d=t.EnumTranslation.implTranslateRecognitionResult(f.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(f.Offset+f.Duration),e.ResultReason.Canceled===d){const y=t.EnumTranslation.implTranslateCancelResult(f.RecognitionStatus),m=t.EnumTranslation.implTranslateCancelErrorCode(f.RecognitionStatus);await this.cancelRecognitionLocal(y,m,t.EnumTranslation.implTranslateErrorDetails(m))}else if(!(this.privRequestSession.isSpeechEnded&&d===e.ResultReason.NoMatch&&f.RecognitionStatus!==t.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])i=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,d,f.DisplayText,f.Duration,f.Offset,f.Language,f.LanguageDetectionConfidence,f.SpeakerId,void 0,f.asJson(),u);else{const m=t.DetailedSpeechPhrase.fromJSON(c.textBody,this.privRequestSession.currentTurnAudioOffset);i=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,d,m.RecognitionStatus===t.RecognitionStatus.Success?m.NBest[0].Display:void 0,m.Duration,m.Offset,m.Language,m.LanguageDetectionConfidence,f.SpeakerId,void 0,m.asJson(),u)}const y=new e.ConversationTranscriptionEventArgs(i,i.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,y)}catch{}}l=!0;break}return l}cancelRecognition(c,i,u,l,h){if(new e.PropertyCollection().setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[l]),this.privConversationTranscriber.canceled){const f=new e.ConversationTranscriptionCanceledEventArgs(u,h,l,void 0,c);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,f)}catch{}}}};return vc.ConversationTranscriptionServiceRecognizer=o,vc}var fc={},nC;function DN(){if(nC)return fc;nC=1,Object.defineProperty(fc,"__esModule",{value:!0}),fc.TranscriptionServiceRecognizer=void 0;const e=je(),t=le(),r=Pe(),s=wo();let o=class extends r.ConversationServiceRecognizer{constructor(c,i,u,l,h){super(c,i,u,l,h),this.privTranscriberRecognizer=h,this.sendPrePayloadJSONOverride=v=>this.sendTranscriptionStartJSON(v),this.privRecognizerConfig.parameters.getProperty(t.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)==="true"&&this.privSpeechContext.setWordLevelTimings()}async sendSpeechEventAsync(c,i){if(this.privRequestSession.isRecognizing){const u=await this.fetchConnection();await this.sendSpeechEvent(u,this.createSpeechEventPayload(c,i))}}async sendMeetingSpeechEventAsync(c,i){if(this.privRequestSession.isRecognizing){const u=await this.fetchConnection();await this.sendSpeechEvent(u,this.createMeetingSpeechEventPayload(c,i))}}processTypeSpecificMessages(c){return this.processSpeechMessages(c)}handleRecognizedCallback(c,i,u){try{const l=new t.SpeechRecognitionEventArgs(c,i,u);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,l),this.privSuccessCallback){try{this.privSuccessCallback(c)}catch(h){this.privErrorCallback&&this.privErrorCallback(h)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch{}}handleRecognizingCallback(c,i,u){try{const l=new t.SpeechRecognitionEventArgs(c,i,u);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,l)}catch{}}cancelRecognition(c,i,u,l,h){const v=new t.PropertyCollection;if(v.setProperty(r.CancellationErrorCodePropertyName,t.CancellationErrorCode[l]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){const f=new t.MeetingTranscriptionCanceledEventArgs(u,h,l,void 0,c);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,f)}catch{}}}else if(this.privTranscriberRecognizer.canceled){const f=new t.ConversationTranscriptionCanceledEventArgs(u,h,l,void 0,c);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,f)}catch{}}if(this.privSuccessCallback){const f=new t.SpeechRecognitionResult(i,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,h,void 0,v);try{this.privSuccessCallback(f),this.privSuccessCallback=void 0}catch{}}}async sendTranscriptionStartJSON(c){if(await this.sendSpeechContext(c,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){const i=this.privTranscriberRecognizer.getMeetingInfo(),u=this.createMeetingSpeechEventPayload(i,"start");await this.sendSpeechEvent(c,u)}else{const i=this.privTranscriberRecognizer.getConversationInfo(),u=this.createSpeechEventPayload(i,"start");await this.sendSpeechEvent(c,u)}await this.sendWaveHeader(c)}sendSpeechEvent(c,i){const u=JSON.stringify(i);if(u)return c.send(new s.SpeechConnectionMessage(e.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",u))}createSpeechEventPayload(c,i){const u={id:"meeting",name:i,meeting:c.conversationProperties};return u.meeting.id=c.id,u.meeting.attendees=c.participants,u}createMeetingSpeechEventPayload(c,i){const u={id:"meeting",name:i,meeting:c.meetingProperties};return u.meeting.id=c.id,u.meeting.attendees=c.participants,u}};return fc.TranscriptionServiceRecognizer=o,fc}var gc={},iC;function kN(){if(iC)return gc;iC=1,Object.defineProperty(gc,"__esModule",{value:!0}),gc.DetailedSpeechPhrase=void 0;const e=Pe();let t=class oP{constructor(s,o){this.privDetailedSpeechPhrase=JSON.parse(s),this.privDetailedSpeechPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privDetailedSpeechPhrase.RecognitionStatus),this.updateOffsets(o)}static fromJSON(s,o){return new oP(s,o)}updateOffsets(s){if(this.privDetailedSpeechPhrase.Offset+=s,this.privDetailedSpeechPhrase.NBest)for(const o of this.privDetailedSpeechPhrase.NBest){if(o.Words)for(const a of o.Words)a.Offset+=s;if(o.DisplayWords)for(const a of o.DisplayWords)a.Offset+=s}}asJson(){const s={...this.privDetailedSpeechPhrase};return JSON.stringify({...s,RecognitionStatus:e.RecognitionStatus[s.RecognitionStatus]})}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}mapRecognitionStatus(s){if(typeof s=="string")return e.RecognitionStatus[s];if(typeof s=="number")return s}};return gc.DetailedSpeechPhrase=t,gc}var mc={},oC;function MN(){if(oC)return mc;oC=1,Object.defineProperty(mc,"__esModule",{value:!0}),mc.SimpleSpeechPhrase=void 0;const e=Pe();let t=class sP{constructor(s,o=0){this.privSimpleSpeechPhrase=JSON.parse(s),this.privSimpleSpeechPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privSimpleSpeechPhrase.RecognitionStatus),this.updateOffset(o)}static fromJSON(s,o){return new sP(s,o)}updateOffset(s){this.privSimpleSpeechPhrase.Offset+=s}asJson(){const s={...this.privSimpleSpeechPhrase};return JSON.stringify({...s,RecognitionStatus:e.RecognitionStatus[s.RecognitionStatus]})}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}mapRecognitionStatus(s){if(typeof s=="string")return e.RecognitionStatus[s];if(typeof s=="number")return s}};return mc.SimpleSpeechPhrase=t,mc}var Sc={},sC;function ON(){if(sC)return Sc;sC=1,Object.defineProperty(Sc,"__esModule",{value:!0}),Sc.AddedLmIntent=void 0;let e=class{constructor(r,s){this.modelImpl=r,this.intentName=s}};return Sc.AddedLmIntent=e,Sc}var $c={},aC;function jN(){if(aC)return $c;aC=1,Object.defineProperty($c,"__esModule",{value:!0}),$c.IntentServiceRecognizer=void 0;const e=je(),t=le(),r=Pe();let s=class extends r.ServiceRecognizerBase{constructor(a,c,i,u,l){super(a,c,i,u,l),this.privIntentRecognizer=l,this.privIntentDataSent=!1,u.recognitionEndpointVersion="1"}setIntents(a,c){this.privAddedLmIntents=a,this.privUmbrellaIntent=c,this.privIntentDataSent=!0}processTypeSpecificMessages(a){let c,i,u=!1;const l=new t.PropertyCollection;switch(a.messageType===e.MessageType.Text&&l.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,a.textBody),a.path.toLowerCase()){case"speech.hypothesis":const v=r.SpeechHypothesis.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset);if(c=new t.IntentRecognitionResult(void 0,this.privRequestSession.requestId,t.ResultReason.RecognizingIntent,v.Text,v.Duration,v.Offset,v.Language,v.LanguageDetectionConfidence,void 0,v.asJson(),l),this.privRequestSession.onHypothesis(c.offset),i=new t.IntentRecognitionEventArgs(c,v.Offset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,i)}catch{}u=!0;break;case"speech.phrase":const f=r.SimpleSpeechPhrase.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset);c=new t.IntentRecognitionResult(void 0,this.privRequestSession.requestId,r.EnumTranslation.implTranslateRecognitionResult(f.RecognitionStatus),f.DisplayText,f.Duration,f.Offset,f.Language,f.LanguageDetectionConfidence,void 0,f.asJson(),l),i=new t.IntentRecognitionEventArgs(c,c.offset,this.privRequestSession.sessionId);const d=()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,i)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(c)}catch(m){this.privErrorCallback&&this.privErrorCallback(m)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}};this.privIntentDataSent===!1||t.ResultReason.NoMatch===i.result.reason?(this.privRequestSession.onPhraseRecognized(i.offset+i.result.duration),d()):this.privPendingIntentArgs=i,u=!0;break;case"response":if(i=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,i===void 0){if(a.textBody==="")return;i=new t.IntentRecognitionEventArgs(new t.IntentRecognitionResult,0,this.privRequestSession.sessionId)}const y=r.IntentResponse.fromJSON(a.textBody);if(y!==null&&y.topScoringIntent&&y.topScoringIntent.intent){let m=this.privAddedLmIntents[y.topScoringIntent.intent];if(this.privUmbrellaIntent!==void 0&&(m=this.privUmbrellaIntent),m){const b=m===void 0||m.intentName===void 0?y.topScoringIntent.intent:m.intentName;let S=i.result.reason;b!==void 0&&(S=t.ResultReason.RecognizedIntent);const R=i.result.properties!==void 0?i.result.properties:new t.PropertyCollection;R.setProperty(t.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,a.textBody),i=new t.IntentRecognitionEventArgs(new t.IntentRecognitionResult(b,i.result.resultId,S,i.result.text,i.result.duration,i.result.offset,void 0,void 0,i.result.errorDetails,i.result.json,R),i.offset,i.sessionId)}}if(this.privRequestSession.onPhraseRecognized(i.offset+i.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,i)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(i.result)}catch(m){this.privErrorCallback&&this.privErrorCallback(m)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}u=!0;break}const h=new e.Deferred;return h.resolve(u),h.promise}cancelRecognition(a,c,i,u,l){const h=new t.PropertyCollection;if(h.setProperty(r.CancellationErrorCodePropertyName,t.CancellationErrorCode[u]),this.privIntentRecognizer.canceled){const v=new t.IntentRecognitionCanceledEventArgs(i,l,u,void 0,void 0,a);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,v)}catch{}}if(this.privSuccessCallback){const v=new t.IntentRecognitionResult(void 0,c,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,l,void 0,h);try{this.privSuccessCallback(v),this.privSuccessCallback=void 0}catch{}}}};return $c.IntentServiceRecognizer=s,$c}var yc={},cC;function zN(){if(cC)return yc;cC=1,Object.defineProperty(yc,"__esModule",{value:!0}),yc.IntentResponse=void 0;let e=class aP{constructor(r){r===""?this.privIntentResponse={}:this.privIntentResponse=JSON.parse(r)}static fromJSON(r){return new aP(r)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}};return yc.IntentResponse=e,yc}var Zh={},uC;function xN(){return uC||(uC=1,Object.defineProperty(Zh,"__esModule",{value:!0})),Zh}var Cc={},bc={},lC;function NN(){if(lC)return bc;lC=1,Object.defineProperty(bc,"__esModule",{value:!0}),bc.ServiceTelemetryListener=void 0;const e=je(),t=hf();class r{constructor(o,a,c){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=o,this.privAudioSourceId=a,this.privAudioNodeId=c,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(o){o>0&&this.privPhraseLatencies.push(Date.now()-o)}hypothesisReceived(o){o>0&&this.privHypothesisLatencies.push(Date.now()-o)}onEvent(o){this.privIsDisposed||(o instanceof t.RecognitionTriggeredEvent&&o.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:o.eventTime,Name:"ListeningTrigger",Start:o.eventTime}),o instanceof e.AudioStreamNodeAttachingEvent&&o.audioSourceId===this.privAudioSourceId&&o.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=o.eventTime),o instanceof e.AudioStreamNodeAttachedEvent&&o.audioSourceId===this.privAudioSourceId&&o.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=o.eventTime),o instanceof e.AudioSourceErrorEvent&&o.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:o.eventTime,Error:o.error,Name:"Microphone",Start:this.privMicStartTime})),o instanceof e.AudioStreamNodeErrorEvent&&o.audioSourceId===this.privAudioSourceId&&o.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:o.eventTime,Error:o.error,Name:"Microphone",Start:this.privMicStartTime})),o instanceof e.AudioStreamNodeDetachedEvent&&o.audioSourceId===this.privAudioSourceId&&o.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:o.eventTime,Name:"Microphone",Start:this.privMicStartTime})),o instanceof t.ConnectingToServiceEvent&&o.requestId===this.privRequestId&&(this.privConnectionId=o.sessionId),o instanceof e.ConnectionStartEvent&&o.connectionId===this.privConnectionId&&(this.privConnectionStartTime=o.eventTime),o instanceof e.ConnectionEstablishedEvent&&o.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:o.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),o instanceof e.ConnectionEstablishErrorEvent&&o.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:o.eventTime,Error:this.getConnectionError(o.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),o instanceof e.ConnectionMessageReceivedEvent&&o.connectionId===this.privConnectionId&&o.message&&o.message.headers&&o.message.headers.path&&(this.privReceivedMessages[o.message.headers.path]||(this.privReceivedMessages[o.message.headers.path]=new Array),this.privReceivedMessages[o.message.headers.path].length<50&&this.privReceivedMessages[o.message.headers.path].push(o.networkReceivedTime)))}getTelemetry(){const o=new Array;this.privListeningTriggerMetric&&o.push(this.privListeningTriggerMetric),this.privMicMetric&&o.push(this.privMicMetric),this.privConnectionEstablishMetric&&o.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&o.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&o.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const a={Metrics:o,ReceivedMessages:this.privReceivedMessages},c=JSON.stringify(a);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],c}get hasTelemetry(){return Object.keys(this.privReceivedMessages).length!==0||this.privListeningTriggerMetric!==null||this.privMicMetric!==null||this.privConnectionEstablishMetric!==null||this.privPhraseLatencies.length!==0||this.privHypothesisLatencies.length!==0}dispose(){this.privIsDisposed=!0}getConnectionError(o){switch(o){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+o.toString()}}}return bc.ServiceTelemetryListener=r,bc}var pC;function qN(){if(pC)return Cc;pC=1,Object.defineProperty(Cc,"__esModule",{value:!0}),Cc.RequestSession=void 0;const e=je(),t=hf(),r=NN();let s=class{constructor(a){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=a,this.privRequestId=(0,e.createNoDashGuid)(),this.privAudioNodeId=(0,e.createNoDashGuid)(),this.privTurnDeferral=new e.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(a){this.privServiceTelemetryListener&&this.privDetachables.push(a.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new r.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new t.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}async onAudioSourceAttachCompleted(a,c){this.privAudioNode=a,this.privIsAudioNodeDetached=!1,c?await this.onComplete():this.onEvent(new t.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onPreConnectionStart(a,c){this.privAuthFetchEventId=a,this.privSessionId=c,this.onEvent(new t.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}async onAuthCompleted(a){a&&await this.onComplete()}async onConnectionEstablishCompleted(a,c){if(a===200){this.onEvent(new t.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privBytesSent=0;return}else a===403&&await this.onComplete()}async onServiceTurnEndResponse(a){this.privTurnDeferral.resolve(),!a||this.isSpeechEnded?(await this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())}onSpeechContext(){this.privRequestId=(0,e.createNoDashGuid)()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new e.Deferred}onHypothesis(a){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(a)))}onPhraseRecognized(a){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(a)),this.onServiceRecognized(a)}onServiceRecognized(a){this.privLastRecoOffset=a,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(a),this.privConnectionAttempts=0}onAudioSent(a){this.privBytesSent+=a,this.privRecognitionBytesSent+=a}onRetryConnection(){this.privConnectionAttempts++}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const a of this.privDetachables)await a.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}async onStopRecognizing(){await this.onComplete()}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(a){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(a),e.Events.instance.onEvent(a)}async onComplete(){this.privIsRecognizing&&(this.privIsRecognizing=!1,await this.detachAudioNode())}async detachAudioNode(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&await this.privAudioNode.detach())}};return Cc.RequestSession=s,Cc}var Rc={},Qh={},hC;function LN(){return hC||(hC=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TentativePhraseResultsOption=e.OutputFormat=e.PhraseExtension=e.PhraseOption=void 0,function(t){t.WordTimings="WordTimings",t.SNR="SNR",t.Pronunciation="Pronunciation",t.WordPronunciation="WordPronunciation",t.WordConfidence="WordConfidence",t.Words="Words",t.Sentiment="Sentiment",t.PronunciationAssessment="PronunciationAssessment",t.ContentAssessment="ContentAssessment",t.PhraseAMScore="PhraseAMScore",t.PhraseLMScore="PhraseLMScore",t.WordAMScore="WordAMScore",t.WordLMScore="WordLMScore",t.RuleTree="RuleTree",t.NBestTimings="NBestTimings",t.DecoderDiagnostics="DecoderDiagnostics",t.DisplayWordTimings="DisplayWordTimings",t.DisplayWords="DisplayWords"}(e.PhraseOption||(e.PhraseOption={})),function(t){t.Graph="Graph",t.Corrections="Corrections",t.Sentiment="Sentiment"}(e.PhraseExtension||(e.PhraseExtension={})),function(t){t.Simple="Simple",t.Detailed="Detailed"}(e.OutputFormat||(e.OutputFormat={})),function(t){t.None="None",t.Always="Always"}(e.TentativePhraseResultsOption||(e.TentativePhraseResultsOption={}))}(Qh)),Qh}var dC;function BN(){if(dC)return Rc;dC=1,Object.defineProperty(Rc,"__esModule",{value:!0}),Rc.SpeechContext=void 0;const e=Pr(),t=LN();let r=class{constructor(o){this.privContext={},this.privDynamicGrammar=o}getContext(){return this.privContext}setPronunciationAssessmentParams(o,a,c=!1){this.privContext.phraseDetection===void 0&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment===void 0&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(o)||{},c&&(this.privContext.phraseDetection.mode=e.RecognitionMode.Conversation),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push(t.PhraseOption.PronunciationAssessment),this.privContext.phraseOutput.detailed.options.indexOf(t.PhraseOption.SNR)===-1&&this.privContext.phraseOutput.detailed.options.push(t.PhraseOption.SNR),a&&(this.privContext.phraseDetection.enrichment.contentAssessment={topic:a},this.privContext.phraseOutput.detailed.options.push(t.PhraseOption.ContentAssessment))}setDetailedOutputFormat(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format=t.OutputFormat.Detailed}setWordLevelTimings(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format=t.OutputFormat.Detailed,this.privContext.phraseOutput.detailed.options.indexOf(t.PhraseOption.WordTimings)===-1&&this.privContext.phraseOutput.detailed.options.push(t.PhraseOption.WordTimings)}setSpeakerDiarizationAudioOffsetMs(o){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=o}toJSON(){const o=this.privDynamicGrammar.generateGrammarObject();return this.privContext.dgi=o,JSON.stringify(this.privContext)}};return Rc.SpeechContext=r,Rc}var _c={},Yh={},vC;function FN(){return vC||(vC=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SubstringMatchType=e.GroupType=void 0,function(t){t.IntentText="IntentText",t.IntentEntity="IntentEntity",t.Generic="Generic",t.People="People",t.Place="Place",t.DynamicEntity="DynamicEntity"}(e.GroupType||(e.GroupType={})),function(t){t.None="None",t.LeftRooted="LeftRooted",t.PartialName="PartialName",t.MiddleOfSentence="MiddleOfSentence"}(e.SubstringMatchType||(e.SubstringMatchType={}))}(Yh)),Yh}var fC;function UN(){if(fC)return _c;fC=1,Object.defineProperty(_c,"__esModule",{value:!0}),_c.DynamicGrammarBuilder=void 0;const e=FN();let t=class{constructor(){this.privWeight=1}addPhrase(s){this.privPhrases||(this.privPhrases=[]),s instanceof Array?this.privPhrases=this.privPhrases.concat(s):this.privPhrases.push(s)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(s){this.privGrammars||(this.privGrammars=[]),s instanceof Array?this.privGrammars=this.privGrammars.concat(s):this.privGrammars.push(s)}clearGrammars(){this.privGrammars=void 0}setWeight(s){this.privWeight=s}generateGrammarObject(){if(this.privGrammars===void 0&&this.privPhrases===void 0)return;const s={};if(s.referenceGrammars=this.privGrammars,this.privPhrases!==void 0&&this.privPhrases.length!==0){const o=[];this.privPhrases.forEach(a=>{o.push({text:a})}),s.groups=[{type:e.GroupType.Generic,items:o}],s.bias=this.privWeight}return s}};return _c.DynamicGrammarBuilder=t,_c}var Pc={},wc={},Ec={},Xh={},gC;function cP(){return gC||(gC=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MessageDataStreamType=e.ActivityPayloadResponse=void 0;class t{constructor(s){this.privActivityResponse=JSON.parse(s)}static fromJSON(s){return new t(s)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}}e.ActivityPayloadResponse=t,function(r){r[r.None=0]="None",r[r.TextToSpeechAudio=1]="TextToSpeechAudio"}(e.MessageDataStreamType||(e.MessageDataStreamType={}))}(Xh)),Xh}var mC;function HN(){if(mC)return Ec;mC=1,Object.defineProperty(Ec,"__esModule",{value:!0}),Ec.DialogServiceTurnState=void 0;const e=$u(),t=Po(),r=cP();let s=class{constructor(a,c){this.privRequestId=c,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=a,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(a,c){return a.messageDataStreamType===r.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=t.AudioOutputStream.createPullStream(),this.privAudioStream.format=c!==void 0?c:e.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){this.privAudioStream!==null&&!this.privAudioStream.isClosed&&this.privAudioStream.close()}complete(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(()=>{this.privTurnManager.CompleteTurn(this.privRequestId)},2e3)}};return Ec.DialogServiceTurnState=s,Ec}var SC;function WN(){if(SC)return wc;SC=1,Object.defineProperty(wc,"__esModule",{value:!0}),wc.DialogServiceTurnStateManager=void 0;const e=Xr(),t=HN();let r=class{constructor(){this.privTurnMap=new Map}StartTurn(o){if(this.privTurnMap.has(o))throw new e.InvalidOperationError("Service error: There is already a turn with id:"+o);const a=new t.DialogServiceTurnState(this,o);return this.privTurnMap.set(o,a),this.privTurnMap.get(o)}GetTurn(o){return this.privTurnMap.get(o)}CompleteTurn(o){if(!this.privTurnMap.has(o))throw new e.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+o);const a=this.privTurnMap.get(o);return a.complete(),this.privTurnMap.delete(o),a}};return wc.DialogServiceTurnStateManager=r,wc}var ed={},$C;function VN(){return $C||($C=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.InvocationSource=void 0,function(t){t.None="None",t.VoiceActivationWithKeyword="VoiceActivationWithKeyword"}(e.InvocationSource||(e.InvocationSource={}))}(ed)),ed}var td={},yC;function GN(){return yC||(yC=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.OnRejectAction=e.KeywordDetectionType=void 0,function(t){t.StartTrigger="StartTrigger"}(e.KeywordDetectionType||(e.KeywordDetectionType={})),function(t){t.EndOfTurn="EndOfTurn",t.Continue="Continue"}(e.OnRejectAction||(e.OnRejectAction={}))}(td)),td}var CC;function JN(){if(CC)return Pc;CC=1,Object.defineProperty(Pc,"__esModule",{value:!0}),Pc.DialogServiceAdapter=void 0;const e=Lt(),t=f_(),r=je(),s=$u(),o=le(),a=WN(),c=Pe(),i=cP(),u=VN(),l=GN(),h=wo();let v=class extends c.ServiceRecognizerBase{constructor(d,y,m,b,S){super(d,y,m,b,S),this.privEvents=new r.EventSource,this.privDialogServiceConnector=S,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new a.DialogServiceTurnStateManager,this.recognizeOverride=(R,_,T)=>this.listenOnce(R,_,T),this.postConnectImplOverride=R=>this.dialogConnectImpl(R),this.configConnectionOverride=R=>this.configConnection(R),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=m,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach(R=>{R.name==="ConnectionClosedEvent"&&(this.terminateMessageLoop=!0)})}async sendMessage(d){const y=(0,r.createGuid)(),m=(0,r.createNoDashGuid)(),b={context:{interactionId:y},messagePayload:JSON.parse(d),version:.5},S=JSON.stringify(b);await(await this.fetchConnection()).send(new h.SpeechConnectionMessage(r.MessageType.Text,"agent",m,"application/json",S))}async privDisconnect(){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,o.CancellationReason.Error,o.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1}processTypeSpecificMessages(d){const y=new o.PropertyCollection;d.messageType===r.MessageType.Text&&y.setProperty(o.PropertyId.SpeechServiceResponse_JsonResult,d.textBody);let m,b;switch(d.path.toLowerCase()){case"speech.phrase":const R=c.SimpleSpeechPhrase.fromJSON(d.textBody,this.privRequestSession.currentTurnAudioOffset);if(this.privRequestSession.onPhraseRecognized(R.Offset+R.Duration),R.RecognitionStatus!==c.RecognitionStatus.TooManyRequests&&R.RecognitionStatus!==c.RecognitionStatus.Error){const z=this.fireEventForResult(R,y);if(this.privLastResult=z.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,z)}catch{}}b=!0;break;case"speech.hypothesis":const _=c.SpeechHypothesis.fromJSON(d.textBody,this.privRequestSession.currentTurnAudioOffset);m=new o.SpeechRecognitionResult(this.privRequestSession.requestId,o.ResultReason.RecognizingSpeech,_.Text,_.Duration,_.Offset,_.Language,_.LanguageDetectionConfidence,void 0,void 0,_.asJson(),y),this.privRequestSession.onHypothesis(_.Offset);const T=new o.SpeechRecognitionEventArgs(m,_.Offset,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,T)}catch{}b=!0;break;case"speech.keyword":const k=c.SpeechKeyword.fromJSON(d.textBody,this.privRequestSession.currentTurnAudioOffset);m=new o.SpeechRecognitionResult(this.privRequestSession.requestId,k.Status==="Accepted"?o.ResultReason.RecognizedKeyword:o.ResultReason.NoMatch,k.Text,k.Duration,k.Offset,void 0,void 0,void 0,void 0,k.asJson(),y),k.Status!=="Accepted"&&(this.privLastResult=m);const I=new o.SpeechRecognitionEventArgs(m,m.duration,m.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,I)}catch{}b=!0;break;case"audio":{const z=d.requestId.toUpperCase(),L=this.privTurnStateManager.GetTurn(z);try{d.binaryBody?L.audioStream.write(d.binaryBody):L.endAudioStream()}catch{}}b=!0;break;case"response":this.handleResponseMessage(d),b=!0;break}const S=new r.Deferred;return S.resolve(b),S.promise}async cancelRecognition(d,y,m,b,S){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&await this.privRequestSession.onStopRecognizing(),this.privDialogServiceConnector.canceled){const R=new o.PropertyCollection;R.setProperty(c.CancellationErrorCodePropertyName,o.CancellationErrorCode[b]);const _=new o.SpeechRecognitionCanceledEventArgs(m,S,b,void 0,d);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,_)}catch{}if(this.privSuccessCallback){const T=new o.SpeechRecognitionResult(void 0,o.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,S,void 0,R);try{this.privSuccessCallback(T),this.privSuccessCallback=void 0}catch{}}}}async listenOnce(d,y,m){this.privRecognizerConfig.recognitionMode=d,this.privSuccessCallback=y,this.privErrorCallback=m,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(o.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const b=this.connectImpl(),S=this.sendPreAudioMessages(),R=await this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),_=await this.privDialogAudioSource.format,T=await this.privDialogAudioSource.deviceInfo,k=new e.ReplayableAudioNode(R,_.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(k,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:T};try{await b,await S}catch(L){return await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,o.CancellationReason.Error,o.CancellationErrorCode.ConnectionFailure,L),Promise.resolve()}const I=new o.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,I),this.sendAudio(k).then(()=>{},async L=>{await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,o.CancellationReason.Error,o.CancellationErrorCode.RuntimeError,L)})}dialogConnectImpl(d){return this.privConnectionLoop=this.startMessageLoop(),d}receiveDialogMessageOverride(){const d=new r.Deferred,y=async()=>{try{const m=this.isDisposed(),b=!this.isDisposed()&&this.terminateMessageLoop;if(m||b){d.resolve(void 0);return}const R=await(await this.fetchConnection()).read();if(!R)return y();const _=h.SpeechConnectionMessage.fromConnectionMessage(R);switch(_.path.toLowerCase()){case"turn.start":{const H=_.requestId.toUpperCase(),F=this.privRequestSession.requestId.toUpperCase();H!==F?this.privTurnStateManager.StartTurn(H):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":const k=c.SpeechDetected.fromJSON(_.textBody,this.privRequestSession.currentTurnAudioOffset),I=new o.RecognitionEventArgs(k.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,I);break;case"speech.enddetected":let z;_.textBody.length>0?z=_.textBody:z="{ Offset: 0 }";const L=c.SpeechDetected.fromJSON(z,this.privRequestSession.currentTurnAudioOffset);this.privRequestSession.onServiceRecognized(L.Offset);const N=new o.RecognitionEventArgs(L.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,N);break;case"turn.end":{const H=_.requestId.toUpperCase(),F=this.privRequestSession.requestId.toUpperCase();if(H!==F)this.privTurnStateManager.CompleteTurn(H);else{const M=new o.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(!1),(!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)&&this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,M),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(j){this.privErrorCallback&&this.privErrorCallback(j)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{await this.processTypeSpecificMessages(_)||this.serviceEvents&&this.serviceEvents.onEvent(new r.ServiceEvent(_.path.toLowerCase(),_.textBody))}catch{}}return y()}catch{this.terminateMessageLoop=!0,d.resolve()}};return y().catch(m=>{r.Events.instance.onEvent(new r.BackgroundEvent(m))}),d.promise}async startMessageLoop(){this.terminateMessageLoop=!1;try{await this.receiveDialogMessageOverride()}catch(d){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,o.CancellationReason.Error,o.CancellationErrorCode.RuntimeError,d)}return Promise.resolve()}async configConnection(d){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(await this.sendSpeechServiceConfig(d,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendAgentConfig(d),d)}async sendPreAudioMessages(){const d=await this.fetchConnection();this.addKeywordContextData(),await this.sendSpeechContext(d,!0),await this.sendAgentContext(d),await this.sendWaveHeader(d)}sendAgentConfig(d){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(o.PropertyId.Conversation_DialogType)===o.DialogServiceConfig.DialogTypes.CustomCommands){const m=this.agentConfig.get();m.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(m)}this.onEvent(new t.SendingAgentContextMessageEvent(this.agentConfig));const y=this.agentConfig.toJsonString();return this.agentConfigSent=!0,d.send(new h.SpeechConnectionMessage(r.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",y))}}sendAgentContext(d){const y=(0,r.createGuid)(),m=this.privDialogServiceConnector.properties.getProperty(o.PropertyId.Conversation_Speech_Activity_Template),S=JSON.stringify({channelData:"",context:{interactionId:y},messagePayload:typeof m===void 0?void 0:m,version:.5});return d.send(new h.SpeechConnectionMessage(r.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",S))}fireEventForResult(d,y){const m=c.EnumTranslation.implTranslateRecognitionResult(d.RecognitionStatus),b=new o.SpeechRecognitionResult(this.privRequestSession.requestId,m,d.DisplayText,d.Duration,d.Offset,d.Language,d.LanguageDetectionConfidence,void 0,void 0,d.asJson(),y);return new o.SpeechRecognitionEventArgs(b,d.Offset,this.privRequestSession.sessionId)}handleResponseMessage(d){const y=JSON.parse(d.textBody);switch(y.messageType.toLowerCase()){case"message":const m=d.requestId.toUpperCase(),b=i.ActivityPayloadResponse.fromJSON(d.textBody),S=this.privTurnStateManager.GetTurn(m);if(b.conversationId){const T=this.agentConfig.get();T.botInfo.conversationId=b.conversationId,this.agentConfig.set(T)}const R=S.processActivityPayload(b,s.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(o.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),_=new o.ActivityReceivedEventArgs(b.messagePayload,R);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,_)}catch{}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new o.TurnStatusReceivedEventArgs(d.textBody))}catch{}break;default:r.Events.instance.onEvent(new r.BackgroundEvent(`Unexpected response of type ${y.messageType}. Ignoring.`));break}}onEvent(d){this.privEvents.onEvent(d),r.Events.instance.onEvent(d)}addKeywordContextData(){const d=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(d===void 0)return;const y=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),m=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),b=d.split(";"),S=y===void 0?[]:y.split(";"),R=m===void 0?[]:m.split(";"),_=[];for(let T=0;T<b.length;T++){const k={text:b[T]};T<S.length&&(k.startOffset=Number(S[T])),T<R.length&&(k.duration=Number(R[T])),_.push(k)}this.speechContext.getContext().invocationSource=u.InvocationSource.VoiceActivationWithKeyword,this.speechContext.getContext().keywordDetection=[{clientDetectedKeywords:_,onReject:{action:l.OnRejectAction.EndOfTurn},type:l.KeywordDetectionType.StartTrigger}]}};return Pc.DialogServiceAdapter=v,Pc}var Ac={},bC;function KN(){if(bC)return Ac;bC=1,Object.defineProperty(Ac,"__esModule",{value:!0}),Ac.AgentConfig=void 0;let e=class{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(r){this.iPrivConfig=r}};return Ac.AgentConfig=e,Ac}var rd={},Tc={},Ic={},RC;function df(){if(RC)return Ic;RC=1,Object.defineProperty(Ic,"__esModule",{value:!0}),Ic.ConversationConnectionConfig=void 0;const e=eP();let t=class En extends e.RestConfigBase{static get host(){return En.privHost}static get apiVersion(){return En.privApiVersion}static get clientAppId(){return En.privClientAppId}static get defaultLanguageCode(){return En.privDefaultLanguageCode}static get restPath(){return En.privRestPath}static get webSocketPath(){return En.privWebSocketPath}static get transcriptionEventKeys(){return En.privTranscriptionEventKeys}};return Ic.ConversationConnectionConfig=t,t.privHost="dev.microsofttranslator.com",t.privRestPath="/capito/room",t.privApiVersion="2.0",t.privDefaultLanguageCode="en-US",t.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15",t.privWebSocketPath="/capito/translate",t.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"],Ic}var _C;function ZN(){if(_C)return Tc;_C=1,Object.defineProperty(Tc,"__esModule",{value:!0}),Tc.ConversationManager=void 0;const e=Lt(),t=Le(),r=le(),s=df();let o=class{constructor(){this.privRequestParams=s.ConversationConnectionConfig.configParams,this.privErrors=s.ConversationConnectionConfig.restErrors,this.privHost=s.ConversationConnectionConfig.host,this.privApiVersion=s.ConversationConnectionConfig.apiVersion,this.privRestPath=s.ConversationConnectionConfig.restPath,this.privRestAdapter=new e.RestMessageAdapter({})}createOrJoin(c,i,u,l){try{t.Contracts.throwIfNullOrUndefined(c,"args");const h=c.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,s.ConversationConnectionConfig.defaultLanguageCode),v=c.getProperty(r.PropertyId.ConversationTranslator_Name,"conversation_host"),f=c.getProperty(r.PropertyId.ConversationTranslator_Host,this.privHost),d=c.getProperty(r.PropertyId.ConversationTranslator_CorrelationId),y=c.getProperty(r.PropertyId.SpeechServiceConnection_Key),m=c.getProperty(r.PropertyId.SpeechServiceConnection_Region),b=c.getProperty(r.PropertyId.SpeechServiceAuthorization_Token);t.Contracts.throwIfNullOrWhitespace(h,"languageCode"),t.Contracts.throwIfNullOrWhitespace(v,"nickname"),t.Contracts.throwIfNullOrWhitespace(f,"endpointHost");const S={};S[this.privRequestParams.apiVersion]=this.privApiVersion,S[this.privRequestParams.languageCode]=h,S[this.privRequestParams.nickname]=v;const R={};d&&(R[this.privRequestParams.correlationId]=d),R[this.privRequestParams.clientAppId]=s.ConversationConnectionConfig.clientAppId,i!==void 0?S[this.privRequestParams.roomId]=i:(t.Contracts.throwIfNullOrUndefined(m,this.privErrors.authInvalidSubscriptionRegion),R[this.privRequestParams.subscriptionRegion]=m,y?R[this.privRequestParams.subscriptionKey]=y:b?R[this.privRequestParams.authorization]=`Bearer ${b}`:t.Contracts.throwIfNullOrUndefined(y,this.privErrors.authInvalidSubscriptionKey));const _={};_.headers=R,this.privRestAdapter.options=_;const T=`https://${f}${this.privRestPath}`;this.privRestAdapter.request(e.RestRequestType.Post,T,S,null).then(k=>{const I=e.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,k.headers);if(!k.ok){if(l){let L=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",k.status.toString()),N;try{N=JSON.parse(k.data),L+=` [${N.error.code}: ${N.error.message}]`}catch{L+=` [${k.data}]`}I&&(L+=` ${I}`),l(L)}return}const z=JSON.parse(k.data);if(z&&(z.requestId=I),u){try{u(z)}catch(L){l&&l(L)}u=void 0}}).catch(()=>{})}catch(h){if(l)if(h instanceof Error){const v=h;l(v.name+": "+v.message)}else l(h)}}leave(c,i){return new Promise((u,l)=>{try{t.Contracts.throwIfNullOrUndefined(c,this.privErrors.invalidArgs.replace("{arg}","config")),t.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","token"));const h=c.getProperty(r.PropertyId.ConversationTranslator_Host,this.privHost),v=c.getProperty(r.PropertyId.ConversationTranslator_CorrelationId),f={};f[this.privRequestParams.apiVersion]=this.privApiVersion,f[this.privRequestParams.sessionToken]=i;const d={};v&&(d[this.privRequestParams.correlationId]=v);const y={};y.headers=d,this.privRestAdapter.options=y;const m=`https://${h}${this.privRestPath}`;this.privRestAdapter.request(e.RestRequestType.Delete,m,f,null).then(b=>{b.ok,u()}).catch(()=>{})}catch(h){if(h instanceof Error){const v=h;l(v.name+": "+v.message)}else l(h)}})}};return Tc.ConversationManager=o,Tc}var wi={},Dc={},kc={},Mc={},PC;function uP(){if(PC)return Mc;PC=1,Object.defineProperty(Mc,"__esModule",{value:!0}),Mc.ConversationConnectionMessage=void 0;const e=je();let t=class extends e.ConnectionMessage{constructor(s,o,a,c){super(s,o,a,c);const i=JSON.parse(this.textBody);i.type!==void 0&&(this.privConversationMessageType=i.type)}get conversationMessageType(){return this.privConversationMessageType}};return Mc.ConversationConnectionMessage=t,Mc}var wC;function QN(){if(wC)return kc;wC=1,Object.defineProperty(kc,"__esModule",{value:!0}),kc.ConversationWebsocketMessageFormatter=void 0;const e=je(),t=uP();let r=class{toConnectionMessage(o){const a=new e.Deferred;try{if(o.messageType===e.MessageType.Text){const c=new t.ConversationConnectionMessage(o.messageType,o.textContent,{},o.id);a.resolve(c)}else o.messageType===e.MessageType.Binary&&a.resolve(new t.ConversationConnectionMessage(o.messageType,o.binaryContent,void 0,o.id))}catch(c){a.reject(`Error formatting the message. Error: ${c}`)}return a.promise}fromConnectionMessage(o){const a=new e.Deferred;try{if(o.messageType===e.MessageType.Text){const c=`${o.textBody?o.textBody:""}`;a.resolve(new e.RawWebsocketMessage(e.MessageType.Text,c,o.id))}}catch(c){a.reject(`Error formatting the message. ${c}`)}return a.promise}};return kc.ConversationWebsocketMessageFormatter=r,kc}var EC;function YN(){if(EC)return Dc;EC=1,Object.defineProperty(Dc,"__esModule",{value:!0}),Dc.ConversationConnectionFactory=void 0;const e=Lt(),t=je(),r=Le(),s=le(),o=Fr(),a=df(),c=QN();let i=class extends o.ConnectionFactoryBase{create(l,h,v){const f=l.parameters.getProperty(s.PropertyId.ConversationTranslator_Host,a.ConversationConnectionConfig.host),d=l.parameters.getProperty(s.PropertyId.ConversationTranslator_CorrelationId,(0,t.createGuid)()),y=`wss://${f}${a.ConversationConnectionConfig.webSocketPath}`,m=l.parameters.getProperty(s.PropertyId.ConversationTranslator_Token,void 0);r.Contracts.throwIfNullOrUndefined(m,"token");const b={};b[a.ConversationConnectionConfig.configParams.apiVersion]=a.ConversationConnectionConfig.apiVersion,b[a.ConversationConnectionConfig.configParams.token]=m,b[a.ConversationConnectionConfig.configParams.correlationId]=d;const S=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new e.WebsocketConnection(y,b,{},new c.ConversationWebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(l),S,v))}};return Dc.ConversationConnectionFactory=i,Dc}var Oc={},jc={},AC;function XN(){if(AC)return jc;AC=1,Object.defineProperty(jc,"__esModule",{value:!0}),jc.ConversationRequestSession=void 0;const e=je();let t=class{constructor(s){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=s,this.privRequestId=(0,e.createNoDashGuid)(),this.privRequestCompletionDeferral=new e.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(s,o){this.privSessionId=o}onAuthCompleted(s){s&&this.onComplete()}onConnectionEstablishCompleted(s){s!==200&&s===403&&this.onComplete()}onServiceTurnEndResponse(s){s?this.privRequestId=(0,e.createNoDashGuid)():this.onComplete()}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const s of this.privDetachables)await s.detach()}}onComplete(){}};return jc.ConversationRequestSession=t,jc}var Xt={},TC;function lP(){if(TC)return Xt;TC=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.ConversationReceivedTranslationEventArgs=Xt.ParticipantsListEventArgs=Xt.ParticipantAttributeEventArgs=Xt.ParticipantEventArgs=Xt.LockRoomEventArgs=Xt.MuteAllEventArgs=void 0;const e=le();class t extends e.SessionEventArgs{constructor(u,l){super(l),this.privIsMuted=u}get isMuted(){return this.privIsMuted}}Xt.MuteAllEventArgs=t;class r extends e.SessionEventArgs{constructor(u,l){super(l),this.privIsLocked=u}get isMuted(){return this.privIsLocked}}Xt.LockRoomEventArgs=r;class s extends e.SessionEventArgs{constructor(u,l){super(l),this.privParticipant=u}get participant(){return this.privParticipant}}Xt.ParticipantEventArgs=s;class o extends e.SessionEventArgs{constructor(u,l,h,v){super(v),this.privKey=l,this.privValue=h,this.privParticipantId=u}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}}Xt.ParticipantAttributeEventArgs=o;class a extends e.SessionEventArgs{constructor(u,l,h,v,f,d,y,m,b){super(b),this.privRoomId=u,this.privSessionToken=l,this.privTranslateTo=h,this.privProfanityFilter=v,this.privRoomProfanityFilter=f,this.privIsRoomLocked=d,this.privIsRoomLocked=y,this.privParticipants=m}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}}Xt.ParticipantsListEventArgs=a;class c{constructor(u,l,h){this.privPayload=l,this.privCommand=u,this.privSessionId=h}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}}return Xt.ConversationReceivedTranslationEventArgs=c,Xt}var an={},IC;function pP(){if(IC)return an;IC=1,Object.defineProperty(an,"__esModule",{value:!0}),an.ConversationTranslatorCommandTypes=an.ConversationTranslatorMessageTypes=an.InternalParticipants=void 0;class e{constructor(r=[],s){this.participants=r,this.meId=s}addOrUpdateParticipant(r){if(r===void 0)return;const s=this.getParticipantIndex(r.id);return s>-1?this.participants.splice(s,1,r):this.participants.push(r),this.getParticipant(r.id)}getParticipantIndex(r){return this.participants.findIndex(s=>s.id===r)}getParticipant(r){return this.participants.find(s=>s.id===r)}deleteParticipant(r){this.participants=this.participants.filter(s=>s.id!==r)}get host(){return this.participants.find(r=>r.isHost===!0)}get me(){return this.getParticipant(this.meId)}}return an.InternalParticipants=e,an.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"},an.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"},an}var nd={},zc={},DC;function eq(){if(DC)return zc;DC=1,Object.defineProperty(zc,"__esModule",{value:!0}),zc.CommandResponsePayload=void 0;const e=r=>JSON.parse(r);let t=class hP{constructor(s){this.privCommandResponse=e(s)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(s){return new hP(s)}};return zc.CommandResponsePayload=t,zc}var Ei={},kC;function tq(){if(kC)return Ei;kC=1,Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.ParticipantPayloadResponse=Ei.ParticipantsListPayloadResponse=void 0;const e=o=>JSON.parse(o),t=o=>JSON.parse(o);class r{constructor(a){this.privParticipantsPayloadResponse=e(a)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(a){return new r(a)}}Ei.ParticipantsListPayloadResponse=r;class s{constructor(a){this.privParticipantPayloadResponse=t(a)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(a){return new s(a)}}return Ei.ParticipantPayloadResponse=s,Ei}var Ai={},MC;function rq(){if(MC)return Ai;MC=1,Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.TextResponsePayload=Ai.SpeechResponsePayload=void 0;const e=o=>JSON.parse(o),t=o=>JSON.parse(o);class r{constructor(a){this.privSpeechResponse=e(a)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return this.privSpeechResponse.type==="final"}static fromJSON(a){return new r(a)}}Ai.SpeechResponsePayload=r;class s{constructor(a){this.privTextResponse=t(a)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(a){return new s(a)}}return Ai.TextResponsePayload=s,Ai}var OC;function nq(){return OC||(OC=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TextResponsePayload=e.SpeechResponsePayload=e.ParticipantPayloadResponse=e.ParticipantsListPayloadResponse=e.CommandResponsePayload=void 0;var t=eq();Object.defineProperty(e,"CommandResponsePayload",{enumerable:!0,get:function(){return t.CommandResponsePayload}});var r=tq();Object.defineProperty(e,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return r.ParticipantsListPayloadResponse}}),Object.defineProperty(e,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return r.ParticipantPayloadResponse}});var s=rq();Object.defineProperty(e,"SpeechResponsePayload",{enumerable:!0,get:function(){return s.SpeechResponsePayload}}),Object.defineProperty(e,"TextResponsePayload",{enumerable:!0,get:function(){return s.TextResponsePayload}})}(nd)),nd}var jC;function iq(){if(jC)return Oc;jC=1,Object.defineProperty(Oc,"__esModule",{value:!0}),Oc.ConversationServiceAdapter=void 0;const e=je(),t=le(),r=Pe(),s=uP(),o=XN(),a=lP(),c=pP(),i=nq();let u=class extends r.ServiceRecognizerBase{constructor(h,v,f,d,y){super(h,v,f,d,y),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=y,this.privConversationAuthentication=h,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=m=>this.conversationConnectImpl(m),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new o.ConversationRequestSession((0,e.createNoDashGuid)()),this.privConversationConnectionFactory=v,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}async dispose(h){this.privConversationIsDisposed=!0,this.privConnectionConfigPromise!==void 0&&await(await this.privConnectionConfigPromise).dispose(h),await super.dispose(h)}async sendMessage(h){return(await this.fetchConnection()).send(new s.ConversationConnectionMessage(e.MessageType.Text,h))}async sendMessageAsync(h){await(await this.fetchConnection()).send(new s.ConversationConnectionMessage(e.MessageType.Text,h))}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,t.CancellationReason.Error,t.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}async processTypeSpecificMessages(){return!0}cancelRecognition(h,v,f,d,y){this.terminateMessageLoop=!0;const m=new t.ConversationTranslationCanceledEventArgs(f,y,d,void 0,h);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,m)}catch{}}async conversationConnectImpl(h){return this.privConnectionLoop=this.startMessageLoop(),h}async receiveConversationMessageOverride(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();const h=new e.Deferred;try{const f=await(await this.fetchConnection()).read();if(this.isDisposed()||this.terminateMessageLoop)return h.resolve(),Promise.resolve();if(!f)return this.receiveConversationMessageOverride();const d=this.privConversationRequestSession.sessionId,y=f.conversationMessageType.toLowerCase();let m=!1;try{switch(y){case"info":case"participant_command":case"command":const b=i.CommandResponsePayload.fromJSON(f.textBody);switch(b.command.toLowerCase()){case"participantlist":const I=i.ParticipantsListPayloadResponse.fromJSON(f.textBody),z=I.participants.map(j=>({avatar:j.avatar,displayName:j.nickname,id:j.participantId,isHost:j.ishost,isMuted:j.ismuted,isUsingTts:j.usetts,preferredLanguage:j.locale}));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new a.ParticipantsListEventArgs(I.roomid,I.token,I.translateTo,I.profanityFilter,I.roomProfanityFilter,I.roomLocked,I.muteAll,z,d));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new a.ParticipantAttributeEventArgs(b.participantId,c.ConversationTranslatorCommandTypes.setTranslateToLanguages,b.value,d));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new a.ParticipantAttributeEventArgs(b.participantId,c.ConversationTranslatorCommandTypes.setProfanityFiltering,b.value,d));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new a.ParticipantAttributeEventArgs(b.participantId,c.ConversationTranslatorCommandTypes.setMute,b.value,d));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new a.MuteAllEventArgs(b.value,d));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new t.ConversationExpirationEventArgs(b.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new a.ParticipantAttributeEventArgs(b.participantId,c.ConversationTranslatorCommandTypes.setUseTTS,b.value,d));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new a.LockRoomEventArgs(b.value,d));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new a.ParticipantAttributeEventArgs(b.participantId,c.ConversationTranslatorCommandTypes.changeNickname,b.value,d));break;case"joinsession":const L=i.ParticipantPayloadResponse.fromJSON(f.textBody),N={avatar:L.avatar,displayName:L.nickname,id:L.participantId,isHost:L.ishost,isMuted:L.ismuted,isUsingTts:L.usetts,preferredLanguage:L.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new a.ParticipantEventArgs(N,d));break;case"leavesession":const H={id:b.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new a.ParticipantEventArgs(H,d));break;case"disconnectsession":const F={id:b.participantId};break;case"token":const M=new r.CognitiveTokenAuthentication(()=>{const j=b.token;return Promise.resolve(j)},()=>{const j=b.token;return Promise.resolve(j)});this.authentication=M,this.privConversationServiceConnector.onToken(M);break;default:break}break;case"partial":case"final":const S=i.SpeechResponsePayload.fromJSON(f.textBody),R=y==="final"?t.ResultReason.TranslatedParticipantSpeech:t.ResultReason.TranslatingParticipantSpeech,_=new t.ConversationTranslationResult(S.participantId,this.getTranslations(S.translations),S.language,S.id,R,S.recognition,void 0,void 0,f.textBody,void 0);S.isFinal?((_.text!==void 0&&_.text.length>0||S.id===this.privLastPartialUtteranceId)&&(m=!0),m&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new a.ConversationReceivedTranslationEventArgs(c.ConversationTranslatorMessageTypes.final,_,d))):_.text!==void 0&&(this.privLastPartialUtteranceId=S.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new a.ConversationReceivedTranslationEventArgs(c.ConversationTranslatorMessageTypes.partial,_,d)));break;case"translated_message":const T=i.TextResponsePayload.fromJSON(f.textBody),k=new t.ConversationTranslationResult(T.participantId,this.getTranslations(T.translations),T.language,void 0,void 0,T.originalText,void 0,void 0,void 0,f.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new a.ConversationReceivedTranslationEventArgs(c.ConversationTranslatorMessageTypes.instantMessage,k,d));break;default:break}}catch{}return this.receiveConversationMessageOverride()}catch{this.terminateMessageLoop=!0}return h.promise}async startMessageLoop(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;const h=this.receiveConversationMessageOverride();try{return await h}catch(v){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",t.CancellationReason.Error,t.CancellationErrorCode.RuntimeError,v),null}}configConnection(){return this.isDisposed()?Promise.resolve(void 0):this.privConnectionConfigPromise!==void 0?this.privConnectionConfigPromise.then(h=>h.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise,()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection())):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(h=>h),this.privConnectionConfigPromise)}getTranslations(h){let v;if(h!==void 0){v=new t.Translations;for(const f of h)v.set(f.lang,f.translation)}return v}};return Oc.ConversationServiceAdapter=u,Oc}var zC;function oq(){if(zC)return wi;zC=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi.ConversationTranslatorRecognizer=wi.ConversationRecognizerFactory=void 0;const e=Pe(),t=je(),r=Le(),s=le(),o=YN(),a=iq();class c{static fromConfig(l,h,v){return new i(l,h,v)}}wi.ConversationRecognizerFactory=c;let i=class extends s.Recognizer{constructor(l,h,v){const f=h;r.Contracts.throwIfNull(f,"speechConfig");const d=l;r.Contracts.throwIfNull(d,"conversationImpl"),super(v,f.properties,new o.ConversationConnectionFactory),this.privConversation=d,this.privIsDisposed=!1,this.privProperties=f.properties.clone(),this.privConnection=s.Connection.fromRecognizer(this),this.privProperties.getProperty(s.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?(this.privSetTimeout=t.Timeout.setTimeout,this.privClearTimeout=t.Timeout.clearTimeout):typeof window<"u"?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(l){this.privConnection.connected=l}set disconnected(l){this.privConnection.disconnected=l}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(l,h,v){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfNullOrWhitespace(l,"token"),this.privReco.conversationTranslatorToken=l,this.resetConversationTimeout(),this.privReco.connectAsync(h,v)}catch(f){if(v)if(f instanceof Error){const d=f;v(d.name+": "+d.message)}else v(f)}}disconnect(l,h){try{r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(()=>{l&&l()},v=>{h&&h(v)})}catch(v){if(h)if(v instanceof Error){const f=v;h(f.name+": "+f.message)}else h(v);this.dispose(!0).catch(f=>{t.Events.instance.onEvent(new t.BackgroundEvent(f))})}}sendRequest(l,h,v){try{r.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(l,h,v)}catch(f){if(v)if(f instanceof Error){const d=f;v(d.name+": "+d.message)}else v(f);this.dispose(!0).catch(d=>{t.Events.instance.onEvent(new t.BackgroundEvent(d))})}}onToken(l){this.privConversation.onToken(l)}async close(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,await this.dispose(!0))}async dispose(l){this.privIsDisposed||l&&(this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),await super.dispose(l))}createRecognizerConfig(l){return new e.RecognizerConfig(l,this.privProperties)}createServiceRecognizer(l,h,v,f){const d=v;return new a.ConversationServiceAdapter(l,h,d,f,this)}sendMessage(l,h,v){const f=this.privReco;((y,m,b)=>{y!==void 0?y.then(()=>{try{m&&m()}catch(S){b&&b(`'Unhandled error on promise callback: ${S}'`)}},S=>{try{b&&b(S)}catch{}}):b&&b("Null promise")})(f.sendMessageAsync(l),h,v),this.resetConversationTimeout()}resetConversationTimeout(){this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(()=>{this.sendRequest(this.privConversation.getKeepAlive())},6e4)}};return wi.ConversationTranslatorRecognizer=i,wi}var xc={},xC;function sq(){if(xC)return xc;xC=1,Object.defineProperty(xc,"__esModule",{value:!0}),xc.TranscriberRecognizer=void 0;const e=je(),t=Le(),r=le(),s=Pe(),o=Pr();let a=class extends r.Recognizer{constructor(i,u){const l=i;t.Contracts.throwIfNull(l,"speechTranslationConfig");const h=u;t.Contracts.throwIfNull(h,"audioConfigImpl"),t.Contracts.throwIfNullOrWhitespace(l.speechRecognitionLanguage,r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),super(u,l.properties,new s.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return t.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(i){t.Contracts.throwIfNullOrWhitespace(i,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,i)}set conversation(i){t.Contracts.throwIfNullOrUndefined(i,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=i}getConversationInfo(){return t.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(i){t.Contracts.throwIfNullOrUndefined(i,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=i}getMeetingInfo(){return t.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(i,u){(0,e.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(o.RecognitionMode.Conversation),i,u)}stopContinuousRecognitionAsync(i,u){(0,e.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),i,u)}async close(){this.privDisposedRecognizer||await this.dispose(!0)}async pushConversationEvent(i,u){const l=this.privReco;t.Contracts.throwIfNullOrUndefined(l,"serviceRecognizer"),await l.sendSpeechEventAsync(i,u)}async pushMeetingEvent(i,u){const l=this.privReco;t.Contracts.throwIfNullOrUndefined(l,"serviceRecognizer"),await l.sendMeetingSpeechEventAsync(i,u)}async enforceAudioGating(){const l=(await this.audioConfig.format).channels;if(l===1){if(this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()!=="true")throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(l!==8)throw new Error(`Unsupported audio configuration: Detected ${l}-channel audio`)}connectMeetingCallbacks(i){this.isMeetingRecognizer=!0,this.canceled=(u,l)=>{i.canceled&&i.canceled(i,l)},this.recognizing=(u,l)=>{i.transcribing&&i.transcribing(i,l)},this.recognized=(u,l)=>{i.transcribed&&i.transcribed(i,l)},this.sessionStarted=(u,l)=>{i.sessionStarted&&i.sessionStarted(i,l)},this.sessionStopped=(u,l)=>{i.sessionStopped&&i.sessionStopped(i,l)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}async dispose(i){this.privDisposedRecognizer||(i&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(i))}createRecognizerConfig(i){return new s.RecognizerConfig(i,this.properties)}createServiceRecognizer(i,u,l,h){const v=l;return new s.TranscriptionServiceRecognizer(i,u,v,h,this)}};return xc.TranscriberRecognizer=a,xc}var NC;function aq(){return NC||(NC=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.InternalParticipants=e.ConversationTranslatorMessageTypes=e.ConversationTranslatorCommandTypes=e.ParticipantsListEventArgs=e.ParticipantEventArgs=e.ParticipantAttributeEventArgs=e.MuteAllEventArgs=e.LockRoomEventArgs=e.ConversationReceivedTranslationEventArgs=e.TranscriberRecognizer=e.ConversationRecognizerFactory=e.ConversationConnectionConfig=e.ConversationManager=void 0;var t=ZN();Object.defineProperty(e,"ConversationManager",{enumerable:!0,get:function(){return t.ConversationManager}});var r=df();Object.defineProperty(e,"ConversationConnectionConfig",{enumerable:!0,get:function(){return r.ConversationConnectionConfig}});var s=oq();Object.defineProperty(e,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return s.ConversationRecognizerFactory}});var o=sq();Object.defineProperty(e,"TranscriberRecognizer",{enumerable:!0,get:function(){return o.TranscriberRecognizer}});var a=lP();Object.defineProperty(e,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return a.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(e,"LockRoomEventArgs",{enumerable:!0,get:function(){return a.LockRoomEventArgs}}),Object.defineProperty(e,"MuteAllEventArgs",{enumerable:!0,get:function(){return a.MuteAllEventArgs}}),Object.defineProperty(e,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return a.ParticipantAttributeEventArgs}}),Object.defineProperty(e,"ParticipantEventArgs",{enumerable:!0,get:function(){return a.ParticipantEventArgs}}),Object.defineProperty(e,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return a.ParticipantsListEventArgs}});var c=pP();Object.defineProperty(e,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return c.ConversationTranslatorCommandTypes}}),Object.defineProperty(e,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return c.ConversationTranslatorMessageTypes}}),Object.defineProperty(e,"InternalParticipants",{enumerable:!0,get:function(){return c.InternalParticipants}})}(rd)),rd}var id={},qC;function dP(){return qC||(qC=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SynthesisAudioMetadata=e.MetadataType=void 0,function(r){r.WordBoundary="WordBoundary",r.Bookmark="Bookmark",r.Viseme="Viseme",r.SentenceBoundary="SentenceBoundary",r.SessionEnd="SessionEnd",r.AvatarSignal="TalkingAvatarSignal"}(e.MetadataType||(e.MetadataType={}));class t{constructor(s){this.privSynthesisAudioMetadata=JSON.parse(s)}static fromJSON(s){return new t(s)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}e.SynthesisAudioMetadata=t}(id)),id}var Nc={},Ir={},LC;function cq(){if(LC)return Ir;LC=1,Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.SynthesisStartedEvent=Ir.ConnectingToSynthesisServiceEvent=Ir.SynthesisTriggeredEvent=Ir.SpeechSynthesisEvent=void 0;const e=je();class t extends e.PlatformEvent{constructor(c,i,u=e.EventType.Info){super(c,u),this.privRequestId=i}get requestId(){return this.privRequestId}}Ir.SpeechSynthesisEvent=t;class r extends t{constructor(c,i,u){super("SynthesisTriggeredEvent",c),this.privSessionAudioDestinationId=i,this.privTurnAudioDestinationId=u}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}}Ir.SynthesisTriggeredEvent=r;class s extends t{constructor(c,i){super("ConnectingToSynthesisServiceEvent",c),this.privAuthFetchEventId=i}get authFetchEventId(){return this.privAuthFetchEventId}}Ir.ConnectingToSynthesisServiceEvent=s;class o extends t{constructor(c,i){super("SynthesisStartedEvent",c),this.privAuthFetchEventId=i}get authFetchEventId(){return this.privAuthFetchEventId}}return Ir.SynthesisStartedEvent=o,Ir}var BC;function uq(){if(BC)return Nc;BC=1,Object.defineProperty(Nc,"__esModule",{value:!0}),Nc.SynthesisTurn=void 0;const e=je(),t=Po(),r=le(),s=dP(),o=cq();let a=class Zd{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=(0,e.createNoDashGuid)(),this.privTurnDeferral=new e.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(i){this.privStreamId=i}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(i){this.privAudioOutputFormat=i}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){const i=new r.PropertyCollection;return i.setProperty(r.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),i}}async getAllReceivedAudio(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(await this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null}async getAllReceivedAudioWithHeader(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const i=await this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(i),this.privReceivedAudioWithHeader}else return this.getAllReceivedAudio()}startNewSynthesis(i,u,l,h){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=i,this.privRawText=u,this.privIsSSML=l,this.privAudioOutputStream=new t.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",h!==void 0&&(this.privTurnAudioDestination=h,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new o.SynthesisTriggeredEvent(this.requestId,void 0,h===void 0?void 0:h.id()))}onPreConnectionStart(i){this.privAuthFetchEventId=i,this.onEvent(new o.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(i){i&&this.onComplete()}onConnectionEstablishCompleted(i){if(i===200){this.onEvent(new o.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),this.privBytesReceived=0;return}else i===403&&this.onComplete()}onServiceResponseMessage(i){const u=JSON.parse(i);this.streamId=u.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(i){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new e.Deferred;const u=JSON.parse(i);u.webrtc&&(this.privWebRTCSDP=u.webrtc.connectionString)}onAudioChunkReceived(i){this.isSynthesizing&&(this.privAudioOutputStream.write(i),this.privBytesReceived+=i.byteLength,this.privTurnAudioDestination!==void 0&&this.privTurnAudioDestination.write(i))}onTextBoundaryEvent(i){this.updateTextOffset(i.Data.text.Text,i.Type)}onVisemeMetadataReceived(i){i.Data.AnimationChunk!==void 0&&(this.privPartialVisemeAnimation+=i.Data.AnimationChunk)}onSessionEnd(i){this.privAudioDuration=i.Data.Offset}async constructSynthesisResult(){const i=await this.getAllReceivedAudioWithHeader();return new r.SpeechSynthesisResult(this.requestId,r.ResultReason.SynthesizingAudioCompleted,i,void 0,this.extraProperties,this.audioDuration)}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const i=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",i}onEvent(i){e.Events.instance.onEvent(i)}static isXmlTag(i){return i.length>=2&&i[0]==="<"&&i[i.length-1]===">"}updateTextOffset(i,u){u===s.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(i,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+i.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!Zd.isXmlTag(i)&&this.updateTextOffset(i,u))):(this.privSentenceOffset=this.privRawText.indexOf(i,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+i.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!Zd.isXmlTag(i)&&this.updateTextOffset(i,u)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,this.privTurnAudioDestination!==void 0&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}async readAllAudioFromStream(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{await this.privAudioOutputStream.read(this.privReceivedAudio)}catch{this.privReceivedAudio=new ArrayBuffer(0)}}}withinXmlTag(i){return this.privRawText.indexOf("<",i+1)>this.privRawText.indexOf(">",i+1)}};return Nc.SynthesisTurn=a,Nc}var qc={},FC;function lq(){if(FC)return qc;FC=1,Object.defineProperty(qc,"__esModule",{value:!0}),qc.SynthesisAdapterBase=void 0;const e=je(),t=le(),r=Pe(),s=wo();let o=class{constructor(c,i,u,l){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!c)throw new e.ArgumentNullError("authentication");if(!i)throw new e.ArgumentNullError("connectionFactory");if(!u)throw new e.ArgumentNullError("synthesizerConfig");this.privAuthentication=c,this.privConnectionFactory=i,this.privSynthesizerConfig=u,this.privIsDisposed=!1,this.privSessionAudioDestination=l,this.privSynthesisTurn=new r.SynthesisTurn,this.privConnectionEvents=new e.EventSource,this.privServiceEvents=new e.EventSource,this.privSynthesisContext=new r.SynthesisContext,this.privAgentConfig=new r.AgentConfig,this.connectionEvents.attach(h=>{if(h.name==="ConnectionClosedEvent"){const v=h;v.statusCode!==1e3&&this.cancelSynthesisLocal(t.CancellationReason.Error,v.statusCode===1007?t.CancellationErrorCode.BadRequestParameters:t.CancellationErrorCode.ConnectionFailure,`${v.reason} websocket error code: ${v.statusCode}`)}})}get synthesizerConfig(){return this.privSynthesizerConfig}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(c){this.privActivityTemplate=c}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(c){this.privAudioOutputFormat=c,this.privSynthesisTurn.audioOutputFormat=c,this.privSessionAudioDestination!==void 0&&(this.privSessionAudioDestination.format=c),this.synthesisContext!==void 0&&(this.synthesisContext.audioOutputFormat=c)}isDisposed(){return this.privIsDisposed}async dispose(c){this.privIsDisposed=!0,this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.close(),this.privConnectionConfigurationPromise!==void 0&&await(await this.privConnectionConfigurationPromise).dispose(c)}async connect(){await this.connectImpl()}async sendNetworkMessage(c,i){const u=typeof i=="string"?e.MessageType.Text:e.MessageType.Binary,l=typeof i=="string"?"application/json":"";return(await this.fetchConnection()).send(new s.SpeechConnectionMessage(u,c,this.privSynthesisTurn.requestId,l,i))}async Speak(c,i,u,l,h,v){let f;if(i?f=c:f=this.privSynthesizer.buildSsml(c),this.speakOverride!==void 0)return this.speakOverride(f,u,l,h);this.privSuccessCallback=l,this.privErrorCallback=h,this.privSynthesisTurn.startNewSynthesis(u,c,i,v);try{await this.connectImpl();const d=await this.fetchConnection();await this.sendSynthesisContext(d),await this.sendSsmlMessage(d,f,u),this.onSynthesisStarted(u),this.receiveMessage()}catch(d){return this.cancelSynthesisLocal(t.CancellationReason.Error,t.CancellationErrorCode.ConnectionFailure,d),Promise.reject(d)}}async stopSpeaking(){return await this.connectImpl(),(await this.fetchConnection()).send(new s.SpeechConnectionMessage(e.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))}cancelSynthesis(c,i,u,l){const h=new t.PropertyCollection;h.setProperty(r.CancellationErrorCodePropertyName,t.CancellationErrorCode[u]);const v=new t.SpeechSynthesisResult(c,t.ResultReason.Canceled,void 0,l,h);if(this.onSynthesisCancelled(v),this.privSuccessCallback)try{this.privSuccessCallback(v)}catch{}}cancelSynthesisLocal(c,i,u){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,c,i,u))}processTypeSpecificMessages(c){return!0}async receiveMessage(){try{const i=await(await this.fetchConnection()).read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!i)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;const u=s.SpeechConnectionMessage.fromConnectionMessage(i);if(u.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(u.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(u.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(u.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===u.streamId.toLowerCase()&&u.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(u.binaryBody),this.onSynthesizing(u.binaryBody),this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.write(u.binaryBody));break;case"audio.metadata":const l=r.SynthesisAudioMetadata.fromJSON(u.textBody).Metadata;for(const v of l)switch(v.Type){case r.MetadataType.WordBoundary:case r.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(v);const f=new t.SpeechSynthesisWordBoundaryEventArgs(v.Data.Offset,v.Data.Duration,v.Data.text.Text,v.Data.text.Length,v.Type===r.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,v.Data.text.BoundaryType);this.onWordBoundary(f);break;case r.MetadataType.Bookmark:const d=new t.SpeechSynthesisBookmarkEventArgs(v.Data.Offset,v.Data.Bookmark);this.onBookmarkReached(d);break;case r.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(v),v.Data.IsLastAnimation){const y=new t.SpeechSynthesisVisemeEventArgs(v.Data.Offset,v.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(y)}break;case r.MetadataType.AvatarSignal:this.onAvatarEvent(v);break;case r.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(v);break}break;case"turn.end":this.privSynthesisTurn.onServiceTurnEndResponse();let h;try{h=await this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(h)}catch(v){this.privErrorCallback&&this.privErrorCallback(v)}this.onSynthesisCompleted(h);break;default:this.processTypeSpecificMessages(u)||this.privServiceEvents&&this.serviceEvents.onEvent(new e.ServiceEvent(u.path.toLowerCase(),u.textBody))}return this.receiveMessage()}catch{}}sendSynthesisContext(c){this.setSynthesisContextSynthesisSection();const i=this.synthesisContext.toJSON();if(i)return c.send(new s.SpeechConnectionMessage(e.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",i))}setSpeechConfigSynthesisSection(){}connectImpl(c=!1){if(this.privConnectionPromise!=null)return this.privConnectionPromise.then(u=>u.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()));this.privAuthFetchEventId=(0,e.createNoDashGuid)(),this.privConnectionId=(0,e.createNoDashGuid)(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);const i=c?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=i.then(async u=>{this.privSynthesisTurn.onAuthCompleted(!1);const l=await this.privConnectionFactory.create(this.privSynthesizerConfig,u,this.privConnectionId);l.events.attach(v=>{this.connectionEvents.onEvent(v)});const h=await l.open();return h.statusCode===200?(this.privSynthesisTurn.onConnectionEstablishCompleted(h.statusCode),Promise.resolve(l)):h.statusCode===403&&!c?this.connectImpl(!0):(this.privSynthesisTurn.onConnectionEstablishCompleted(h.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${h.statusCode},
                    ${this.privSynthesizerConfig.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Url)} Reason: ${h.reason}`))},u=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(u)}),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}sendSpeechServiceConfig(c,i){if(i)return c.send(new s.SpeechConnectionMessage(e.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",i))}sendSsmlMessage(c,i,u){return c.send(new s.SpeechConnectionMessage(e.MessageType.Text,"ssml",u,"application/ssml+xml",i))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(c=>c.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async configureConnection(){const c=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(c):(this.setSpeechConfigSynthesisSection(),await this.sendSpeechServiceConfig(c,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),c)}onAvatarEvent(c){}onSynthesisStarted(c){}onSynthesizing(c){}onSynthesisCancelled(c){}onSynthesisCompleted(c){}onWordBoundary(c){}onVisemeReceived(c){}onBookmarkReached(c){}};return qc.SynthesisAdapterBase=o,o.telemetryDataEnabled=!0,qc}var Lc={},UC;function pq(){if(UC)return Lc;UC=1,Object.defineProperty(Lc,"__esModule",{value:!0}),Lc.AvatarSynthesisAdapter=void 0;const e=le(),t=Pe();let r=class extends t.SynthesisAdapterBase{constructor(o,a,c,i,u){super(o,a,c,void 0),this.privAvatarSynthesizer=i,this.privSynthesizer=i,this.privAvatarConfig=u}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){var o,a,c,i,u,l,h,v,f,d,y,m,b,S,R,_,T;this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:(o=this.privAvatarConfig.videoFormat)==null?void 0:o.bitrate,codec:(a=this.privAvatarConfig.videoFormat)==null?void 0:a.codec,crop:{bottomRight:{x:(u=(i=(c=this.privAvatarConfig.videoFormat)==null?void 0:c.cropRange)==null?void 0:i.bottomRight)==null?void 0:u.x,y:(v=(h=(l=this.privAvatarConfig.videoFormat)==null?void 0:l.cropRange)==null?void 0:h.bottomRight)==null?void 0:v.y},topLeft:{x:(y=(d=(f=this.privAvatarConfig.videoFormat)==null?void 0:f.cropRange)==null?void 0:d.topLeft)==null?void 0:y.x,y:(S=(b=(m=this.privAvatarConfig.videoFormat)==null?void 0:m.cropRange)==null?void 0:b.topLeft)==null?void 0:S.y}},resolution:{height:(R=this.privAvatarConfig.videoFormat)==null?void 0:R.height,width:(_=this.privAvatarConfig.videoFormat)==null?void 0:_.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(e.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:this.privAvatarConfig.remoteIceServers??this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor,image:{url:(T=this.privAvatarConfig.backgroundImage)==null?void 0:T.toString()}},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,style:this.privAvatarConfig.style,useBuiltInVoice:this.privAvatarConfig.useBuiltInVoice}}}onAvatarEvent(o){if(this.privAvatarSynthesizer.avatarEventReceived){const a=new e.AvatarEventArgs(o.Data.Offset,o.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,a)}catch{}}}};return Lc.AvatarSynthesisAdapter=r,Lc}var Bc={},HC;function hq(){if(HC)return Bc;HC=1,Object.defineProperty(Bc,"__esModule",{value:!0}),Bc.SpeechSynthesisAdapter=void 0;const e=le(),t=Pe();let r=class extends t.SynthesisAdapterBase{constructor(o,a,c,i,u){super(o,a,c,u),this.privSpeechSynthesizer=i,this.privSynthesizer=i}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(o){const a=new e.SpeechSynthesisEventArgs(new e.SpeechSynthesisResult(o,e.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,a)}onSynthesizing(o){if(this.privSpeechSynthesizer.synthesizing)try{const a=this.privSynthesisTurn.audioOutputFormat.addHeader(o),c=new e.SpeechSynthesisEventArgs(new e.SpeechSynthesisResult(this.privSynthesisTurn.requestId,e.ResultReason.SynthesizingAudio,a));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,c)}catch{}}onSynthesisCancelled(o){if(this.privSpeechSynthesizer.SynthesisCanceled){const a=new e.SpeechSynthesisEventArgs(o);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,a)}catch{}}}onSynthesisCompleted(o){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new e.SpeechSynthesisEventArgs(o))}catch{}}onWordBoundary(o){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,o)}catch{}}onVisemeReceived(o){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,o)}catch{}}onBookmarkReached(o){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,o)}catch{}}};return Bc.SpeechSynthesisAdapter=r,Bc}var Fc={},WC;function dq(){if(WC)return Fc;WC=1,Object.defineProperty(Fc,"__esModule",{value:!0}),Fc.SynthesisRestAdapter=void 0;const e=Lt(),t=le(),r=Fr(),s=nr();let o=class{constructor(c,i){let u=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!u){const h=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,"westus"),v=r.ConnectionFactoryBase.getHostSuffix(h);u=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,`https://${h}.tts.speech${v}`)}this.privUri=`${u}/cognitiveservices/voices/list`;const l=e.RestConfigBase.requestOptions;this.privRestAdapter=new e.RestMessageAdapter(l),this.privAuthentication=i}getVoicesList(c){return this.privRestAdapter.setHeaders(s.HeaderNames.ConnectionId,c),this.privAuthentication.fetch(c).then(i=>(this.privRestAdapter.setHeaders(i.headerName,i.token),this.privRestAdapter.request(e.RestRequestType.Get,this.privUri)))}};return Fc.SynthesisRestAdapter=o,Fc}var od={},VC;function vq(){return VC||(VC=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SynthesizerConfig=e.SynthesisServiceType=void 0;const t=Pe();var r;(function(o){o[o.Standard=0]="Standard",o[o.Custom=1]="Custom"})(r=e.SynthesisServiceType||(e.SynthesisServiceType={}));class s{constructor(a,c){this.privSynthesisServiceType=r.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=a||new t.SpeechServiceConfig(new t.Context(null)),this.privParameters=c}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(a){this.privSynthesisServiceType=a}set synthesisVideoSection(a){this.privSpeechServiceConfig.Context.synthesis={video:a}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}setContextFromJson(a){const c=JSON.parse(a);c.system&&(this.privSpeechServiceConfig.Context.system=c.system),c.os&&(this.privSpeechServiceConfig.Context.os=c.os),c.audio&&(this.privSpeechServiceConfig.Context.audio=c.audio),c.synthesis&&(this.privSpeechServiceConfig.Context.synthesis=c.synthesis)}}e.SynthesizerConfig=s}(od)),od}var Uc={},GC;function fq(){if(GC)return Uc;GC=1,Object.defineProperty(Uc,"__esModule",{value:!0}),Uc.SynthesisContext=void 0;const e=le();let t=class{constructor(){this.privContext={}}setSection(s,o){this.privContext[s]=o}set audioOutputFormat(s){this.privAudioOutputFormat=s}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(s){const o=this.buildSynthesisContext(s);this.setSection("synthesis",o)}buildSynthesisContext(s){return{audio:{metadataOptions:{bookmarkEnabled:!!(s!=null&&s.bookmarkReached),punctuationBoundaryEnabled:s==null?void 0:s.properties.getProperty(e.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!(s!=null&&s.wordBoundary)),sentenceBoundaryEnabled:s==null?void 0:s.properties.getProperty(e.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!(s!=null&&s.visemeReceived),wordBoundaryEnabled:s==null?void 0:s.properties.getProperty(e.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!(s!=null&&s.wordBoundary))},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:s==null?void 0:s.autoDetectSourceLanguage}}}};return Uc.SynthesisContext=t,Uc}var Hc={},JC;function gq(){if(JC)return Hc;JC=1,Object.defineProperty(Hc,"__esModule",{value:!0}),Hc.SpeakerRecognitionConfig=void 0;const e=Pe();let t=class{constructor(s,o){this.privContext=s||new e.Context(null),this.privParameters=o}get parameters(){return this.privParameters}get Context(){return this.privContext}};return Hc.SpeakerRecognitionConfig=t,Hc}var Wc={},KC;function mq(){if(KC)return Wc;KC=1,Object.defineProperty(Wc,"__esModule",{value:!0}),Wc.SpeakerServiceRecognizer=void 0;const e=Lt(),t=je(),r=le(),s=Pe(),o=wo();let a=class extends s.ServiceRecognizerBase{constructor(i,u,l,h,v){super(i,u,l,h,v),this.privSpeakerRecognizer=v,this.privSpeakerAudioSource=l,this.recognizeSpeaker=f=>this.recognizeSpeakerOnce(f),this.sendPrePayloadJSONOverride=()=>this.noOp()}processTypeSpecificMessages(i){let u=!1;const l=new r.PropertyCollection;switch(i.messageType===t.MessageType.Text&&l.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,i.textBody),i.path.toLowerCase()){case"speaker.response":const v=JSON.parse(i.textBody);let f;v.status.statusCode.toLowerCase()!=="success"?f=new r.SpeakerRecognitionResult(v,r.ResultReason.Canceled,r.CancellationErrorCode.ServiceError,v.status.reason):f=new r.SpeakerRecognitionResult(v,r.ResultReason.RecognizedSpeaker),this.privResultDeferral&&this.privResultDeferral.resolve(f),u=!0;break}const h=new t.Deferred;return h.resolve(u),h.promise}cancelRecognition(i,u,l,h,v){if(new r.PropertyCollection().setProperty(s.CancellationErrorCodePropertyName,r.CancellationErrorCode[h]),this.privResultDeferral){const d=new r.SpeakerRecognitionResult({scenario:this.privSpeakerModel.scenario,status:{statusCode:v,reason:v}},r.ResultReason.Canceled,h,v);try{this.privResultDeferral.resolve(d)}catch(y){this.privResultDeferral.reject(y)}}}async recognizeSpeakerOnce(i){this.privSpeakerModel=i,this.voiceProfileType=i.scenario,this.privResultDeferral||(this.privResultDeferral=new t.Deferred),this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(r.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const u=this.connectImpl(),l=this.sendPreAudioMessages(this.extractSpeakerContext(i)),h=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),v=await this.privSpeakerAudioSource.format,f=await this.privSpeakerAudioSource.deviceInfo,d=new e.ReplayableAudioNode(h,v.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(d,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:f};try{await u,await l}catch(b){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,b)}const y=new r.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,y),this.receiveMessage(),this.sendAudio(d).then(()=>{},b=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,b)}),this.privResultDeferral.promise}async sendPreAudioMessages(i){const u=await this.fetchConnection();await this.sendSpeakerRecognition(u,i)}async sendSpeakerRecognition(i,u){const l=JSON.stringify(u);return i.send(new o.SpeechConnectionMessage(t.MessageType.Text,"speaker.context",this.privRequestSession.requestId,"application/json; charset=utf-8",l))}extractSpeakerContext(i){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:i.profileIds,scenario:i.scenario}}};return Wc.SpeakerServiceRecognizer=a,Wc}var Vc={},ZC;function Sq(){if(ZC)return Vc;ZC=1,Object.defineProperty(Vc,"__esModule",{value:!0}),Vc.VoiceServiceRecognizer=void 0;const e=Lt(),t=je(),r=le(),s=Pe(),o=wo();let a=class extends s.ServiceRecognizerBase{constructor(i,u,l,h,v){super(i,u,l,h,v),this.privDeferralMap=new t.DeferralMap,this.privSpeakerAudioSource=l,this.sendPrePayloadJSONOverride=()=>this.noOp()}set SpeakerAudioSource(i){this.privSpeakerAudioSource=i}processTypeSpecificMessages(i){let u=!1;const l=new r.PropertyCollection;switch(i.messageType===t.MessageType.Text&&l.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,i.textBody),i.path.toLowerCase()){case"speaker.profiles":const v=JSON.parse(i.textBody);switch(v.operation.toLowerCase()){case"create":this.handleCreateResponse(v,i.requestId);break;case"delete":case"reset":this.handleResultResponse(v,i.requestId);break;case"fetch":const m=JSON.parse(i.textBody);this.handleFetchResponse(m,i.requestId);break}u=!0;break;case"speaker.phrases":const f=JSON.parse(i.textBody);this.handlePhrasesResponse(f,i.requestId),u=!0;break;case"speaker.profile.enrollment":const d=JSON.parse(i.textBody),y=new r.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(d.enrollment?d.enrollment.enrollmentStatus:d.status.statusCode),d.enrollment?JSON.stringify(d.enrollment):void 0,d.status.reason);this.privDeferralMap.getId(i.requestId)&&this.privDeferralMap.complete(i.requestId,y),this.privRequestSession.onSpeechEnded(),u=!0;break}const h=new t.Deferred;return h.resolve(u),h.promise}cancelRecognition(i,u,l,h,v){new r.PropertyCollection().setProperty(s.CancellationErrorCodePropertyName,r.CancellationErrorCode[h]);const d=new r.VoiceProfileEnrollmentResult(r.ResultReason.Canceled,v,v);this.privDeferralMap.getId(u)&&this.privDeferralMap.complete(u,d)}async createProfile(i,u){this.voiceProfileType=i.toString();const l=this.connectImpl();try{const h=new t.Deferred;return await l,await this.sendCreateProfile(h,i,u),this.receiveMessage(),h.promise}catch(h){throw h}}async resetProfile(i){return this.voiceProfileType=i.profileType.toString(),this.sendCommonRequest("reset",i.profileType,i)}async deleteProfile(i){return this.voiceProfileType=i.profileType.toString(),this.sendCommonRequest("delete",i.profileType,i)}async retrieveEnrollmentResult(i){return this.voiceProfileType=i.profileType.toString(),this.privExpectedProfileId=i.profileId,this.sendCommonRequest("fetch",i.profileType,i)}async getAllProfiles(i){return this.voiceProfileType=i.toString(),this.sendCommonRequest("fetch",i)}async getActivationPhrases(i,u){this.voiceProfileType=i.toString();const l=this.connectImpl();try{const h=new t.Deferred;return await l,await this.sendPhrasesRequest(h,i,u),this.receiveMessage(),h.promise}catch(h){throw h}}async enrollProfile(i){this.voiceProfileType=i.profileType.toString();const u=new t.Deferred;this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(r.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const l=this.connectImpl(),h=this.sendPreAudioMessages(i,u),v=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),f=await this.privSpeakerAudioSource.format,d=await this.privSpeakerAudioSource.deviceInfo,y=new e.ReplayableAudioNode(v,f.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(y,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:d};try{await l,await h}catch(S){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,S)}const m=new r.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,m),this.receiveMessage(),this.sendAudio(y).then(()=>{},S=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,S)}),u.promise}async sendPreAudioMessages(i,u){const l=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,u),await this.sendBaseRequest(l,"enroll",this.scenarioFrom(i.profileType),i)}async sendPhrasesRequest(i,u,l){const h=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,i);const v=this.scenarioFrom(u),f={locale:l,scenario:v};return h.send(new o.SpeechConnectionMessage(t.MessageType.Text,"speaker.profile.phrases",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(f)))}async sendCreateProfile(i,u,l){const h=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,i);const v=u===r.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":u===r.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification",f={locale:l,number:"1",scenario:v};return h.send(new o.SpeechConnectionMessage(t.MessageType.Text,"speaker.profile.create",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(f)))}async sendCommonRequest(i,u,l=void 0){const h=this.connectImpl();try{const v=new t.Deferred;this.privRequestSession.onSpeechContext(),await h;const f=await this.fetchConnection();return this.privDeferralMap.add(this.privRequestSession.requestId,v),await this.sendBaseRequest(f,i,this.scenarioFrom(u),l),this.receiveMessage(),v.promise}catch(v){throw v}}async sendBaseRequest(i,u,l,h){const v={scenario:l};return h?v.profileIds=[h.profileId]:v.maxPageSize=-1,i.send(new o.SpeechConnectionMessage(t.MessageType.Text,`speaker.profile.${u}`,this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(v)))}extractSpeakerContext(i){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:i.profileIds,scenario:i.scenario}}handlePhrasesResponse(i,u){if(this.privDeferralMap.getId(u))if(i.status.statusCode.toLowerCase()!=="success"){const l=r.ResultReason.Canceled,h=new r.VoiceProfilePhraseResult(l,i.status.statusCode,i.passPhraseType,[]);this.privDeferralMap.complete(u,h)}else if(i.phrases&&i.phrases.length>0){const l=r.ResultReason.EnrollingVoiceProfile,h=new r.VoiceProfilePhraseResult(l,i.status.statusCode,i.passPhraseType,i.phrases);this.privDeferralMap.complete(u,h)}else throw new Error("Voice Profile get activation phrases failed, no phrases received");else throw new Error(`Voice Profile get activation phrases request for requestID ${u} not found`)}handleCreateResponse(i,u){if(i.profiles&&i.profiles.length>0)if(this.privDeferralMap.getId(u)){const l=i.profiles.map(h=>h.profileId);this.privDeferralMap.complete(u,l)}else throw new Error(`Voice Profile create request for requestID ${u} not found`);else throw new Error("Voice Profile create failed, no profile id received")}handleResultResponse(i,u){if(this.privDeferralMap.getId(u)){const l=i.operation.toLowerCase()==="delete"?r.ResultReason.DeletedVoiceProfile:r.ResultReason.ResetVoiceProfile,h=i.status.statusCode.toLowerCase()==="success"?l:r.ResultReason.Canceled,v=new r.VoiceProfileResult(h,`statusCode: ${i.status.statusCode}, errorDetails: ${i.status.reason}`);this.privDeferralMap.complete(u,v)}else throw new Error(`Voice Profile create request for requestID ${u} not found`)}handleFetchResponse(i,u){if(this.privDeferralMap.getId(u)&&i.profiles[0]){if(this.privExpectedProfileId&&i.profiles.length===1&&i.profiles[0].profileId===this.privExpectedProfileId){this.privExpectedProfileId=void 0;const l=i.profiles[0],h=new r.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(l.enrollmentStatus),JSON.stringify(l),i.status.reason);this.privDeferralMap.complete(u,h)}else if(i.profiles.length>0){const l=i.profiles,h=[];for(const v of l)h.push(new r.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(v.enrollmentStatus),JSON.stringify(v),i.status.reason));this.privDeferralMap.complete(u,h)}}else throw new Error(`Voice Profile fetch request for requestID ${u} not found`)}enrollmentReasonFrom(i){switch(i.toLowerCase()){case"enrolled":return r.ResultReason.EnrolledVoiceProfile;case"invalidlocale":case"invalidphrase":case"invalidaudioformat":case"invalidscenario":case"invalidprofilecount":case"invalidoperation":case"audiotooshort":case"audiotoolong":case"toomanyenrollments":case"storageconflict":case"profilenotfound":case"incompatibleprofiles":case"incompleteenrollment":return r.ResultReason.Canceled;default:return r.ResultReason.EnrollingVoiceProfile}}scenarioFrom(i){return i===r.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":i===r.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"}};return Vc.VoiceServiceRecognizer=a,Vc}var sd={},QC;function $q(){return QC||(QC=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.type=e.connectivity=e.Device=e.OS=e.System=e.Context=e.SpeechServiceConfig=void 0;class t{constructor(i){this.context=i}serialize(){return JSON.stringify(this,(i,u)=>{if(u&&typeof u=="object"&&!Array.isArray(u)){const l={};for(const h in u)Object.hasOwnProperty.call(u,h)&&(l[h&&h.charAt(0).toLowerCase()+h.substring(1)]=u[h]);return l}return u})}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(i){this.recognition=i.toLowerCase()}}e.SpeechServiceConfig=t;class r{constructor(i){this.system=new s,this.os=i}}e.Context=r;class s{constructor(){const i="1.45.0";this.name="SpeechSDK",this.version=i,this.build="JavaScript",this.lang="JavaScript"}}e.System=s;class o{constructor(i,u,l){this.platform=i,this.name=u,this.version=l}}e.OS=o;class a{constructor(i,u,l){this.manufacturer=i,this.model=u,this.version=l}}e.Device=a,function(c){c.Bluetooth="Bluetooth",c.Wired="Wired",c.WiFi="WiFi",c.Cellular="Cellular",c.InBuilt="InBuilt",c.Unknown="Unknown"}(e.connectivity||(e.connectivity={})),function(c){c.Phone="Phone",c.Speaker="Speaker",c.Car="Car",c.Headset="Headset",c.Thermostat="Thermostat",c.Microphones="Microphones",c.Deskphone="Deskphone",c.RemoteControl="RemoteControl",c.Unknown="Unknown",c.File="File",c.Stream="Stream"}(e.type||(e.type={}))}(sd)),sd}var YC;function Pe(){return YC||(YC=1,function(e){var t=ai&&ai.__createBinding||(Object.create?function(a,c,i,u){u===void 0&&(u=i),Object.defineProperty(a,u,{enumerable:!0,get:function(){return c[i]}})}:function(a,c,i,u){u===void 0&&(u=i),a[u]=c[i]}),r=ai&&ai.__exportStar||function(a,c){for(var i in a)i!=="default"&&!Object.prototype.hasOwnProperty.call(c,i)&&t(c,a,i)};Object.defineProperty(e,"__esModule",{value:!0}),e.AutoDetectSourceLanguagesOpenRangeOptionName=e.ForceDictationPropertyName=e.ServicePropertiesPropertyName=e.CancellationErrorCodePropertyName=e.OutputFormatPropertyName=e.SpeechSynthesisAdapter=e.AvatarSynthesisAdapter=void 0,r(Jz(),e),r(Kz(),e),r(af(),e),r(Zz(),e),r(Qz(),e),r(X3(),e),r(eN(),e),r(hf(),e),r(lN(),e),r(pN(),e),r(hN(),e),r(dN(),e),r(vN(),e),r(fN(),e),r(gN(),e),r(mN(),e),r(SN(),e),r(Y_(),e),r($N(),e),r(yN(),e),r(CN(),e),r(bN(),e),r(RN(),e),r(_N(),e),r(PN(),e),r(wN(),e),r(EN(),e),r(AN(),e),r(IN(),e),r(DN(),e),r(kN(),e),r(MN(),e),r(ON(),e),r(jN(),e),r(zN(),e),r(xN(),e),r(qN(),e),r(BN(),e),r(UN(),e),r(JN(),e),r(KN(),e),r(aq(),e),r(dP(),e),r(uq(),e),r(lq(),e);var s=pq();Object.defineProperty(e,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return s.AvatarSynthesisAdapter}});var o=hq();Object.defineProperty(e,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return o.SpeechSynthesisAdapter}}),r(dq(),e),r(vq(),e),r(fq(),e),r(gq(),e),r(mq(),e),r(Sq(),e),r($q(),e),e.OutputFormatPropertyName="OutputFormat",e.CancellationErrorCodePropertyName="CancellationErrorCode",e.ServicePropertiesPropertyName="ServiceProperties",e.ForceDictationPropertyName="ForceDictation",e.AutoDetectSourceLanguagesOpenRangeOptionName="UND"}(ai)),ai}var XC;function yq(){return XC||(XC=1,function(e){var t=si&&si.__createBinding||(Object.create?function(o,a,c,i){i===void 0&&(i=c),Object.defineProperty(o,i,{enumerable:!0,get:function(){return a[c]}})}:function(o,a,c,i){i===void 0&&(i=c),o[i]=a[c]}),r=si&&si.__exportStar||function(o,a){for(var c in o)c!=="default"&&!Object.prototype.hasOwnProperty.call(a,c)&&t(a,o,c)};Object.defineProperty(e,"__esModule",{value:!0});const s=Pe();new s.AgentConfig,r(le(),e)}(si)),si}var Xu=yq();const eb={VOICE_NAME:"nl-NL-MaartenNeural",OUTPUT_FORMAT:Xu.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3};Yn("generateAudio",async({key:e,region:t,sentence:r})=>{const s=Xu.SpeechConfig.fromSubscription(e,t);s.speechSynthesisVoiceName=eb.VOICE_NAME,s.speechSynthesisOutputFormat=eb.OUTPUT_FORMAT;const o=new Xu.SpeechSynthesizer(s,null);return await new Promise((a,c)=>{o.speakTextAsync(r,({audioData:i,reason:u})=>{if(o.close(),u!==Xu.ResultReason.SynthesizingAudioCompleted){c(new Error("Speech SDK failure"));return}const l=new Blob([i],{type:"audio/mpeg"}),h=new FileReader;h.onloadend=()=>a(h.result),h.readAsDataURL(l)})})});var ad={exports:{}};/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.11.1
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2025
 * @license MIT
 */var tb;function Cq(){return tb||(tb=1,function(e){(function(){var t="input is invalid type",r=typeof window=="object",s=r?window:{};s.JS_SHA256_NO_WINDOW&&(r=!1);var o=!r&&typeof self=="object",a=!s.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node&&process.type!="renderer";a?s=pn:o&&(s=self);var c=!s.JS_SHA256_NO_COMMON_JS&&!0&&e.exports,i=!s.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",u="0123456789abcdef".split(""),l=[-2147483648,8388608,32768,128],h=[24,16,8,0],v=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],f=["hex","array","digest","arrayBuffer"],d=[];(s.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(I){return Object.prototype.toString.call(I)==="[object Array]"}),i&&(s.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(I){return typeof I=="object"&&I.buffer&&I.buffer.constructor===ArrayBuffer});var y=function(I,z){return function(L){return new _(z,!0).update(L)[I]()}},m=function(I){var z=y("hex",I);a&&(z=b(z,I)),z.create=function(){return new _(I)},z.update=function(H){return z.create().update(H)};for(var L=0;L<f.length;++L){var N=f[L];z[N]=y(N,I)}return z},b=function(I,z){var L=Mr,N=Mr.Buffer,H=z?"sha224":"sha256",F;N.from&&!s.JS_SHA256_NO_BUFFER_FROM?F=N.from:F=function(j){return new N(j)};var M=function(j){if(typeof j=="string")return L.createHash(H).update(j,"utf8").digest("hex");if(j==null)throw new Error(t);return j.constructor===ArrayBuffer&&(j=new Uint8Array(j)),Array.isArray(j)||ArrayBuffer.isView(j)||j.constructor===N?L.createHash(H).update(F(j)).digest("hex"):I(j)};return M},S=function(I,z){return function(L,N){return new T(L,z,!0).update(N)[I]()}},R=function(I){var z=S("hex",I);z.create=function(H){return new T(H,I)},z.update=function(H,F){return z.create(H).update(F)};for(var L=0;L<f.length;++L){var N=f[L];z[N]=S(N,I)}return z};function _(I,z){z?(d[0]=d[16]=d[1]=d[2]=d[3]=d[4]=d[5]=d[6]=d[7]=d[8]=d[9]=d[10]=d[11]=d[12]=d[13]=d[14]=d[15]=0,this.blocks=d):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],I?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=I}_.prototype.update=function(I){if(!this.finalized){var z,L=typeof I;if(L!=="string"){if(L==="object"){if(I===null)throw new Error(t);if(i&&I.constructor===ArrayBuffer)I=new Uint8Array(I);else if(!Array.isArray(I)&&(!i||!ArrayBuffer.isView(I)))throw new Error(t)}else throw new Error(t);z=!0}for(var N,H=0,F,M=I.length,j=this.blocks;H<M;){if(this.hashed&&(this.hashed=!1,j[0]=this.block,this.block=j[16]=j[1]=j[2]=j[3]=j[4]=j[5]=j[6]=j[7]=j[8]=j[9]=j[10]=j[11]=j[12]=j[13]=j[14]=j[15]=0),z)for(F=this.start;H<M&&F<64;++H)j[F>>>2]|=I[H]<<h[F++&3];else for(F=this.start;H<M&&F<64;++H)N=I.charCodeAt(H),N<128?j[F>>>2]|=N<<h[F++&3]:N<2048?(j[F>>>2]|=(192|N>>>6)<<h[F++&3],j[F>>>2]|=(128|N&63)<<h[F++&3]):N<55296||N>=57344?(j[F>>>2]|=(224|N>>>12)<<h[F++&3],j[F>>>2]|=(128|N>>>6&63)<<h[F++&3],j[F>>>2]|=(128|N&63)<<h[F++&3]):(N=65536+((N&1023)<<10|I.charCodeAt(++H)&1023),j[F>>>2]|=(240|N>>>18)<<h[F++&3],j[F>>>2]|=(128|N>>>12&63)<<h[F++&3],j[F>>>2]|=(128|N>>>6&63)<<h[F++&3],j[F>>>2]|=(128|N&63)<<h[F++&3]);this.lastByteIndex=F,this.bytes+=F-this.start,F>=64?(this.block=j[16],this.start=F-64,this.hash(),this.hashed=!0):this.start=F}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},_.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var I=this.blocks,z=this.lastByteIndex;I[16]=this.block,I[z>>>2]|=l[z&3],this.block=I[16],z>=56&&(this.hashed||this.hash(),I[0]=this.block,I[16]=I[1]=I[2]=I[3]=I[4]=I[5]=I[6]=I[7]=I[8]=I[9]=I[10]=I[11]=I[12]=I[13]=I[14]=I[15]=0),I[14]=this.hBytes<<3|this.bytes>>>29,I[15]=this.bytes<<3,this.hash()}},_.prototype.hash=function(){var I=this.h0,z=this.h1,L=this.h2,N=this.h3,H=this.h4,F=this.h5,M=this.h6,j=this.h7,E=this.blocks,ee,$e,oe,De,te,_e,X,Z,Ae,ye,ve;for(ee=16;ee<64;++ee)te=E[ee-15],$e=(te>>>7|te<<25)^(te>>>18|te<<14)^te>>>3,te=E[ee-2],oe=(te>>>17|te<<15)^(te>>>19|te<<13)^te>>>10,E[ee]=E[ee-16]+$e+E[ee-7]+oe<<0;for(ve=z&L,ee=0;ee<64;ee+=4)this.first?(this.is224?(Z=300032,te=E[0]-1413257819,j=te-150054599<<0,N=te+24177077<<0):(Z=704751109,te=E[0]-210244248,j=te-1521486534<<0,N=te+143694565<<0),this.first=!1):($e=(I>>>2|I<<30)^(I>>>13|I<<19)^(I>>>22|I<<10),oe=(H>>>6|H<<26)^(H>>>11|H<<21)^(H>>>25|H<<7),Z=I&z,De=Z^I&L^ve,X=H&F^~H&M,te=j+oe+X+v[ee]+E[ee],_e=$e+De,j=N+te<<0,N=te+_e<<0),$e=(N>>>2|N<<30)^(N>>>13|N<<19)^(N>>>22|N<<10),oe=(j>>>6|j<<26)^(j>>>11|j<<21)^(j>>>25|j<<7),Ae=N&I,De=Ae^N&z^Z,X=j&H^~j&F,te=M+oe+X+v[ee+1]+E[ee+1],_e=$e+De,M=L+te<<0,L=te+_e<<0,$e=(L>>>2|L<<30)^(L>>>13|L<<19)^(L>>>22|L<<10),oe=(M>>>6|M<<26)^(M>>>11|M<<21)^(M>>>25|M<<7),ye=L&N,De=ye^L&I^Ae,X=M&j^~M&H,te=F+oe+X+v[ee+2]+E[ee+2],_e=$e+De,F=z+te<<0,z=te+_e<<0,$e=(z>>>2|z<<30)^(z>>>13|z<<19)^(z>>>22|z<<10),oe=(F>>>6|F<<26)^(F>>>11|F<<21)^(F>>>25|F<<7),ve=z&L,De=ve^z&N^ye,X=F&M^~F&j,te=H+oe+X+v[ee+3]+E[ee+3],_e=$e+De,H=I+te<<0,I=te+_e<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+I<<0,this.h1=this.h1+z<<0,this.h2=this.h2+L<<0,this.h3=this.h3+N<<0,this.h4=this.h4+H<<0,this.h5=this.h5+F<<0,this.h6=this.h6+M<<0,this.h7=this.h7+j<<0},_.prototype.hex=function(){this.finalize();var I=this.h0,z=this.h1,L=this.h2,N=this.h3,H=this.h4,F=this.h5,M=this.h6,j=this.h7,E=u[I>>>28&15]+u[I>>>24&15]+u[I>>>20&15]+u[I>>>16&15]+u[I>>>12&15]+u[I>>>8&15]+u[I>>>4&15]+u[I&15]+u[z>>>28&15]+u[z>>>24&15]+u[z>>>20&15]+u[z>>>16&15]+u[z>>>12&15]+u[z>>>8&15]+u[z>>>4&15]+u[z&15]+u[L>>>28&15]+u[L>>>24&15]+u[L>>>20&15]+u[L>>>16&15]+u[L>>>12&15]+u[L>>>8&15]+u[L>>>4&15]+u[L&15]+u[N>>>28&15]+u[N>>>24&15]+u[N>>>20&15]+u[N>>>16&15]+u[N>>>12&15]+u[N>>>8&15]+u[N>>>4&15]+u[N&15]+u[H>>>28&15]+u[H>>>24&15]+u[H>>>20&15]+u[H>>>16&15]+u[H>>>12&15]+u[H>>>8&15]+u[H>>>4&15]+u[H&15]+u[F>>>28&15]+u[F>>>24&15]+u[F>>>20&15]+u[F>>>16&15]+u[F>>>12&15]+u[F>>>8&15]+u[F>>>4&15]+u[F&15]+u[M>>>28&15]+u[M>>>24&15]+u[M>>>20&15]+u[M>>>16&15]+u[M>>>12&15]+u[M>>>8&15]+u[M>>>4&15]+u[M&15];return this.is224||(E+=u[j>>>28&15]+u[j>>>24&15]+u[j>>>20&15]+u[j>>>16&15]+u[j>>>12&15]+u[j>>>8&15]+u[j>>>4&15]+u[j&15]),E},_.prototype.toString=_.prototype.hex,_.prototype.digest=function(){this.finalize();var I=this.h0,z=this.h1,L=this.h2,N=this.h3,H=this.h4,F=this.h5,M=this.h6,j=this.h7,E=[I>>>24&255,I>>>16&255,I>>>8&255,I&255,z>>>24&255,z>>>16&255,z>>>8&255,z&255,L>>>24&255,L>>>16&255,L>>>8&255,L&255,N>>>24&255,N>>>16&255,N>>>8&255,N&255,H>>>24&255,H>>>16&255,H>>>8&255,H&255,F>>>24&255,F>>>16&255,F>>>8&255,F&255,M>>>24&255,M>>>16&255,M>>>8&255,M&255];return this.is224||E.push(j>>>24&255,j>>>16&255,j>>>8&255,j&255),E},_.prototype.array=_.prototype.digest,_.prototype.arrayBuffer=function(){this.finalize();var I=new ArrayBuffer(this.is224?28:32),z=new DataView(I);return z.setUint32(0,this.h0),z.setUint32(4,this.h1),z.setUint32(8,this.h2),z.setUint32(12,this.h3),z.setUint32(16,this.h4),z.setUint32(20,this.h5),z.setUint32(24,this.h6),this.is224||z.setUint32(28,this.h7),I};function T(I,z,L){var N,H=typeof I;if(H==="string"){var F=[],M=I.length,j=0,E;for(N=0;N<M;++N)E=I.charCodeAt(N),E<128?F[j++]=E:E<2048?(F[j++]=192|E>>>6,F[j++]=128|E&63):E<55296||E>=57344?(F[j++]=224|E>>>12,F[j++]=128|E>>>6&63,F[j++]=128|E&63):(E=65536+((E&1023)<<10|I.charCodeAt(++N)&1023),F[j++]=240|E>>>18,F[j++]=128|E>>>12&63,F[j++]=128|E>>>6&63,F[j++]=128|E&63);I=F}else if(H==="object"){if(I===null)throw new Error(t);if(i&&I.constructor===ArrayBuffer)I=new Uint8Array(I);else if(!Array.isArray(I)&&(!i||!ArrayBuffer.isView(I)))throw new Error(t)}else throw new Error(t);I.length>64&&(I=new _(z,!0).update(I).array());var ee=[],$e=[];for(N=0;N<64;++N){var oe=I[N]||0;ee[N]=92^oe,$e[N]=54^oe}_.call(this,z,L),this.update($e),this.oKeyPad=ee,this.inner=!0,this.sharedMemory=L}T.prototype=new _,T.prototype.finalize=function(){if(_.prototype.finalize.call(this),this.inner){this.inner=!1;var I=this.array();_.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(I),_.prototype.finalize.call(this)}};var k=m();k.sha256=k,k.sha224=m(!0),k.sha256.hmac=R(),k.sha224.hmac=R(!0),c?e.exports=k:(s.sha256=k.sha256,s.sha224=k.sha224)})()}(ad)),ad.exports}var bq=Cq(),cd={exports:{}},rb;function Rq(){return rb||(rb=1,function(e,t){var r=void 0,s=function(o){return r||(r=new Promise(function(a,c){var i=typeof o<"u"?o:{},u=i.onAbort;i.onAbort=function(g){c(new Error(g)),u&&u(g)},i.postRun=i.postRun||[],i.postRun.push(function(){a(i)}),e=void 0;var l;l||(l=typeof i<"u"?i:{});var h=typeof window=="object",v=typeof WorkerGlobalScope<"u",f=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";l.onRuntimeInitialized=function(){function g(J,ue){switch(typeof ue){case"boolean":KP(J,ue?1:0);break;case"number":VP(J,ue);break;case"string":GP(J,ue,-1,-1);break;case"object":if(ue===null)kf(J);else if(ue.length!=null){var Ee=Du(ue,Iu);JP(J,Ee,ue.length,-1),ku(Ee)}else Mu(J,"Wrong API use : tried to return a value of an unknown type ("+ue+").",-1);break;default:kf(J)}}function C(J,ue){for(var Ee=[],ze=0;ze<J;ze+=1){var Fe=It(ue+4*ze,"i32"),at=BP(Fe);if(at===1||at===2)Fe=WP(Fe);else if(at===3)Fe=UP(Fe);else if(at===4){at=Fe,Fe=FP(at),at=HP(at);for(var wr=new Uint8Array(Fe),gr=0;gr<Fe;gr+=1)wr[gr]=H[at+gr];Fe=wr}else Fe=null;Ee.push(Fe)}return Ee}function w(J,ue){this.Qa=J,this.db=ue,this.Oa=1,this.lb=[]}function A(J,ue){if(this.db=ue,ue=Te(J)+1,this.eb=up(ue),this.eb===null)throw Error("Unable to allocate memory for the SQL string");Ze(J,F,this.eb,ue),this.kb=this.eb,this.Za=this.pb=null}function B(J){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),J!=null){var ue=this.filename,Ee="/",ze=ue;if(Ee&&(Ee=typeof Ee=="string"?Ee:Ao(Ee),ze=ue?V(Ee+"/"+ue):Ee),ue=$n(!0,!0),ze=mP(ze,ue),J){if(typeof J=="string"){Ee=Array(J.length);for(var Fe=0,at=J.length;Fe<at;++Fe)Ee[Fe]=J.charCodeAt(Fe);J=Ee}wu(ze,ue|146),Ee=Vi(ze,577),bf(Ee,J,0,J.length,0),np(Ee),wu(ze,ue)}}this.handleError(ke(this.filename,K)),this.db=It(K,"i32"),Of(this.db),this.fb={},this.Sa={}}var K=Rn(4),re=l.cwrap,ke=re("sqlite3_open","number",["string","number"]),Qe=re("sqlite3_close_v2","number",["number"]),Ve=re("sqlite3_exec","number",["number","string","number","number","number"]),kt=re("sqlite3_changes","number",["number"]),or=re("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Ef=re("sqlite3_sql","string",["number"]),_P=re("sqlite3_normalized_sql","string",["number"]),Af=re("sqlite3_prepare_v2","number",["number","number","number","number","number"]),PP=re("sqlite3_bind_text","number",["number","number","number","number","number"]),Tf=re("sqlite3_bind_blob","number",["number","number","number","number","number"]),wP=re("sqlite3_bind_double","number",["number","number","number"]),EP=re("sqlite3_bind_int","number",["number","number","number"]),AP=re("sqlite3_bind_parameter_index","number",["number","string"]),TP=re("sqlite3_step","number",["number"]),IP=re("sqlite3_errmsg","string",["number"]),DP=re("sqlite3_column_count","number",["number"]),kP=re("sqlite3_data_count","number",["number"]),MP=re("sqlite3_column_double","number",["number","number"]),If=re("sqlite3_column_text","string",["number","number"]),OP=re("sqlite3_column_blob","number",["number","number"]),jP=re("sqlite3_column_bytes","number",["number","number"]),zP=re("sqlite3_column_type","number",["number","number"]),xP=re("sqlite3_column_name","string",["number","number"]),NP=re("sqlite3_reset","number",["number"]),qP=re("sqlite3_clear_bindings","number",["number"]),LP=re("sqlite3_finalize","number",["number"]),Df=re("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),BP=re("sqlite3_value_type","number",["number"]),FP=re("sqlite3_value_bytes","number",["number"]),UP=re("sqlite3_value_text","string",["number"]),HP=re("sqlite3_value_blob","number",["number"]),WP=re("sqlite3_value_double","number",["number"]),VP=re("sqlite3_result_double","",["number","number"]),kf=re("sqlite3_result_null","",["number"]),GP=re("sqlite3_result_text","",["number","string","number","number"]),JP=re("sqlite3_result_blob","",["number","number","number","number"]),KP=re("sqlite3_result_int","",["number","number"]),Mu=re("sqlite3_result_error","",["number","string","number"]),Mf=re("sqlite3_aggregate_context","number",["number","number"]),Of=re("RegisterExtensionFunctions","number",["number"]),jf=re("sqlite3_update_hook","number",["number","number","number"]);w.prototype.bind=function(J){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(J)?this.Cb(J):J!=null&&typeof J=="object"?this.Db(J):!0},w.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var J=TP(this.Qa);switch(J){case 100:return!0;case 101:return!1;default:throw this.db.handleError(J)}},w.prototype.wb=function(J){return J==null&&(J=this.Oa,this.Oa+=1),MP(this.Qa,J)},w.prototype.Gb=function(J){if(J==null&&(J=this.Oa,this.Oa+=1),J=If(this.Qa,J),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(J)},w.prototype.Hb=function(J){return J==null&&(J=this.Oa,this.Oa+=1),If(this.Qa,J)},w.prototype.getBlob=function(J){J==null&&(J=this.Oa,this.Oa+=1);var ue=jP(this.Qa,J);J=OP(this.Qa,J);for(var Ee=new Uint8Array(ue),ze=0;ze<ue;ze+=1)Ee[ze]=H[J+ze];return Ee},w.prototype.get=function(J,ue){ue=ue||{},J!=null&&this.bind(J)&&this.step(),J=[];for(var Ee=kP(this.Qa),ze=0;ze<Ee;ze+=1)switch(zP(this.Qa,ze)){case 1:var Fe=ue.useBigInt?this.Gb(ze):this.wb(ze);J.push(Fe);break;case 2:J.push(this.wb(ze));break;case 3:J.push(this.Hb(ze));break;case 4:J.push(this.getBlob(ze));break;default:J.push(null)}return J},w.prototype.getColumnNames=function(){for(var J=[],ue=DP(this.Qa),Ee=0;Ee<ue;Ee+=1)J.push(xP(this.Qa,Ee));return J},w.prototype.getAsObject=function(J,ue){J=this.get(J,ue),ue=this.getColumnNames();for(var Ee={},ze=0;ze<ue.length;ze+=1)Ee[ue[ze]]=J[ze];return Ee},w.prototype.getSQL=function(){return Ef(this.Qa)},w.prototype.getNormalizedSQL=function(){return _P(this.Qa)},w.prototype.run=function(J){return J!=null&&this.bind(J),this.step(),this.reset()},w.prototype.sb=function(J,ue){ue==null&&(ue=this.Oa,this.Oa+=1),J=Je(J);var Ee=Du(J,Iu);this.lb.push(Ee),this.db.handleError(PP(this.Qa,ue,Ee,J.length-1,0))},w.prototype.Bb=function(J,ue){ue==null&&(ue=this.Oa,this.Oa+=1);var Ee=Du(J,Iu);this.lb.push(Ee),this.db.handleError(Tf(this.Qa,ue,Ee,J.length,0))},w.prototype.rb=function(J,ue){ue==null&&(ue=this.Oa,this.Oa+=1),this.db.handleError((J===(J|0)?EP:wP)(this.Qa,ue,J))},w.prototype.Eb=function(J){J==null&&(J=this.Oa,this.Oa+=1),Tf(this.Qa,J,0,0,0)},w.prototype.tb=function(J,ue){switch(ue==null&&(ue=this.Oa,this.Oa+=1),typeof J){case"string":this.sb(J,ue);return;case"number":this.rb(J,ue);return;case"bigint":this.sb(J.toString(),ue);return;case"boolean":this.rb(J+0,ue);return;case"object":if(J===null){this.Eb(ue);return}if(J.length!=null){this.Bb(J,ue);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+J+")."},w.prototype.Db=function(J){var ue=this;return Object.keys(J).forEach(function(Ee){var ze=AP(ue.Qa,Ee);ze!==0&&ue.tb(J[Ee],ze)}),!0},w.prototype.Cb=function(J){for(var ue=0;ue<J.length;ue+=1)this.tb(J[ue],ue+1);return!0},w.prototype.reset=function(){return this.freemem(),qP(this.Qa)===0&&NP(this.Qa)===0},w.prototype.freemem=function(){for(var J;(J=this.lb.pop())!==void 0;)ku(J)},w.prototype.free=function(){this.freemem();var J=LP(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,J},A.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var J=zo(),ue=Rn(4);P(K),P(ue);try{this.db.handleError(Af(this.db.db,this.kb,-1,K,ue)),this.kb=It(ue,"i32");var Ee=It(K,"i32");return Ee===0?(this.mb(),{done:!0}):(this.Za=new w(Ee,this.db),this.db.fb[Ee]=this.Za,{value:this.Za,done:!1})}catch(ze){throw this.pb=x(this.kb),this.mb(),ze}finally{jo(J)}},A.prototype.mb=function(){ku(this.eb),this.eb=null},A.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:x(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(A.prototype[Symbol.iterator]=function(){return this}),B.prototype.run=function(J,ue){if(!this.db)throw"Database closed";if(ue){J=this.prepare(J,ue);try{J.step()}finally{J.free()}}else this.handleError(Ve(this.db,J,0,0,K));return this},B.prototype.exec=function(J,ue,Ee){if(!this.db)throw"Database closed";var ze=zo(),Fe=null;try{var at=ap(J),wr=Rn(4);for(J=[];It(at,"i8")!==0;){P(K),P(wr),this.handleError(Af(this.db,at,-1,K,wr));var gr=It(K,"i32");if(at=It(wr,"i32"),gr!==0){var cr=null;for(Fe=new w(gr,this),ue!=null&&Fe.bind(ue);Fe.step();)cr===null&&(cr={columns:Fe.getColumnNames(),values:[]},J.push(cr)),cr.values.push(Fe.get(null,Ee));Fe.free()}}return J}catch(Er){throw Fe&&Fe.free(),Er}finally{jo(ze)}},B.prototype.each=function(J,ue,Ee,ze,Fe){typeof ue=="function"&&(ze=Ee,Ee=ue,ue=void 0),J=this.prepare(J,ue);try{for(;J.step();)Ee(J.getAsObject(null,Fe))}finally{J.free()}if(typeof ze=="function")return ze()},B.prototype.prepare=function(J,ue){if(P(K),this.handleError(or(this.db,J,-1,K,0)),J=It(K,"i32"),J===0)throw"Nothing to prepare";var Ee=new w(J,this);return ue!=null&&Ee.bind(ue),this.fb[J]=Ee},B.prototype.iterateStatements=function(J){return new A(J,this)},B.prototype.export=function(){Object.values(this.fb).forEach(function(ue){ue.free()}),Object.values(this.Sa).forEach(bn),this.Sa={},this.handleError(Qe(this.db));var J=SP(this.filename);return this.handleError(ke(this.filename,K)),this.db=It(K,"i32"),Of(this.db),J},B.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(J){J.free()}),Object.values(this.Sa).forEach(bn),this.Sa={},this.Ya&&(bn(this.Ya),this.Ya=void 0),this.handleError(Qe(this.db)),mf("/"+this.filename),this.db=null)},B.prototype.handleError=function(J){if(J===0)return null;throw J=IP(this.db),Error(J)},B.prototype.getRowsModified=function(){return kt(this.db)},B.prototype.create_function=function(J,ue){Object.prototype.hasOwnProperty.call(this.Sa,J)&&(bn(this.Sa[J]),delete this.Sa[J]);var Ee=Oo(function(ze,Fe,at){Fe=C(Fe,at);try{var wr=ue.apply(null,Fe)}catch(gr){Mu(ze,gr,-1);return}g(ze,wr)},"viii");return this.Sa[J]=Ee,this.handleError(Df(this.db,J,ue.length,1,0,Ee,0,0,0)),this},B.prototype.create_aggregate=function(J,ue){var Ee=ue.init||function(){return null},ze=ue.finalize||function(cr){return cr},Fe=ue.step;if(!Fe)throw"An aggregate function must have a step function in "+J;var at={};Object.hasOwnProperty.call(this.Sa,J)&&(bn(this.Sa[J]),delete this.Sa[J]),ue=J+"__finalize",Object.hasOwnProperty.call(this.Sa,ue)&&(bn(this.Sa[ue]),delete this.Sa[ue]);var wr=Oo(function(cr,Er,pp){var ii=Mf(cr,1);Object.hasOwnProperty.call(at,ii)||(at[ii]=Ee()),Er=C(Er,pp),Er=[at[ii]].concat(Er);try{at[ii]=Fe.apply(null,Er)}catch(ZP){delete at[ii],Mu(cr,ZP,-1)}},"viii"),gr=Oo(function(cr){var Er=Mf(cr,1);try{var pp=ze(at[Er])}catch(ii){delete at[Er],Mu(cr,ii,-1);return}g(cr,pp),delete at[Er]},"vi");return this.Sa[J]=wr,this.Sa[ue]=gr,this.handleError(Df(this.db,J,Fe.length-1,1,0,0,wr,gr,0)),this},B.prototype.updateHook=function(J){this.Ya&&(jf(this.db,0,0),bn(this.Ya),this.Ya=void 0),J&&(this.Ya=Oo(function(ue,Ee,ze,Fe,at){switch(Ee){case 18:ue="insert";break;case 23:ue="update";break;case 9:ue="delete";break;default:throw"unknown operationCode in updateHook callback: "+Ee}if(ze=ze?Q(F,ze):"",Fe=Fe?Q(F,Fe):"",at>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";J(ue,ze,Fe,Number(at))},"viiiij"),jf(this.db,this.Ya,0))},l.Database=B};var d={...l},y="./this.program",m=(g,C)=>{throw C},b="",S,R;if(f){var _=Mr;b=__dirname+"/",R=g=>(g=De(g)?new URL(g):g,_.readFileSync(g)),S=async g=>(g=De(g)?new URL(g):g,_.readFileSync(g,void 0)),!l.thisProgram&&1<process.argv.length&&(y=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),e.exports=l,m=(g,C)=>{throw process.exitCode=g,C}}else(h||v)&&(v?b=self.location.href:typeof document<"u"&&document.currentScript&&(b=document.currentScript.src),b=b.startsWith("blob:")?"":b.slice(0,b.replace(/[?#].*/,"").lastIndexOf("/")+1),v&&(R=g=>{var C=new XMLHttpRequest;return C.open("GET",g,!1),C.responseType="arraybuffer",C.send(null),new Uint8Array(C.response)}),S=async g=>{if(De(g))return new Promise((w,A)=>{var B=new XMLHttpRequest;B.open("GET",g,!0),B.responseType="arraybuffer",B.onload=()=>{B.status==200||B.status==0&&B.response?w(B.response):A(B.status)},B.onerror=A,B.send(null)});var C=await fetch(g,{credentials:"same-origin"});if(C.ok)return C.arrayBuffer();throw Error(C.status+" : "+C.url)});var T=l.print||console.log.bind(console),k=l.printErr||console.error.bind(console);Object.assign(l,d),d=null,l.thisProgram&&(y=l.thisProgram);var I=l.wasmBinary,z,L=!1,N,H,F,M,j,E,ee,$e,oe,De=g=>g.startsWith("file://");function te(){var g=z.buffer;l.HEAP8=H=new Int8Array(g),l.HEAP16=M=new Int16Array(g),l.HEAPU8=F=new Uint8Array(g),l.HEAPU16=new Uint16Array(g),l.HEAP32=j=new Int32Array(g),l.HEAPU32=E=new Uint32Array(g),l.HEAPF32=ee=new Float32Array(g),l.HEAPF64=oe=new Float64Array(g),l.HEAP64=$e=new BigInt64Array(g),l.HEAPU64=new BigUint64Array(g)}var _e=0,X=null;function Z(g){var C;throw(C=l.onAbort)==null||C.call(l,g),g="Aborted("+g+")",k(g),L=!0,new WebAssembly.RuntimeError(g+". Build with -sASSERTIONS for more info.")}var Ae;async function ye(g){if(!I)try{var C=await S(g);return new Uint8Array(C)}catch{}if(g==Ae&&I)g=new Uint8Array(I);else if(R)g=R(g);else throw"both async and sync fetching of the wasm failed";return g}async function ve(g,C){try{var w=await ye(g);return await WebAssembly.instantiate(w,C)}catch(A){k(`failed to asynchronously prepare wasm: ${A}`),Z(A)}}async function ft(g){var C=Ae;if(!I&&typeof WebAssembly.instantiateStreaming=="function"&&!De(C)&&!f)try{var w=fetch(C,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(w,g)}catch(A){k(`wasm streaming compile failed: ${A}`),k("falling back to ArrayBuffer instantiation")}return ve(C,g)}class Tt{constructor(C){jt(this,"name","ExitStatus");this.message=`Program terminated with exit(${C})`,this.status=C}}var Ge=g=>{for(;0<g.length;)g.shift()(l)},tt=[],Pt=[],gt=()=>{var g=l.preRun.shift();Pt.unshift(g)};function It(g,C="i8"){switch(C.endsWith("*")&&(C="*"),C){case"i1":return H[g];case"i8":return H[g];case"i16":return M[g>>1];case"i32":return j[g>>2];case"i64":return $e[g>>3];case"float":return ee[g>>2];case"double":return oe[g>>3];case"*":return E[g>>2];default:Z(`invalid type for getValue: ${C}`)}}var Bt=l.noExitRuntime||!0;function P(g){var C="i32";switch(C.endsWith("*")&&(C="*"),C){case"i1":H[g]=0;break;case"i8":H[g]=0;break;case"i16":M[g>>1]=0;break;case"i32":j[g>>2]=0;break;case"i64":$e[g>>3]=BigInt(0);break;case"float":ee[g>>2]=0;break;case"double":oe[g>>3]=0;break;case"*":E[g>>2]=0;break;default:Z(`invalid type for setValue: ${C}`)}}var ie=typeof TextDecoder<"u"?new TextDecoder:void 0,Q=(g,C=0,w=NaN)=>{var A=C+w;for(w=C;g[w]&&!(w>=A);)++w;if(16<w-C&&g.buffer&&ie)return ie.decode(g.subarray(C,w));for(A="";C<w;){var B=g[C++];if(B&128){var K=g[C++]&63;if((B&224)==192)A+=String.fromCharCode((B&31)<<6|K);else{var re=g[C++]&63;B=(B&240)==224?(B&15)<<12|K<<6|re:(B&7)<<18|K<<12|re<<6|g[C++]&63,65536>B?A+=String.fromCharCode(B):(B-=65536,A+=String.fromCharCode(55296|B>>10,56320|B&1023))}}else A+=String.fromCharCode(B)}return A},x=(g,C)=>g?Q(F,g,C):"",O=(g,C)=>{for(var w=0,A=g.length-1;0<=A;A--){var B=g[A];B==="."?g.splice(A,1):B===".."?(g.splice(A,1),w++):w&&(g.splice(A,1),w--)}if(C)for(;w;w--)g.unshift("..");return g},V=g=>{var C=g.charAt(0)==="/",w=g.slice(-1)==="/";return(g=O(g.split("/").filter(A=>!!A),!C).join("/"))||C||(g="."),g&&w&&(g+="/"),(C?"/":"")+g},ae=g=>{var C=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(g).slice(1);return g=C[0],C=C[1],!g&&!C?".":(C&&(C=C.slice(0,-1)),g+C)},ce=g=>g&&g.match(/([^\/]+|\/)\/*$/)[1],Y=()=>{if(f){var g=Mr;return C=>g.randomFillSync(C)}return C=>crypto.getRandomValues(C)},pe=g=>{(pe=Y())(g)},Ce=(...g)=>{for(var C="",w=!1,A=g.length-1;-1<=A&&!w;A--){if(w=0<=A?g[A]:"/",typeof w!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!w)return"";C=w+"/"+C,w=w.charAt(0)==="/"}return C=O(C.split("/").filter(B=>!!B),!w).join("/"),(w?"/":"")+C||"."},he=[],Te=g=>{for(var C=0,w=0;w<g.length;++w){var A=g.charCodeAt(w);127>=A?C++:2047>=A?C+=2:55296<=A&&57343>=A?(C+=4,++w):C+=3}return C},Ze=(g,C,w,A)=>{if(!(0<A))return 0;var B=w;A=w+A-1;for(var K=0;K<g.length;++K){var re=g.charCodeAt(K);if(55296<=re&&57343>=re){var ke=g.charCodeAt(++K);re=65536+((re&1023)<<10)|ke&1023}if(127>=re){if(w>=A)break;C[w++]=re}else{if(2047>=re){if(w+1>=A)break;C[w++]=192|re>>6}else{if(65535>=re){if(w+2>=A)break;C[w++]=224|re>>12}else{if(w+3>=A)break;C[w++]=240|re>>18,C[w++]=128|re>>12&63}C[w++]=128|re>>6&63}C[w++]=128|re&63}}return C[w]=0,w-B},Je=(g,C)=>{var w=Array(Te(g)+1);return g=Ze(g,w,0,w.length),C&&(w.length=g),w},Ft=[];function Ur(g,C){Ft[g]={input:[],output:[],cb:C},tp(g,Ht)}var Ht={open(g){var C=Ft[g.node.rdev];if(!C)throw new ge(43);g.tty=C,g.seekable=!1},close(g){g.tty.cb.fsync(g.tty)},fsync(g){g.tty.cb.fsync(g.tty)},read(g,C,w,A){if(!g.tty||!g.tty.cb.xb)throw new ge(60);for(var B=0,K=0;K<A;K++){try{var re=g.tty.cb.xb(g.tty)}catch{throw new ge(29)}if(re===void 0&&B===0)throw new ge(6);if(re==null)break;B++,C[w+K]=re}return B&&(g.node.atime=Date.now()),B},write(g,C,w,A){if(!g.tty||!g.tty.cb.qb)throw new ge(60);try{for(var B=0;B<A;B++)g.tty.cb.qb(g.tty,C[w+B])}catch{throw new ge(29)}return A&&(g.node.mtime=g.node.ctime=Date.now()),B}},Dt={xb(){e:{if(!he.length){var g=null;if(f){var C=Buffer.alloc(256),w=0,A=process.stdin.fd;try{w=_.readSync(A,C,0,256)}catch(B){if(B.toString().includes("EOF"))w=0;else throw B}0<w&&(g=C.slice(0,w).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(g=window.prompt("Input: "),g!==null&&(g+=`
`));if(!g){g=null;break e}he=Je(g,!0)}g=he.shift()}return g},qb(g,C){C===null||C===10?(T(Q(g.output)),g.output=[]):C!=0&&g.output.push(C)},fsync(g){var C;0<((C=g.output)==null?void 0:C.length)&&(T(Q(g.output)),g.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},mt={qb(g,C){C===null||C===10?(k(Q(g.output)),g.output=[]):C!=0&&g.output.push(C)},fsync(g){var C;0<((C=g.output)==null?void 0:C.length)&&(k(Q(g.output)),g.output=[])}},Ne={Wa:null,Xa(){return Ne.createNode(null,"/",16895,0)},createNode(g,C,w,A){if((w&61440)===24576||(w&61440)===4096)throw new ge(63);return Ne.Wa||(Ne.Wa={dir:{node:{Ta:Ne.La.Ta,Ua:Ne.La.Ua,lookup:Ne.La.lookup,hb:Ne.La.hb,rename:Ne.La.rename,unlink:Ne.La.unlink,rmdir:Ne.La.rmdir,readdir:Ne.La.readdir,symlink:Ne.La.symlink},stream:{Va:Ne.Ma.Va}},file:{node:{Ta:Ne.La.Ta,Ua:Ne.La.Ua},stream:{Va:Ne.Ma.Va,read:Ne.Ma.read,write:Ne.Ma.write,ib:Ne.Ma.ib,jb:Ne.Ma.jb}},link:{node:{Ta:Ne.La.Ta,Ua:Ne.La.Ua,readlink:Ne.La.readlink},stream:{}},ub:{node:{Ta:Ne.La.Ta,Ua:Ne.La.Ua},stream:gP}}),w=Cu(g,C,w,A),Wt(w.mode)?(w.La=Ne.Wa.dir.node,w.Ma=Ne.Wa.dir.stream,w.Na={}):(w.mode&61440)===32768?(w.La=Ne.Wa.file.node,w.Ma=Ne.Wa.file.stream,w.Ra=0,w.Na=null):(w.mode&61440)===40960?(w.La=Ne.Wa.link.node,w.Ma=Ne.Wa.link.stream):(w.mode&61440)===8192&&(w.La=Ne.Wa.ub.node,w.Ma=Ne.Wa.ub.stream),w.atime=w.mtime=w.ctime=Date.now(),g&&(g.Na[C]=w,g.atime=g.mtime=g.ctime=w.atime),w},Sb(g){return g.Na?g.Na.subarray?g.Na.subarray(0,g.Ra):new Uint8Array(g.Na):new Uint8Array(0)},La:{Ta(g){var C={};return C.dev=(g.mode&61440)===8192?g.id:1,C.ino=g.id,C.mode=g.mode,C.nlink=1,C.uid=0,C.gid=0,C.rdev=g.rdev,Wt(g.mode)?C.size=4096:(g.mode&61440)===32768?C.size=g.Ra:(g.mode&61440)===40960?C.size=g.link.length:C.size=0,C.atime=new Date(g.atime),C.mtime=new Date(g.mtime),C.ctime=new Date(g.ctime),C.blksize=4096,C.blocks=Math.ceil(C.size/C.blksize),C},Ua(g,C){for(var w of["mode","atime","mtime","ctime"])C[w]!=null&&(g[w]=C[w]);C.size!==void 0&&(C=C.size,g.Ra!=C&&(C==0?(g.Na=null,g.Ra=0):(w=g.Na,g.Na=new Uint8Array(C),w&&g.Na.set(w.subarray(0,Math.min(C,g.Ra))),g.Ra=C)))},lookup(){throw Ne.vb},hb(g,C,w,A){return Ne.createNode(g,C,w,A)},rename(g,C,w){try{var A=tn(C,w)}catch{}if(A){if(Wt(g.mode))for(var B in A.Na)throw new ge(55);Io(A)}delete g.parent.Na[g.name],C.Na[w]=g,g.name=w,C.ctime=C.mtime=g.parent.ctime=g.parent.mtime=Date.now()},unlink(g,C){delete g.Na[C],g.ctime=g.mtime=Date.now()},rmdir(g,C){var w=tn(g,C),A;for(A in w.Na)throw new ge(55);delete g.Na[C],g.ctime=g.mtime=Date.now()},readdir(g){return[".","..",...Object.keys(g.Na)]},symlink(g,C,w){return g=Ne.createNode(g,C,41471,0),g.link=w,g},readlink(g){if((g.mode&61440)!==40960)throw new ge(28);return g.link}},Ma:{read(g,C,w,A,B){var K=g.node.Na;if(B>=g.node.Ra)return 0;if(g=Math.min(g.node.Ra-B,A),8<g&&K.subarray)C.set(K.subarray(B,B+g),w);else for(A=0;A<g;A++)C[w+A]=K[B+A];return g},write(g,C,w,A,B,K){if(C.buffer===H.buffer&&(K=!1),!A)return 0;if(g=g.node,g.mtime=g.ctime=Date.now(),C.subarray&&(!g.Na||g.Na.subarray)){if(K)return g.Na=C.subarray(w,w+A),g.Ra=A;if(g.Ra===0&&B===0)return g.Na=C.slice(w,w+A),g.Ra=A;if(B+A<=g.Ra)return g.Na.set(C.subarray(w,w+A),B),A}K=B+A;var re=g.Na?g.Na.length:0;if(re>=K||(K=Math.max(K,re*(1048576>re?2:1.125)>>>0),re!=0&&(K=Math.max(K,256)),re=g.Na,g.Na=new Uint8Array(K),0<g.Ra&&g.Na.set(re.subarray(0,g.Ra),0)),g.Na.subarray&&C.subarray)g.Na.set(C.subarray(w,w+A),B);else for(K=0;K<A;K++)g.Na[B+K]=C[w+K];return g.Ra=Math.max(g.Ra,B+A),A},Va(g,C,w){if(w===1?C+=g.position:w===2&&(g.node.mode&61440)===32768&&(C+=g.node.Ra),0>C)throw new ge(28);return C},ib(g,C,w,A,B){if((g.node.mode&61440)!==32768)throw new ge(43);if(g=g.node.Na,B&2||!g||g.buffer!==H.buffer){B=!0,A=65536*Math.ceil(C/65536);var K=Pf(65536,A);if(K&&F.fill(0,K,K+A),A=K,!A)throw new ge(48);g&&((0<w||w+C<g.length)&&(g.subarray?g=g.subarray(w,w+C):g=Array.prototype.slice.call(g,w,w+C)),H.set(g,A))}else B=!1,A=g.byteOffset;return{Kb:A,Ab:B}},jb(g,C,w,A){return Ne.Ma.write(g,C,0,A,w,!1),0}}},$n=(g,C)=>{var w=0;return g&&(w|=365),C&&(w|=146),w},Qt=null,ei={},Hr=[],Eo=1,fr=null,ti=!1,Wr=!0,en={},ge=class{constructor(g){jt(this,"name","ErrnoError");this.Pa=g}},Yl=class{constructor(){jt(this,"gb",{});jt(this,"node",null)}get flags(){return this.gb.flags}set flags(g){this.gb.flags=g}get position(){return this.gb.position}set position(g){this.gb.position=g}},Xl=class{constructor(g,C,w,A){jt(this,"La",{});jt(this,"Ma",{});jt(this,"ab",null);g||(g=this),this.parent=g,this.Xa=g.Xa,this.id=Eo++,this.name=C,this.mode=w,this.rdev=A,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(g){g?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(g){g?this.mode|=146:this.mode&=-147}};function ir(g,C={}){if(!g)throw new ge(44);C.nb??(C.nb=!0),g.charAt(0)==="/"||(g="//"+g);var w=0;e:for(;40>w;w++){g=g.split("/").filter(ke=>!!ke);for(var A=Qt,B="/",K=0;K<g.length;K++){var re=K===g.length-1;if(re&&C.parent)break;if(g[K]!==".")if(g[K]==="..")B=ae(B),A=A.parent;else{B=V(B+"/"+g[K]);try{A=tn(A,g[K])}catch(ke){if((ke==null?void 0:ke.Pa)===44&&re&&C.Jb)return{path:B};throw ke}if(!A.ab||re&&!C.nb||(A=A.ab.root),(A.mode&61440)===40960&&(!re||C.$a)){if(!A.La.readlink)throw new ge(52);A=A.La.readlink(A),A.charAt(0)==="/"||(A=ae(B)+"/"+A),g=A+"/"+g.slice(K+1).join("/");continue e}}}return{path:B,node:A}}throw new ge(32)}function Ao(g){for(var C;;){if(g===g.parent)return g=g.Xa.zb,C?g[g.length-1]!=="/"?`${g}/${C}`:g+C:g;C=C?`${g.name}/${C}`:g.name,g=g.parent}}function To(g,C){for(var w=0,A=0;A<C.length;A++)w=(w<<5)-w+C.charCodeAt(A)|0;return(g+w>>>0)%fr.length}function Io(g){var C=To(g.parent.id,g.name);if(fr[C]===g)fr[C]=g.bb;else for(C=fr[C];C;){if(C.bb===g){C.bb=g.bb;break}C=C.bb}}function tn(g,C){var w=Wt(g.mode)?(w=yn(g,"x"))?w:g.La.lookup?0:2:54;if(w)throw new ge(w);for(w=fr[To(g.id,C)];w;w=w.bb){var A=w.name;if(w.parent.id===g.id&&A===C)return w}return g.La.lookup(g,C)}function Cu(g,C,w,A){return g=new Xl(g,C,w,A),C=To(g.parent.id,g.name),g.bb=fr[C],fr[C]=g}function Wt(g){return(g&61440)===16384}function bu(g){var C=["r","w","rw"][g&3];return g&512&&(C+="w"),C}function yn(g,C){if(Wr)return 0;if(!C.includes("r")||g.mode&292){if(C.includes("w")&&!(g.mode&146)||C.includes("x")&&!(g.mode&73))return 2}else return 2;return 0}function Do(g,C){if(!Wt(g.mode))return 54;try{return tn(g,C),20}catch{}return yn(g,"wx")}function Ru(g,C,w){try{var A=tn(g,C)}catch(B){return B.Pa}if(g=yn(g,"wx"))return g;if(w){if(!Wt(A.mode))return 54;if(A===A.parent||Ao(A)==="/")return 10}else if(Wt(A.mode))return 31;return 0}function Wi(g){if(!g)throw new ge(63);return g}function Ut(g){if(g=Hr[g],!g)throw new ge(8);return g}function vf(g,C=-1){if(g=Object.assign(new Yl,g),C==-1)e:{for(C=0;4096>=C;C++)if(!Hr[C])break e;throw new ge(33)}return g.fd=C,Hr[C]=g}function fP(g,C=-1){var w,A;return g=vf(g,C),(A=(w=g.Ma)==null?void 0:w.Rb)==null||A.call(w,g),g}function ep(g,C,w){var A=g==null?void 0:g.Ma.Ua;g=A?g:C,A??(A=C.La.Ua),Wi(A),A(g,w)}var gP={open(g){var C,w;g.Ma=ei[g.node.rdev].Ma,(w=(C=g.Ma).open)==null||w.call(C,g)},Va(){throw new ge(70)}};function tp(g,C){ei[g]={Ma:C}}function ff(g,C){var w=C==="/";if(w&&Qt)throw new ge(10);if(!w&&C){var A=ir(C,{nb:!1});if(C=A.path,A=A.node,A.ab)throw new ge(10);if(!Wt(A.mode))throw new ge(54)}C={type:g,Wb:{},zb:C,Ib:[]},g=g.Xa(C),g.Xa=C,C.root=g,w?Qt=g:A&&(A.ab=C,A.Xa&&A.Xa.Ib.push(C))}function _u(g,C,w){var A=ir(g,{parent:!0}).node;if(g=ce(g),!g)throw new ge(28);if(g==="."||g==="..")throw new ge(20);var B=Do(A,g);if(B)throw new ge(B);if(!A.La.hb)throw new ge(63);return A.La.hb(A,g,C,w)}function mP(g,C=438){return _u(g,C&4095|32768,0)}function Vr(g,C=511){return _u(g,C&1023|16384,0)}function Pu(g,C,w){typeof w>"u"&&(w=C,C=438),_u(g,C|8192,w)}function rp(g,C){if(!Ce(g))throw new ge(44);var w=ir(C,{parent:!0}).node;if(!w)throw new ge(44);C=ce(C);var A=Do(w,C);if(A)throw new ge(A);if(!w.La.symlink)throw new ge(63);w.La.symlink(w,C,g)}function gf(g){var C=ir(g,{parent:!0}).node;g=ce(g);var w=tn(C,g),A=Ru(C,g,!0);if(A)throw new ge(A);if(!C.La.rmdir)throw new ge(63);if(w.ab)throw new ge(10);C.La.rmdir(C,g),Io(w)}function mf(g){var C=ir(g,{parent:!0}).node;if(!C)throw new ge(44);g=ce(g);var w=tn(C,g),A=Ru(C,g,!1);if(A)throw new ge(A);if(!C.La.unlink)throw new ge(63);if(w.ab)throw new ge(10);C.La.unlink(C,g),Io(w)}function ko(g,C){return g=ir(g,{$a:!C}).node,Wi(g.La.Ta)(g)}function Sf(g,C,w,A){ep(g,C,{mode:w&4095|C.mode&-4096,ctime:Date.now(),Fb:A})}function wu(g,C){g=typeof g=="string"?ir(g,{$a:!0}).node:g,Sf(null,g,C)}function $f(g,C,w){if(Wt(C.mode))throw new ge(31);if((C.mode&61440)!==32768)throw new ge(28);var A=yn(C,"w");if(A)throw new ge(A);ep(g,C,{size:w,timestamp:Date.now()})}function Vi(g,C,w=438){if(g==="")throw new ge(44);if(typeof C=="string"){var A={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[C];if(typeof A>"u")throw Error(`Unknown file open mode: ${C}`);C=A}if(w=C&64?w&4095|32768:0,typeof g=="object")A=g;else{var B=g.endsWith("/");g=ir(g,{$a:!(C&131072),Jb:!0}),A=g.node,g=g.path}var K=!1;if(C&64)if(A){if(C&128)throw new ge(20)}else{if(B)throw new ge(31);A=_u(g,w|511,0),K=!0}if(!A)throw new ge(44);if((A.mode&61440)===8192&&(C&=-513),C&65536&&!Wt(A.mode))throw new ge(54);if(!K&&(B=A?(A.mode&61440)===40960?32:Wt(A.mode)&&(bu(C)!=="r"||C&576)?31:yn(A,bu(C)):44))throw new ge(B);return C&512&&!K&&(B=A,B=typeof B=="string"?ir(B,{$a:!0}).node:B,$f(null,B,0)),C&=-131713,B=vf({node:A,path:Ao(A),flags:C,seekable:!0,position:0,Ma:A.Ma,Lb:[],error:!1}),B.Ma.open&&B.Ma.open(B),K&&wu(A,w&511),!l.logReadFiles||C&1||g in en||(en[g]=1),B}function np(g){if(g.fd===null)throw new ge(8);g.ob&&(g.ob=null);try{g.Ma.close&&g.Ma.close(g)}catch(C){throw C}finally{Hr[g.fd]=null}g.fd=null}function yf(g,C,w){if(g.fd===null)throw new ge(8);if(!g.seekable||!g.Ma.Va)throw new ge(70);if(w!=0&&w!=1&&w!=2)throw new ge(28);g.position=g.Ma.Va(g,C,w),g.Lb=[]}function Cf(g,C,w,A,B){if(0>A||0>B)throw new ge(28);if(g.fd===null)throw new ge(8);if((g.flags&2097155)===1)throw new ge(8);if(Wt(g.node.mode))throw new ge(31);if(!g.Ma.read)throw new ge(28);var K=typeof B<"u";if(!K)B=g.position;else if(!g.seekable)throw new ge(70);return C=g.Ma.read(g,C,w,A,B),K||(g.position+=C),C}function bf(g,C,w,A,B){if(0>A||0>B)throw new ge(28);if(g.fd===null)throw new ge(8);if((g.flags&2097155)===0)throw new ge(8);if(Wt(g.node.mode))throw new ge(31);if(!g.Ma.write)throw new ge(28);g.seekable&&g.flags&1024&&yf(g,0,2);var K=typeof B<"u";if(!K)B=g.position;else if(!g.seekable)throw new ge(70);return C=g.Ma.write(g,C,w,A,B,void 0),K||(g.position+=C),C}function SP(g){var C,w=Vi(g,w||0);g=ko(g).size;var A=new Uint8Array(g);return Cf(w,A,0,g,0),C=A,np(w),C}function Cn(g,C,w){g=V("/dev/"+g);var A=$n(!!C,!!w);Cn.yb??(Cn.yb=64);var B=Cn.yb++<<8|0;tp(B,{open(K){K.seekable=!1},close(){var K;(K=w==null?void 0:w.buffer)!=null&&K.length&&w(10)},read(K,re,ke,Qe){for(var Ve=0,kt=0;kt<Qe;kt++){try{var or=C()}catch{throw new ge(29)}if(or===void 0&&Ve===0)throw new ge(6);if(or==null)break;Ve++,re[ke+kt]=or}return Ve&&(K.node.atime=Date.now()),Ve},write(K,re,ke,Qe){for(var Ve=0;Ve<Qe;Ve++)try{w(re[ke+Ve])}catch{throw new ge(29)}return Qe&&(K.node.mtime=K.node.ctime=Date.now()),Ve}}),Pu(g,A,B)}var St={};function ri(g,C,w){if(C.charAt(0)==="/")return C;if(g=g===-100?"/":Ut(g).path,C.length==0){if(!w)throw new ge(44);return g}return g+"/"+C}function Eu(g,C){j[g>>2]=C.dev,j[g+4>>2]=C.mode,E[g+8>>2]=C.nlink,j[g+12>>2]=C.uid,j[g+16>>2]=C.gid,j[g+20>>2]=C.rdev,$e[g+24>>3]=BigInt(C.size),j[g+32>>2]=4096,j[g+36>>2]=C.blocks;var w=C.atime.getTime(),A=C.mtime.getTime(),B=C.ctime.getTime();return $e[g+40>>3]=BigInt(Math.floor(w/1e3)),E[g+48>>2]=w%1e3*1e6,$e[g+56>>3]=BigInt(Math.floor(A/1e3)),E[g+64>>2]=A%1e3*1e6,$e[g+72>>3]=BigInt(Math.floor(B/1e3)),E[g+80>>2]=B%1e3*1e6,$e[g+88>>3]=BigInt(C.ino),0}var Au=void 0,Tu=()=>{var g=j[+Au>>2];return Au+=4,g},ip=0,$P=[0,31,60,91,121,152,182,213,244,274,305,335],yP=[0,31,59,90,120,151,181,212,243,273,304,334],Mo={},Rf=g=>{var C;N=g,Bt||0<ip||((C=l.onExit)==null||C.call(l,g),L=!0),m(g,new Tt(g))},CP=g=>{if(!L)try{if(g(),!(Bt||0<ip))try{N=g=N,Rf(g)}catch(C){C instanceof Tt||C=="unwind"||m(1,C)}}catch(C){C instanceof Tt||C=="unwind"||m(1,C)}},op={},_f=()=>{if(!sp){var g={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:y||"./this.program"},C;for(C in op)op[C]===void 0?delete g[C]:g[C]=op[C];var w=[];for(C in g)w.push(`${C}=${g[C]}`);sp=w}return sp},sp,ap=g=>{var C=Te(g)+1,w=Rn(C);return Ze(g,F,w,C),w},bP=(g,C,w,A)=>{var B={string:Ve=>{var kt=0;return Ve!=null&&Ve!==0&&(kt=ap(Ve)),kt},array:Ve=>{var kt=Rn(Ve.length);return H.set(Ve,kt),kt}};g=l["_"+g];var K=[],re=0;if(A)for(var ke=0;ke<A.length;ke++){var Qe=B[w[ke]];Qe?(re===0&&(re=zo()),K[ke]=Qe(A[ke])):K[ke]=A[ke]}return w=g(...K),w=function(Ve){return re!==0&&jo(re),C==="string"?Ve?Q(F,Ve):"":C==="boolean"?!!Ve:Ve}(w)},Iu=0,Du=(g,C)=>(C=C==1?Rn(g.length):up(g.length),g.subarray||g.slice||(g=new Uint8Array(g)),F.set(g,C),C),ni,cp=[],rn,bn=g=>{ni.delete(rn.get(g)),rn.set(g,null),cp.push(g)},Oo=(g,C)=>{if(!ni){ni=new WeakMap;var w=rn.length;if(ni)for(var A=0;A<0+w;A++){var B=rn.get(A);B&&ni.set(B,A)}}if(w=ni.get(g)||0)return w;if(cp.length)w=cp.pop();else{try{rn.grow(1)}catch(Qe){throw Qe instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":Qe}w=rn.length-1}try{rn.set(w,g)}catch(Qe){if(!(Qe instanceof TypeError))throw Qe;if(typeof WebAssembly.Function=="function"){var K=WebAssembly.Function;A={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},B={parameters:[],results:C[0]=="v"?[]:[A[C[0]]]};for(var re=1;re<C.length;++re)B.parameters.push(A[C[re]]);C=new K(B,g)}else{A=[1],B=C.slice(0,1),C=C.slice(1),re={i:127,p:127,j:126,f:125,d:124,e:111},A.push(96);var ke=C.length;128>ke?A.push(ke):A.push(ke%128|128,ke>>7);for(K of C)A.push(re[K]);B=="v"?A.push(0):A.push(1,re[B]),C=[0,97,115,109,1,0,0,0,1],K=A.length,128>K?C.push(K):C.push(K%128|128,K>>7),C.push(...A),C.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),C=new WebAssembly.Module(new Uint8Array(C)),C=new WebAssembly.Instance(C,{e:{f:g}}).exports.f}rn.set(w,C)}return ni.set(g,w),w};fr=Array(4096),ff(Ne,"/"),Vr("/tmp"),Vr("/home"),Vr("/home/web_user"),function(){Vr("/dev"),tp(259,{read:()=>0,write:(A,B,K,re)=>re,Va:()=>0}),Pu("/dev/null",259),Ur(1280,Dt),Ur(1536,mt),Pu("/dev/tty",1280),Pu("/dev/tty1",1536);var g=new Uint8Array(1024),C=0,w=()=>(C===0&&(pe(g),C=g.byteLength),g[--C]);Cn("random",w),Cn("urandom",w),Vr("/dev/shm"),Vr("/dev/shm/tmp")}(),function(){Vr("/proc");var g=Vr("/proc/self");Vr("/proc/self/fd"),ff({Xa(){var C=Cu(g,"fd",16895,73);return C.Ma={Va:Ne.Ma.Va},C.La={lookup(w,A){w=+A;var B=Ut(w);return w={parent:null,Xa:{zb:"fake"},La:{readlink:()=>B.path},id:w+1},w.parent=w},readdir(){return Array.from(Hr.entries()).filter(([,w])=>w).map(([w])=>w.toString())}},C}},"/proc/self/fd")}(),Ne.vb=new ge(44),Ne.vb.stack="<generic error, no stack>";var RP={a:(g,C,w,A)=>Z(`Assertion failed: ${g?Q(F,g):""}, at: `+[C?C?Q(F,C):"":"unknown filename",w,A?A?Q(F,A):"":"unknown function"]),i:function(g,C){try{return g=g?Q(F,g):"",wu(g,C),0}catch(w){if(typeof St>"u"||w.name!=="ErrnoError")throw w;return-w.Pa}},L:function(g,C,w){try{if(C=C?Q(F,C):"",C=ri(g,C),w&-8)return-28;var A=ir(C,{$a:!0}).node;return A?(g="",w&4&&(g+="r"),w&2&&(g+="w"),w&1&&(g+="x"),g&&yn(A,g)?-2:0):-44}catch(B){if(typeof St>"u"||B.name!=="ErrnoError")throw B;return-B.Pa}},j:function(g,C){try{var w=Ut(g);return Sf(w,w.node,C,!1),0}catch(A){if(typeof St>"u"||A.name!=="ErrnoError")throw A;return-A.Pa}},h:function(g){try{var C=Ut(g);return ep(C,C.node,{timestamp:Date.now(),Fb:!1}),0}catch(w){if(typeof St>"u"||w.name!=="ErrnoError")throw w;return-w.Pa}},b:function(g,C,w){Au=w;try{var A=Ut(g);switch(C){case 0:var B=Tu();if(0>B)break;for(;Hr[B];)B++;return fP(A,B).fd;case 1:case 2:return 0;case 3:return A.flags;case 4:return B=Tu(),A.flags|=B,0;case 12:return B=Tu(),M[B+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(K){if(typeof St>"u"||K.name!=="ErrnoError")throw K;return-K.Pa}},g:function(g,C){try{var w=Ut(g),A=w.node,B=w.Ma.Ta;g=B?w:A,B??(B=A.La.Ta),Wi(B);var K=B(g);return Eu(C,K)}catch(re){if(typeof St>"u"||re.name!=="ErrnoError")throw re;return-re.Pa}},H:function(g,C){C=-9007199254740992>C||9007199254740992<C?NaN:Number(C);try{if(isNaN(C))return 61;var w=Ut(g);if(0>C||(w.flags&2097155)===0)throw new ge(28);return $f(w,w.node,C),0}catch(A){if(typeof St>"u"||A.name!=="ErrnoError")throw A;return-A.Pa}},G:function(g,C){try{if(C===0)return-28;var w=Te("/")+1;return C<w?-68:(Ze("/",F,g,C),w)}catch(A){if(typeof St>"u"||A.name!=="ErrnoError")throw A;return-A.Pa}},K:function(g,C){try{return g=g?Q(F,g):"",Eu(C,ko(g,!0))}catch(w){if(typeof St>"u"||w.name!=="ErrnoError")throw w;return-w.Pa}},C:function(g,C,w){try{return C=C?Q(F,C):"",C=ri(g,C),Vr(C,w),0}catch(A){if(typeof St>"u"||A.name!=="ErrnoError")throw A;return-A.Pa}},J:function(g,C,w,A){try{C=C?Q(F,C):"";var B=A&256;return C=ri(g,C,A&4096),Eu(w,B?ko(C,!0):ko(C))}catch(K){if(typeof St>"u"||K.name!=="ErrnoError")throw K;return-K.Pa}},x:function(g,C,w,A){Au=A;try{C=C?Q(F,C):"",C=ri(g,C);var B=A?Tu():0;return Vi(C,w,B).fd}catch(K){if(typeof St>"u"||K.name!=="ErrnoError")throw K;return-K.Pa}},v:function(g,C,w,A){try{if(C=C?Q(F,C):"",C=ri(g,C),0>=A)return-28;var B=ir(C).node;if(!B)throw new ge(44);if(!B.La.readlink)throw new ge(28);var K=B.La.readlink(B),re=Math.min(A,Te(K)),ke=H[w+re];return Ze(K,F,w,A+1),H[w+re]=ke,re}catch(Qe){if(typeof St>"u"||Qe.name!=="ErrnoError")throw Qe;return-Qe.Pa}},u:function(g){try{return g=g?Q(F,g):"",gf(g),0}catch(C){if(typeof St>"u"||C.name!=="ErrnoError")throw C;return-C.Pa}},f:function(g,C){try{return g=g?Q(F,g):"",Eu(C,ko(g))}catch(w){if(typeof St>"u"||w.name!=="ErrnoError")throw w;return-w.Pa}},r:function(g,C,w){try{return C=C?Q(F,C):"",C=ri(g,C),w===0?mf(C):w===512?gf(C):Z("Invalid flags passed to unlinkat"),0}catch(A){if(typeof St>"u"||A.name!=="ErrnoError")throw A;return-A.Pa}},q:function(g,C,w){try{C=C?Q(F,C):"",C=ri(g,C,!0);var A=Date.now(),B,K;if(w){var re=E[w>>2]+4294967296*j[w+4>>2],ke=j[w+8>>2];ke==1073741823?B=A:ke==1073741822?B=null:B=1e3*re+ke/1e6,w+=16,re=E[w>>2]+4294967296*j[w+4>>2],ke=j[w+8>>2],ke==1073741823?K=A:ke==1073741822?K=null:K=1e3*re+ke/1e6}else K=B=A;if((K??B)!==null){g=B;var Qe=ir(C,{$a:!0}).node;Wi(Qe.La.Ua)(Qe,{atime:g,mtime:K})}return 0}catch(Ve){if(typeof St>"u"||Ve.name!=="ErrnoError")throw Ve;return-Ve.Pa}},m:()=>Z(""),l:()=>{Bt=!1,ip=0},A:function(g,C){g=-9007199254740992>g||9007199254740992<g?NaN:Number(g),g=new Date(1e3*g),j[C>>2]=g.getSeconds(),j[C+4>>2]=g.getMinutes(),j[C+8>>2]=g.getHours(),j[C+12>>2]=g.getDate(),j[C+16>>2]=g.getMonth(),j[C+20>>2]=g.getFullYear()-1900,j[C+24>>2]=g.getDay();var w=g.getFullYear();j[C+28>>2]=(w%4!==0||w%100===0&&w%400!==0?yP:$P)[g.getMonth()]+g.getDate()-1|0,j[C+36>>2]=-(60*g.getTimezoneOffset()),w=new Date(g.getFullYear(),6,1).getTimezoneOffset();var A=new Date(g.getFullYear(),0,1).getTimezoneOffset();j[C+32>>2]=(w!=A&&g.getTimezoneOffset()==Math.min(A,w))|0},y:function(g,C,w,A,B,K,re){B=-9007199254740992>B||9007199254740992<B?NaN:Number(B);try{if(isNaN(B))return 61;var ke=Ut(A);if((C&2)!==0&&(w&2)===0&&(ke.flags&2097155)!==2)throw new ge(2);if((ke.flags&2097155)===1)throw new ge(2);if(!ke.Ma.ib)throw new ge(43);if(!g)throw new ge(28);var Qe=ke.Ma.ib(ke,g,B,C,w),Ve=Qe.Kb;return j[K>>2]=Qe.Ab,E[re>>2]=Ve,0}catch(kt){if(typeof St>"u"||kt.name!=="ErrnoError")throw kt;return-kt.Pa}},z:function(g,C,w,A,B,K){K=-9007199254740992>K||9007199254740992<K?NaN:Number(K);try{var re=Ut(B);if(w&2){if(w=K,(re.node.mode&61440)!==32768)throw new ge(43);if(!(A&2)){var ke=F.slice(g,g+C);re.Ma.jb&&re.Ma.jb(re,ke,w,C,A)}}}catch(Qe){if(typeof St>"u"||Qe.name!=="ErrnoError")throw Qe;return-Qe.Pa}},n:(g,C)=>{if(Mo[g]&&(clearTimeout(Mo[g].id),delete Mo[g]),!C)return 0;var w=setTimeout(()=>{delete Mo[g],CP(()=>wf(g,performance.now()))},C);return Mo[g]={id:w,Xb:C},0},B:(g,C,w,A)=>{var B=new Date().getFullYear(),K=new Date(B,0,1).getTimezoneOffset();B=new Date(B,6,1).getTimezoneOffset(),E[g>>2]=60*Math.max(K,B),j[C>>2]=+(K!=B),C=re=>{var ke=Math.abs(re);return`UTC${0<=re?"-":"+"}${String(Math.floor(ke/60)).padStart(2,"0")}${String(ke%60).padStart(2,"0")}`},g=C(K),C=C(B),B<K?(Ze(g,F,w,17),Ze(C,F,A,17)):(Ze(g,F,A,17),Ze(C,F,w,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:g=>{var C=F.length;if(g>>>=0,2147483648<g)return!1;for(var w=1;4>=w;w*=2){var A=C*(1+.2/w);A=Math.min(A,g+100663296);e:{A=(Math.min(2147483648,65536*Math.ceil(Math.max(g,A)/65536))-z.buffer.byteLength+65535)/65536|0;try{z.grow(A),te();var B=1;break e}catch{}B=void 0}if(B)return!0}return!1},E:(g,C)=>{var w=0;return _f().forEach((A,B)=>{var K=C+w;for(B=E[g+4*B>>2]=K,K=0;K<A.length;++K)H[B++]=A.charCodeAt(K);H[B]=0,w+=A.length+1}),0},F:(g,C)=>{var w=_f();E[g>>2]=w.length;var A=0;return w.forEach(B=>A+=B.length+1),E[C>>2]=A,0},e:function(g){try{var C=Ut(g);return np(C),0}catch(w){if(typeof St>"u"||w.name!=="ErrnoError")throw w;return w.Pa}},p:function(g,C){try{var w=Ut(g);return H[C]=w.tty?2:Wt(w.mode)?3:(w.mode&61440)===40960?7:4,M[C+2>>1]=0,$e[C+8>>3]=BigInt(0),$e[C+16>>3]=BigInt(0),0}catch(A){if(typeof St>"u"||A.name!=="ErrnoError")throw A;return A.Pa}},w:function(g,C,w,A){try{e:{var B=Ut(g);g=C;for(var K,re=C=0;re<w;re++){var ke=E[g>>2],Qe=E[g+4>>2];g+=8;var Ve=Cf(B,H,ke,Qe,K);if(0>Ve){var kt=-1;break e}if(C+=Ve,Ve<Qe)break;typeof K<"u"&&(K+=Ve)}kt=C}return E[A>>2]=kt,0}catch(or){if(typeof St>"u"||or.name!=="ErrnoError")throw or;return or.Pa}},D:function(g,C,w,A){C=-9007199254740992>C||9007199254740992<C?NaN:Number(C);try{if(isNaN(C))return 61;var B=Ut(g);return yf(B,C,w),$e[A>>3]=BigInt(B.position),B.ob&&C===0&&w===0&&(B.ob=null),0}catch(K){if(typeof St>"u"||K.name!=="ErrnoError")throw K;return K.Pa}},I:function(g){var w;try{var C=Ut(g);return(w=C.Ma)!=null&&w.fsync?C.Ma.fsync(C):0}catch(A){if(typeof St>"u"||A.name!=="ErrnoError")throw A;return A.Pa}},t:function(g,C,w,A){try{e:{var B=Ut(g);g=C;for(var K,re=C=0;re<w;re++){var ke=E[g>>2],Qe=E[g+4>>2];g+=8;var Ve=bf(B,H,ke,Qe,K);if(0>Ve){var kt=-1;break e}if(C+=Ve,Ve<Qe)break;typeof K<"u"&&(K+=Ve)}kt=C}return E[A>>2]=kt,0}catch(or){if(typeof St>"u"||or.name!=="ErrnoError")throw or;return or.Pa}},k:Rf},Me;(async function(){var w;function g(A){var B;return Me=A.exports,z=Me.M,te(),rn=Me.O,_e--,(B=l.monitorRunDependencies)==null||B.call(l,_e),_e==0&&X&&(A=X,X=null,A()),Me}_e++,(w=l.monitorRunDependencies)==null||w.call(l,_e);var C={a:RP};return l.instantiateWasm?new Promise(A=>{l.instantiateWasm(C,(B,K)=>{g(B),A(B.exports)})}):(Ae??(Ae=l.locateFile?l.locateFile("sql-wasm.wasm",b):b+"sql-wasm.wasm"),g((await ft(C)).instance))})(),l._sqlite3_free=g=>(l._sqlite3_free=Me.P)(g),l._sqlite3_value_text=g=>(l._sqlite3_value_text=Me.Q)(g),l._sqlite3_prepare_v2=(g,C,w,A,B)=>(l._sqlite3_prepare_v2=Me.R)(g,C,w,A,B),l._sqlite3_step=g=>(l._sqlite3_step=Me.S)(g),l._sqlite3_reset=g=>(l._sqlite3_reset=Me.T)(g),l._sqlite3_exec=(g,C,w,A,B)=>(l._sqlite3_exec=Me.U)(g,C,w,A,B),l._sqlite3_finalize=g=>(l._sqlite3_finalize=Me.V)(g),l._sqlite3_column_name=(g,C)=>(l._sqlite3_column_name=Me.W)(g,C),l._sqlite3_column_text=(g,C)=>(l._sqlite3_column_text=Me.X)(g,C),l._sqlite3_column_type=(g,C)=>(l._sqlite3_column_type=Me.Y)(g,C),l._sqlite3_errmsg=g=>(l._sqlite3_errmsg=Me.Z)(g),l._sqlite3_clear_bindings=g=>(l._sqlite3_clear_bindings=Me._)(g),l._sqlite3_value_blob=g=>(l._sqlite3_value_blob=Me.$)(g),l._sqlite3_value_bytes=g=>(l._sqlite3_value_bytes=Me.aa)(g),l._sqlite3_value_double=g=>(l._sqlite3_value_double=Me.ba)(g),l._sqlite3_value_int=g=>(l._sqlite3_value_int=Me.ca)(g),l._sqlite3_value_type=g=>(l._sqlite3_value_type=Me.da)(g),l._sqlite3_result_blob=(g,C,w,A)=>(l._sqlite3_result_blob=Me.ea)(g,C,w,A),l._sqlite3_result_double=(g,C)=>(l._sqlite3_result_double=Me.fa)(g,C),l._sqlite3_result_error=(g,C,w)=>(l._sqlite3_result_error=Me.ga)(g,C,w),l._sqlite3_result_int=(g,C)=>(l._sqlite3_result_int=Me.ha)(g,C),l._sqlite3_result_int64=(g,C)=>(l._sqlite3_result_int64=Me.ia)(g,C),l._sqlite3_result_null=g=>(l._sqlite3_result_null=Me.ja)(g),l._sqlite3_result_text=(g,C,w,A)=>(l._sqlite3_result_text=Me.ka)(g,C,w,A),l._sqlite3_aggregate_context=(g,C)=>(l._sqlite3_aggregate_context=Me.la)(g,C),l._sqlite3_column_count=g=>(l._sqlite3_column_count=Me.ma)(g),l._sqlite3_data_count=g=>(l._sqlite3_data_count=Me.na)(g),l._sqlite3_column_blob=(g,C)=>(l._sqlite3_column_blob=Me.oa)(g,C),l._sqlite3_column_bytes=(g,C)=>(l._sqlite3_column_bytes=Me.pa)(g,C),l._sqlite3_column_double=(g,C)=>(l._sqlite3_column_double=Me.qa)(g,C),l._sqlite3_bind_blob=(g,C,w,A,B)=>(l._sqlite3_bind_blob=Me.ra)(g,C,w,A,B),l._sqlite3_bind_double=(g,C,w)=>(l._sqlite3_bind_double=Me.sa)(g,C,w),l._sqlite3_bind_int=(g,C,w)=>(l._sqlite3_bind_int=Me.ta)(g,C,w),l._sqlite3_bind_text=(g,C,w,A,B)=>(l._sqlite3_bind_text=Me.ua)(g,C,w,A,B),l._sqlite3_bind_parameter_index=(g,C)=>(l._sqlite3_bind_parameter_index=Me.va)(g,C),l._sqlite3_sql=g=>(l._sqlite3_sql=Me.wa)(g),l._sqlite3_normalized_sql=g=>(l._sqlite3_normalized_sql=Me.xa)(g),l._sqlite3_changes=g=>(l._sqlite3_changes=Me.ya)(g),l._sqlite3_close_v2=g=>(l._sqlite3_close_v2=Me.za)(g),l._sqlite3_create_function_v2=(g,C,w,A,B,K,re,ke,Qe)=>(l._sqlite3_create_function_v2=Me.Aa)(g,C,w,A,B,K,re,ke,Qe),l._sqlite3_update_hook=(g,C,w)=>(l._sqlite3_update_hook=Me.Ba)(g,C,w),l._sqlite3_open=(g,C)=>(l._sqlite3_open=Me.Ca)(g,C);var up=l._malloc=g=>(up=l._malloc=Me.Da)(g),ku=l._free=g=>(ku=l._free=Me.Ea)(g);l._RegisterExtensionFunctions=g=>(l._RegisterExtensionFunctions=Me.Fa)(g);var Pf=(g,C)=>(Pf=Me.Ga)(g,C),wf=(g,C)=>(wf=Me.Ha)(g,C),jo=g=>(jo=Me.Ia)(g),Rn=g=>(Rn=Me.Ja)(g),zo=()=>(zo=Me.Ka)();l.stackSave=()=>zo(),l.stackRestore=g=>jo(g),l.stackAlloc=g=>Rn(g),l.cwrap=(g,C,w,A)=>{var B=!w||w.every(K=>K==="number"||K==="boolean");return C!=="string"&&B&&!A?l["_"+g]:(...K)=>bP(g,C,w,K)},l.addFunction=Oo,l.removeFunction=bn,l.UTF8ToString=x,l.ALLOC_NORMAL=Iu,l.allocate=Du,l.allocateUTF8OnStack=ap;function lp(){function g(){var B;if(l.calledRun=!0,!L){if(!l.noFSInit&&!ti){var C,w;ti=!0,A??(A=l.stdin),C??(C=l.stdout),w??(w=l.stderr),A?Cn("stdin",A):rp("/dev/tty","/dev/stdin"),C?Cn("stdout",null,C):rp("/dev/tty","/dev/stdout"),w?Cn("stderr",null,w):rp("/dev/tty1","/dev/stderr"),Vi("/dev/stdin",0),Vi("/dev/stdout",1),Vi("/dev/stderr",1)}if(Me.N(),Wr=!1,(B=l.onRuntimeInitialized)==null||B.call(l),l.postRun)for(typeof l.postRun=="function"&&(l.postRun=[l.postRun]);l.postRun.length;){var A=l.postRun.shift();tt.unshift(A)}Ge(tt)}}if(0<_e)X=lp;else{if(l.preRun)for(typeof l.preRun=="function"&&(l.preRun=[l.preRun]);l.preRun.length;)gt();Ge(Pt),0<_e?X=lp:l.setStatus?(l.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>l.setStatus(""),1),g()},1)):g()}}if(l.preInit)for(typeof l.preInit=="function"&&(l.preInit=[l.preInit]);0<l.preInit.length;)l.preInit.pop()();return lp(),i}),r)};e.exports=s,e.exports.default=s}(cd)),cd.exports}var _q=Rq();const Pq=l_(_q);function Wu(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ud={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var nb;function wq(){return nb||(nb=1,function(e,t){(function(r){e.exports=r()})(function(){return function r(s,o,a){function c(l,h){if(!o[l]){if(!s[l]){var v=typeof Wu=="function"&&Wu;if(!h&&v)return v(l,!0);if(i)return i(l,!0);var f=new Error("Cannot find module '"+l+"'");throw f.code="MODULE_NOT_FOUND",f}var d=o[l]={exports:{}};s[l][0].call(d.exports,function(y){var m=s[l][1][y];return c(m||y)},d,d.exports,r,s,o,a)}return o[l].exports}for(var i=typeof Wu=="function"&&Wu,u=0;u<a.length;u++)c(a[u]);return c}({1:[function(r,s,o){var a=r("./utils"),c=r("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.encode=function(u){for(var l,h,v,f,d,y,m,b=[],S=0,R=u.length,_=R,T=a.getTypeOf(u)!=="string";S<u.length;)_=R-S,v=T?(l=u[S++],h=S<R?u[S++]:0,S<R?u[S++]:0):(l=u.charCodeAt(S++),h=S<R?u.charCodeAt(S++):0,S<R?u.charCodeAt(S++):0),f=l>>2,d=(3&l)<<4|h>>4,y=1<_?(15&h)<<2|v>>6:64,m=2<_?63&v:64,b.push(i.charAt(f)+i.charAt(d)+i.charAt(y)+i.charAt(m));return b.join("")},o.decode=function(u){var l,h,v,f,d,y,m=0,b=0,S="data:";if(u.substr(0,S.length)===S)throw new Error("Invalid base64 input, it looks like a data url.");var R,_=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===i.charAt(64)&&_--,u.charAt(u.length-2)===i.charAt(64)&&_--,_%1!=0)throw new Error("Invalid base64 input, bad content length.");for(R=c.uint8array?new Uint8Array(0|_):new Array(0|_);m<u.length;)l=i.indexOf(u.charAt(m++))<<2|(f=i.indexOf(u.charAt(m++)))>>4,h=(15&f)<<4|(d=i.indexOf(u.charAt(m++)))>>2,v=(3&d)<<6|(y=i.indexOf(u.charAt(m++))),R[b++]=l,d!==64&&(R[b++]=h),y!==64&&(R[b++]=v);return R}},{"./support":30,"./utils":32}],2:[function(r,s,o){var a=r("./external"),c=r("./stream/DataWorker"),i=r("./stream/Crc32Probe"),u=r("./stream/DataLengthProbe");function l(h,v,f,d,y){this.compressedSize=h,this.uncompressedSize=v,this.crc32=f,this.compression=d,this.compressedContent=y}l.prototype={getContentWorker:function(){var h=new c(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),v=this;return h.on("end",function(){if(this.streamInfo.data_length!==v.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),h},getCompressedWorker:function(){return new c(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},l.createWorkerFrom=function(h,v,f){return h.pipe(new i).pipe(new u("uncompressedSize")).pipe(v.compressWorker(f)).pipe(new u("compressedSize")).withStreamInfo("compression",v)},s.exports=l},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,s,o){var a=r("./stream/GenericWorker");o.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},o.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,s,o){var a=r("./utils"),c=function(){for(var i,u=[],l=0;l<256;l++){i=l;for(var h=0;h<8;h++)i=1&i?3988292384^i>>>1:i>>>1;u[l]=i}return u}();s.exports=function(i,u){return i!==void 0&&i.length?a.getTypeOf(i)!=="string"?function(l,h,v,f){var d=c,y=f+v;l^=-1;for(var m=f;m<y;m++)l=l>>>8^d[255&(l^h[m])];return-1^l}(0|u,i,i.length,0):function(l,h,v,f){var d=c,y=f+v;l^=-1;for(var m=f;m<y;m++)l=l>>>8^d[255&(l^h.charCodeAt(m))];return-1^l}(0|u,i,i.length,0):0}},{"./utils":32}],5:[function(r,s,o){o.base64=!1,o.binary=!1,o.dir=!1,o.createFolders=!0,o.date=null,o.compression=null,o.compressionOptions=null,o.comment=null,o.unixPermissions=null,o.dosPermissions=null},{}],6:[function(r,s,o){var a=null;a=typeof Promise<"u"?Promise:r("lie"),s.exports={Promise:a}},{lie:37}],7:[function(r,s,o){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",c=r("pako"),i=r("./utils"),u=r("./stream/GenericWorker"),l=a?"uint8array":"array";function h(v,f){u.call(this,"FlateWorker/"+v),this._pako=null,this._pakoAction=v,this._pakoOptions=f,this.meta={}}o.magic="\b\0",i.inherits(h,u),h.prototype.processChunk=function(v){this.meta=v.meta,this._pako===null&&this._createPako(),this._pako.push(i.transformTo(l,v.data),!1)},h.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new c[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var v=this;this._pako.onData=function(f){v.push({data:f,meta:v.meta})}},o.compressWorker=function(v){return new h("Deflate",v)},o.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,s,o){function a(d,y){var m,b="";for(m=0;m<y;m++)b+=String.fromCharCode(255&d),d>>>=8;return b}function c(d,y,m,b,S,R){var _,T,k=d.file,I=d.compression,z=R!==l.utf8encode,L=i.transformTo("string",R(k.name)),N=i.transformTo("string",l.utf8encode(k.name)),H=k.comment,F=i.transformTo("string",R(H)),M=i.transformTo("string",l.utf8encode(H)),j=N.length!==k.name.length,E=M.length!==H.length,ee="",$e="",oe="",De=k.dir,te=k.date,_e={crc32:0,compressedSize:0,uncompressedSize:0};y&&!m||(_e.crc32=d.crc32,_e.compressedSize=d.compressedSize,_e.uncompressedSize=d.uncompressedSize);var X=0;y&&(X|=8),z||!j&&!E||(X|=2048);var Z=0,Ae=0;De&&(Z|=16),S==="UNIX"?(Ae=798,Z|=function(ve,ft){var Tt=ve;return ve||(Tt=ft?16893:33204),(65535&Tt)<<16}(k.unixPermissions,De)):(Ae=20,Z|=function(ve){return 63&(ve||0)}(k.dosPermissions)),_=te.getUTCHours(),_<<=6,_|=te.getUTCMinutes(),_<<=5,_|=te.getUTCSeconds()/2,T=te.getUTCFullYear()-1980,T<<=4,T|=te.getUTCMonth()+1,T<<=5,T|=te.getUTCDate(),j&&($e=a(1,1)+a(h(L),4)+N,ee+="up"+a($e.length,2)+$e),E&&(oe=a(1,1)+a(h(F),4)+M,ee+="uc"+a(oe.length,2)+oe);var ye="";return ye+=`
\0`,ye+=a(X,2),ye+=I.magic,ye+=a(_,2),ye+=a(T,2),ye+=a(_e.crc32,4),ye+=a(_e.compressedSize,4),ye+=a(_e.uncompressedSize,4),ye+=a(L.length,2),ye+=a(ee.length,2),{fileRecord:v.LOCAL_FILE_HEADER+ye+L+ee,dirRecord:v.CENTRAL_FILE_HEADER+a(Ae,2)+ye+a(F.length,2)+"\0\0\0\0"+a(Z,4)+a(b,4)+L+ee+F}}var i=r("../utils"),u=r("../stream/GenericWorker"),l=r("../utf8"),h=r("../crc32"),v=r("../signature");function f(d,y,m,b){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=m,this.encodeFileName=b,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(f,u),f.prototype.push=function(d){var y=d.meta.percent||0,m=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,u.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:m?(y+100*(m-b-1))/m:100}}))},f.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var y=this.streamFiles&&!d.file.dir;if(y){var m=c(d,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:m.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(d){this.accumulate=!1;var y=this.streamFiles&&!d.file.dir,m=c(d,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(m.dirRecord),y)this.push({data:function(b){return v.DATA_DESCRIPTOR+a(b.crc32,4)+a(b.compressedSize,4)+a(b.uncompressedSize,4)}(d),meta:{percent:100}});else for(this.push({data:m.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var d=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var m=this.bytesWritten-d,b=function(S,R,_,T,k){var I=i.transformTo("string",k(T));return v.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(S,2)+a(S,2)+a(R,4)+a(_,4)+a(I.length,2)+I}(this.dirRecords.length,m,d,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(d){this._sources.push(d);var y=this;return d.on("data",function(m){y.processChunk(m)}),d.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),d.on("error",function(m){y.error(m)}),this},f.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(d){var y=this._sources;if(!u.prototype.error.call(this,d))return!1;for(var m=0;m<y.length;m++)try{y[m].error(d)}catch{}return!0},f.prototype.lock=function(){u.prototype.lock.call(this);for(var d=this._sources,y=0;y<d.length;y++)d[y].lock()},s.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,s,o){var a=r("../compressions"),c=r("./ZipFileWorker");o.generateWorker=function(i,u,l){var h=new c(u.streamFiles,l,u.platform,u.encodeFileName),v=0;try{i.forEach(function(f,d){v++;var y=function(R,_){var T=R||_,k=a[T];if(!k)throw new Error(T+" is not a valid compression method !");return k}(d.options.compression,u.compression),m=d.options.compressionOptions||u.compressionOptions||{},b=d.dir,S=d.date;d._compressWorker(y,m).withStreamInfo("file",{name:f,dir:b,date:S,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(h)}),h.entriesCount=v}catch(f){h.error(f)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,s,o){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var c=new a;for(var i in this)typeof this[i]!="function"&&(c[i]=this[i]);return c}}(a.prototype=r("./object")).loadAsync=r("./load"),a.support=r("./support"),a.defaults=r("./defaults"),a.version="3.10.1",a.loadAsync=function(c,i){return new a().loadAsync(c,i)},a.external=r("./external"),s.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,s,o){var a=r("./utils"),c=r("./external"),i=r("./utf8"),u=r("./zipEntries"),l=r("./stream/Crc32Probe"),h=r("./nodejsUtils");function v(f){return new c.Promise(function(d,y){var m=f.decompressed.getContentWorker().pipe(new l);m.on("error",function(b){y(b)}).on("end",function(){m.streamInfo.crc32!==f.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}s.exports=function(f,d){var y=this;return d=a.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),h.isNode&&h.isStream(f)?c.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",f,!0,d.optimizedBinaryString,d.base64).then(function(m){var b=new u(d);return b.load(m),b}).then(function(m){var b=[c.Promise.resolve(m)],S=m.files;if(d.checkCRC32)for(var R=0;R<S.length;R++)b.push(v(S[R]));return c.Promise.all(b)}).then(function(m){for(var b=m.shift(),S=b.files,R=0;R<S.length;R++){var _=S[R],T=_.fileNameStr,k=a.resolve(_.fileNameStr);y.file(k,_.decompressed,{binary:!0,optimizedBinaryString:!0,date:_.date,dir:_.dir,comment:_.fileCommentStr.length?_.fileCommentStr:null,unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions,createFolders:d.createFolders}),_.dir||(y.file(k).unsafeOriginalName=T)}return b.zipComment.length&&(y.comment=b.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,s,o){var a=r("../utils"),c=r("../stream/GenericWorker");function i(u,l){c.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(l)}a.inherits(i,c),i.prototype._bindStream=function(u){var l=this;(this._stream=u).pause(),u.on("data",function(h){l.push({data:h,meta:{percent:0}})}).on("error",function(h){l.isPaused?this.generatedError=h:l.error(h)}).on("end",function(){l.isPaused?l._upstreamEnded=!0:l.end()})},i.prototype.pause=function(){return!!c.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},s.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,s,o){var a=r("readable-stream").Readable;function c(i,u,l){a.call(this,u),this._helper=i;var h=this;i.on("data",function(v,f){h.push(v)||h._helper.pause(),l&&l(f)}).on("error",function(v){h.emit("error",v)}).on("end",function(){h.push(null)})}r("../utils").inherits(c,a),c.prototype._read=function(){this._helper.resume()},s.exports=c},{"../utils":32,"readable-stream":16}],14:[function(r,s,o){s.exports={isNode:typeof Buffer<"u",newBufferFrom:function(a,c){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,c);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,c)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var c=new Buffer(a);return c.fill(0),c},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(r,s,o){function a(k,I,z){var L,N=i.getTypeOf(I),H=i.extend(z||{},h);H.date=H.date||new Date,H.compression!==null&&(H.compression=H.compression.toUpperCase()),typeof H.unixPermissions=="string"&&(H.unixPermissions=parseInt(H.unixPermissions,8)),H.unixPermissions&&16384&H.unixPermissions&&(H.dir=!0),H.dosPermissions&&16&H.dosPermissions&&(H.dir=!0),H.dir&&(k=S(k)),H.createFolders&&(L=b(k))&&R.call(this,L,!0);var F=N==="string"&&H.binary===!1&&H.base64===!1;z&&z.binary!==void 0||(H.binary=!F),(I instanceof v&&I.uncompressedSize===0||H.dir||!I||I.length===0)&&(H.base64=!1,H.binary=!0,I="",H.compression="STORE",N="string");var M=null;M=I instanceof v||I instanceof u?I:y.isNode&&y.isStream(I)?new m(k,I):i.prepareContent(k,I,H.binary,H.optimizedBinaryString,H.base64);var j=new f(k,M,H);this.files[k]=j}var c=r("./utf8"),i=r("./utils"),u=r("./stream/GenericWorker"),l=r("./stream/StreamHelper"),h=r("./defaults"),v=r("./compressedObject"),f=r("./zipObject"),d=r("./generate"),y=r("./nodejsUtils"),m=r("./nodejs/NodejsStreamInputAdapter"),b=function(k){k.slice(-1)==="/"&&(k=k.substring(0,k.length-1));var I=k.lastIndexOf("/");return 0<I?k.substring(0,I):""},S=function(k){return k.slice(-1)!=="/"&&(k+="/"),k},R=function(k,I){return I=I!==void 0?I:h.createFolders,k=S(k),this.files[k]||a.call(this,k,null,{dir:!0,createFolders:I}),this.files[k]};function _(k){return Object.prototype.toString.call(k)==="[object RegExp]"}var T={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(k){var I,z,L;for(I in this.files)L=this.files[I],(z=I.slice(this.root.length,I.length))&&I.slice(0,this.root.length)===this.root&&k(z,L)},filter:function(k){var I=[];return this.forEach(function(z,L){k(z,L)&&I.push(L)}),I},file:function(k,I,z){if(arguments.length!==1)return k=this.root+k,a.call(this,k,I,z),this;if(_(k)){var L=k;return this.filter(function(H,F){return!F.dir&&L.test(H)})}var N=this.files[this.root+k];return N&&!N.dir?N:null},folder:function(k){if(!k)return this;if(_(k))return this.filter(function(N,H){return H.dir&&k.test(N)});var I=this.root+k,z=R.call(this,I),L=this.clone();return L.root=z.name,L},remove:function(k){k=this.root+k;var I=this.files[k];if(I||(k.slice(-1)!=="/"&&(k+="/"),I=this.files[k]),I&&!I.dir)delete this.files[k];else for(var z=this.filter(function(N,H){return H.name.slice(0,k.length)===k}),L=0;L<z.length;L++)delete this.files[z[L].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(k){var I,z={};try{if((z=i.extend(k||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:c.utf8encode})).type=z.type.toLowerCase(),z.compression=z.compression.toUpperCase(),z.type==="binarystring"&&(z.type="string"),!z.type)throw new Error("No output type specified.");i.checkSupport(z.type),z.platform!=="darwin"&&z.platform!=="freebsd"&&z.platform!=="linux"&&z.platform!=="sunos"||(z.platform="UNIX"),z.platform==="win32"&&(z.platform="DOS");var L=z.comment||this.comment||"";I=d.generateWorker(this,z,L)}catch(N){(I=new u("error")).error(N)}return new l(I,z.type||"string",z.mimeType)},generateAsync:function(k,I){return this.generateInternalStream(k).accumulate(I)},generateNodeStream:function(k,I){return(k=k||{}).type||(k.type="nodebuffer"),this.generateInternalStream(k).toNodejsStream(I)}};s.exports=T},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,s,o){s.exports=r("stream")},{stream:void 0}],17:[function(r,s,o){var a=r("./DataReader");function c(i){a.call(this,i);for(var u=0;u<this.data.length;u++)i[u]=255&i[u]}r("../utils").inherits(c,a),c.prototype.byteAt=function(i){return this.data[this.zero+i]},c.prototype.lastIndexOfSignature=function(i){for(var u=i.charCodeAt(0),l=i.charCodeAt(1),h=i.charCodeAt(2),v=i.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===u&&this.data[f+1]===l&&this.data[f+2]===h&&this.data[f+3]===v)return f-this.zero;return-1},c.prototype.readAndCheckSignature=function(i){var u=i.charCodeAt(0),l=i.charCodeAt(1),h=i.charCodeAt(2),v=i.charCodeAt(3),f=this.readData(4);return u===f[0]&&l===f[1]&&h===f[2]&&v===f[3]},c.prototype.readData=function(i){if(this.checkOffset(i),i===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,u},s.exports=c},{"../utils":32,"./DataReader":18}],18:[function(r,s,o){var a=r("../utils");function c(i){this.data=i,this.length=i.length,this.index=0,this.zero=0}c.prototype={checkOffset:function(i){this.checkIndex(this.index+i)},checkIndex:function(i){if(this.length<this.zero+i||i<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+i+"). Corrupted zip ?")},setIndex:function(i){this.checkIndex(i),this.index=i},skip:function(i){this.setIndex(this.index+i)},byteAt:function(){},readInt:function(i){var u,l=0;for(this.checkOffset(i),u=this.index+i-1;u>=this.index;u--)l=(l<<8)+this.byteAt(u);return this.index+=i,l},readString:function(i){return a.transformTo("string",this.readData(i))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var i=this.readInt(4);return new Date(Date.UTC(1980+(i>>25&127),(i>>21&15)-1,i>>16&31,i>>11&31,i>>5&63,(31&i)<<1))}},s.exports=c},{"../utils":32}],19:[function(r,s,o){var a=r("./Uint8ArrayReader");function c(i){a.call(this,i)}r("../utils").inherits(c,a),c.prototype.readData=function(i){this.checkOffset(i);var u=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,u},s.exports=c},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,s,o){var a=r("./DataReader");function c(i){a.call(this,i)}r("../utils").inherits(c,a),c.prototype.byteAt=function(i){return this.data.charCodeAt(this.zero+i)},c.prototype.lastIndexOfSignature=function(i){return this.data.lastIndexOf(i)-this.zero},c.prototype.readAndCheckSignature=function(i){return i===this.readData(4)},c.prototype.readData=function(i){this.checkOffset(i);var u=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,u},s.exports=c},{"../utils":32,"./DataReader":18}],21:[function(r,s,o){var a=r("./ArrayReader");function c(i){a.call(this,i)}r("../utils").inherits(c,a),c.prototype.readData=function(i){if(this.checkOffset(i),i===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+i);return this.index+=i,u},s.exports=c},{"../utils":32,"./ArrayReader":17}],22:[function(r,s,o){var a=r("../utils"),c=r("../support"),i=r("./ArrayReader"),u=r("./StringReader"),l=r("./NodeBufferReader"),h=r("./Uint8ArrayReader");s.exports=function(v){var f=a.getTypeOf(v);return a.checkSupport(f),f!=="string"||c.uint8array?f==="nodebuffer"?new l(v):c.uint8array?new h(a.transformTo("uint8array",v)):new i(a.transformTo("array",v)):new u(v)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,s,o){o.LOCAL_FILE_HEADER="PK",o.CENTRAL_FILE_HEADER="PK",o.CENTRAL_DIRECTORY_END="PK",o.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",o.ZIP64_CENTRAL_DIRECTORY_END="PK",o.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,s,o){var a=r("./GenericWorker"),c=r("../utils");function i(u){a.call(this,"ConvertWorker to "+u),this.destType=u}c.inherits(i,a),i.prototype.processChunk=function(u){this.push({data:c.transformTo(this.destType,u.data),meta:u.meta})},s.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(r,s,o){var a=r("./GenericWorker"),c=r("../crc32");function i(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(i,a),i.prototype.processChunk=function(u){this.streamInfo.crc32=c(u.data,this.streamInfo.crc32||0),this.push(u)},s.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,s,o){var a=r("../utils"),c=r("./GenericWorker");function i(u){c.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}a.inherits(i,c),i.prototype.processChunk=function(u){if(u){var l=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=l+u.data.length}c.prototype.processChunk.call(this,u)},s.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(r,s,o){var a=r("../utils"),c=r("./GenericWorker");function i(u){c.call(this,"DataWorker");var l=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(h){l.dataIsReady=!0,l.data=h,l.max=h&&h.length||0,l.type=a.getTypeOf(h),l.isPaused||l._tickAndRepeat()},function(h){l.error(h)})}a.inherits(i,c),i.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,l=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,l);break;case"uint8array":u=this.data.subarray(this.index,l);break;case"array":case"nodebuffer":u=this.data.slice(this.index,l)}return this.index=l,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},s.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(r,s,o){function a(c){this.name=c||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(c){this.emit("data",c)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(c){this.emit("error",c)}return!0},error:function(c){return!this.isFinished&&(this.isPaused?this.generatedError=c:(this.isFinished=!0,this.emit("error",c),this.previous&&this.previous.error(c),this.cleanUp()),!0)},on:function(c,i){return this._listeners[c].push(i),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(c,i){if(this._listeners[c])for(var u=0;u<this._listeners[c].length;u++)this._listeners[c][u].call(this,i)},pipe:function(c){return c.registerPrevious(this)},registerPrevious:function(c){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=c.streamInfo,this.mergeStreamInfo(),this.previous=c;var i=this;return c.on("data",function(u){i.processChunk(u)}),c.on("end",function(){i.end()}),c.on("error",function(u){i.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var c=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),c=!0),this.previous&&this.previous.resume(),!c},flush:function(){},processChunk:function(c){this.push(c)},withStreamInfo:function(c,i){return this.extraStreamInfo[c]=i,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var c in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,c)&&(this.streamInfo[c]=this.extraStreamInfo[c])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var c="Worker "+this.name;return this.previous?this.previous+" -> "+c:c}},s.exports=a},{}],29:[function(r,s,o){var a=r("../utils"),c=r("./ConvertWorker"),i=r("./GenericWorker"),u=r("../base64"),l=r("../support"),h=r("../external"),v=null;if(l.nodestream)try{v=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(y,m){return new h.Promise(function(b,S){var R=[],_=y._internalType,T=y._outputType,k=y._mimeType;y.on("data",function(I,z){R.push(I),m&&m(z)}).on("error",function(I){R=[],S(I)}).on("end",function(){try{var I=function(z,L,N){switch(z){case"blob":return a.newBlob(a.transformTo("arraybuffer",L),N);case"base64":return u.encode(L);default:return a.transformTo(z,L)}}(T,function(z,L){var N,H=0,F=null,M=0;for(N=0;N<L.length;N++)M+=L[N].length;switch(z){case"string":return L.join("");case"array":return Array.prototype.concat.apply([],L);case"uint8array":for(F=new Uint8Array(M),N=0;N<L.length;N++)F.set(L[N],H),H+=L[N].length;return F;case"nodebuffer":return Buffer.concat(L);default:throw new Error("concat : unsupported type '"+z+"'")}}(_,R),k);b(I)}catch(z){S(z)}R=[]}).resume()})}function d(y,m,b){var S=m;switch(m){case"blob":case"arraybuffer":S="uint8array";break;case"base64":S="string"}try{this._internalType=S,this._outputType=m,this._mimeType=b,a.checkSupport(S),this._worker=y.pipe(new c(S)),y.lock()}catch(R){this._worker=new i("error"),this._worker.error(R)}}d.prototype={accumulate:function(y){return f(this,y)},on:function(y,m){var b=this;return y==="data"?this._worker.on(y,function(S){m.call(b,S.data,S.meta)}):this._worker.on(y,function(){a.delay(m,arguments,b)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new v(this,{objectMode:this._outputType!=="nodebuffer"},y)}},s.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,s,o){if(o.base64=!0,o.array=!0,o.string=!0,o.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",o.nodebuffer=typeof Buffer<"u",o.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")o.blob=!1;else{var a=new ArrayBuffer(0);try{o.blob=new Blob([a],{type:"application/zip"}).size===0}catch{try{var c=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);c.append(a),o.blob=c.getBlob("application/zip").size===0}catch{o.blob=!1}}}try{o.nodestream=!!r("readable-stream").Readable}catch{o.nodestream=!1}},{"readable-stream":16}],31:[function(r,s,o){for(var a=r("./utils"),c=r("./support"),i=r("./nodejsUtils"),u=r("./stream/GenericWorker"),l=new Array(256),h=0;h<256;h++)l[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;l[254]=l[254]=1;function v(){u.call(this,"utf-8 decode"),this.leftOver=null}function f(){u.call(this,"utf-8 encode")}o.utf8encode=function(d){return c.nodebuffer?i.newBufferFrom(d,"utf-8"):function(y){var m,b,S,R,_,T=y.length,k=0;for(R=0;R<T;R++)(64512&(b=y.charCodeAt(R)))==55296&&R+1<T&&(64512&(S=y.charCodeAt(R+1)))==56320&&(b=65536+(b-55296<<10)+(S-56320),R++),k+=b<128?1:b<2048?2:b<65536?3:4;for(m=c.uint8array?new Uint8Array(k):new Array(k),R=_=0;_<k;R++)(64512&(b=y.charCodeAt(R)))==55296&&R+1<T&&(64512&(S=y.charCodeAt(R+1)))==56320&&(b=65536+(b-55296<<10)+(S-56320),R++),b<128?m[_++]=b:(b<2048?m[_++]=192|b>>>6:(b<65536?m[_++]=224|b>>>12:(m[_++]=240|b>>>18,m[_++]=128|b>>>12&63),m[_++]=128|b>>>6&63),m[_++]=128|63&b);return m}(d)},o.utf8decode=function(d){return c.nodebuffer?a.transformTo("nodebuffer",d).toString("utf-8"):function(y){var m,b,S,R,_=y.length,T=new Array(2*_);for(m=b=0;m<_;)if((S=y[m++])<128)T[b++]=S;else if(4<(R=l[S]))T[b++]=65533,m+=R-1;else{for(S&=R===2?31:R===3?15:7;1<R&&m<_;)S=S<<6|63&y[m++],R--;1<R?T[b++]=65533:S<65536?T[b++]=S:(S-=65536,T[b++]=55296|S>>10&1023,T[b++]=56320|1023&S)}return T.length!==b&&(T.subarray?T=T.subarray(0,b):T.length=b),a.applyFromCharCode(T)}(d=a.transformTo(c.uint8array?"uint8array":"array",d))},a.inherits(v,u),v.prototype.processChunk=function(d){var y=a.transformTo(c.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(c.uint8array){var m=y;(y=new Uint8Array(m.length+this.leftOver.length)).set(this.leftOver,0),y.set(m,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var b=function(R,_){var T;for((_=_||R.length)>R.length&&(_=R.length),T=_-1;0<=T&&(192&R[T])==128;)T--;return T<0||T===0?_:T+l[R[T]]>_?T:_}(y),S=y;b!==y.length&&(c.uint8array?(S=y.subarray(0,b),this.leftOver=y.subarray(b,y.length)):(S=y.slice(0,b),this.leftOver=y.slice(b,y.length))),this.push({data:o.utf8decode(S),meta:d.meta})},v.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:o.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},o.Utf8DecodeWorker=v,a.inherits(f,u),f.prototype.processChunk=function(d){this.push({data:o.utf8encode(d.data),meta:d.meta})},o.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,s,o){var a=r("./support"),c=r("./base64"),i=r("./nodejsUtils"),u=r("./external");function l(m){return m}function h(m,b){for(var S=0;S<m.length;++S)b[S]=255&m.charCodeAt(S);return b}r("setimmediate"),o.newBlob=function(m,b){o.checkSupport("blob");try{return new Blob([m],{type:b})}catch{try{var S=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return S.append(m),S.getBlob(b)}catch{throw new Error("Bug : can't construct the Blob.")}}};var v={stringifyByChunk:function(m,b,S){var R=[],_=0,T=m.length;if(T<=S)return String.fromCharCode.apply(null,m);for(;_<T;)b==="array"||b==="nodebuffer"?R.push(String.fromCharCode.apply(null,m.slice(_,Math.min(_+S,T)))):R.push(String.fromCharCode.apply(null,m.subarray(_,Math.min(_+S,T)))),_+=S;return R.join("")},stringifyByChar:function(m){for(var b="",S=0;S<m.length;S++)b+=String.fromCharCode(m[S]);return b},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,i.allocBuffer(1)).length===1}catch{return!1}}()}};function f(m){var b=65536,S=o.getTypeOf(m),R=!0;if(S==="uint8array"?R=v.applyCanBeUsed.uint8array:S==="nodebuffer"&&(R=v.applyCanBeUsed.nodebuffer),R)for(;1<b;)try{return v.stringifyByChunk(m,S,b)}catch{b=Math.floor(b/2)}return v.stringifyByChar(m)}function d(m,b){for(var S=0;S<m.length;S++)b[S]=m[S];return b}o.applyFromCharCode=f;var y={};y.string={string:l,array:function(m){return h(m,new Array(m.length))},arraybuffer:function(m){return y.string.uint8array(m).buffer},uint8array:function(m){return h(m,new Uint8Array(m.length))},nodebuffer:function(m){return h(m,i.allocBuffer(m.length))}},y.array={string:f,array:l,arraybuffer:function(m){return new Uint8Array(m).buffer},uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return i.newBufferFrom(m)}},y.arraybuffer={string:function(m){return f(new Uint8Array(m))},array:function(m){return d(new Uint8Array(m),new Array(m.byteLength))},arraybuffer:l,uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return i.newBufferFrom(new Uint8Array(m))}},y.uint8array={string:f,array:function(m){return d(m,new Array(m.length))},arraybuffer:function(m){return m.buffer},uint8array:l,nodebuffer:function(m){return i.newBufferFrom(m)}},y.nodebuffer={string:f,array:function(m){return d(m,new Array(m.length))},arraybuffer:function(m){return y.nodebuffer.uint8array(m).buffer},uint8array:function(m){return d(m,new Uint8Array(m.length))},nodebuffer:l},o.transformTo=function(m,b){if(b=b||"",!m)return b;o.checkSupport(m);var S=o.getTypeOf(b);return y[S][m](b)},o.resolve=function(m){for(var b=m.split("/"),S=[],R=0;R<b.length;R++){var _=b[R];_==="."||_===""&&R!==0&&R!==b.length-1||(_===".."?S.pop():S.push(_))}return S.join("/")},o.getTypeOf=function(m){return typeof m=="string"?"string":Object.prototype.toString.call(m)==="[object Array]"?"array":a.nodebuffer&&i.isBuffer(m)?"nodebuffer":a.uint8array&&m instanceof Uint8Array?"uint8array":a.arraybuffer&&m instanceof ArrayBuffer?"arraybuffer":void 0},o.checkSupport=function(m){if(!a[m.toLowerCase()])throw new Error(m+" is not supported by this platform")},o.MAX_VALUE_16BITS=65535,o.MAX_VALUE_32BITS=-1,o.pretty=function(m){var b,S,R="";for(S=0;S<(m||"").length;S++)R+="\\x"+((b=m.charCodeAt(S))<16?"0":"")+b.toString(16).toUpperCase();return R},o.delay=function(m,b,S){setImmediate(function(){m.apply(S||null,b||[])})},o.inherits=function(m,b){function S(){}S.prototype=b.prototype,m.prototype=new S},o.extend=function(){var m,b,S={};for(m=0;m<arguments.length;m++)for(b in arguments[m])Object.prototype.hasOwnProperty.call(arguments[m],b)&&S[b]===void 0&&(S[b]=arguments[m][b]);return S},o.prepareContent=function(m,b,S,R,_){return u.Promise.resolve(b).then(function(T){return a.blob&&(T instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(T))!==-1)&&typeof FileReader<"u"?new u.Promise(function(k,I){var z=new FileReader;z.onload=function(L){k(L.target.result)},z.onerror=function(L){I(L.target.error)},z.readAsArrayBuffer(T)}):T}).then(function(T){var k=o.getTypeOf(T);return k?(k==="arraybuffer"?T=o.transformTo("uint8array",T):k==="string"&&(_?T=c.decode(T):S&&R!==!0&&(T=function(I){return h(I,a.uint8array?new Uint8Array(I.length):new Array(I.length))}(T))),T):u.Promise.reject(new Error("Can't read the data of '"+m+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,s,o){var a=r("./reader/readerFor"),c=r("./utils"),i=r("./signature"),u=r("./zipEntry"),l=r("./support");function h(v){this.files=[],this.loadOptions=v}h.prototype={checkSignature:function(v){if(!this.reader.readAndCheckSignature(v)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+c.pretty(f)+", expected "+c.pretty(v)+")")}},isSignature:function(v,f){var d=this.reader.index;this.reader.setIndex(v);var y=this.reader.readString(4)===f;return this.reader.setIndex(d),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var v=this.reader.readData(this.zipCommentLength),f=l.uint8array?"uint8array":"array",d=c.transformTo(f,v);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var v,f,d,y=this.zip64EndOfCentralSize-44;0<y;)v=this.reader.readInt(2),f=this.reader.readInt(4),d=this.reader.readData(f),this.zip64ExtensibleData[v]={id:v,length:f,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var v,f;for(v=0;v<this.files.length;v++)f=this.files[v],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var v;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(v=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(v);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var v=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(v<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(v);var f=v;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===c.MAX_VALUE_16BITS||this.diskWithCentralDirStart===c.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===c.MAX_VALUE_16BITS||this.centralDirRecords===c.MAX_VALUE_16BITS||this.centralDirSize===c.MAX_VALUE_32BITS||this.centralDirOffset===c.MAX_VALUE_32BITS){if(this.zip64=!0,(v=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(v),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var y=f-d;if(0<y)this.isSignature(f,i.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(v){this.reader=a(v)},load:function(v){this.prepareReader(v),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},s.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,s,o){var a=r("./reader/readerFor"),c=r("./utils"),i=r("./compressedObject"),u=r("./crc32"),l=r("./utf8"),h=r("./compressions"),v=r("./support");function f(d,y){this.options=d,this.loadOptions=y}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(d){var y,m;if(d.skip(22),this.fileNameLength=d.readInt(2),m=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=function(b){for(var S in h)if(Object.prototype.hasOwnProperty.call(h,S)&&h[S].magic===b)return h[S];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+c.pretty(this.compressionMethod)+" unknown (inner file : "+c.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,y,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var y=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(y),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=a(this.extraFields[1].value);this.uncompressedSize===c.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===c.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===c.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===c.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var y,m,b,S=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<S;)y=d.readInt(2),m=d.readInt(2),b=d.readData(m),this.extraFields[y]={id:y,length:m,value:b};d.setIndex(S)},handleUTF8:function(){var d=v.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=l.utf8decode(this.fileName),this.fileCommentStr=l.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var m=c.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var S=c.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(S)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var y=a(d.value);return y.readInt(1)!==1||u(this.fileName)!==y.readInt(4)?null:l.utf8decode(y.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var y=a(d.value);return y.readInt(1)!==1||u(this.fileComment)!==y.readInt(4)?null:l.utf8decode(y.readData(d.length-5))}return null}},s.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,s,o){function a(y,m,b){this.name=y,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=m,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var c=r("./stream/StreamHelper"),i=r("./stream/DataWorker"),u=r("./utf8"),l=r("./compressedObject"),h=r("./stream/GenericWorker");a.prototype={internalStream:function(y){var m=null,b="string";try{if(!y)throw new Error("No output type specified.");var S=(b=y.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),m=this._decompressWorker();var R=!this._dataBinary;R&&!S&&(m=m.pipe(new u.Utf8EncodeWorker)),!R&&S&&(m=m.pipe(new u.Utf8DecodeWorker))}catch(_){(m=new h("error")).error(_)}return new c(m,b,"")},async:function(y,m){return this.internalStream(y).accumulate(m)},nodeStream:function(y,m){return this.internalStream(y||"nodebuffer").toNodejsStream(m)},_compressWorker:function(y,m){if(this._data instanceof l&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new u.Utf8EncodeWorker)),l.createWorkerFrom(b,y,m)},_decompressWorker:function(){return this._data instanceof l?this._data.getContentWorker():this._data instanceof h?this._data:new i(this._data)}};for(var v=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<v.length;d++)a.prototype[v[d]]=f;s.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,s,o){(function(a){var c,i,u=a.MutationObserver||a.WebKitMutationObserver;if(u){var l=0,h=new u(y),v=a.document.createTextNode("");h.observe(v,{characterData:!0}),c=function(){v.data=l=++l%2}}else if(a.setImmediate||a.MessageChannel===void 0)c="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var m=a.document.createElement("script");m.onreadystatechange=function(){y(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},a.document.documentElement.appendChild(m)}:function(){setTimeout(y,0)};else{var f=new a.MessageChannel;f.port1.onmessage=y,c=function(){f.port2.postMessage(0)}}var d=[];function y(){var m,b;i=!0;for(var S=d.length;S;){for(b=d,d=[],m=-1;++m<S;)b[m]();S=d.length}i=!1}s.exports=function(m){d.push(m)!==1||i||c()}}).call(this,typeof pn<"u"?pn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,s,o){var a=r("immediate");function c(){}var i={},u=["REJECTED"],l=["FULFILLED"],h=["PENDING"];function v(S){if(typeof S!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,S!==c&&m(this,S)}function f(S,R,_){this.promise=S,typeof R=="function"&&(this.onFulfilled=R,this.callFulfilled=this.otherCallFulfilled),typeof _=="function"&&(this.onRejected=_,this.callRejected=this.otherCallRejected)}function d(S,R,_){a(function(){var T;try{T=R(_)}catch(k){return i.reject(S,k)}T===S?i.reject(S,new TypeError("Cannot resolve promise with itself")):i.resolve(S,T)})}function y(S){var R=S&&S.then;if(S&&(typeof S=="object"||typeof S=="function")&&typeof R=="function")return function(){R.apply(S,arguments)}}function m(S,R){var _=!1;function T(z){_||(_=!0,i.reject(S,z))}function k(z){_||(_=!0,i.resolve(S,z))}var I=b(function(){R(k,T)});I.status==="error"&&T(I.value)}function b(S,R){var _={};try{_.value=S(R),_.status="success"}catch(T){_.status="error",_.value=T}return _}(s.exports=v).prototype.finally=function(S){if(typeof S!="function")return this;var R=this.constructor;return this.then(function(_){return R.resolve(S()).then(function(){return _})},function(_){return R.resolve(S()).then(function(){throw _})})},v.prototype.catch=function(S){return this.then(null,S)},v.prototype.then=function(S,R){if(typeof S!="function"&&this.state===l||typeof R!="function"&&this.state===u)return this;var _=new this.constructor(c);return this.state!==h?d(_,this.state===l?S:R,this.outcome):this.queue.push(new f(_,S,R)),_},f.prototype.callFulfilled=function(S){i.resolve(this.promise,S)},f.prototype.otherCallFulfilled=function(S){d(this.promise,this.onFulfilled,S)},f.prototype.callRejected=function(S){i.reject(this.promise,S)},f.prototype.otherCallRejected=function(S){d(this.promise,this.onRejected,S)},i.resolve=function(S,R){var _=b(y,R);if(_.status==="error")return i.reject(S,_.value);var T=_.value;if(T)m(S,T);else{S.state=l,S.outcome=R;for(var k=-1,I=S.queue.length;++k<I;)S.queue[k].callFulfilled(R)}return S},i.reject=function(S,R){S.state=u,S.outcome=R;for(var _=-1,T=S.queue.length;++_<T;)S.queue[_].callRejected(R);return S},v.resolve=function(S){return S instanceof this?S:i.resolve(new this(c),S)},v.reject=function(S){var R=new this(c);return i.reject(R,S)},v.all=function(S){var R=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=S.length,T=!1;if(!_)return this.resolve([]);for(var k=new Array(_),I=0,z=-1,L=new this(c);++z<_;)N(S[z],z);return L;function N(H,F){R.resolve(H).then(function(M){k[F]=M,++I!==_||T||(T=!0,i.resolve(L,k))},function(M){T||(T=!0,i.reject(L,M))})}},v.race=function(S){var R=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=S.length,T=!1;if(!_)return this.resolve([]);for(var k=-1,I=new this(c);++k<_;)z=S[k],R.resolve(z).then(function(L){T||(T=!0,i.resolve(I,L))},function(L){T||(T=!0,i.reject(I,L))});var z;return I}},{immediate:36}],38:[function(r,s,o){var a={};(0,r("./lib/utils/common").assign)(a,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),s.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,s,o){var a=r("./zlib/deflate"),c=r("./utils/common"),i=r("./utils/strings"),u=r("./zlib/messages"),l=r("./zlib/zstream"),h=Object.prototype.toString,v=0,f=-1,d=0,y=8;function m(S){if(!(this instanceof m))return new m(S);this.options=c.assign({level:f,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},S||{});var R=this.options;R.raw&&0<R.windowBits?R.windowBits=-R.windowBits:R.gzip&&0<R.windowBits&&R.windowBits<16&&(R.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var _=a.deflateInit2(this.strm,R.level,R.method,R.windowBits,R.memLevel,R.strategy);if(_!==v)throw new Error(u[_]);if(R.header&&a.deflateSetHeader(this.strm,R.header),R.dictionary){var T;if(T=typeof R.dictionary=="string"?i.string2buf(R.dictionary):h.call(R.dictionary)==="[object ArrayBuffer]"?new Uint8Array(R.dictionary):R.dictionary,(_=a.deflateSetDictionary(this.strm,T))!==v)throw new Error(u[_]);this._dict_set=!0}}function b(S,R){var _=new m(R);if(_.push(S,!0),_.err)throw _.msg||u[_.err];return _.result}m.prototype.push=function(S,R){var _,T,k=this.strm,I=this.options.chunkSize;if(this.ended)return!1;T=R===~~R?R:R===!0?4:0,typeof S=="string"?k.input=i.string2buf(S):h.call(S)==="[object ArrayBuffer]"?k.input=new Uint8Array(S):k.input=S,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new c.Buf8(I),k.next_out=0,k.avail_out=I),(_=a.deflate(k,T))!==1&&_!==v)return this.onEnd(_),!(this.ended=!0);k.avail_out!==0&&(k.avail_in!==0||T!==4&&T!==2)||(this.options.to==="string"?this.onData(i.buf2binstring(c.shrinkBuf(k.output,k.next_out))):this.onData(c.shrinkBuf(k.output,k.next_out)))}while((0<k.avail_in||k.avail_out===0)&&_!==1);return T===4?(_=a.deflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===v):T!==2||(this.onEnd(v),!(k.avail_out=0))},m.prototype.onData=function(S){this.chunks.push(S)},m.prototype.onEnd=function(S){S===v&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg},o.Deflate=m,o.deflate=b,o.deflateRaw=function(S,R){return(R=R||{}).raw=!0,b(S,R)},o.gzip=function(S,R){return(R=R||{}).gzip=!0,b(S,R)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,s,o){var a=r("./zlib/inflate"),c=r("./utils/common"),i=r("./utils/strings"),u=r("./zlib/constants"),l=r("./zlib/messages"),h=r("./zlib/zstream"),v=r("./zlib/gzheader"),f=Object.prototype.toString;function d(m){if(!(this instanceof d))return new d(m);this.options=c.assign({chunkSize:16384,windowBits:0,to:""},m||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||m&&m.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&(15&b.windowBits)==0&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var S=a.inflateInit2(this.strm,b.windowBits);if(S!==u.Z_OK)throw new Error(l[S]);this.header=new v,a.inflateGetHeader(this.strm,this.header)}function y(m,b){var S=new d(b);if(S.push(m,!0),S.err)throw S.msg||l[S.err];return S.result}d.prototype.push=function(m,b){var S,R,_,T,k,I,z=this.strm,L=this.options.chunkSize,N=this.options.dictionary,H=!1;if(this.ended)return!1;R=b===~~b?b:b===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof m=="string"?z.input=i.binstring2buf(m):f.call(m)==="[object ArrayBuffer]"?z.input=new Uint8Array(m):z.input=m,z.next_in=0,z.avail_in=z.input.length;do{if(z.avail_out===0&&(z.output=new c.Buf8(L),z.next_out=0,z.avail_out=L),(S=a.inflate(z,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&N&&(I=typeof N=="string"?i.string2buf(N):f.call(N)==="[object ArrayBuffer]"?new Uint8Array(N):N,S=a.inflateSetDictionary(this.strm,I)),S===u.Z_BUF_ERROR&&H===!0&&(S=u.Z_OK,H=!1),S!==u.Z_STREAM_END&&S!==u.Z_OK)return this.onEnd(S),!(this.ended=!0);z.next_out&&(z.avail_out!==0&&S!==u.Z_STREAM_END&&(z.avail_in!==0||R!==u.Z_FINISH&&R!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(_=i.utf8border(z.output,z.next_out),T=z.next_out-_,k=i.buf2string(z.output,_),z.next_out=T,z.avail_out=L-T,T&&c.arraySet(z.output,z.output,_,T,0),this.onData(k)):this.onData(c.shrinkBuf(z.output,z.next_out)))),z.avail_in===0&&z.avail_out===0&&(H=!0)}while((0<z.avail_in||z.avail_out===0)&&S!==u.Z_STREAM_END);return S===u.Z_STREAM_END&&(R=u.Z_FINISH),R===u.Z_FINISH?(S=a.inflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===u.Z_OK):R!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(z.avail_out=0))},d.prototype.onData=function(m){this.chunks.push(m)},d.prototype.onEnd=function(m){m===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},o.Inflate=d,o.inflate=y,o.inflateRaw=function(m,b){return(b=b||{}).raw=!0,y(m,b)},o.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,s,o){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";o.assign=function(u){for(var l=Array.prototype.slice.call(arguments,1);l.length;){var h=l.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var v in h)h.hasOwnProperty(v)&&(u[v]=h[v])}}return u},o.shrinkBuf=function(u,l){return u.length===l?u:u.subarray?u.subarray(0,l):(u.length=l,u)};var c={arraySet:function(u,l,h,v,f){if(l.subarray&&u.subarray)u.set(l.subarray(h,h+v),f);else for(var d=0;d<v;d++)u[f+d]=l[h+d]},flattenChunks:function(u){var l,h,v,f,d,y;for(l=v=0,h=u.length;l<h;l++)v+=u[l].length;for(y=new Uint8Array(v),l=f=0,h=u.length;l<h;l++)d=u[l],y.set(d,f),f+=d.length;return y}},i={arraySet:function(u,l,h,v,f){for(var d=0;d<v;d++)u[f+d]=l[h+d]},flattenChunks:function(u){return[].concat.apply([],u)}};o.setTyped=function(u){u?(o.Buf8=Uint8Array,o.Buf16=Uint16Array,o.Buf32=Int32Array,o.assign(o,c)):(o.Buf8=Array,o.Buf16=Array,o.Buf32=Array,o.assign(o,i))},o.setTyped(a)},{}],42:[function(r,s,o){var a=r("./common"),c=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch{c=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{i=!1}for(var u=new a.Buf8(256),l=0;l<256;l++)u[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function h(v,f){if(f<65537&&(v.subarray&&i||!v.subarray&&c))return String.fromCharCode.apply(null,a.shrinkBuf(v,f));for(var d="",y=0;y<f;y++)d+=String.fromCharCode(v[y]);return d}u[254]=u[254]=1,o.string2buf=function(v){var f,d,y,m,b,S=v.length,R=0;for(m=0;m<S;m++)(64512&(d=v.charCodeAt(m)))==55296&&m+1<S&&(64512&(y=v.charCodeAt(m+1)))==56320&&(d=65536+(d-55296<<10)+(y-56320),m++),R+=d<128?1:d<2048?2:d<65536?3:4;for(f=new a.Buf8(R),m=b=0;b<R;m++)(64512&(d=v.charCodeAt(m)))==55296&&m+1<S&&(64512&(y=v.charCodeAt(m+1)))==56320&&(d=65536+(d-55296<<10)+(y-56320),m++),d<128?f[b++]=d:(d<2048?f[b++]=192|d>>>6:(d<65536?f[b++]=224|d>>>12:(f[b++]=240|d>>>18,f[b++]=128|d>>>12&63),f[b++]=128|d>>>6&63),f[b++]=128|63&d);return f},o.buf2binstring=function(v){return h(v,v.length)},o.binstring2buf=function(v){for(var f=new a.Buf8(v.length),d=0,y=f.length;d<y;d++)f[d]=v.charCodeAt(d);return f},o.buf2string=function(v,f){var d,y,m,b,S=f||v.length,R=new Array(2*S);for(d=y=0;d<S;)if((m=v[d++])<128)R[y++]=m;else if(4<(b=u[m]))R[y++]=65533,d+=b-1;else{for(m&=b===2?31:b===3?15:7;1<b&&d<S;)m=m<<6|63&v[d++],b--;1<b?R[y++]=65533:m<65536?R[y++]=m:(m-=65536,R[y++]=55296|m>>10&1023,R[y++]=56320|1023&m)}return h(R,y)},o.utf8border=function(v,f){var d;for((f=f||v.length)>v.length&&(f=v.length),d=f-1;0<=d&&(192&v[d])==128;)d--;return d<0||d===0?f:d+u[v[d]]>f?d:f}},{"./common":41}],43:[function(r,s,o){s.exports=function(a,c,i,u){for(var l=65535&a|0,h=a>>>16&65535|0,v=0;i!==0;){for(i-=v=2e3<i?2e3:i;h=h+(l=l+c[u++]|0)|0,--v;);l%=65521,h%=65521}return l|h<<16|0}},{}],44:[function(r,s,o){s.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,s,o){var a=function(){for(var c,i=[],u=0;u<256;u++){c=u;for(var l=0;l<8;l++)c=1&c?3988292384^c>>>1:c>>>1;i[u]=c}return i}();s.exports=function(c,i,u,l){var h=a,v=l+u;c^=-1;for(var f=l;f<v;f++)c=c>>>8^h[255&(c^i[f])];return-1^c}},{}],46:[function(r,s,o){var a,c=r("../utils/common"),i=r("./trees"),u=r("./adler32"),l=r("./crc32"),h=r("./messages"),v=0,f=4,d=0,y=-2,m=-1,b=4,S=2,R=8,_=9,T=286,k=30,I=19,z=2*T+1,L=15,N=3,H=258,F=H+N+1,M=42,j=113,E=1,ee=2,$e=3,oe=4;function De(P,ie){return P.msg=h[ie],ie}function te(P){return(P<<1)-(4<P?9:0)}function _e(P){for(var ie=P.length;0<=--ie;)P[ie]=0}function X(P){var ie=P.state,Q=ie.pending;Q>P.avail_out&&(Q=P.avail_out),Q!==0&&(c.arraySet(P.output,ie.pending_buf,ie.pending_out,Q,P.next_out),P.next_out+=Q,ie.pending_out+=Q,P.total_out+=Q,P.avail_out-=Q,ie.pending-=Q,ie.pending===0&&(ie.pending_out=0))}function Z(P,ie){i._tr_flush_block(P,0<=P.block_start?P.block_start:-1,P.strstart-P.block_start,ie),P.block_start=P.strstart,X(P.strm)}function Ae(P,ie){P.pending_buf[P.pending++]=ie}function ye(P,ie){P.pending_buf[P.pending++]=ie>>>8&255,P.pending_buf[P.pending++]=255&ie}function ve(P,ie){var Q,x,O=P.max_chain_length,V=P.strstart,ae=P.prev_length,ce=P.nice_match,Y=P.strstart>P.w_size-F?P.strstart-(P.w_size-F):0,pe=P.window,Ce=P.w_mask,he=P.prev,Te=P.strstart+H,Ze=pe[V+ae-1],Je=pe[V+ae];P.prev_length>=P.good_match&&(O>>=2),ce>P.lookahead&&(ce=P.lookahead);do if(pe[(Q=ie)+ae]===Je&&pe[Q+ae-1]===Ze&&pe[Q]===pe[V]&&pe[++Q]===pe[V+1]){V+=2,Q++;do;while(pe[++V]===pe[++Q]&&pe[++V]===pe[++Q]&&pe[++V]===pe[++Q]&&pe[++V]===pe[++Q]&&pe[++V]===pe[++Q]&&pe[++V]===pe[++Q]&&pe[++V]===pe[++Q]&&pe[++V]===pe[++Q]&&V<Te);if(x=H-(Te-V),V=Te-H,ae<x){if(P.match_start=ie,ce<=(ae=x))break;Ze=pe[V+ae-1],Je=pe[V+ae]}}while((ie=he[ie&Ce])>Y&&--O!=0);return ae<=P.lookahead?ae:P.lookahead}function ft(P){var ie,Q,x,O,V,ae,ce,Y,pe,Ce,he=P.w_size;do{if(O=P.window_size-P.lookahead-P.strstart,P.strstart>=he+(he-F)){for(c.arraySet(P.window,P.window,he,he,0),P.match_start-=he,P.strstart-=he,P.block_start-=he,ie=Q=P.hash_size;x=P.head[--ie],P.head[ie]=he<=x?x-he:0,--Q;);for(ie=Q=he;x=P.prev[--ie],P.prev[ie]=he<=x?x-he:0,--Q;);O+=he}if(P.strm.avail_in===0)break;if(ae=P.strm,ce=P.window,Y=P.strstart+P.lookahead,pe=O,Ce=void 0,Ce=ae.avail_in,pe<Ce&&(Ce=pe),Q=Ce===0?0:(ae.avail_in-=Ce,c.arraySet(ce,ae.input,ae.next_in,Ce,Y),ae.state.wrap===1?ae.adler=u(ae.adler,ce,Ce,Y):ae.state.wrap===2&&(ae.adler=l(ae.adler,ce,Ce,Y)),ae.next_in+=Ce,ae.total_in+=Ce,Ce),P.lookahead+=Q,P.lookahead+P.insert>=N)for(V=P.strstart-P.insert,P.ins_h=P.window[V],P.ins_h=(P.ins_h<<P.hash_shift^P.window[V+1])&P.hash_mask;P.insert&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[V+N-1])&P.hash_mask,P.prev[V&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=V,V++,P.insert--,!(P.lookahead+P.insert<N)););}while(P.lookahead<F&&P.strm.avail_in!==0)}function Tt(P,ie){for(var Q,x;;){if(P.lookahead<F){if(ft(P),P.lookahead<F&&ie===v)return E;if(P.lookahead===0)break}if(Q=0,P.lookahead>=N&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+N-1])&P.hash_mask,Q=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),Q!==0&&P.strstart-Q<=P.w_size-F&&(P.match_length=ve(P,Q)),P.match_length>=N)if(x=i._tr_tally(P,P.strstart-P.match_start,P.match_length-N),P.lookahead-=P.match_length,P.match_length<=P.max_lazy_match&&P.lookahead>=N){for(P.match_length--;P.strstart++,P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+N-1])&P.hash_mask,Q=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart,--P.match_length!=0;);P.strstart++}else P.strstart+=P.match_length,P.match_length=0,P.ins_h=P.window[P.strstart],P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+1])&P.hash_mask;else x=i._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++;if(x&&(Z(P,!1),P.strm.avail_out===0))return E}return P.insert=P.strstart<N-1?P.strstart:N-1,ie===f?(Z(P,!0),P.strm.avail_out===0?$e:oe):P.last_lit&&(Z(P,!1),P.strm.avail_out===0)?E:ee}function Ge(P,ie){for(var Q,x,O;;){if(P.lookahead<F){if(ft(P),P.lookahead<F&&ie===v)return E;if(P.lookahead===0)break}if(Q=0,P.lookahead>=N&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+N-1])&P.hash_mask,Q=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),P.prev_length=P.match_length,P.prev_match=P.match_start,P.match_length=N-1,Q!==0&&P.prev_length<P.max_lazy_match&&P.strstart-Q<=P.w_size-F&&(P.match_length=ve(P,Q),P.match_length<=5&&(P.strategy===1||P.match_length===N&&4096<P.strstart-P.match_start)&&(P.match_length=N-1)),P.prev_length>=N&&P.match_length<=P.prev_length){for(O=P.strstart+P.lookahead-N,x=i._tr_tally(P,P.strstart-1-P.prev_match,P.prev_length-N),P.lookahead-=P.prev_length-1,P.prev_length-=2;++P.strstart<=O&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+N-1])&P.hash_mask,Q=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),--P.prev_length!=0;);if(P.match_available=0,P.match_length=N-1,P.strstart++,x&&(Z(P,!1),P.strm.avail_out===0))return E}else if(P.match_available){if((x=i._tr_tally(P,0,P.window[P.strstart-1]))&&Z(P,!1),P.strstart++,P.lookahead--,P.strm.avail_out===0)return E}else P.match_available=1,P.strstart++,P.lookahead--}return P.match_available&&(x=i._tr_tally(P,0,P.window[P.strstart-1]),P.match_available=0),P.insert=P.strstart<N-1?P.strstart:N-1,ie===f?(Z(P,!0),P.strm.avail_out===0?$e:oe):P.last_lit&&(Z(P,!1),P.strm.avail_out===0)?E:ee}function tt(P,ie,Q,x,O){this.good_length=P,this.max_lazy=ie,this.nice_length=Q,this.max_chain=x,this.func=O}function Pt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=R,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new c.Buf16(2*z),this.dyn_dtree=new c.Buf16(2*(2*k+1)),this.bl_tree=new c.Buf16(2*(2*I+1)),_e(this.dyn_ltree),_e(this.dyn_dtree),_e(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new c.Buf16(L+1),this.heap=new c.Buf16(2*T+1),_e(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new c.Buf16(2*T+1),_e(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function gt(P){var ie;return P&&P.state?(P.total_in=P.total_out=0,P.data_type=S,(ie=P.state).pending=0,ie.pending_out=0,ie.wrap<0&&(ie.wrap=-ie.wrap),ie.status=ie.wrap?M:j,P.adler=ie.wrap===2?0:1,ie.last_flush=v,i._tr_init(ie),d):De(P,y)}function It(P){var ie=gt(P);return ie===d&&function(Q){Q.window_size=2*Q.w_size,_e(Q.head),Q.max_lazy_match=a[Q.level].max_lazy,Q.good_match=a[Q.level].good_length,Q.nice_match=a[Q.level].nice_length,Q.max_chain_length=a[Q.level].max_chain,Q.strstart=0,Q.block_start=0,Q.lookahead=0,Q.insert=0,Q.match_length=Q.prev_length=N-1,Q.match_available=0,Q.ins_h=0}(P.state),ie}function Bt(P,ie,Q,x,O,V){if(!P)return y;var ae=1;if(ie===m&&(ie=6),x<0?(ae=0,x=-x):15<x&&(ae=2,x-=16),O<1||_<O||Q!==R||x<8||15<x||ie<0||9<ie||V<0||b<V)return De(P,y);x===8&&(x=9);var ce=new Pt;return(P.state=ce).strm=P,ce.wrap=ae,ce.gzhead=null,ce.w_bits=x,ce.w_size=1<<ce.w_bits,ce.w_mask=ce.w_size-1,ce.hash_bits=O+7,ce.hash_size=1<<ce.hash_bits,ce.hash_mask=ce.hash_size-1,ce.hash_shift=~~((ce.hash_bits+N-1)/N),ce.window=new c.Buf8(2*ce.w_size),ce.head=new c.Buf16(ce.hash_size),ce.prev=new c.Buf16(ce.w_size),ce.lit_bufsize=1<<O+6,ce.pending_buf_size=4*ce.lit_bufsize,ce.pending_buf=new c.Buf8(ce.pending_buf_size),ce.d_buf=1*ce.lit_bufsize,ce.l_buf=3*ce.lit_bufsize,ce.level=ie,ce.strategy=V,ce.method=Q,It(P)}a=[new tt(0,0,0,0,function(P,ie){var Q=65535;for(Q>P.pending_buf_size-5&&(Q=P.pending_buf_size-5);;){if(P.lookahead<=1){if(ft(P),P.lookahead===0&&ie===v)return E;if(P.lookahead===0)break}P.strstart+=P.lookahead,P.lookahead=0;var x=P.block_start+Q;if((P.strstart===0||P.strstart>=x)&&(P.lookahead=P.strstart-x,P.strstart=x,Z(P,!1),P.strm.avail_out===0)||P.strstart-P.block_start>=P.w_size-F&&(Z(P,!1),P.strm.avail_out===0))return E}return P.insert=0,ie===f?(Z(P,!0),P.strm.avail_out===0?$e:oe):(P.strstart>P.block_start&&(Z(P,!1),P.strm.avail_out),E)}),new tt(4,4,8,4,Tt),new tt(4,5,16,8,Tt),new tt(4,6,32,32,Tt),new tt(4,4,16,16,Ge),new tt(8,16,32,32,Ge),new tt(8,16,128,128,Ge),new tt(8,32,128,256,Ge),new tt(32,128,258,1024,Ge),new tt(32,258,258,4096,Ge)],o.deflateInit=function(P,ie){return Bt(P,ie,R,15,8,0)},o.deflateInit2=Bt,o.deflateReset=It,o.deflateResetKeep=gt,o.deflateSetHeader=function(P,ie){return P&&P.state?P.state.wrap!==2?y:(P.state.gzhead=ie,d):y},o.deflate=function(P,ie){var Q,x,O,V;if(!P||!P.state||5<ie||ie<0)return P?De(P,y):y;if(x=P.state,!P.output||!P.input&&P.avail_in!==0||x.status===666&&ie!==f)return De(P,P.avail_out===0?-5:y);if(x.strm=P,Q=x.last_flush,x.last_flush=ie,x.status===M)if(x.wrap===2)P.adler=0,Ae(x,31),Ae(x,139),Ae(x,8),x.gzhead?(Ae(x,(x.gzhead.text?1:0)+(x.gzhead.hcrc?2:0)+(x.gzhead.extra?4:0)+(x.gzhead.name?8:0)+(x.gzhead.comment?16:0)),Ae(x,255&x.gzhead.time),Ae(x,x.gzhead.time>>8&255),Ae(x,x.gzhead.time>>16&255),Ae(x,x.gzhead.time>>24&255),Ae(x,x.level===9?2:2<=x.strategy||x.level<2?4:0),Ae(x,255&x.gzhead.os),x.gzhead.extra&&x.gzhead.extra.length&&(Ae(x,255&x.gzhead.extra.length),Ae(x,x.gzhead.extra.length>>8&255)),x.gzhead.hcrc&&(P.adler=l(P.adler,x.pending_buf,x.pending,0)),x.gzindex=0,x.status=69):(Ae(x,0),Ae(x,0),Ae(x,0),Ae(x,0),Ae(x,0),Ae(x,x.level===9?2:2<=x.strategy||x.level<2?4:0),Ae(x,3),x.status=j);else{var ae=R+(x.w_bits-8<<4)<<8;ae|=(2<=x.strategy||x.level<2?0:x.level<6?1:x.level===6?2:3)<<6,x.strstart!==0&&(ae|=32),ae+=31-ae%31,x.status=j,ye(x,ae),x.strstart!==0&&(ye(x,P.adler>>>16),ye(x,65535&P.adler)),P.adler=1}if(x.status===69)if(x.gzhead.extra){for(O=x.pending;x.gzindex<(65535&x.gzhead.extra.length)&&(x.pending!==x.pending_buf_size||(x.gzhead.hcrc&&x.pending>O&&(P.adler=l(P.adler,x.pending_buf,x.pending-O,O)),X(P),O=x.pending,x.pending!==x.pending_buf_size));)Ae(x,255&x.gzhead.extra[x.gzindex]),x.gzindex++;x.gzhead.hcrc&&x.pending>O&&(P.adler=l(P.adler,x.pending_buf,x.pending-O,O)),x.gzindex===x.gzhead.extra.length&&(x.gzindex=0,x.status=73)}else x.status=73;if(x.status===73)if(x.gzhead.name){O=x.pending;do{if(x.pending===x.pending_buf_size&&(x.gzhead.hcrc&&x.pending>O&&(P.adler=l(P.adler,x.pending_buf,x.pending-O,O)),X(P),O=x.pending,x.pending===x.pending_buf_size)){V=1;break}V=x.gzindex<x.gzhead.name.length?255&x.gzhead.name.charCodeAt(x.gzindex++):0,Ae(x,V)}while(V!==0);x.gzhead.hcrc&&x.pending>O&&(P.adler=l(P.adler,x.pending_buf,x.pending-O,O)),V===0&&(x.gzindex=0,x.status=91)}else x.status=91;if(x.status===91)if(x.gzhead.comment){O=x.pending;do{if(x.pending===x.pending_buf_size&&(x.gzhead.hcrc&&x.pending>O&&(P.adler=l(P.adler,x.pending_buf,x.pending-O,O)),X(P),O=x.pending,x.pending===x.pending_buf_size)){V=1;break}V=x.gzindex<x.gzhead.comment.length?255&x.gzhead.comment.charCodeAt(x.gzindex++):0,Ae(x,V)}while(V!==0);x.gzhead.hcrc&&x.pending>O&&(P.adler=l(P.adler,x.pending_buf,x.pending-O,O)),V===0&&(x.status=103)}else x.status=103;if(x.status===103&&(x.gzhead.hcrc?(x.pending+2>x.pending_buf_size&&X(P),x.pending+2<=x.pending_buf_size&&(Ae(x,255&P.adler),Ae(x,P.adler>>8&255),P.adler=0,x.status=j)):x.status=j),x.pending!==0){if(X(P),P.avail_out===0)return x.last_flush=-1,d}else if(P.avail_in===0&&te(ie)<=te(Q)&&ie!==f)return De(P,-5);if(x.status===666&&P.avail_in!==0)return De(P,-5);if(P.avail_in!==0||x.lookahead!==0||ie!==v&&x.status!==666){var ce=x.strategy===2?function(Y,pe){for(var Ce;;){if(Y.lookahead===0&&(ft(Y),Y.lookahead===0)){if(pe===v)return E;break}if(Y.match_length=0,Ce=i._tr_tally(Y,0,Y.window[Y.strstart]),Y.lookahead--,Y.strstart++,Ce&&(Z(Y,!1),Y.strm.avail_out===0))return E}return Y.insert=0,pe===f?(Z(Y,!0),Y.strm.avail_out===0?$e:oe):Y.last_lit&&(Z(Y,!1),Y.strm.avail_out===0)?E:ee}(x,ie):x.strategy===3?function(Y,pe){for(var Ce,he,Te,Ze,Je=Y.window;;){if(Y.lookahead<=H){if(ft(Y),Y.lookahead<=H&&pe===v)return E;if(Y.lookahead===0)break}if(Y.match_length=0,Y.lookahead>=N&&0<Y.strstart&&(he=Je[Te=Y.strstart-1])===Je[++Te]&&he===Je[++Te]&&he===Je[++Te]){Ze=Y.strstart+H;do;while(he===Je[++Te]&&he===Je[++Te]&&he===Je[++Te]&&he===Je[++Te]&&he===Je[++Te]&&he===Je[++Te]&&he===Je[++Te]&&he===Je[++Te]&&Te<Ze);Y.match_length=H-(Ze-Te),Y.match_length>Y.lookahead&&(Y.match_length=Y.lookahead)}if(Y.match_length>=N?(Ce=i._tr_tally(Y,1,Y.match_length-N),Y.lookahead-=Y.match_length,Y.strstart+=Y.match_length,Y.match_length=0):(Ce=i._tr_tally(Y,0,Y.window[Y.strstart]),Y.lookahead--,Y.strstart++),Ce&&(Z(Y,!1),Y.strm.avail_out===0))return E}return Y.insert=0,pe===f?(Z(Y,!0),Y.strm.avail_out===0?$e:oe):Y.last_lit&&(Z(Y,!1),Y.strm.avail_out===0)?E:ee}(x,ie):a[x.level].func(x,ie);if(ce!==$e&&ce!==oe||(x.status=666),ce===E||ce===$e)return P.avail_out===0&&(x.last_flush=-1),d;if(ce===ee&&(ie===1?i._tr_align(x):ie!==5&&(i._tr_stored_block(x,0,0,!1),ie===3&&(_e(x.head),x.lookahead===0&&(x.strstart=0,x.block_start=0,x.insert=0))),X(P),P.avail_out===0))return x.last_flush=-1,d}return ie!==f?d:x.wrap<=0?1:(x.wrap===2?(Ae(x,255&P.adler),Ae(x,P.adler>>8&255),Ae(x,P.adler>>16&255),Ae(x,P.adler>>24&255),Ae(x,255&P.total_in),Ae(x,P.total_in>>8&255),Ae(x,P.total_in>>16&255),Ae(x,P.total_in>>24&255)):(ye(x,P.adler>>>16),ye(x,65535&P.adler)),X(P),0<x.wrap&&(x.wrap=-x.wrap),x.pending!==0?d:1)},o.deflateEnd=function(P){var ie;return P&&P.state?(ie=P.state.status)!==M&&ie!==69&&ie!==73&&ie!==91&&ie!==103&&ie!==j&&ie!==666?De(P,y):(P.state=null,ie===j?De(P,-3):d):y},o.deflateSetDictionary=function(P,ie){var Q,x,O,V,ae,ce,Y,pe,Ce=ie.length;if(!P||!P.state||(V=(Q=P.state).wrap)===2||V===1&&Q.status!==M||Q.lookahead)return y;for(V===1&&(P.adler=u(P.adler,ie,Ce,0)),Q.wrap=0,Ce>=Q.w_size&&(V===0&&(_e(Q.head),Q.strstart=0,Q.block_start=0,Q.insert=0),pe=new c.Buf8(Q.w_size),c.arraySet(pe,ie,Ce-Q.w_size,Q.w_size,0),ie=pe,Ce=Q.w_size),ae=P.avail_in,ce=P.next_in,Y=P.input,P.avail_in=Ce,P.next_in=0,P.input=ie,ft(Q);Q.lookahead>=N;){for(x=Q.strstart,O=Q.lookahead-(N-1);Q.ins_h=(Q.ins_h<<Q.hash_shift^Q.window[x+N-1])&Q.hash_mask,Q.prev[x&Q.w_mask]=Q.head[Q.ins_h],Q.head[Q.ins_h]=x,x++,--O;);Q.strstart=x,Q.lookahead=N-1,ft(Q)}return Q.strstart+=Q.lookahead,Q.block_start=Q.strstart,Q.insert=Q.lookahead,Q.lookahead=0,Q.match_length=Q.prev_length=N-1,Q.match_available=0,P.next_in=ce,P.input=Y,P.avail_in=ae,Q.wrap=V,d},o.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,s,o){s.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,s,o){s.exports=function(a,c){var i,u,l,h,v,f,d,y,m,b,S,R,_,T,k,I,z,L,N,H,F,M,j,E,ee;i=a.state,u=a.next_in,E=a.input,l=u+(a.avail_in-5),h=a.next_out,ee=a.output,v=h-(c-a.avail_out),f=h+(a.avail_out-257),d=i.dmax,y=i.wsize,m=i.whave,b=i.wnext,S=i.window,R=i.hold,_=i.bits,T=i.lencode,k=i.distcode,I=(1<<i.lenbits)-1,z=(1<<i.distbits)-1;e:do{_<15&&(R+=E[u++]<<_,_+=8,R+=E[u++]<<_,_+=8),L=T[R&I];t:for(;;){if(R>>>=N=L>>>24,_-=N,(N=L>>>16&255)===0)ee[h++]=65535&L;else{if(!(16&N)){if((64&N)==0){L=T[(65535&L)+(R&(1<<N)-1)];continue t}if(32&N){i.mode=12;break e}a.msg="invalid literal/length code",i.mode=30;break e}H=65535&L,(N&=15)&&(_<N&&(R+=E[u++]<<_,_+=8),H+=R&(1<<N)-1,R>>>=N,_-=N),_<15&&(R+=E[u++]<<_,_+=8,R+=E[u++]<<_,_+=8),L=k[R&z];r:for(;;){if(R>>>=N=L>>>24,_-=N,!(16&(N=L>>>16&255))){if((64&N)==0){L=k[(65535&L)+(R&(1<<N)-1)];continue r}a.msg="invalid distance code",i.mode=30;break e}if(F=65535&L,_<(N&=15)&&(R+=E[u++]<<_,(_+=8)<N&&(R+=E[u++]<<_,_+=8)),d<(F+=R&(1<<N)-1)){a.msg="invalid distance too far back",i.mode=30;break e}if(R>>>=N,_-=N,(N=h-v)<F){if(m<(N=F-N)&&i.sane){a.msg="invalid distance too far back",i.mode=30;break e}if(j=S,(M=0)===b){if(M+=y-N,N<H){for(H-=N;ee[h++]=S[M++],--N;);M=h-F,j=ee}}else if(b<N){if(M+=y+b-N,(N-=b)<H){for(H-=N;ee[h++]=S[M++],--N;);if(M=0,b<H){for(H-=N=b;ee[h++]=S[M++],--N;);M=h-F,j=ee}}}else if(M+=b-N,N<H){for(H-=N;ee[h++]=S[M++],--N;);M=h-F,j=ee}for(;2<H;)ee[h++]=j[M++],ee[h++]=j[M++],ee[h++]=j[M++],H-=3;H&&(ee[h++]=j[M++],1<H&&(ee[h++]=j[M++]))}else{for(M=h-F;ee[h++]=ee[M++],ee[h++]=ee[M++],ee[h++]=ee[M++],2<(H-=3););H&&(ee[h++]=ee[M++],1<H&&(ee[h++]=ee[M++]))}break}}break}}while(u<l&&h<f);u-=H=_>>3,R&=(1<<(_-=H<<3))-1,a.next_in=u,a.next_out=h,a.avail_in=u<l?l-u+5:5-(u-l),a.avail_out=h<f?f-h+257:257-(h-f),i.hold=R,i.bits=_}},{}],49:[function(r,s,o){var a=r("../utils/common"),c=r("./adler32"),i=r("./crc32"),u=r("./inffast"),l=r("./inftrees"),h=1,v=2,f=0,d=-2,y=1,m=852,b=592;function S(M){return(M>>>24&255)+(M>>>8&65280)+((65280&M)<<8)+((255&M)<<24)}function R(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(M){var j;return M&&M.state?(j=M.state,M.total_in=M.total_out=j.total=0,M.msg="",j.wrap&&(M.adler=1&j.wrap),j.mode=y,j.last=0,j.havedict=0,j.dmax=32768,j.head=null,j.hold=0,j.bits=0,j.lencode=j.lendyn=new a.Buf32(m),j.distcode=j.distdyn=new a.Buf32(b),j.sane=1,j.back=-1,f):d}function T(M){var j;return M&&M.state?((j=M.state).wsize=0,j.whave=0,j.wnext=0,_(M)):d}function k(M,j){var E,ee;return M&&M.state?(ee=M.state,j<0?(E=0,j=-j):(E=1+(j>>4),j<48&&(j&=15)),j&&(j<8||15<j)?d:(ee.window!==null&&ee.wbits!==j&&(ee.window=null),ee.wrap=E,ee.wbits=j,T(M))):d}function I(M,j){var E,ee;return M?(ee=new R,(M.state=ee).window=null,(E=k(M,j))!==f&&(M.state=null),E):d}var z,L,N=!0;function H(M){if(N){var j;for(z=new a.Buf32(512),L=new a.Buf32(32),j=0;j<144;)M.lens[j++]=8;for(;j<256;)M.lens[j++]=9;for(;j<280;)M.lens[j++]=7;for(;j<288;)M.lens[j++]=8;for(l(h,M.lens,0,288,z,0,M.work,{bits:9}),j=0;j<32;)M.lens[j++]=5;l(v,M.lens,0,32,L,0,M.work,{bits:5}),N=!1}M.lencode=z,M.lenbits=9,M.distcode=L,M.distbits=5}function F(M,j,E,ee){var $e,oe=M.state;return oe.window===null&&(oe.wsize=1<<oe.wbits,oe.wnext=0,oe.whave=0,oe.window=new a.Buf8(oe.wsize)),ee>=oe.wsize?(a.arraySet(oe.window,j,E-oe.wsize,oe.wsize,0),oe.wnext=0,oe.whave=oe.wsize):(ee<($e=oe.wsize-oe.wnext)&&($e=ee),a.arraySet(oe.window,j,E-ee,$e,oe.wnext),(ee-=$e)?(a.arraySet(oe.window,j,E-ee,ee,0),oe.wnext=ee,oe.whave=oe.wsize):(oe.wnext+=$e,oe.wnext===oe.wsize&&(oe.wnext=0),oe.whave<oe.wsize&&(oe.whave+=$e))),0}o.inflateReset=T,o.inflateReset2=k,o.inflateResetKeep=_,o.inflateInit=function(M){return I(M,15)},o.inflateInit2=I,o.inflate=function(M,j){var E,ee,$e,oe,De,te,_e,X,Z,Ae,ye,ve,ft,Tt,Ge,tt,Pt,gt,It,Bt,P,ie,Q,x,O=0,V=new a.Buf8(4),ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!M||!M.state||!M.output||!M.input&&M.avail_in!==0)return d;(E=M.state).mode===12&&(E.mode=13),De=M.next_out,$e=M.output,_e=M.avail_out,oe=M.next_in,ee=M.input,te=M.avail_in,X=E.hold,Z=E.bits,Ae=te,ye=_e,ie=f;e:for(;;)switch(E.mode){case y:if(E.wrap===0){E.mode=13;break}for(;Z<16;){if(te===0)break e;te--,X+=ee[oe++]<<Z,Z+=8}if(2&E.wrap&&X===35615){V[E.check=0]=255&X,V[1]=X>>>8&255,E.check=i(E.check,V,2,0),Z=X=0,E.mode=2;break}if(E.flags=0,E.head&&(E.head.done=!1),!(1&E.wrap)||(((255&X)<<8)+(X>>8))%31){M.msg="incorrect header check",E.mode=30;break}if((15&X)!=8){M.msg="unknown compression method",E.mode=30;break}if(Z-=4,P=8+(15&(X>>>=4)),E.wbits===0)E.wbits=P;else if(P>E.wbits){M.msg="invalid window size",E.mode=30;break}E.dmax=1<<P,M.adler=E.check=1,E.mode=512&X?10:12,Z=X=0;break;case 2:for(;Z<16;){if(te===0)break e;te--,X+=ee[oe++]<<Z,Z+=8}if(E.flags=X,(255&E.flags)!=8){M.msg="unknown compression method",E.mode=30;break}if(57344&E.flags){M.msg="unknown header flags set",E.mode=30;break}E.head&&(E.head.text=X>>8&1),512&E.flags&&(V[0]=255&X,V[1]=X>>>8&255,E.check=i(E.check,V,2,0)),Z=X=0,E.mode=3;case 3:for(;Z<32;){if(te===0)break e;te--,X+=ee[oe++]<<Z,Z+=8}E.head&&(E.head.time=X),512&E.flags&&(V[0]=255&X,V[1]=X>>>8&255,V[2]=X>>>16&255,V[3]=X>>>24&255,E.check=i(E.check,V,4,0)),Z=X=0,E.mode=4;case 4:for(;Z<16;){if(te===0)break e;te--,X+=ee[oe++]<<Z,Z+=8}E.head&&(E.head.xflags=255&X,E.head.os=X>>8),512&E.flags&&(V[0]=255&X,V[1]=X>>>8&255,E.check=i(E.check,V,2,0)),Z=X=0,E.mode=5;case 5:if(1024&E.flags){for(;Z<16;){if(te===0)break e;te--,X+=ee[oe++]<<Z,Z+=8}E.length=X,E.head&&(E.head.extra_len=X),512&E.flags&&(V[0]=255&X,V[1]=X>>>8&255,E.check=i(E.check,V,2,0)),Z=X=0}else E.head&&(E.head.extra=null);E.mode=6;case 6:if(1024&E.flags&&(te<(ve=E.length)&&(ve=te),ve&&(E.head&&(P=E.head.extra_len-E.length,E.head.extra||(E.head.extra=new Array(E.head.extra_len)),a.arraySet(E.head.extra,ee,oe,ve,P)),512&E.flags&&(E.check=i(E.check,ee,ve,oe)),te-=ve,oe+=ve,E.length-=ve),E.length))break e;E.length=0,E.mode=7;case 7:if(2048&E.flags){if(te===0)break e;for(ve=0;P=ee[oe+ve++],E.head&&P&&E.length<65536&&(E.head.name+=String.fromCharCode(P)),P&&ve<te;);if(512&E.flags&&(E.check=i(E.check,ee,ve,oe)),te-=ve,oe+=ve,P)break e}else E.head&&(E.head.name=null);E.length=0,E.mode=8;case 8:if(4096&E.flags){if(te===0)break e;for(ve=0;P=ee[oe+ve++],E.head&&P&&E.length<65536&&(E.head.comment+=String.fromCharCode(P)),P&&ve<te;);if(512&E.flags&&(E.check=i(E.check,ee,ve,oe)),te-=ve,oe+=ve,P)break e}else E.head&&(E.head.comment=null);E.mode=9;case 9:if(512&E.flags){for(;Z<16;){if(te===0)break e;te--,X+=ee[oe++]<<Z,Z+=8}if(X!==(65535&E.check)){M.msg="header crc mismatch",E.mode=30;break}Z=X=0}E.head&&(E.head.hcrc=E.flags>>9&1,E.head.done=!0),M.adler=E.check=0,E.mode=12;break;case 10:for(;Z<32;){if(te===0)break e;te--,X+=ee[oe++]<<Z,Z+=8}M.adler=E.check=S(X),Z=X=0,E.mode=11;case 11:if(E.havedict===0)return M.next_out=De,M.avail_out=_e,M.next_in=oe,M.avail_in=te,E.hold=X,E.bits=Z,2;M.adler=E.check=1,E.mode=12;case 12:if(j===5||j===6)break e;case 13:if(E.last){X>>>=7&Z,Z-=7&Z,E.mode=27;break}for(;Z<3;){if(te===0)break e;te--,X+=ee[oe++]<<Z,Z+=8}switch(E.last=1&X,Z-=1,3&(X>>>=1)){case 0:E.mode=14;break;case 1:if(H(E),E.mode=20,j!==6)break;X>>>=2,Z-=2;break e;case 2:E.mode=17;break;case 3:M.msg="invalid block type",E.mode=30}X>>>=2,Z-=2;break;case 14:for(X>>>=7&Z,Z-=7&Z;Z<32;){if(te===0)break e;te--,X+=ee[oe++]<<Z,Z+=8}if((65535&X)!=(X>>>16^65535)){M.msg="invalid stored block lengths",E.mode=30;break}if(E.length=65535&X,Z=X=0,E.mode=15,j===6)break e;case 15:E.mode=16;case 16:if(ve=E.length){if(te<ve&&(ve=te),_e<ve&&(ve=_e),ve===0)break e;a.arraySet($e,ee,oe,ve,De),te-=ve,oe+=ve,_e-=ve,De+=ve,E.length-=ve;break}E.mode=12;break;case 17:for(;Z<14;){if(te===0)break e;te--,X+=ee[oe++]<<Z,Z+=8}if(E.nlen=257+(31&X),X>>>=5,Z-=5,E.ndist=1+(31&X),X>>>=5,Z-=5,E.ncode=4+(15&X),X>>>=4,Z-=4,286<E.nlen||30<E.ndist){M.msg="too many length or distance symbols",E.mode=30;break}E.have=0,E.mode=18;case 18:for(;E.have<E.ncode;){for(;Z<3;){if(te===0)break e;te--,X+=ee[oe++]<<Z,Z+=8}E.lens[ae[E.have++]]=7&X,X>>>=3,Z-=3}for(;E.have<19;)E.lens[ae[E.have++]]=0;if(E.lencode=E.lendyn,E.lenbits=7,Q={bits:E.lenbits},ie=l(0,E.lens,0,19,E.lencode,0,E.work,Q),E.lenbits=Q.bits,ie){M.msg="invalid code lengths set",E.mode=30;break}E.have=0,E.mode=19;case 19:for(;E.have<E.nlen+E.ndist;){for(;tt=(O=E.lencode[X&(1<<E.lenbits)-1])>>>16&255,Pt=65535&O,!((Ge=O>>>24)<=Z);){if(te===0)break e;te--,X+=ee[oe++]<<Z,Z+=8}if(Pt<16)X>>>=Ge,Z-=Ge,E.lens[E.have++]=Pt;else{if(Pt===16){for(x=Ge+2;Z<x;){if(te===0)break e;te--,X+=ee[oe++]<<Z,Z+=8}if(X>>>=Ge,Z-=Ge,E.have===0){M.msg="invalid bit length repeat",E.mode=30;break}P=E.lens[E.have-1],ve=3+(3&X),X>>>=2,Z-=2}else if(Pt===17){for(x=Ge+3;Z<x;){if(te===0)break e;te--,X+=ee[oe++]<<Z,Z+=8}Z-=Ge,P=0,ve=3+(7&(X>>>=Ge)),X>>>=3,Z-=3}else{for(x=Ge+7;Z<x;){if(te===0)break e;te--,X+=ee[oe++]<<Z,Z+=8}Z-=Ge,P=0,ve=11+(127&(X>>>=Ge)),X>>>=7,Z-=7}if(E.have+ve>E.nlen+E.ndist){M.msg="invalid bit length repeat",E.mode=30;break}for(;ve--;)E.lens[E.have++]=P}}if(E.mode===30)break;if(E.lens[256]===0){M.msg="invalid code -- missing end-of-block",E.mode=30;break}if(E.lenbits=9,Q={bits:E.lenbits},ie=l(h,E.lens,0,E.nlen,E.lencode,0,E.work,Q),E.lenbits=Q.bits,ie){M.msg="invalid literal/lengths set",E.mode=30;break}if(E.distbits=6,E.distcode=E.distdyn,Q={bits:E.distbits},ie=l(v,E.lens,E.nlen,E.ndist,E.distcode,0,E.work,Q),E.distbits=Q.bits,ie){M.msg="invalid distances set",E.mode=30;break}if(E.mode=20,j===6)break e;case 20:E.mode=21;case 21:if(6<=te&&258<=_e){M.next_out=De,M.avail_out=_e,M.next_in=oe,M.avail_in=te,E.hold=X,E.bits=Z,u(M,ye),De=M.next_out,$e=M.output,_e=M.avail_out,oe=M.next_in,ee=M.input,te=M.avail_in,X=E.hold,Z=E.bits,E.mode===12&&(E.back=-1);break}for(E.back=0;tt=(O=E.lencode[X&(1<<E.lenbits)-1])>>>16&255,Pt=65535&O,!((Ge=O>>>24)<=Z);){if(te===0)break e;te--,X+=ee[oe++]<<Z,Z+=8}if(tt&&(240&tt)==0){for(gt=Ge,It=tt,Bt=Pt;tt=(O=E.lencode[Bt+((X&(1<<gt+It)-1)>>gt)])>>>16&255,Pt=65535&O,!(gt+(Ge=O>>>24)<=Z);){if(te===0)break e;te--,X+=ee[oe++]<<Z,Z+=8}X>>>=gt,Z-=gt,E.back+=gt}if(X>>>=Ge,Z-=Ge,E.back+=Ge,E.length=Pt,tt===0){E.mode=26;break}if(32&tt){E.back=-1,E.mode=12;break}if(64&tt){M.msg="invalid literal/length code",E.mode=30;break}E.extra=15&tt,E.mode=22;case 22:if(E.extra){for(x=E.extra;Z<x;){if(te===0)break e;te--,X+=ee[oe++]<<Z,Z+=8}E.length+=X&(1<<E.extra)-1,X>>>=E.extra,Z-=E.extra,E.back+=E.extra}E.was=E.length,E.mode=23;case 23:for(;tt=(O=E.distcode[X&(1<<E.distbits)-1])>>>16&255,Pt=65535&O,!((Ge=O>>>24)<=Z);){if(te===0)break e;te--,X+=ee[oe++]<<Z,Z+=8}if((240&tt)==0){for(gt=Ge,It=tt,Bt=Pt;tt=(O=E.distcode[Bt+((X&(1<<gt+It)-1)>>gt)])>>>16&255,Pt=65535&O,!(gt+(Ge=O>>>24)<=Z);){if(te===0)break e;te--,X+=ee[oe++]<<Z,Z+=8}X>>>=gt,Z-=gt,E.back+=gt}if(X>>>=Ge,Z-=Ge,E.back+=Ge,64&tt){M.msg="invalid distance code",E.mode=30;break}E.offset=Pt,E.extra=15&tt,E.mode=24;case 24:if(E.extra){for(x=E.extra;Z<x;){if(te===0)break e;te--,X+=ee[oe++]<<Z,Z+=8}E.offset+=X&(1<<E.extra)-1,X>>>=E.extra,Z-=E.extra,E.back+=E.extra}if(E.offset>E.dmax){M.msg="invalid distance too far back",E.mode=30;break}E.mode=25;case 25:if(_e===0)break e;if(ve=ye-_e,E.offset>ve){if((ve=E.offset-ve)>E.whave&&E.sane){M.msg="invalid distance too far back",E.mode=30;break}ft=ve>E.wnext?(ve-=E.wnext,E.wsize-ve):E.wnext-ve,ve>E.length&&(ve=E.length),Tt=E.window}else Tt=$e,ft=De-E.offset,ve=E.length;for(_e<ve&&(ve=_e),_e-=ve,E.length-=ve;$e[De++]=Tt[ft++],--ve;);E.length===0&&(E.mode=21);break;case 26:if(_e===0)break e;$e[De++]=E.length,_e--,E.mode=21;break;case 27:if(E.wrap){for(;Z<32;){if(te===0)break e;te--,X|=ee[oe++]<<Z,Z+=8}if(ye-=_e,M.total_out+=ye,E.total+=ye,ye&&(M.adler=E.check=E.flags?i(E.check,$e,ye,De-ye):c(E.check,$e,ye,De-ye)),ye=_e,(E.flags?X:S(X))!==E.check){M.msg="incorrect data check",E.mode=30;break}Z=X=0}E.mode=28;case 28:if(E.wrap&&E.flags){for(;Z<32;){if(te===0)break e;te--,X+=ee[oe++]<<Z,Z+=8}if(X!==(4294967295&E.total)){M.msg="incorrect length check",E.mode=30;break}Z=X=0}E.mode=29;case 29:ie=1;break e;case 30:ie=-3;break e;case 31:return-4;case 32:default:return d}return M.next_out=De,M.avail_out=_e,M.next_in=oe,M.avail_in=te,E.hold=X,E.bits=Z,(E.wsize||ye!==M.avail_out&&E.mode<30&&(E.mode<27||j!==4))&&F(M,M.output,M.next_out,ye-M.avail_out)?(E.mode=31,-4):(Ae-=M.avail_in,ye-=M.avail_out,M.total_in+=Ae,M.total_out+=ye,E.total+=ye,E.wrap&&ye&&(M.adler=E.check=E.flags?i(E.check,$e,ye,M.next_out-ye):c(E.check,$e,ye,M.next_out-ye)),M.data_type=E.bits+(E.last?64:0)+(E.mode===12?128:0)+(E.mode===20||E.mode===15?256:0),(Ae==0&&ye===0||j===4)&&ie===f&&(ie=-5),ie)},o.inflateEnd=function(M){if(!M||!M.state)return d;var j=M.state;return j.window&&(j.window=null),M.state=null,f},o.inflateGetHeader=function(M,j){var E;return M&&M.state?(2&(E=M.state).wrap)==0?d:((E.head=j).done=!1,f):d},o.inflateSetDictionary=function(M,j){var E,ee=j.length;return M&&M.state?(E=M.state).wrap!==0&&E.mode!==11?d:E.mode===11&&c(1,j,ee,0)!==E.check?-3:F(M,j,ee,ee)?(E.mode=31,-4):(E.havedict=1,f):d},o.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,s,o){var a=r("../utils/common"),c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];s.exports=function(h,v,f,d,y,m,b,S){var R,_,T,k,I,z,L,N,H,F=S.bits,M=0,j=0,E=0,ee=0,$e=0,oe=0,De=0,te=0,_e=0,X=0,Z=null,Ae=0,ye=new a.Buf16(16),ve=new a.Buf16(16),ft=null,Tt=0;for(M=0;M<=15;M++)ye[M]=0;for(j=0;j<d;j++)ye[v[f+j]]++;for($e=F,ee=15;1<=ee&&ye[ee]===0;ee--);if(ee<$e&&($e=ee),ee===0)return y[m++]=20971520,y[m++]=20971520,S.bits=1,0;for(E=1;E<ee&&ye[E]===0;E++);for($e<E&&($e=E),M=te=1;M<=15;M++)if(te<<=1,(te-=ye[M])<0)return-1;if(0<te&&(h===0||ee!==1))return-1;for(ve[1]=0,M=1;M<15;M++)ve[M+1]=ve[M]+ye[M];for(j=0;j<d;j++)v[f+j]!==0&&(b[ve[v[f+j]]++]=j);if(z=h===0?(Z=ft=b,19):h===1?(Z=c,Ae-=257,ft=i,Tt-=257,256):(Z=u,ft=l,-1),M=E,I=m,De=j=X=0,T=-1,k=(_e=1<<(oe=$e))-1,h===1&&852<_e||h===2&&592<_e)return 1;for(;;){for(L=M-De,H=b[j]<z?(N=0,b[j]):b[j]>z?(N=ft[Tt+b[j]],Z[Ae+b[j]]):(N=96,0),R=1<<M-De,E=_=1<<oe;y[I+(X>>De)+(_-=R)]=L<<24|N<<16|H|0,_!==0;);for(R=1<<M-1;X&R;)R>>=1;if(R!==0?(X&=R-1,X+=R):X=0,j++,--ye[M]==0){if(M===ee)break;M=v[f+b[j]]}if($e<M&&(X&k)!==T){for(De===0&&(De=$e),I+=E,te=1<<(oe=M-De);oe+De<ee&&!((te-=ye[oe+De])<=0);)oe++,te<<=1;if(_e+=1<<oe,h===1&&852<_e||h===2&&592<_e)return 1;y[T=X&k]=$e<<24|oe<<16|I-m|0}}return X!==0&&(y[I+X]=M-De<<24|64<<16|0),S.bits=$e,0}},{"../utils/common":41}],51:[function(r,s,o){s.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,s,o){var a=r("../utils/common"),c=0,i=1;function u(O){for(var V=O.length;0<=--V;)O[V]=0}var l=0,h=29,v=256,f=v+1+h,d=30,y=19,m=2*f+1,b=15,S=16,R=7,_=256,T=16,k=17,I=18,z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],L=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],F=new Array(2*(f+2));u(F);var M=new Array(2*d);u(M);var j=new Array(512);u(j);var E=new Array(256);u(E);var ee=new Array(h);u(ee);var $e,oe,De,te=new Array(d);function _e(O,V,ae,ce,Y){this.static_tree=O,this.extra_bits=V,this.extra_base=ae,this.elems=ce,this.max_length=Y,this.has_stree=O&&O.length}function X(O,V){this.dyn_tree=O,this.max_code=0,this.stat_desc=V}function Z(O){return O<256?j[O]:j[256+(O>>>7)]}function Ae(O,V){O.pending_buf[O.pending++]=255&V,O.pending_buf[O.pending++]=V>>>8&255}function ye(O,V,ae){O.bi_valid>S-ae?(O.bi_buf|=V<<O.bi_valid&65535,Ae(O,O.bi_buf),O.bi_buf=V>>S-O.bi_valid,O.bi_valid+=ae-S):(O.bi_buf|=V<<O.bi_valid&65535,O.bi_valid+=ae)}function ve(O,V,ae){ye(O,ae[2*V],ae[2*V+1])}function ft(O,V){for(var ae=0;ae|=1&O,O>>>=1,ae<<=1,0<--V;);return ae>>>1}function Tt(O,V,ae){var ce,Y,pe=new Array(b+1),Ce=0;for(ce=1;ce<=b;ce++)pe[ce]=Ce=Ce+ae[ce-1]<<1;for(Y=0;Y<=V;Y++){var he=O[2*Y+1];he!==0&&(O[2*Y]=ft(pe[he]++,he))}}function Ge(O){var V;for(V=0;V<f;V++)O.dyn_ltree[2*V]=0;for(V=0;V<d;V++)O.dyn_dtree[2*V]=0;for(V=0;V<y;V++)O.bl_tree[2*V]=0;O.dyn_ltree[2*_]=1,O.opt_len=O.static_len=0,O.last_lit=O.matches=0}function tt(O){8<O.bi_valid?Ae(O,O.bi_buf):0<O.bi_valid&&(O.pending_buf[O.pending++]=O.bi_buf),O.bi_buf=0,O.bi_valid=0}function Pt(O,V,ae,ce){var Y=2*V,pe=2*ae;return O[Y]<O[pe]||O[Y]===O[pe]&&ce[V]<=ce[ae]}function gt(O,V,ae){for(var ce=O.heap[ae],Y=ae<<1;Y<=O.heap_len&&(Y<O.heap_len&&Pt(V,O.heap[Y+1],O.heap[Y],O.depth)&&Y++,!Pt(V,ce,O.heap[Y],O.depth));)O.heap[ae]=O.heap[Y],ae=Y,Y<<=1;O.heap[ae]=ce}function It(O,V,ae){var ce,Y,pe,Ce,he=0;if(O.last_lit!==0)for(;ce=O.pending_buf[O.d_buf+2*he]<<8|O.pending_buf[O.d_buf+2*he+1],Y=O.pending_buf[O.l_buf+he],he++,ce===0?ve(O,Y,V):(ve(O,(pe=E[Y])+v+1,V),(Ce=z[pe])!==0&&ye(O,Y-=ee[pe],Ce),ve(O,pe=Z(--ce),ae),(Ce=L[pe])!==0&&ye(O,ce-=te[pe],Ce)),he<O.last_lit;);ve(O,_,V)}function Bt(O,V){var ae,ce,Y,pe=V.dyn_tree,Ce=V.stat_desc.static_tree,he=V.stat_desc.has_stree,Te=V.stat_desc.elems,Ze=-1;for(O.heap_len=0,O.heap_max=m,ae=0;ae<Te;ae++)pe[2*ae]!==0?(O.heap[++O.heap_len]=Ze=ae,O.depth[ae]=0):pe[2*ae+1]=0;for(;O.heap_len<2;)pe[2*(Y=O.heap[++O.heap_len]=Ze<2?++Ze:0)]=1,O.depth[Y]=0,O.opt_len--,he&&(O.static_len-=Ce[2*Y+1]);for(V.max_code=Ze,ae=O.heap_len>>1;1<=ae;ae--)gt(O,pe,ae);for(Y=Te;ae=O.heap[1],O.heap[1]=O.heap[O.heap_len--],gt(O,pe,1),ce=O.heap[1],O.heap[--O.heap_max]=ae,O.heap[--O.heap_max]=ce,pe[2*Y]=pe[2*ae]+pe[2*ce],O.depth[Y]=(O.depth[ae]>=O.depth[ce]?O.depth[ae]:O.depth[ce])+1,pe[2*ae+1]=pe[2*ce+1]=Y,O.heap[1]=Y++,gt(O,pe,1),2<=O.heap_len;);O.heap[--O.heap_max]=O.heap[1],function(Je,Ft){var Ur,Ht,Dt,mt,Ne,$n,Qt=Ft.dyn_tree,ei=Ft.max_code,Hr=Ft.stat_desc.static_tree,Eo=Ft.stat_desc.has_stree,fr=Ft.stat_desc.extra_bits,ti=Ft.stat_desc.extra_base,Wr=Ft.stat_desc.max_length,en=0;for(mt=0;mt<=b;mt++)Je.bl_count[mt]=0;for(Qt[2*Je.heap[Je.heap_max]+1]=0,Ur=Je.heap_max+1;Ur<m;Ur++)Wr<(mt=Qt[2*Qt[2*(Ht=Je.heap[Ur])+1]+1]+1)&&(mt=Wr,en++),Qt[2*Ht+1]=mt,ei<Ht||(Je.bl_count[mt]++,Ne=0,ti<=Ht&&(Ne=fr[Ht-ti]),$n=Qt[2*Ht],Je.opt_len+=$n*(mt+Ne),Eo&&(Je.static_len+=$n*(Hr[2*Ht+1]+Ne)));if(en!==0){do{for(mt=Wr-1;Je.bl_count[mt]===0;)mt--;Je.bl_count[mt]--,Je.bl_count[mt+1]+=2,Je.bl_count[Wr]--,en-=2}while(0<en);for(mt=Wr;mt!==0;mt--)for(Ht=Je.bl_count[mt];Ht!==0;)ei<(Dt=Je.heap[--Ur])||(Qt[2*Dt+1]!==mt&&(Je.opt_len+=(mt-Qt[2*Dt+1])*Qt[2*Dt],Qt[2*Dt+1]=mt),Ht--)}}(O,V),Tt(pe,Ze,O.bl_count)}function P(O,V,ae){var ce,Y,pe=-1,Ce=V[1],he=0,Te=7,Ze=4;for(Ce===0&&(Te=138,Ze=3),V[2*(ae+1)+1]=65535,ce=0;ce<=ae;ce++)Y=Ce,Ce=V[2*(ce+1)+1],++he<Te&&Y===Ce||(he<Ze?O.bl_tree[2*Y]+=he:Y!==0?(Y!==pe&&O.bl_tree[2*Y]++,O.bl_tree[2*T]++):he<=10?O.bl_tree[2*k]++:O.bl_tree[2*I]++,pe=Y,Ze=(he=0)===Ce?(Te=138,3):Y===Ce?(Te=6,3):(Te=7,4))}function ie(O,V,ae){var ce,Y,pe=-1,Ce=V[1],he=0,Te=7,Ze=4;for(Ce===0&&(Te=138,Ze=3),ce=0;ce<=ae;ce++)if(Y=Ce,Ce=V[2*(ce+1)+1],!(++he<Te&&Y===Ce)){if(he<Ze)for(;ve(O,Y,O.bl_tree),--he!=0;);else Y!==0?(Y!==pe&&(ve(O,Y,O.bl_tree),he--),ve(O,T,O.bl_tree),ye(O,he-3,2)):he<=10?(ve(O,k,O.bl_tree),ye(O,he-3,3)):(ve(O,I,O.bl_tree),ye(O,he-11,7));pe=Y,Ze=(he=0)===Ce?(Te=138,3):Y===Ce?(Te=6,3):(Te=7,4)}}u(te);var Q=!1;function x(O,V,ae,ce){ye(O,(l<<1)+(ce?1:0),3),function(Y,pe,Ce,he){tt(Y),Ae(Y,Ce),Ae(Y,~Ce),a.arraySet(Y.pending_buf,Y.window,pe,Ce,Y.pending),Y.pending+=Ce}(O,V,ae)}o._tr_init=function(O){Q||(function(){var V,ae,ce,Y,pe,Ce=new Array(b+1);for(Y=ce=0;Y<h-1;Y++)for(ee[Y]=ce,V=0;V<1<<z[Y];V++)E[ce++]=Y;for(E[ce-1]=Y,Y=pe=0;Y<16;Y++)for(te[Y]=pe,V=0;V<1<<L[Y];V++)j[pe++]=Y;for(pe>>=7;Y<d;Y++)for(te[Y]=pe<<7,V=0;V<1<<L[Y]-7;V++)j[256+pe++]=Y;for(ae=0;ae<=b;ae++)Ce[ae]=0;for(V=0;V<=143;)F[2*V+1]=8,V++,Ce[8]++;for(;V<=255;)F[2*V+1]=9,V++,Ce[9]++;for(;V<=279;)F[2*V+1]=7,V++,Ce[7]++;for(;V<=287;)F[2*V+1]=8,V++,Ce[8]++;for(Tt(F,f+1,Ce),V=0;V<d;V++)M[2*V+1]=5,M[2*V]=ft(V,5);$e=new _e(F,z,v+1,f,b),oe=new _e(M,L,0,d,b),De=new _e(new Array(0),N,0,y,R)}(),Q=!0),O.l_desc=new X(O.dyn_ltree,$e),O.d_desc=new X(O.dyn_dtree,oe),O.bl_desc=new X(O.bl_tree,De),O.bi_buf=0,O.bi_valid=0,Ge(O)},o._tr_stored_block=x,o._tr_flush_block=function(O,V,ae,ce){var Y,pe,Ce=0;0<O.level?(O.strm.data_type===2&&(O.strm.data_type=function(he){var Te,Ze=4093624447;for(Te=0;Te<=31;Te++,Ze>>>=1)if(1&Ze&&he.dyn_ltree[2*Te]!==0)return c;if(he.dyn_ltree[18]!==0||he.dyn_ltree[20]!==0||he.dyn_ltree[26]!==0)return i;for(Te=32;Te<v;Te++)if(he.dyn_ltree[2*Te]!==0)return i;return c}(O)),Bt(O,O.l_desc),Bt(O,O.d_desc),Ce=function(he){var Te;for(P(he,he.dyn_ltree,he.l_desc.max_code),P(he,he.dyn_dtree,he.d_desc.max_code),Bt(he,he.bl_desc),Te=y-1;3<=Te&&he.bl_tree[2*H[Te]+1]===0;Te--);return he.opt_len+=3*(Te+1)+5+5+4,Te}(O),Y=O.opt_len+3+7>>>3,(pe=O.static_len+3+7>>>3)<=Y&&(Y=pe)):Y=pe=ae+5,ae+4<=Y&&V!==-1?x(O,V,ae,ce):O.strategy===4||pe===Y?(ye(O,2+(ce?1:0),3),It(O,F,M)):(ye(O,4+(ce?1:0),3),function(he,Te,Ze,Je){var Ft;for(ye(he,Te-257,5),ye(he,Ze-1,5),ye(he,Je-4,4),Ft=0;Ft<Je;Ft++)ye(he,he.bl_tree[2*H[Ft]+1],3);ie(he,he.dyn_ltree,Te-1),ie(he,he.dyn_dtree,Ze-1)}(O,O.l_desc.max_code+1,O.d_desc.max_code+1,Ce+1),It(O,O.dyn_ltree,O.dyn_dtree)),Ge(O),ce&&tt(O)},o._tr_tally=function(O,V,ae){return O.pending_buf[O.d_buf+2*O.last_lit]=V>>>8&255,O.pending_buf[O.d_buf+2*O.last_lit+1]=255&V,O.pending_buf[O.l_buf+O.last_lit]=255&ae,O.last_lit++,V===0?O.dyn_ltree[2*ae]++:(O.matches++,V--,O.dyn_ltree[2*(E[ae]+v+1)]++,O.dyn_dtree[2*Z(V)]++),O.last_lit===O.lit_bufsize-1},o._tr_align=function(O){ye(O,2,3),ve(O,_,F),function(V){V.bi_valid===16?(Ae(V,V.bi_buf),V.bi_buf=0,V.bi_valid=0):8<=V.bi_valid&&(V.pending_buf[V.pending++]=255&V.bi_buf,V.bi_buf>>=8,V.bi_valid-=8)}(O)}},{"../utils/common":41}],53:[function(r,s,o){s.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,s,o){(function(a){(function(c,i){if(!c.setImmediate){var u,l,h,v,f=1,d={},y=!1,m=c.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(c);b=b&&b.setTimeout?b:c,u={}.toString.call(c.process)==="[object process]"?function(T){process.nextTick(function(){R(T)})}:function(){if(c.postMessage&&!c.importScripts){var T=!0,k=c.onmessage;return c.onmessage=function(){T=!1},c.postMessage("","*"),c.onmessage=k,T}}()?(v="setImmediate$"+Math.random()+"$",c.addEventListener?c.addEventListener("message",_,!1):c.attachEvent("onmessage",_),function(T){c.postMessage(v+T,"*")}):c.MessageChannel?((h=new MessageChannel).port1.onmessage=function(T){R(T.data)},function(T){h.port2.postMessage(T)}):m&&"onreadystatechange"in m.createElement("script")?(l=m.documentElement,function(T){var k=m.createElement("script");k.onreadystatechange=function(){R(T),k.onreadystatechange=null,l.removeChild(k),k=null},l.appendChild(k)}):function(T){setTimeout(R,0,T)},b.setImmediate=function(T){typeof T!="function"&&(T=new Function(""+T));for(var k=new Array(arguments.length-1),I=0;I<k.length;I++)k[I]=arguments[I+1];var z={callback:T,args:k};return d[f]=z,u(f),f++},b.clearImmediate=S}function S(T){delete d[T]}function R(T){if(y)setTimeout(R,0,T);else{var k=d[T];if(k){y=!0;try{(function(I){var z=I.callback,L=I.args;switch(L.length){case 0:z();break;case 1:z(L[0]);break;case 2:z(L[0],L[1]);break;case 3:z(L[0],L[1],L[2]);break;default:z.apply(i,L)}})(k)}finally{S(T),y=!1}}}}function _(T){T.source===c&&typeof T.data=="string"&&T.data.indexOf(v)===0&&R(+T.data.slice(v.length))}})(typeof self>"u"?a===void 0?this:a:self)}).call(this,typeof pn<"u"?pn:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(ud)),ud.exports}var Eq=wq();const Aq=l_(Eq);var el={exports:{}},Tq=el.exports,ib;function Iq(){return ib||(ib=1,function(e,t){(function(r,s){s()})(Tq,function(){function r(l,h){return typeof h>"u"?h={autoBom:!1}:typeof h!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),h={autoBom:!h}),h.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\uFEFF",l],{type:l.type}):l}function s(l,h,v){var f=new XMLHttpRequest;f.open("GET",l),f.responseType="blob",f.onload=function(){u(f.response,h,v)},f.onerror=function(){console.error("could not download file")},f.send()}function o(l){var h=new XMLHttpRequest;h.open("HEAD",l,!1);try{h.send()}catch{}return 200<=h.status&&299>=h.status}function a(l){try{l.dispatchEvent(new MouseEvent("click"))}catch{var h=document.createEvent("MouseEvents");h.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),l.dispatchEvent(h)}}var c=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof pn=="object"&&pn.global===pn?pn:void 0,i=c.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=c.saveAs||(typeof window!="object"||window!==c?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(l,h,v){var f=c.URL||c.webkitURL,d=document.createElement("a");h=h||l.name||"download",d.download=h,d.rel="noopener",typeof l=="string"?(d.href=l,d.origin===location.origin?a(d):o(d.href)?s(l,h,v):a(d,d.target="_blank")):(d.href=f.createObjectURL(l),setTimeout(function(){f.revokeObjectURL(d.href)},4e4),setTimeout(function(){a(d)},0))}:"msSaveOrOpenBlob"in navigator?function(l,h,v){if(h=h||l.name||"download",typeof l!="string")navigator.msSaveOrOpenBlob(r(l,v),h);else if(o(l))s(l,h,v);else{var f=document.createElement("a");f.href=l,f.target="_blank",setTimeout(function(){a(f)})}}:function(l,h,v,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof l=="string")return s(l,h,v);var d=l.type==="application/octet-stream",y=/constructor/i.test(c.HTMLElement)||c.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||d&&y||i)&&typeof FileReader<"u"){var b=new FileReader;b.onloadend=function(){var _=b.result;_=m?_:_.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=_:location=_,f=null},b.readAsDataURL(l)}else{var S=c.URL||c.webkitURL,R=S.createObjectURL(l);f?f.location=R:location.href=R,f=null,setTimeout(function(){S.revokeObjectURL(R)},4e4)}});c.saveAs=u.saveAs=u,e.exports=u})}(el)),el.exports}var Dq=Iq();/**
 * [mkanki]{@link https://github.com/nornagon/mkanki}
 * @copyright Copyright (c) 2018 Jeremy Apthorp
 * @license AGPL-3.0 License
 *
 *
 * [genanki]{@link https://github.com/kerrickstaley/genanki}
 * @copyright Copyright (c) Kerrick Staley 2021
 * @license The MIT License
 *
 *
 * [genanki-js]{@link https://github.com/krmanik/genanki-js}
 * @copyright Copyright (c) 2021 Mani
 * @license AGPL-3.0 License
 */const kq=new Promise(e=>{Pq({locateFile:()=>"sql-wasm.wasm"}).then(t=>{e(t)})}),Mq=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9","!","#","$","%","&","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","]","^","_","`","{","|","}","~"];function Oq(e){const t=e.join("__"),r=bq.sha256.create();r.update(t);const s=r.digest();let o=0n;for(let c=0;c<8;c++)o*=256n,o+=BigInt(s[c]);let a=[];for(;o>0;)a.push(Mq[Number(o%91n)]),o=o/91n;return a.reverse().join("")}const vP=0;class jq{constructor(t){jt(this,"props");jt(this,"fieldNameToOrd");console.log(t),this.props={...zq,...t,flds:t.flds.map((r,s)=>({...xq,ord:s,...r})),tmpls:t.tmpls.map((r,s)=>({...Nq,ord:s,name:`Card ${s+1}`,...r})),mod:new Date().getTime()},this.fieldNameToOrd={},this.props.flds.forEach(r=>{this.fieldNameToOrd[r.name]=r.ord})}note(t,r=null,s=null){if(t.length!==this.props.flds.length)throw new Error(`Expected ${this.props.flds.length} fields for model '${this.props.name}' but got ${t.length}`);return new Wq(this,t,r,s)}}const zq={sortf:0,did:1,latexPre:`\\documentclass[12pt]{article}
 \\special{papersize=3in,5in}
 \\usepackage[utf8]{inputenc}
 \\usepackage{amssymb,amsmath}
 \\pagestyle{empty}
 \\setlength{\\parindent}{0in}
 \\begin{document}`,latexPost:"\\end{document}",mod:0,usn:0,vers:[],type:vP,css:`.card {
  font-family: arial;
  font-size: 20px;
  text-align: center;
  color: black;
  background-color: white;
 }`,tags:[]},xq={name:"",ord:null,sticky:!1,rtl:!1,font:"Arial",size:20,media:[]},Nq={name:"",ord:null,qfmt:"",afmt:"",did:null,bqfmt:"",bafmt:""},qq=0,Lq={activeDecks:[1],curDeck:1,newSpread:qq,collapseTime:1200,timeLim:0,estTimes:!0,dueCounts:!0,curModel:null,nextPos:1,sortType:"noteFld",sortBackwards:!1,addToCur:!0,dayLearnFirst:!1},Bq=1,Fq=2500,Uq={name:"Default",new:{delays:[1,10],ints:[1,4,7],initialFactor:Fq,separate:!0,order:Bq,perDay:20,bury:!1},lapse:{delays:[10],mult:0,minInt:1,leechFails:8,leechAction:0},rev:{perDay:200,ease4:1.3,fuzz:.05,minSpace:1,ivlFct:1,maxIvl:36500,bury:!1,hardFactor:1.2},maxTaken:60,timer:0,autoplay:!0,replayq:!0,mod:0,usn:0},ob={newToday:[0,0],revToday:[0,0],lrnToday:[0,0],timeToday:[0,0],conf:1,usn:0,desc:"",dyn:0,collapsed:!1,extendNew:10,extendRev:50};class Hq{constructor(t,r,s=""){jt(this,"id");jt(this,"name");jt(this,"desc");jt(this,"notes");this.id=t,this.name=r,this.desc=s,this.notes=[]}addNote(t){this.notes.push(t)}}var io;class Wq{constructor(t,r,s=null,o=null){Nf(this,io);jt(this,"model");jt(this,"fields");jt(this,"tags");this.model=t,this.fields=r,this.tags=s,qf(this,io,o)}get guid(){return hp(this,io)?hp(this,io):Oq(this.fields)}get cards(){if(this.model.props.type===vP){const t=s=>!s||s.toString().trim().length===0,r=[];for(const[s,o,a]of this.model.props.req)a[o==="any"?"some":"every"](i=>!t(this.fields[i]))&&r.push(s);return r}else{const t=new Set,r=[],s=/{{[^}]*?cloze:(?:[^}]?:)*(.+?)}}/g,o=/<%cloze:(.+?)%>/g,{qfmt:a}=this.model.props.tmpls[0];let c;for(;c=s.exec(a);)r.push(c[1]);for(;c=o.exec(a);)r.push(c[1]);const i={};this.model.props.flds.forEach((u,l)=>{i[u.name]=[l,u]});for(const u of r){if(!(u in i))continue;const l=i[u][0],h=/{{c(\d+)::.+?}}/gs;for(;c=h.exec(this.fields[l]);){const v=parseInt(c[1]);v>0&&t.add(v-1)}}return t.size===0?[0]:Array.from(t)}}}io=new WeakMap;class Vq{constructor(){jt(this,"decks");jt(this,"media");this.decks=[],this.media=[]}addDeck(t){this.decks.push(t)}addMedia(t,r){this.media.push({name:r,data:t})}addMediaFile(t,r=null){this.media.push({name:r||t,filename:t})}writeToFile(t){kq.then(r=>{var s=new r.Database;s.run(Gq),this.write(s);var o=new Aq;const a=s.export(),c=new Uint8Array(a).buffer;o.file("collection.anki2",c);const i={};this.media.forEach((u,l)=>{"filename"in u?o.file(l.toString(),u.filename):o.file(l.toString(),u.data),i[l]=u.name}),o.file("media",JSON.stringify(i)),o.generateAsync({type:"blob",mimeType:"application/apkg"}).then(function(u){Dq.saveAs(u,t)})})}write(t){const r={...ob,id:1,name:"Default"},s=new Date,o={},a={};a[1]=r,this.decks.forEach(f=>{f.notes.forEach(d=>o[d.model.props.id]=d.model.props),a[f.id]={...ob,id:f.id,name:f.name,desc:f.desc}});const c=[null,+s/1e3|0,+s,+s,11,0,0,0,JSON.stringify(Lq),JSON.stringify(o),JSON.stringify(a),JSON.stringify({1:{id:1,...Uq}}),JSON.stringify({})];t.prepare(`INSERT INTO col
         (id, crt, mod, scm, ver, dty, usn, ls, conf, models, decks, dconf, tags)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`).run(c);const i=t.prepare(`INSERT INTO notes (id, guid, mid, mod, usn, tags, flds, sfld, csum, flags, data) 
        VALUES (null, ?, ?, ?, ?, ?, ?, ?, 0, 0, '')`),u=t.prepare(`INSERT INTO cards (id, nid, did, ord, mod, usn, type, queue, due, ivl, factor, reps, lapses, left, odue, odid, flags, data) 
        VALUES (null, ?, ?, ?, ?, ?, ?, ?, 0, 0, 0, 0, 0, 0, 0, 0, 0, '')`);for(const f of this.decks)for(const d of f.notes){var l=d.tags==null?"":d.tags.join(" ");i.run([d.guid,d.model.props.id,+s/1e3|0,-1,l,d.fields.join(""),0]);var h=t.exec("select last_insert_rowid();"),v=h[0].values[0][0];for(const y of d.cards)u.run([v,f.id,y,+s/1e3|0,-1,0,0])}}}/*
 * [genanki]{@link https://github.com/kerrickstaley/genanki}
 * @copyright Copyright (c) Kerrick Staley 2021
 * @license The MIT License
 */const Gq=`
PRAGMA foreign_keys=OFF;
BEGIN TRANSACTION;

CREATE TABLE col (
    id              integer primary key,
    crt             integer not null,
    mod             integer not null,
    scm             integer not null,
    ver             integer not null,
    dty             integer not null,
    usn             integer not null,
    ls              integer not null,
    conf            text not null,
    models          text not null,
    decks           text not null,
    dconf           text not null,
    tags            text not null
);
CREATE TABLE notes (
    id              integer primary key,   /* 0 */
    guid            text not null,         /* 1 */
    mid             integer not null,      /* 2 */
    mod             integer not null,      /* 3 */
    usn             integer not null,      /* 4 */
    tags            text not null,         /* 5 */
    flds            text not null,         /* 6 */
    sfld            integer not null,      /* 7 */
    csum            integer not null,      /* 8 */
    flags           integer not null,      /* 9 */
    data            text not null          /* 10 */
);
CREATE TABLE cards (
    id              integer primary key,   /* 0 */
    nid             integer not null,      /* 1 */
    did             integer not null,      /* 2 */
    ord             integer not null,      /* 3 */
    mod             integer not null,      /* 4 */
    usn             integer not null,      /* 5 */
    type            integer not null,      /* 6 */
    queue           integer not null,      /* 7 */
    due             integer not null,      /* 8 */
    ivl             integer not null,      /* 9 */
    factor          integer not null,      /* 10 */
    reps            integer not null,      /* 11 */
    lapses          integer not null,      /* 12 */
    left            integer not null,      /* 13 */
    odue            integer not null,      /* 14 */
    odid            integer not null,      /* 15 */
    flags           integer not null,      /* 16 */
    data            text not null          /* 17 */
);
CREATE TABLE revlog (
    id              integer primary key,
    cid             integer not null,
    usn             integer not null,
    ease            integer not null,
    ivl             integer not null,
    lastIvl         integer not null,
    factor          integer not null,
    time            integer not null,
    type            integer not null
);
CREATE TABLE graves (
    usn             integer not null,
    oid             integer not null,
    type            integer not null
);
CREATE INDEX ix_notes_usn on notes (usn);
CREATE INDEX ix_cards_usn on cards (usn);
CREATE INDEX ix_revlog_usn on revlog (usn);
CREATE INDEX ix_cards_nid on cards (nid);
CREATE INDEX ix_cards_sched on cards (did, queue, due);
CREATE INDEX ix_revlog_cid on revlog (cid);
CREATE INDEX ix_notes_csum on notes (csum);
COMMIT;
`;Yn("ankiExport",async e=>{const t=new Map;for(const[o,{name:a,fields:c,templates:i,styling:u,requiredFields:l}]of Object.entries(e.deck.models))t.set(o,new jq({name:a,id:o,flds:c,req:l,tmpls:i.map(h=>({...h.name!==null?{name:h.name}:{},qfmt:h.frontHtml,afmt:h.backHtml})),css:u}));const r=new Hq(e.deck.id,e.deck.name);for(const[o,a]of Object.entries(e.deck.notes))for(const c of a)r.addNote(t.get(o).note(c.fields,c.tags.length>0?c.tags:null));const s=new Vq;for(const[o,a]of e.deck.files){const i=await(await fetch(a)).blob();s.addMedia(i,o)}s.addDeck(r),s.writeToFile(e.fileName)});uz({logCallErrors:!0,logInteropErrors:!0});const Jq=e=>{const t=new Uint32Array(e);return crypto.getRandomValues(t),Array.from(t)},Vu=Jq(4);iz.Main.init({node:document.getElementById("app"),flags:{seed1:Vu[0],seed2:Vu[1],seed3:Vu[2],seed4:Vu[3]}});
